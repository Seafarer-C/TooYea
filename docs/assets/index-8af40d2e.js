var W2=Object.defineProperty;var X2=(n,e,t)=>e in n?W2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Y2=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Be=(n,e,t)=>(X2(n,typeof e!="symbol"?e+"":e,t),t);var Jie=Y2(($n,Hn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function K2(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var be={},q2={get exports(){return be},set exports(n){be=n}},of={},fe={},Z2={get exports(){return fe},set exports(n){fe=n}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=Symbol.for("react.element"),J2=Symbol.for("react.portal"),Q2=Symbol.for("react.fragment"),eE=Symbol.for("react.strict_mode"),tE=Symbol.for("react.profiler"),nE=Symbol.for("react.provider"),iE=Symbol.for("react.context"),rE=Symbol.for("react.forward_ref"),sE=Symbol.for("react.suspense"),aE=Symbol.for("react.memo"),oE=Symbol.for("react.lazy"),G0=Symbol.iterator;function lE(n){return n===null||typeof n!="object"?null:(n=G0&&n[G0]||n["@@iterator"],typeof n=="function"?n:null)}var tw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nw=Object.assign,iw={};function Po(n,e,t){this.props=n,this.context=e,this.refs=iw,this.updater=t||tw}Po.prototype.isReactComponent={};Po.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Po.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function rw(){}rw.prototype=Po.prototype;function gm(n,e,t){this.props=n,this.context=e,this.refs=iw,this.updater=t||tw}var mm=gm.prototype=new rw;mm.constructor=gm;nw(mm,Po.prototype);mm.isPureReactComponent=!0;var W0=Array.isArray,sw=Object.prototype.hasOwnProperty,vm={current:null},aw={key:!0,ref:!0,__self:!0,__source:!0};function ow(n,e,t){var i,r={},s=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(s=""+e.key),e)sw.call(e,i)&&!aw.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];r.children=a}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Pc,type:n,key:s,ref:f,props:r,_owner:vm.current}}function cE(n,e){return{$$typeof:Pc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ym(n){return typeof n=="object"&&n!==null&&n.$$typeof===Pc}function uE(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var X0=/\/+/g;function ud(n,e){return typeof n=="object"&&n!==null&&n.key!=null?uE(""+n.key):e.toString(36)}function th(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var f=!1;if(n===null)f=!0;else switch(s){case"string":case"number":f=!0;break;case"object":switch(n.$$typeof){case Pc:case J2:f=!0}}if(f)return f=n,r=r(f),n=i===""?"."+ud(f,0):i,W0(r)?(t="",n!=null&&(t=n.replace(X0,"$&/")+"/"),th(r,e,t,"",function(c){return c})):r!=null&&(ym(r)&&(r=cE(r,t+(!r.key||f&&f.key===r.key?"":(""+r.key).replace(X0,"$&/")+"/")+n)),e.push(r)),1;if(f=0,i=i===""?".":i+":",W0(n))for(var o=0;o<n.length;o++){s=n[o];var a=i+ud(s,o);f+=th(s,e,t,a,r)}else if(a=lE(n),typeof a=="function")for(n=a.call(n),o=0;!(s=n.next()).done;)s=s.value,a=i+ud(s,o++),f+=th(s,e,t,a,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function ou(n,e,t){if(n==null)return n;var i=[],r=0;return th(n,i,"","",function(s){return e.call(t,s,r++)}),i}function hE(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var yn={current:null},nh={transition:null},fE={ReactCurrentDispatcher:yn,ReactCurrentBatchConfig:nh,ReactCurrentOwner:vm};Qe.Children={map:ou,forEach:function(n,e,t){ou(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ou(n,function(){e++}),e},toArray:function(n){return ou(n,function(e){return e})||[]},only:function(n){if(!ym(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Qe.Component=Po;Qe.Fragment=Q2;Qe.Profiler=tE;Qe.PureComponent=gm;Qe.StrictMode=eE;Qe.Suspense=sE;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fE;Qe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=nw({},n.props),r=n.key,s=n.ref,f=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,f=vm.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(a in e)sw.call(e,a)&&!aw.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:Pc,type:n.type,key:r,ref:s,props:i,_owner:f}};Qe.createContext=function(n){return n={$$typeof:iE,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:nE,_context:n},n.Consumer=n};Qe.createElement=ow;Qe.createFactory=function(n){var e=ow.bind(null,n);return e.type=n,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(n){return{$$typeof:rE,render:n}};Qe.isValidElement=ym;Qe.lazy=function(n){return{$$typeof:oE,_payload:{_status:-1,_result:n},_init:hE}};Qe.memo=function(n,e){return{$$typeof:aE,type:n,compare:e===void 0?null:e}};Qe.startTransition=function(n){var e=nh.transition;nh.transition={};try{n()}finally{nh.transition=e}};Qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qe.useCallback=function(n,e){return yn.current.useCallback(n,e)};Qe.useContext=function(n){return yn.current.useContext(n)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(n){return yn.current.useDeferredValue(n)};Qe.useEffect=function(n,e){return yn.current.useEffect(n,e)};Qe.useId=function(){return yn.current.useId()};Qe.useImperativeHandle=function(n,e,t){return yn.current.useImperativeHandle(n,e,t)};Qe.useInsertionEffect=function(n,e){return yn.current.useInsertionEffect(n,e)};Qe.useLayoutEffect=function(n,e){return yn.current.useLayoutEffect(n,e)};Qe.useMemo=function(n,e){return yn.current.useMemo(n,e)};Qe.useReducer=function(n,e,t){return yn.current.useReducer(n,e,t)};Qe.useRef=function(n){return yn.current.useRef(n)};Qe.useState=function(n){return yn.current.useState(n)};Qe.useSyncExternalStore=function(n,e,t){return yn.current.useSyncExternalStore(n,e,t)};Qe.useTransition=function(){return yn.current.useTransition()};Qe.version="18.2.0";(function(n){n.exports=Qe})(Z2);const E=pm(fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE=fe,pE=Symbol.for("react.element"),gE=Symbol.for("react.fragment"),mE=Object.prototype.hasOwnProperty,vE=dE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yE={key:!0,ref:!0,__self:!0,__source:!0};function lw(n,e,t){var i,r={},s=null,f=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)mE.call(e,i)&&!yE.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:pE,type:n,key:s,ref:f,props:r,_owner:vE.current}}of.Fragment=gE;of.jsx=lw;of.jsxs=lw;(function(n){n.exports=of})(q2);var $p={},uo={},_E={get exports(){return uo},set exports(n){uo=n}},Kn={},Hp={},xE={get exports(){return Hp},set exports(n){Hp=n}},cw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,M){var D=U.length;U.push(M);e:for(;0<D;){var P=D-1>>>1,L=U[P];if(0<r(L,M))U[P]=M,U[D]=L,D=P;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var M=U[0],D=U.pop();if(D!==M){U[0]=D;e:for(var P=0,L=U.length,H=L>>>1;P<H;){var k=2*(P+1)-1,A=U[k],F=k+1,W=U[F];if(0>r(A,D))F<L&&0>r(W,A)?(U[P]=W,U[F]=D,P=F):(U[P]=A,U[k]=D,P=k);else if(F<L&&0>r(W,D))U[P]=W,U[F]=D,P=F;else break e}}return M}function r(U,M){var D=U.sortIndex-M.sortIndex;return D!==0?D:U.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var f=Date,o=f.now();n.unstable_now=function(){return f.now()-o}}var a=[],c=[],d=1,l=null,u=3,h=!1,g=!1,m=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var M=t(c);M!==null;){if(M.callback===null)i(c);else if(M.startTime<=U)i(c),M.sortIndex=M.expirationTime,e(a,M);else break;M=t(c)}}function x(U){if(m=!1,_(U),!g)if(t(a)!==null)g=!0,ne(b);else{var M=t(c);M!==null&&re(x,M.startTime-U)}}function b(U,M){g=!1,m&&(m=!1,v(S),S=-1),h=!0;var D=u;try{for(_(M),l=t(a);l!==null&&(!(l.expirationTime>M)||U&&!V());){var P=l.callback;if(typeof P=="function"){l.callback=null,u=l.priorityLevel;var L=P(l.expirationTime<=M);M=n.unstable_now(),typeof L=="function"?l.callback=L:l===t(a)&&i(a),_(M)}else i(a);l=t(a)}if(l!==null)var H=!0;else{var k=t(c);k!==null&&re(x,k.startTime-M),H=!1}return H}finally{l=null,u=D,h=!1}}var w=!1,T=null,S=-1,O=5,N=-1;function V(){return!(n.unstable_now()-N<O)}function Z(){if(T!==null){var U=n.unstable_now();N=U;var M=!0;try{M=T(!0,U)}finally{M?j():(w=!1,T=null)}}else w=!1}var j;if(typeof y=="function")j=function(){y(Z)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=Z,j=function(){G.postMessage(null)}}else j=function(){p(Z,0)};function ne(U){T=U,w||(w=!0,j())}function re(U,M){S=p(function(){U(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){g||h||(g=!0,ne(b))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return u},n.unstable_getFirstCallbackNode=function(){return t(a)},n.unstable_next=function(U){switch(u){case 1:case 2:case 3:var M=3;break;default:M=u}var D=u;u=M;try{return U()}finally{u=D}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,M){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=u;u=U;try{return M()}finally{u=D}},n.unstable_scheduleCallback=function(U,M,D){var P=n.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?P+D:P):D=P,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=D+L,U={id:d++,callback:M,priorityLevel:U,startTime:D,expirationTime:L,sortIndex:-1},D>P?(U.sortIndex=D,e(c,U),t(a)===null&&U===t(c)&&(m?(v(S),S=-1):m=!0,re(x,D-P))):(U.sortIndex=L,e(a,U),g||h||(g=!0,ne(b))),U},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(U){var M=u;return function(){var D=u;u=M;try{return U.apply(this,arguments)}finally{u=D}}}})(cw);(function(n){n.exports=cw})(xE);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=fe,Wn=Hp;function Se(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hw=new Set,Ql={};function Vs(n,e){ho(n,e),ho(n+"Capture",e)}function ho(n,e){for(Ql[n]=e,n=0;n<e.length;n++)hw.add(e[n])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vp=Object.prototype.hasOwnProperty,bE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y0={},K0={};function wE(n){return Vp.call(K0,n)?!0:Vp.call(Y0,n)?!1:bE.test(n)?K0[n]=!0:(Y0[n]=!0,!1)}function SE(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function CE(n,e,t,i){if(e===null||typeof e>"u"||SE(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(n,e,t,i,r,s,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=f}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Qt[n]=new _n(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Qt[e]=new _n(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Qt[n]=new _n(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Qt[n]=new _n(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Qt[n]=new _n(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Qt[n]=new _n(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Qt[n]=new _n(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Qt[n]=new _n(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Qt[n]=new _n(n,5,!1,n.toLowerCase(),null,!1,!1)});var _m=/[\-:]([a-z])/g;function xm(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(_m,xm);Qt[e]=new _n(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(_m,xm);Qt[e]=new _n(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(_m,xm);Qt[e]=new _n(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Qt[n]=new _n(n,1,!1,n.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Qt[n]=new _n(n,1,!1,n.toLowerCase(),null,!0,!0)});function bm(n,e,t,i){var r=Qt.hasOwnProperty(e)?Qt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CE(e,t,r,i)&&(t=null),i||r===null?wE(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var gr=uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lu=Symbol.for("react.element"),Ba=Symbol.for("react.portal"),za=Symbol.for("react.fragment"),wm=Symbol.for("react.strict_mode"),Gp=Symbol.for("react.profiler"),fw=Symbol.for("react.provider"),dw=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),Wp=Symbol.for("react.suspense"),Xp=Symbol.for("react.suspense_list"),Cm=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),pw=Symbol.for("react.offscreen"),q0=Symbol.iterator;function el(n){return n===null||typeof n!="object"?null:(n=q0&&n[q0]||n["@@iterator"],typeof n=="function"?n:null)}var Pt=Object.assign,hd;function Al(n){if(hd===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);hd=e&&e[1]||""}return`
`+hd+n}var fd=!1;function dd(n,e){if(!n||fd)return"";fd=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),f=r.length-1,o=s.length-1;1<=f&&0<=o&&r[f]!==s[o];)o--;for(;1<=f&&0<=o;f--,o--)if(r[f]!==s[o]){if(f!==1||o!==1)do if(f--,o--,0>o||r[f]!==s[o]){var a=`
`+r[f].replace(" at new "," at ");return n.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",n.displayName)),a}while(1<=f&&0<=o);break}}}finally{fd=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Al(n):""}function TE(n){switch(n.tag){case 5:return Al(n.type);case 16:return Al("Lazy");case 13:return Al("Suspense");case 19:return Al("SuspenseList");case 0:case 2:case 15:return n=dd(n.type,!1),n;case 11:return n=dd(n.type.render,!1),n;case 1:return n=dd(n.type,!0),n;default:return""}}function Yp(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case za:return"Fragment";case Ba:return"Portal";case Gp:return"Profiler";case wm:return"StrictMode";case Wp:return"Suspense";case Xp:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dw:return(n.displayName||"Context")+".Consumer";case fw:return(n._context.displayName||"Context")+".Provider";case Sm:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Cm:return e=n.displayName||null,e!==null?e:Yp(n.type)||"Memo";case Tr:e=n._payload,n=n._init;try{return Yp(n(e))}catch{}}return null}function EE(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yp(e);case 8:return e===wm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function gw(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ME(n){var e=gw(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(f){i=""+f,s.call(this,f)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function cu(n){n._valueTracker||(n._valueTracker=ME(n))}function mw(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=gw(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function wh(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Kp(n,e){var t=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Z0(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Vr(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vw(n,e){e=e.checked,e!=null&&bm(n,"checked",e,!1)}function qp(n,e){vw(n,e);var t=Vr(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Zp(n,e.type,t):e.hasOwnProperty("defaultValue")&&Zp(n,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function J0(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Zp(n,e,t){(e!=="number"||wh(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ol=Array.isArray;function Qa(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Vr(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Jp(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Q0(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Se(92));if(Ol(t)){if(1<t.length)throw Error(Se(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Vr(t)}}function yw(n,e){var t=Vr(e.value),i=Vr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function ey(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function _w(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qp(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_w(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var uu,xw=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(uu=uu||document.createElement("div"),uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uu.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ec(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AE=["Webkit","ms","Moz","O"];Object.keys(Bl).forEach(function(n){AE.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Bl[e]=Bl[n]})});function bw(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Bl.hasOwnProperty(n)&&Bl[n]?(""+e).trim():e+"px"}function ww(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=bw(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var OE=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eg(n,e){if(e){if(OE[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function tg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ng=null;function Tm(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ig=null,eo=null,to=null;function ty(n){if(n=Dc(n)){if(typeof ig!="function")throw Error(Se(280));var e=n.stateNode;e&&(e=ff(e),ig(n.stateNode,n.type,e))}}function Sw(n){eo?to?to.push(n):to=[n]:eo=n}function Cw(){if(eo){var n=eo,e=to;if(to=eo=null,ty(n),e)for(n=0;n<e.length;n++)ty(e[n])}}function Tw(n,e){return n(e)}function Ew(){}var pd=!1;function Mw(n,e,t){if(pd)return n(e,t);pd=!0;try{return Tw(n,e,t)}finally{pd=!1,(eo!==null||to!==null)&&(Ew(),Cw())}}function tc(n,e){var t=n.stateNode;if(t===null)return null;var i=ff(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Se(231,e,typeof t));return t}var rg=!1;if(hr)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){rg=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{rg=!1}function PE(n,e,t,i,r,s,f,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var zl=!1,Sh=null,Ch=!1,sg=null,LE={onError:function(n){zl=!0,Sh=n}};function RE(n,e,t,i,r,s,f,o,a){zl=!1,Sh=null,PE.apply(LE,arguments)}function DE(n,e,t,i,r,s,f,o,a){if(RE.apply(this,arguments),zl){if(zl){var c=Sh;zl=!1,Sh=null}else throw Error(Se(198));Ch||(Ch=!0,sg=c)}}function Gs(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Aw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function ny(n){if(Gs(n)!==n)throw Error(Se(188))}function IE(n){var e=n.alternate;if(!e){if(e=Gs(n),e===null)throw Error(Se(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return ny(r),n;if(s===i)return ny(r),e;s=s.sibling}throw Error(Se(188))}if(t.return!==i.return)t=r,i=s;else{for(var f=!1,o=r.child;o;){if(o===t){f=!0,t=r,i=s;break}if(o===i){f=!0,i=r,t=s;break}o=o.sibling}if(!f){for(o=s.child;o;){if(o===t){f=!0,t=s,i=r;break}if(o===i){f=!0,i=s,t=r;break}o=o.sibling}if(!f)throw Error(Se(189))}}if(t.alternate!==i)throw Error(Se(190))}if(t.tag!==3)throw Error(Se(188));return t.stateNode.current===t?n:e}function Ow(n){return n=IE(n),n!==null?Pw(n):null}function Pw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Pw(n);if(e!==null)return e;n=n.sibling}return null}var Lw=Wn.unstable_scheduleCallback,iy=Wn.unstable_cancelCallback,kE=Wn.unstable_shouldYield,FE=Wn.unstable_requestPaint,Dt=Wn.unstable_now,NE=Wn.unstable_getCurrentPriorityLevel,Em=Wn.unstable_ImmediatePriority,Rw=Wn.unstable_UserBlockingPriority,Th=Wn.unstable_NormalPriority,BE=Wn.unstable_LowPriority,Dw=Wn.unstable_IdlePriority,lf=null,ji=null;function zE(n){if(ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(lf,n,void 0,(n.current.flags&128)===128)}catch{}}var Si=Math.clz32?Math.clz32:$E,jE=Math.log,UE=Math.LN2;function $E(n){return n>>>=0,n===0?32:31-(jE(n)/UE|0)|0}var hu=64,fu=4194304;function Pl(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Eh(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,f=t&268435455;if(f!==0){var o=f&~r;o!==0?i=Pl(o):(s&=f,s!==0&&(i=Pl(s)))}else f=t&~r,f!==0?i=Pl(f):s!==0&&(i=Pl(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Si(e),r=1<<t,i|=n[t],e&=~r;return i}function HE(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VE(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var f=31-Si(s),o=1<<f,a=r[f];a===-1?(!(o&t)||o&i)&&(r[f]=HE(o,e)):a<=e&&(n.expiredLanes|=o),s&=~o}}function ag(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Iw(){var n=hu;return hu<<=1,!(hu&4194240)&&(hu=64),n}function gd(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Lc(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Si(e),n[e]=t}function GE(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Si(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Mm(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Si(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var dt=0;function kw(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Fw,Am,Nw,Bw,zw,og=!1,du=[],kr=null,Fr=null,Nr=null,nc=new Map,ic=new Map,Or=[],WE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ry(n,e){switch(n){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(e.pointerId)}}function nl(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Dc(e),e!==null&&Am(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function XE(n,e,t,i,r){switch(e){case"focusin":return kr=nl(kr,n,e,t,i,r),!0;case"dragenter":return Fr=nl(Fr,n,e,t,i,r),!0;case"mouseover":return Nr=nl(Nr,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return nc.set(s,nl(nc.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ic.set(s,nl(ic.get(s)||null,n,e,t,i,r)),!0}return!1}function jw(n){var e=xs(n.target);if(e!==null){var t=Gs(e);if(t!==null){if(e=t.tag,e===13){if(e=Aw(t),e!==null){n.blockedOn=e,zw(n.priority,function(){Nw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ih(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=lg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);ng=i,t.target.dispatchEvent(i),ng=null}else return e=Dc(t),e!==null&&Am(e),n.blockedOn=t,!1;e.shift()}return!0}function sy(n,e,t){ih(n)&&t.delete(e)}function YE(){og=!1,kr!==null&&ih(kr)&&(kr=null),Fr!==null&&ih(Fr)&&(Fr=null),Nr!==null&&ih(Nr)&&(Nr=null),nc.forEach(sy),ic.forEach(sy)}function il(n,e){n.blockedOn===e&&(n.blockedOn=null,og||(og=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,YE)))}function rc(n){function e(r){return il(r,n)}if(0<du.length){il(du[0],n);for(var t=1;t<du.length;t++){var i=du[t];i.blockedOn===n&&(i.blockedOn=null)}}for(kr!==null&&il(kr,n),Fr!==null&&il(Fr,n),Nr!==null&&il(Nr,n),nc.forEach(e),ic.forEach(e),t=0;t<Or.length;t++)i=Or[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Or.length&&(t=Or[0],t.blockedOn===null);)jw(t),t.blockedOn===null&&Or.shift()}var no=gr.ReactCurrentBatchConfig,Mh=!0;function KE(n,e,t,i){var r=dt,s=no.transition;no.transition=null;try{dt=1,Om(n,e,t,i)}finally{dt=r,no.transition=s}}function qE(n,e,t,i){var r=dt,s=no.transition;no.transition=null;try{dt=4,Om(n,e,t,i)}finally{dt=r,no.transition=s}}function Om(n,e,t,i){if(Mh){var r=lg(n,e,t,i);if(r===null)Td(n,e,i,Ah,t),ry(n,i);else if(XE(r,n,e,t,i))i.stopPropagation();else if(ry(n,i),e&4&&-1<WE.indexOf(n)){for(;r!==null;){var s=Dc(r);if(s!==null&&Fw(s),s=lg(n,e,t,i),s===null&&Td(n,e,i,Ah,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Td(n,e,i,null,t)}}var Ah=null;function lg(n,e,t,i){if(Ah=null,n=Tm(i),n=xs(n),n!==null)if(e=Gs(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Aw(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ah=n,null}function Uw(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NE()){case Em:return 1;case Rw:return 4;case Th:case BE:return 16;case Dw:return 536870912;default:return 16}default:return 16}}var Lr=null,Pm=null,rh=null;function $w(){if(rh)return rh;var n,e=Pm,t=e.length,i,r="value"in Lr?Lr.value:Lr.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var f=t-n;for(i=1;i<=f&&e[t-i]===r[s-i];i++);return rh=r.slice(n,1<i?1-i:void 0)}function sh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function pu(){return!0}function ay(){return!1}function qn(n){function e(t,i,r,s,f){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=f,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pu:ay,this.isPropagationStopped=ay,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=pu)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=pu)},persist:function(){},isPersistent:pu}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lm=qn(Lo),Rc=Pt({},Lo,{view:0,detail:0}),ZE=qn(Rc),md,vd,rl,cf=Pt({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rm,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rl&&(rl&&n.type==="mousemove"?(md=n.screenX-rl.screenX,vd=n.screenY-rl.screenY):vd=md=0,rl=n),md)},movementY:function(n){return"movementY"in n?n.movementY:vd}}),oy=qn(cf),JE=Pt({},cf,{dataTransfer:0}),QE=qn(JE),eM=Pt({},Rc,{relatedTarget:0}),yd=qn(eM),tM=Pt({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),nM=qn(tM),iM=Pt({},Lo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rM=qn(iM),sM=Pt({},Lo,{data:0}),ly=qn(sM),aM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cM(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=lM[n])?!!e[n]:!1}function Rm(){return cM}var uM=Pt({},Rc,{key:function(n){if(n.key){var e=aM[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=sh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oM[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rm,charCode:function(n){return n.type==="keypress"?sh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?sh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hM=qn(uM),fM=Pt({},cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cy=qn(fM),dM=Pt({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rm}),pM=qn(dM),gM=Pt({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),mM=qn(gM),vM=Pt({},cf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),yM=qn(vM),_M=[9,13,27,32],Dm=hr&&"CompositionEvent"in window,jl=null;hr&&"documentMode"in document&&(jl=document.documentMode);var xM=hr&&"TextEvent"in window&&!jl,Hw=hr&&(!Dm||jl&&8<jl&&11>=jl),uy=String.fromCharCode(32),hy=!1;function Vw(n,e){switch(n){case"keyup":return _M.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ja=!1;function bM(n,e){switch(n){case"compositionend":return Gw(e);case"keypress":return e.which!==32?null:(hy=!0,uy);case"textInput":return n=e.data,n===uy&&hy?null:n;default:return null}}function wM(n,e){if(ja)return n==="compositionend"||!Dm&&Vw(n,e)?(n=$w(),rh=Pm=Lr=null,ja=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hw&&e.locale!=="ko"?null:e.data;default:return null}}var SM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!SM[n.type]:e==="textarea"}function Ww(n,e,t,i){Sw(i),e=Oh(e,"onChange"),0<e.length&&(t=new Lm("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ul=null,sc=null;function CM(n){iS(n,0)}function uf(n){var e=Ha(n);if(mw(e))return n}function TM(n,e){if(n==="change")return e}var Xw=!1;if(hr){var _d;if(hr){var xd="oninput"in document;if(!xd){var dy=document.createElement("div");dy.setAttribute("oninput","return;"),xd=typeof dy.oninput=="function"}_d=xd}else _d=!1;Xw=_d&&(!document.documentMode||9<document.documentMode)}function py(){Ul&&(Ul.detachEvent("onpropertychange",Yw),sc=Ul=null)}function Yw(n){if(n.propertyName==="value"&&uf(sc)){var e=[];Ww(e,sc,n,Tm(n)),Mw(CM,e)}}function EM(n,e,t){n==="focusin"?(py(),Ul=e,sc=t,Ul.attachEvent("onpropertychange",Yw)):n==="focusout"&&py()}function MM(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uf(sc)}function AM(n,e){if(n==="click")return uf(e)}function OM(n,e){if(n==="input"||n==="change")return uf(e)}function PM(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ei=typeof Object.is=="function"?Object.is:PM;function ac(n,e){if(Ei(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Vp.call(e,r)||!Ei(n[r],e[r]))return!1}return!0}function gy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function my(n,e){var t=gy(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=gy(t)}}function Kw(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Kw(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function qw(){for(var n=window,e=wh();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=wh(n.document)}return e}function Im(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function LM(n){var e=qw(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Kw(t.ownerDocument.documentElement,t)){if(i!==null&&Im(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=my(t,s);var f=my(t,i);r&&f&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==f.node||n.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var RM=hr&&"documentMode"in document&&11>=document.documentMode,Ua=null,cg=null,$l=null,ug=!1;function vy(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ug||Ua==null||Ua!==wh(i)||(i=Ua,"selectionStart"in i&&Im(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$l&&ac($l,i)||($l=i,i=Oh(cg,"onSelect"),0<i.length&&(e=new Lm("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Ua)))}function gu(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var $a={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},bd={},Zw={};hr&&(Zw=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function hf(n){if(bd[n])return bd[n];if(!$a[n])return n;var e=$a[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Zw)return bd[n]=e[t];return n}var Jw=hf("animationend"),Qw=hf("animationiteration"),eS=hf("animationstart"),tS=hf("transitionend"),nS=new Map,yy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(n,e){nS.set(n,e),Vs(e,[n])}for(var wd=0;wd<yy.length;wd++){var Sd=yy[wd],DM=Sd.toLowerCase(),IM=Sd[0].toUpperCase()+Sd.slice(1);Zr(DM,"on"+IM)}Zr(Jw,"onAnimationEnd");Zr(Qw,"onAnimationIteration");Zr(eS,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(tS,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function _y(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,DE(i,e,void 0,n),n.currentTarget=null}function iS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var f=i.length-1;0<=f;f--){var o=i[f],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==s&&r.isPropagationStopped())break e;_y(r,o,c),s=a}else for(f=0;f<i.length;f++){if(o=i[f],a=o.instance,c=o.currentTarget,o=o.listener,a!==s&&r.isPropagationStopped())break e;_y(r,o,c),s=a}}}if(Ch)throw n=sg,Ch=!1,sg=null,n}function xt(n,e){var t=e[gg];t===void 0&&(t=e[gg]=new Set);var i=n+"__bubble";t.has(i)||(rS(e,n,2,!1),t.add(i))}function Cd(n,e,t){var i=0;e&&(i|=4),rS(t,n,i,e)}var mu="_reactListening"+Math.random().toString(36).slice(2);function oc(n){if(!n[mu]){n[mu]=!0,hw.forEach(function(t){t!=="selectionchange"&&(kM.has(t)||Cd(t,!1,n),Cd(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[mu]||(e[mu]=!0,Cd("selectionchange",!1,e))}}function rS(n,e,t,i){switch(Uw(e)){case 1:var r=KE;break;case 4:r=qE;break;default:r=Om}t=r.bind(null,e,t,n),r=void 0,!rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Td(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(f===4)for(f=i.return;f!==null;){var a=f.tag;if((a===3||a===4)&&(a=f.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;f=f.return}for(;o!==null;){if(f=xs(o),f===null)return;if(a=f.tag,a===5||a===6){i=s=f;continue e}o=o.parentNode}}i=i.return}Mw(function(){var c=s,d=Tm(t),l=[];e:{var u=nS.get(n);if(u!==void 0){var h=Lm,g=n;switch(n){case"keypress":if(sh(t)===0)break e;case"keydown":case"keyup":h=hM;break;case"focusin":g="focus",h=yd;break;case"focusout":g="blur",h=yd;break;case"beforeblur":case"afterblur":h=yd;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=QE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=pM;break;case Jw:case Qw:case eS:h=nM;break;case tS:h=mM;break;case"scroll":h=ZE;break;case"wheel":h=yM;break;case"copy":case"cut":case"paste":h=rM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=cy}var m=(e&4)!==0,p=!m&&n==="scroll",v=m?u!==null?u+"Capture":null:u;m=[];for(var y=c,_;y!==null;){_=y;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,v!==null&&(x=tc(y,v),x!=null&&m.push(lc(y,x,_)))),p)break;y=y.return}0<m.length&&(u=new h(u,g,null,t,d),l.push({event:u,listeners:m}))}}if(!(e&7)){e:{if(u=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",u&&t!==ng&&(g=t.relatedTarget||t.fromElement)&&(xs(g)||g[fr]))break e;if((h||u)&&(u=d.window===d?d:(u=d.ownerDocument)?u.defaultView||u.parentWindow:window,h?(g=t.relatedTarget||t.toElement,h=c,g=g?xs(g):null,g!==null&&(p=Gs(g),g!==p||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=c),h!==g)){if(m=oy,x="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(m=cy,x="onPointerLeave",v="onPointerEnter",y="pointer"),p=h==null?u:Ha(h),_=g==null?u:Ha(g),u=new m(x,y+"leave",h,t,d),u.target=p,u.relatedTarget=_,x=null,xs(d)===c&&(m=new m(v,y+"enter",g,t,d),m.target=_,m.relatedTarget=p,x=m),p=x,h&&g)t:{for(m=h,v=g,y=0,_=m;_;_=na(_))y++;for(_=0,x=v;x;x=na(x))_++;for(;0<y-_;)m=na(m),y--;for(;0<_-y;)v=na(v),_--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=na(m),v=na(v)}m=null}else m=null;h!==null&&xy(l,u,h,m,!1),g!==null&&p!==null&&xy(l,p,g,m,!0)}}e:{if(u=c?Ha(c):window,h=u.nodeName&&u.nodeName.toLowerCase(),h==="select"||h==="input"&&u.type==="file")var b=TM;else if(fy(u))if(Xw)b=OM;else{b=MM;var w=EM}else(h=u.nodeName)&&h.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(b=AM);if(b&&(b=b(n,c))){Ww(l,b,t,d);break e}w&&w(n,u,c),n==="focusout"&&(w=u._wrapperState)&&w.controlled&&u.type==="number"&&Zp(u,"number",u.value)}switch(w=c?Ha(c):window,n){case"focusin":(fy(w)||w.contentEditable==="true")&&(Ua=w,cg=c,$l=null);break;case"focusout":$l=cg=Ua=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,vy(l,t,d);break;case"selectionchange":if(RM)break;case"keydown":case"keyup":vy(l,t,d)}var T;if(Dm)e:{switch(n){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ja?Vw(n,t)&&(S="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(S="onCompositionStart");S&&(Hw&&t.locale!=="ko"&&(ja||S!=="onCompositionStart"?S==="onCompositionEnd"&&ja&&(T=$w()):(Lr=d,Pm="value"in Lr?Lr.value:Lr.textContent,ja=!0)),w=Oh(c,S),0<w.length&&(S=new ly(S,n,null,t,d),l.push({event:S,listeners:w}),T?S.data=T:(T=Gw(t),T!==null&&(S.data=T)))),(T=xM?bM(n,t):wM(n,t))&&(c=Oh(c,"onBeforeInput"),0<c.length&&(d=new ly("onBeforeInput","beforeinput",null,t,d),l.push({event:d,listeners:c}),d.data=T))}iS(l,e)})}function lc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Oh(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=tc(n,t),s!=null&&i.unshift(lc(n,s,r)),s=tc(n,e),s!=null&&i.push(lc(n,s,r))),n=n.return}return i}function na(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function xy(n,e,t,i,r){for(var s=e._reactName,f=[];t!==null&&t!==i;){var o=t,a=o.alternate,c=o.stateNode;if(a!==null&&a===i)break;o.tag===5&&c!==null&&(o=c,r?(a=tc(t,s),a!=null&&f.unshift(lc(t,a,o))):r||(a=tc(t,s),a!=null&&f.push(lc(t,a,o)))),t=t.return}f.length!==0&&n.push({event:e,listeners:f})}var FM=/\r\n?/g,NM=/\u0000|\uFFFD/g;function by(n){return(typeof n=="string"?n:""+n).replace(FM,`
`).replace(NM,"")}function vu(n,e,t){if(e=by(e),by(n)!==e&&t)throw Error(Se(425))}function Ph(){}var hg=null,fg=null;function dg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pg=typeof setTimeout=="function"?setTimeout:void 0,BM=typeof clearTimeout=="function"?clearTimeout:void 0,wy=typeof Promise=="function"?Promise:void 0,zM=typeof queueMicrotask=="function"?queueMicrotask:typeof wy<"u"?function(n){return wy.resolve(null).then(n).catch(jM)}:pg;function jM(n){setTimeout(function(){throw n})}function Ed(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),rc(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);rc(e)}function Br(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Sy(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),Bi="__reactFiber$"+Ro,cc="__reactProps$"+Ro,fr="__reactContainer$"+Ro,gg="__reactEvents$"+Ro,UM="__reactListeners$"+Ro,$M="__reactHandles$"+Ro;function xs(n){var e=n[Bi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[fr]||t[Bi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Sy(n);n!==null;){if(t=n[Bi])return t;n=Sy(n)}return e}n=t,t=n.parentNode}return null}function Dc(n){return n=n[Bi]||n[fr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ha(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Se(33))}function ff(n){return n[cc]||null}var mg=[],Va=-1;function Jr(n){return{current:n}}function St(n){0>Va||(n.current=mg[Va],mg[Va]=null,Va--)}function _t(n,e){Va++,mg[Va]=n.current,n.current=e}var Gr={},on=Jr(Gr),En=Jr(!1),Rs=Gr;function fo(n,e){var t=n.type.contextTypes;if(!t)return Gr;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Mn(n){return n=n.childContextTypes,n!=null}function Lh(){St(En),St(on)}function Cy(n,e,t){if(on.current!==Gr)throw Error(Se(168));_t(on,e),_t(En,t)}function sS(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Se(108,EE(n)||"Unknown",r));return Pt({},t,i)}function Rh(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gr,Rs=on.current,_t(on,n),_t(En,En.current),!0}function Ty(n,e,t){var i=n.stateNode;if(!i)throw Error(Se(169));t?(n=sS(n,e,Rs),i.__reactInternalMemoizedMergedChildContext=n,St(En),St(on),_t(on,n)):St(En),_t(En,t)}var ir=null,df=!1,Md=!1;function aS(n){ir===null?ir=[n]:ir.push(n)}function HM(n){df=!0,aS(n)}function Qr(){if(!Md&&ir!==null){Md=!0;var n=0,e=dt;try{var t=ir;for(dt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ir=null,df=!1}catch(r){throw ir!==null&&(ir=ir.slice(n+1)),Lw(Em,Qr),r}finally{dt=e,Md=!1}}return null}var Ga=[],Wa=0,Dh=null,Ih=0,ni=[],ii=0,Ds=null,sr=1,ar="";function hs(n,e){Ga[Wa++]=Ih,Ga[Wa++]=Dh,Dh=n,Ih=e}function oS(n,e,t){ni[ii++]=sr,ni[ii++]=ar,ni[ii++]=Ds,Ds=n;var i=sr;n=ar;var r=32-Si(i)-1;i&=~(1<<r),t+=1;var s=32-Si(e)+r;if(30<s){var f=r-r%5;s=(i&(1<<f)-1).toString(32),i>>=f,r-=f,sr=1<<32-Si(e)+r|t<<r|i,ar=s+n}else sr=1<<s|t<<r|i,ar=n}function km(n){n.return!==null&&(hs(n,1),oS(n,1,0))}function Fm(n){for(;n===Dh;)Dh=Ga[--Wa],Ga[Wa]=null,Ih=Ga[--Wa],Ga[Wa]=null;for(;n===Ds;)Ds=ni[--ii],ni[ii]=null,ar=ni[--ii],ni[ii]=null,sr=ni[--ii],ni[ii]=null}var Vn=null,zn=null,Et=!1,bi=null;function lS(n,e){var t=oi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Ey(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Vn=n,zn=Br(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Vn=n,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ds!==null?{id:sr,overflow:ar}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=oi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Vn=n,zn=null,!0):!1;default:return!1}}function vg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function yg(n){if(Et){var e=zn;if(e){var t=e;if(!Ey(n,e)){if(vg(n))throw Error(Se(418));e=Br(t.nextSibling);var i=Vn;e&&Ey(n,e)?lS(i,t):(n.flags=n.flags&-4097|2,Et=!1,Vn=n)}}else{if(vg(n))throw Error(Se(418));n.flags=n.flags&-4097|2,Et=!1,Vn=n}}}function My(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Vn=n}function yu(n){if(n!==Vn)return!1;if(!Et)return My(n),Et=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!dg(n.type,n.memoizedProps)),e&&(e=zn)){if(vg(n))throw cS(),Error(Se(418));for(;e;)lS(n,e),e=Br(e.nextSibling)}if(My(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Se(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zn=Br(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zn=null}}else zn=Vn?Br(n.stateNode.nextSibling):null;return!0}function cS(){for(var n=zn;n;)n=Br(n.nextSibling)}function po(){zn=Vn=null,Et=!1}function Nm(n){bi===null?bi=[n]:bi.push(n)}var VM=gr.ReactCurrentBatchConfig;function _i(n,e){if(n&&n.defaultProps){e=Pt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var kh=Jr(null),Fh=null,Xa=null,Bm=null;function zm(){Bm=Xa=Fh=null}function jm(n){var e=kh.current;St(kh),n._currentValue=e}function _g(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function io(n,e){Fh=n,Bm=Xa=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Cn=!0),n.firstContext=null)}function ui(n){var e=n._currentValue;if(Bm!==n)if(n={context:n,memoizedValue:e,next:null},Xa===null){if(Fh===null)throw Error(Se(308));Xa=n,Fh.dependencies={lanes:0,firstContext:n}}else Xa=Xa.next=n;return e}var bs=null;function Um(n){bs===null?bs=[n]:bs.push(n)}function uS(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,Um(e)):(t.next=r.next,r.next=t),e.interleaved=t,dr(n,i)}function dr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Er=!1;function $m(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function cr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function zr(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ot&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,dr(n,t)}return r=i.interleaved,r===null?(e.next=e,Um(i)):(e.next=r.next,r.next=e),i.interleaved=e,dr(n,t)}function ah(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Mm(n,t)}}function Ay(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var f={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=f:s=s.next=f,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Nh(n,e,t,i){var r=n.updateQueue;Er=!1;var s=r.firstBaseUpdate,f=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var a=o,c=a.next;a.next=null,f===null?s=c:f.next=c,f=a;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==f&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(s!==null){var l=r.baseState;f=0,d=c=a=null,o=s;do{var u=o.lane,h=o.eventTime;if((i&u)===u){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=n,m=o;switch(u=e,h=t,m.tag){case 1:if(g=m.payload,typeof g=="function"){l=g.call(h,l,u);break e}l=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,u=typeof g=="function"?g.call(h,l,u):g,u==null)break e;l=Pt({},l,u);break e;case 2:Er=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,u=r.effects,u===null?r.effects=[o]:u.push(o))}else h={eventTime:h,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=h,a=l):d=d.next=h,f|=u;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;u=o,o=u.next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}while(1);if(d===null&&(a=l),r.baseState=a,r.firstBaseUpdate=c,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do f|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ks|=f,n.lanes=f,n.memoizedState=l}}function Oy(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Se(191,r));r.call(i)}}}var fS=new uw.Component().refs;function xg(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Pt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var pf={isMounted:function(n){return(n=n._reactInternals)?Gs(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=vn(),r=Ur(n),s=cr(i,r);s.payload=e,t!=null&&(s.callback=t),e=zr(n,s,r),e!==null&&(Ci(e,n,r,i),ah(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=vn(),r=Ur(n),s=cr(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=zr(n,s,r),e!==null&&(Ci(e,n,r,i),ah(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=vn(),i=Ur(n),r=cr(t,i);r.tag=2,e!=null&&(r.callback=e),e=zr(n,r,i),e!==null&&(Ci(e,n,i,t),ah(e,n,i))}};function Py(n,e,t,i,r,s,f){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,f):e.prototype&&e.prototype.isPureReactComponent?!ac(t,i)||!ac(r,s):!0}function dS(n,e,t){var i=!1,r=Gr,s=e.contextType;return typeof s=="object"&&s!==null?s=ui(s):(r=Mn(e)?Rs:on.current,i=e.contextTypes,s=(i=i!=null)?fo(n,r):Gr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pf,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function Ly(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&pf.enqueueReplaceState(e,e.state,null)}function bg(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=fS,$m(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ui(s):(s=Mn(e)?Rs:on.current,r.context=fo(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xg(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&pf.enqueueReplaceState(r,r.state,null),Nh(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function sl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Se(309));var i=t.stateNode}if(!i)throw Error(Se(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(f){var o=r.refs;o===fS&&(o=r.refs={}),f===null?delete o[s]:o[s]=f},e._stringRef=s,e)}if(typeof n!="string")throw Error(Se(284));if(!t._owner)throw Error(Se(290,n))}return n}function _u(n,e){throw n=Object.prototype.toString.call(e),Error(Se(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Ry(n){var e=n._init;return e(n._payload)}function pS(n){function e(v,y){if(n){var _=v.deletions;_===null?(v.deletions=[y],v.flags|=16):_.push(y)}}function t(v,y){if(!n)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=$r(v,y),v.index=0,v.sibling=null,v}function s(v,y,_){return v.index=_,n?(_=v.alternate,_!==null?(_=_.index,_<y?(v.flags|=2,y):_):(v.flags|=2,y)):(v.flags|=1048576,y)}function f(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,y,_,x){return y===null||y.tag!==6?(y=Id(_,v.mode,x),y.return=v,y):(y=r(y,_),y.return=v,y)}function a(v,y,_,x){var b=_.type;return b===za?d(v,y,_.props.children,x,_.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Tr&&Ry(b)===y.type)?(x=r(y,_.props),x.ref=sl(v,y,_),x.return=v,x):(x=fh(_.type,_.key,_.props,null,v.mode,x),x.ref=sl(v,y,_),x.return=v,x)}function c(v,y,_,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=kd(_,v.mode,x),y.return=v,y):(y=r(y,_.children||[]),y.return=v,y)}function d(v,y,_,x,b){return y===null||y.tag!==7?(y=Es(_,v.mode,x,b),y.return=v,y):(y=r(y,_),y.return=v,y)}function l(v,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Id(""+y,v.mode,_),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case lu:return _=fh(y.type,y.key,y.props,null,v.mode,_),_.ref=sl(v,null,y),_.return=v,_;case Ba:return y=kd(y,v.mode,_),y.return=v,y;case Tr:var x=y._init;return l(v,x(y._payload),_)}if(Ol(y)||el(y))return y=Es(y,v.mode,_,null),y.return=v,y;_u(v,y)}return null}function u(v,y,_,x){var b=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return b!==null?null:o(v,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case lu:return _.key===b?a(v,y,_,x):null;case Ba:return _.key===b?c(v,y,_,x):null;case Tr:return b=_._init,u(v,y,b(_._payload),x)}if(Ol(_)||el(_))return b!==null?null:d(v,y,_,x,null);_u(v,_)}return null}function h(v,y,_,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(_)||null,o(y,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case lu:return v=v.get(x.key===null?_:x.key)||null,a(y,v,x,b);case Ba:return v=v.get(x.key===null?_:x.key)||null,c(y,v,x,b);case Tr:var w=x._init;return h(v,y,_,w(x._payload),b)}if(Ol(x)||el(x))return v=v.get(_)||null,d(y,v,x,b,null);_u(y,x)}return null}function g(v,y,_,x){for(var b=null,w=null,T=y,S=y=0,O=null;T!==null&&S<_.length;S++){T.index>S?(O=T,T=null):O=T.sibling;var N=u(v,T,_[S],x);if(N===null){T===null&&(T=O);break}n&&T&&N.alternate===null&&e(v,T),y=s(N,y,S),w===null?b=N:w.sibling=N,w=N,T=O}if(S===_.length)return t(v,T),Et&&hs(v,S),b;if(T===null){for(;S<_.length;S++)T=l(v,_[S],x),T!==null&&(y=s(T,y,S),w===null?b=T:w.sibling=T,w=T);return Et&&hs(v,S),b}for(T=i(v,T);S<_.length;S++)O=h(T,v,S,_[S],x),O!==null&&(n&&O.alternate!==null&&T.delete(O.key===null?S:O.key),y=s(O,y,S),w===null?b=O:w.sibling=O,w=O);return n&&T.forEach(function(V){return e(v,V)}),Et&&hs(v,S),b}function m(v,y,_,x){var b=el(_);if(typeof b!="function")throw Error(Se(150));if(_=b.call(_),_==null)throw Error(Se(151));for(var w=b=null,T=y,S=y=0,O=null,N=_.next();T!==null&&!N.done;S++,N=_.next()){T.index>S?(O=T,T=null):O=T.sibling;var V=u(v,T,N.value,x);if(V===null){T===null&&(T=O);break}n&&T&&V.alternate===null&&e(v,T),y=s(V,y,S),w===null?b=V:w.sibling=V,w=V,T=O}if(N.done)return t(v,T),Et&&hs(v,S),b;if(T===null){for(;!N.done;S++,N=_.next())N=l(v,N.value,x),N!==null&&(y=s(N,y,S),w===null?b=N:w.sibling=N,w=N);return Et&&hs(v,S),b}for(T=i(v,T);!N.done;S++,N=_.next())N=h(T,v,S,N.value,x),N!==null&&(n&&N.alternate!==null&&T.delete(N.key===null?S:N.key),y=s(N,y,S),w===null?b=N:w.sibling=N,w=N);return n&&T.forEach(function(Z){return e(v,Z)}),Et&&hs(v,S),b}function p(v,y,_,x){if(typeof _=="object"&&_!==null&&_.type===za&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case lu:e:{for(var b=_.key,w=y;w!==null;){if(w.key===b){if(b=_.type,b===za){if(w.tag===7){t(v,w.sibling),y=r(w,_.props.children),y.return=v,v=y;break e}}else if(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Tr&&Ry(b)===w.type){t(v,w.sibling),y=r(w,_.props),y.ref=sl(v,w,_),y.return=v,v=y;break e}t(v,w);break}else e(v,w);w=w.sibling}_.type===za?(y=Es(_.props.children,v.mode,x,_.key),y.return=v,v=y):(x=fh(_.type,_.key,_.props,null,v.mode,x),x.ref=sl(v,y,_),x.return=v,v=x)}return f(v);case Ba:e:{for(w=_.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){t(v,y.sibling),y=r(y,_.children||[]),y.return=v,v=y;break e}else{t(v,y);break}else e(v,y);y=y.sibling}y=kd(_,v.mode,x),y.return=v,v=y}return f(v);case Tr:return w=_._init,p(v,y,w(_._payload),x)}if(Ol(_))return g(v,y,_,x);if(el(_))return m(v,y,_,x);_u(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(t(v,y.sibling),y=r(y,_),y.return=v,v=y):(t(v,y),y=Id(_,v.mode,x),y.return=v,v=y),f(v)):t(v,y)}return p}var go=pS(!0),gS=pS(!1),Ic={},Ui=Jr(Ic),uc=Jr(Ic),hc=Jr(Ic);function ws(n){if(n===Ic)throw Error(Se(174));return n}function Hm(n,e){switch(_t(hc,e),_t(uc,n),_t(Ui,Ic),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qp(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Qp(e,n)}St(Ui),_t(Ui,e)}function mo(){St(Ui),St(uc),St(hc)}function mS(n){ws(hc.current);var e=ws(Ui.current),t=Qp(e,n.type);e!==t&&(_t(uc,n),_t(Ui,t))}function Vm(n){uc.current===n&&(St(Ui),St(uc))}var Mt=Jr(0);function Bh(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ad=[];function Gm(){for(var n=0;n<Ad.length;n++)Ad[n]._workInProgressVersionPrimary=null;Ad.length=0}var oh=gr.ReactCurrentDispatcher,Od=gr.ReactCurrentBatchConfig,Is=0,At=null,zt=null,Gt=null,zh=!1,Hl=!1,fc=0,GM=0;function tn(){throw Error(Se(321))}function Wm(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ei(n[t],e[t]))return!1;return!0}function Xm(n,e,t,i,r,s){if(Is=s,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oh.current=n===null||n.memoizedState===null?KM:qM,n=t(i,r),Hl){s=0;do{if(Hl=!1,fc=0,25<=s)throw Error(Se(301));s+=1,Gt=zt=null,e.updateQueue=null,oh.current=ZM,n=t(i,r)}while(Hl)}if(oh.current=jh,e=zt!==null&&zt.next!==null,Is=0,Gt=zt=At=null,zh=!1,e)throw Error(Se(300));return n}function Ym(){var n=fc!==0;return fc=0,n}function Ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?At.memoizedState=Gt=n:Gt=Gt.next=n,Gt}function hi(){if(zt===null){var n=At.alternate;n=n!==null?n.memoizedState:null}else n=zt.next;var e=Gt===null?At.memoizedState:Gt.next;if(e!==null)Gt=e,zt=n;else{if(n===null)throw Error(Se(310));zt=n,n={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Gt===null?At.memoizedState=Gt=n:Gt=Gt.next=n}return Gt}function dc(n,e){return typeof e=="function"?e(n):e}function Pd(n){var e=hi(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=n;var i=zt,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var f=r.next;r.next=s.next,s.next=f}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=f=null,a=null,c=s;do{var d=c.lane;if((Is&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var l={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=l,f=i):a=a.next=l,At.lanes|=d,ks|=d}c=c.next}while(c!==null&&c!==s);a===null?f=i:a.next=o,Ei(i,e.memoizedState)||(Cn=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=a,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,At.lanes|=s,ks|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ld(n){var e=hi(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var f=r=r.next;do s=n(s,f.action),f=f.next;while(f!==r);Ei(s,e.memoizedState)||(Cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function vS(){}function yS(n,e){var t=At,i=hi(),r=e(),s=!Ei(i.memoizedState,r);if(s&&(i.memoizedState=r,Cn=!0),i=i.queue,Km(bS.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Gt!==null&&Gt.memoizedState.tag&1){if(t.flags|=2048,pc(9,xS.bind(null,t,i,r,e),void 0,null),Xt===null)throw Error(Se(349));Is&30||_S(t,e,r)}return r}function _S(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function xS(n,e,t,i){e.value=t,e.getSnapshot=i,wS(e)&&SS(n)}function bS(n,e,t){return t(function(){wS(e)&&SS(n)})}function wS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ei(n,t)}catch{return!0}}function SS(n){var e=dr(n,1);e!==null&&Ci(e,n,1,-1)}function Dy(n){var e=Ii();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:n},e.queue=n,n=n.dispatch=YM.bind(null,At,n),[e.memoizedState,n]}function pc(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function CS(){return hi().memoizedState}function lh(n,e,t,i){var r=Ii();At.flags|=n,r.memoizedState=pc(1|e,t,void 0,i===void 0?null:i)}function gf(n,e,t,i){var r=hi();i=i===void 0?null:i;var s=void 0;if(zt!==null){var f=zt.memoizedState;if(s=f.destroy,i!==null&&Wm(i,f.deps)){r.memoizedState=pc(e,t,s,i);return}}At.flags|=n,r.memoizedState=pc(1|e,t,s,i)}function Iy(n,e){return lh(8390656,8,n,e)}function Km(n,e){return gf(2048,8,n,e)}function TS(n,e){return gf(4,2,n,e)}function ES(n,e){return gf(4,4,n,e)}function MS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function AS(n,e,t){return t=t!=null?t.concat([n]):null,gf(4,4,MS.bind(null,e,n),t)}function qm(){}function OS(n,e){var t=hi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Wm(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function PS(n,e){var t=hi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Wm(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function LS(n,e,t){return Is&21?(Ei(t,e)||(t=Iw(),At.lanes|=t,ks|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Cn=!0),n.memoizedState=t)}function WM(n,e){var t=dt;dt=t!==0&&4>t?t:4,n(!0);var i=Od.transition;Od.transition={};try{n(!1),e()}finally{dt=t,Od.transition=i}}function RS(){return hi().memoizedState}function XM(n,e,t){var i=Ur(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},DS(n))IS(e,t);else if(t=uS(n,e,t,i),t!==null){var r=vn();Ci(t,n,i,r),kS(t,e,i)}}function YM(n,e,t){var i=Ur(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(DS(n))IS(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var f=e.lastRenderedState,o=s(f,t);if(r.hasEagerState=!0,r.eagerState=o,Ei(o,f)){var a=e.interleaved;a===null?(r.next=r,Um(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}t=uS(n,e,r,i),t!==null&&(r=vn(),Ci(t,n,i,r),kS(t,e,i))}}function DS(n){var e=n.alternate;return n===At||e!==null&&e===At}function IS(n,e){Hl=zh=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function kS(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Mm(n,t)}}var jh={readContext:ui,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},KM={readContext:ui,useCallback:function(n,e){return Ii().memoizedState=[n,e===void 0?null:e],n},useContext:ui,useEffect:Iy,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,lh(4194308,4,MS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return lh(4194308,4,n,e)},useInsertionEffect:function(n,e){return lh(4,2,n,e)},useMemo:function(n,e){var t=Ii();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ii();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=XM.bind(null,At,n),[i.memoizedState,n]},useRef:function(n){var e=Ii();return n={current:n},e.memoizedState=n},useState:Dy,useDebugValue:qm,useDeferredValue:function(n){return Ii().memoizedState=n},useTransition:function(){var n=Dy(!1),e=n[0];return n=WM.bind(null,n[1]),Ii().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=At,r=Ii();if(Et){if(t===void 0)throw Error(Se(407));t=t()}else{if(t=e(),Xt===null)throw Error(Se(349));Is&30||_S(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Iy(bS.bind(null,i,s,n),[n]),i.flags|=2048,pc(9,xS.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ii(),e=Xt.identifierPrefix;if(Et){var t=ar,i=sr;t=(i&~(1<<32-Si(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=fc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=GM++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},qM={readContext:ui,useCallback:OS,useContext:ui,useEffect:Km,useImperativeHandle:AS,useInsertionEffect:TS,useLayoutEffect:ES,useMemo:PS,useReducer:Pd,useRef:CS,useState:function(){return Pd(dc)},useDebugValue:qm,useDeferredValue:function(n){var e=hi();return LS(e,zt.memoizedState,n)},useTransition:function(){var n=Pd(dc)[0],e=hi().memoizedState;return[n,e]},useMutableSource:vS,useSyncExternalStore:yS,useId:RS,unstable_isNewReconciler:!1},ZM={readContext:ui,useCallback:OS,useContext:ui,useEffect:Km,useImperativeHandle:AS,useInsertionEffect:TS,useLayoutEffect:ES,useMemo:PS,useReducer:Ld,useRef:CS,useState:function(){return Ld(dc)},useDebugValue:qm,useDeferredValue:function(n){var e=hi();return zt===null?e.memoizedState=n:LS(e,zt.memoizedState,n)},useTransition:function(){var n=Ld(dc)[0],e=hi().memoizedState;return[n,e]},useMutableSource:vS,useSyncExternalStore:yS,useId:RS,unstable_isNewReconciler:!1};function vo(n,e){try{var t="",i=e;do t+=TE(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Rd(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function wg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var JM=typeof WeakMap=="function"?WeakMap:Map;function FS(n,e,t){t=cr(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){$h||($h=!0,Rg=i),wg(n,e)},t}function NS(n,e,t){t=cr(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){wg(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){wg(n,e),typeof i!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),t}function ky(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new JM;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=fA.bind(null,n,e,t),e.then(n,n))}function Fy(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Ny(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=cr(-1,1),e.tag=2,zr(t,e,1))),t.lanes|=1),n)}var QM=gr.ReactCurrentOwner,Cn=!1;function dn(n,e,t,i){e.child=n===null?gS(e,null,t,i):go(e,n.child,t,i)}function By(n,e,t,i,r){t=t.render;var s=e.ref;return io(e,r),i=Xm(n,e,t,i,s,r),t=Ym(),n!==null&&!Cn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,pr(n,e,r)):(Et&&t&&km(e),e.flags|=1,dn(n,e,i,r),e.child)}function zy(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!rv(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,BS(n,e,s,i,r)):(n=fh(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var f=s.memoizedProps;if(t=t.compare,t=t!==null?t:ac,t(f,i)&&n.ref===e.ref)return pr(n,e,r)}return e.flags|=1,n=$r(s,i),n.ref=e.ref,n.return=e,e.child=n}function BS(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(ac(s,i)&&n.ref===e.ref)if(Cn=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Cn=!0);else return e.lanes=n.lanes,pr(n,e,r)}return Sg(n,e,t,i,r)}function zS(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Ka,Nn),Nn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,_t(Ka,Nn),Nn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,_t(Ka,Nn),Nn|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,_t(Ka,Nn),Nn|=i;return dn(n,e,r,t),e.child}function jS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Sg(n,e,t,i,r){var s=Mn(t)?Rs:on.current;return s=fo(e,s),io(e,r),t=Xm(n,e,t,i,s,r),i=Ym(),n!==null&&!Cn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,pr(n,e,r)):(Et&&i&&km(e),e.flags|=1,dn(n,e,t,r),e.child)}function jy(n,e,t,i,r){if(Mn(t)){var s=!0;Rh(e)}else s=!1;if(io(e,r),e.stateNode===null)ch(n,e),dS(e,t,i),bg(e,t,i,r),i=!0;else if(n===null){var f=e.stateNode,o=e.memoizedProps;f.props=o;var a=f.context,c=t.contextType;typeof c=="object"&&c!==null?c=ui(c):(c=Mn(t)?Rs:on.current,c=fo(e,c));var d=t.getDerivedStateFromProps,l=typeof d=="function"||typeof f.getSnapshotBeforeUpdate=="function";l||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==i||a!==c)&&Ly(e,f,i,c),Er=!1;var u=e.memoizedState;f.state=u,Nh(e,i,f,r),a=e.memoizedState,o!==i||u!==a||En.current||Er?(typeof d=="function"&&(xg(e,t,d,i),a=e.memoizedState),(o=Er||Py(e,t,o,i,u,a,c))?(l||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),f.props=i,f.state=a,f.context=c,i=o):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,hS(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:_i(e.type,o),f.props=c,l=e.pendingProps,u=f.context,a=t.contextType,typeof a=="object"&&a!==null?a=ui(a):(a=Mn(t)?Rs:on.current,a=fo(e,a));var h=t.getDerivedStateFromProps;(d=typeof h=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==l||u!==a)&&Ly(e,f,i,a),Er=!1,u=e.memoizedState,f.state=u,Nh(e,i,f,r);var g=e.memoizedState;o!==l||u!==g||En.current||Er?(typeof h=="function"&&(xg(e,t,h,i),g=e.memoizedState),(c=Er||Py(e,t,c,i,u,g,a)||!1)?(d||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,g,a),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,g,a)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||o===n.memoizedProps&&u===n.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&u===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),f.props=i,f.state=g,f.context=a,i=c):(typeof f.componentDidUpdate!="function"||o===n.memoizedProps&&u===n.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&u===n.memoizedState||(e.flags|=1024),i=!1)}return Cg(n,e,t,i,s,r)}function Cg(n,e,t,i,r,s){jS(n,e);var f=(e.flags&128)!==0;if(!i&&!f)return r&&Ty(e,t,!1),pr(n,e,s);i=e.stateNode,QM.current=e;var o=f&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&f?(e.child=go(e,n.child,null,s),e.child=go(e,null,o,s)):dn(n,e,o,s),e.memoizedState=i.state,r&&Ty(e,t,!0),e.child}function US(n){var e=n.stateNode;e.pendingContext?Cy(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Cy(n,e.context,!1),Hm(n,e.containerInfo)}function Uy(n,e,t,i,r){return po(),Nm(r),e.flags|=256,dn(n,e,t,i),e.child}var Tg={dehydrated:null,treeContext:null,retryLane:0};function Eg(n){return{baseLanes:n,cachePool:null,transitions:null}}function $S(n,e,t){var i=e.pendingProps,r=Mt.current,s=!1,f=(e.flags&128)!==0,o;if((o=f)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),_t(Mt,r&1),n===null)return yg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,n=i.fallback,s?(i=e.mode,s=e.child,f={mode:"hidden",children:f},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=f):s=yf(f,i,0,null),n=Es(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Eg(t),e.memoizedState=Tg,n):Zm(e,f));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return eA(n,e,f,i,o,r,t);if(s){s=i.fallback,f=e.mode,r=n.child,o=r.sibling;var a={mode:"hidden",children:i.children};return!(f&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=$r(r,a),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=$r(o,s):(s=Es(s,f,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,f=n.child.memoizedState,f=f===null?Eg(t):{baseLanes:f.baseLanes|t,cachePool:null,transitions:f.transitions},s.memoizedState=f,s.childLanes=n.childLanes&~t,e.memoizedState=Tg,i}return s=n.child,n=s.sibling,i=$r(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Zm(n,e){return e=yf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xu(n,e,t,i){return i!==null&&Nm(i),go(e,n.child,null,t),n=Zm(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function eA(n,e,t,i,r,s,f){if(t)return e.flags&256?(e.flags&=-257,i=Rd(Error(Se(422))),xu(n,e,f,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=yf({mode:"visible",children:i.children},r,0,null),s=Es(s,r,f,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&go(e,n.child,null,f),e.child.memoizedState=Eg(f),e.memoizedState=Tg,s);if(!(e.mode&1))return xu(n,e,f,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Se(419)),i=Rd(s,i,void 0),xu(n,e,f,i)}if(o=(f&n.childLanes)!==0,Cn||o){if(i=Xt,i!==null){switch(f&-f){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|f)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,dr(n,r),Ci(i,n,r,-1))}return iv(),i=Rd(Error(Se(421))),xu(n,e,f,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=dA.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,zn=Br(r.nextSibling),Vn=e,Et=!0,bi=null,n!==null&&(ni[ii++]=sr,ni[ii++]=ar,ni[ii++]=Ds,sr=n.id,ar=n.overflow,Ds=e),e=Zm(e,i.children),e.flags|=4096,e)}function $y(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),_g(n.return,e,t)}function Dd(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function HS(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(dn(n,e,i.children,t),i=Mt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$y(n,t,e);else if(n.tag===19)$y(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(_t(Mt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Bh(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Dd(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Bh(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Dd(e,!0,t,null,s);break;case"together":Dd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ch(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function pr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ks|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Se(153));if(e.child!==null){for(n=e.child,t=$r(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=$r(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function tA(n,e,t){switch(e.tag){case 3:US(e),po();break;case 5:mS(e);break;case 1:Mn(e.type)&&Rh(e);break;case 4:Hm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;_t(kh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(_t(Mt,Mt.current&1),e.flags|=128,null):t&e.child.childLanes?$S(n,e,t):(_t(Mt,Mt.current&1),n=pr(n,e,t),n!==null?n.sibling:null);_t(Mt,Mt.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return HS(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),_t(Mt,Mt.current),i)break;return null;case 22:case 23:return e.lanes=0,zS(n,e,t)}return pr(n,e,t)}var VS,Mg,GS,WS;VS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Mg=function(){};GS=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,ws(Ui.current);var s=null;switch(t){case"input":r=Kp(n,r),i=Kp(n,i),s=[];break;case"select":r=Pt({},r,{value:void 0}),i=Pt({},i,{value:void 0}),s=[];break;case"textarea":r=Jp(n,r),i=Jp(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Ph)}eg(t,i);var f;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var o=r[c];for(f in o)o.hasOwnProperty(f)&&(t||(t={}),t[f]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ql.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var a=i[c];if(o=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(f in o)!o.hasOwnProperty(f)||a&&a.hasOwnProperty(f)||(t||(t={}),t[f]="");for(f in a)a.hasOwnProperty(f)&&o[f]!==a[f]&&(t||(t={}),t[f]=a[f])}else t||(s||(s=[]),s.push(c,t)),t=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ql.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&xt("scroll",n),s||o===a||(s=[])):(s=s||[]).push(c,a))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};WS=function(n,e,t,i){t!==i&&(e.flags|=4)};function al(n,e){if(!Et)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function nn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function nA(n,e,t){var i=e.pendingProps;switch(Fm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return Mn(e.type)&&Lh(),nn(e),null;case 3:return i=e.stateNode,mo(),St(En),St(on),Gm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(yu(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bi!==null&&(kg(bi),bi=null))),Mg(n,e),nn(e),null;case 5:Vm(e);var r=ws(hc.current);if(t=e.type,n!==null&&e.stateNode!=null)GS(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Se(166));return nn(e),null}if(n=ws(Ui.current),yu(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Bi]=e,i[cc]=s,n=(e.mode&1)!==0,t){case"dialog":xt("cancel",i),xt("close",i);break;case"iframe":case"object":case"embed":xt("load",i);break;case"video":case"audio":for(r=0;r<Ll.length;r++)xt(Ll[r],i);break;case"source":xt("error",i);break;case"img":case"image":case"link":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"input":Z0(i,s),xt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xt("invalid",i);break;case"textarea":Q0(i,s),xt("invalid",i)}eg(t,s),r=null;for(var f in s)if(s.hasOwnProperty(f)){var o=s[f];f==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&vu(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&vu(i.textContent,o,n),r=["children",""+o]):Ql.hasOwnProperty(f)&&o!=null&&f==="onScroll"&&xt("scroll",i)}switch(t){case"input":cu(i),J0(i,s,!0);break;case"textarea":cu(i),ey(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ph)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_w(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=f.createElement(t,{is:i.is}):(n=f.createElement(t),t==="select"&&(f=n,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):n=f.createElementNS(n,t),n[Bi]=e,n[cc]=i,VS(n,e,!1,!1),e.stateNode=n;e:{switch(f=tg(t,i),t){case"dialog":xt("cancel",n),xt("close",n),r=i;break;case"iframe":case"object":case"embed":xt("load",n),r=i;break;case"video":case"audio":for(r=0;r<Ll.length;r++)xt(Ll[r],n);r=i;break;case"source":xt("error",n),r=i;break;case"img":case"image":case"link":xt("error",n),xt("load",n),r=i;break;case"details":xt("toggle",n),r=i;break;case"input":Z0(n,i),r=Kp(n,i),xt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Pt({},i,{value:void 0}),xt("invalid",n);break;case"textarea":Q0(n,i),r=Jp(n,i),xt("invalid",n);break;default:r=i}eg(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?ww(n,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&xw(n,a)):s==="children"?typeof a=="string"?(t!=="textarea"||a!=="")&&ec(n,a):typeof a=="number"&&ec(n,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ql.hasOwnProperty(s)?a!=null&&s==="onScroll"&&xt("scroll",n):a!=null&&bm(n,s,a,f))}switch(t){case"input":cu(n),J0(n,i,!1);break;case"textarea":cu(n),ey(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Vr(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Qa(n,!!i.multiple,s,!1):i.defaultValue!=null&&Qa(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Ph)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(n&&e.stateNode!=null)WS(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Se(166));if(t=ws(hc.current),ws(Ui.current),yu(e)){if(i=e.stateNode,t=e.memoizedProps,i[Bi]=e,(s=i.nodeValue!==t)&&(n=Vn,n!==null))switch(n.tag){case 3:vu(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&vu(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Bi]=e,e.stateNode=i}return nn(e),null;case 13:if(St(Mt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Et&&zn!==null&&e.mode&1&&!(e.flags&128))cS(),po(),e.flags|=98560,s=!1;else if(s=yu(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Se(317));s[Bi]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),s=!1}else bi!==null&&(kg(bi),bi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Mt.current&1?jt===0&&(jt=3):iv())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return mo(),Mg(n,e),n===null&&oc(e.stateNode.containerInfo),nn(e),null;case 10:return jm(e.type._context),nn(e),null;case 17:return Mn(e.type)&&Lh(),nn(e),null;case 19:if(St(Mt),s=e.memoizedState,s===null)return nn(e),null;if(i=(e.flags&128)!==0,f=s.rendering,f===null)if(i)al(s,!1);else{if(jt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(f=Bh(n),f!==null){for(e.flags|=128,al(s,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,f=s.alternate,f===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,n=f.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return _t(Mt,Mt.current&1|2),e.child}n=n.sibling}s.tail!==null&&Dt()>yo&&(e.flags|=128,i=!0,al(s,!1),e.lanes=4194304)}else{if(!i)if(n=Bh(f),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),al(s,!0),s.tail===null&&s.tailMode==="hidden"&&!f.alternate&&!Et)return nn(e),null}else 2*Dt()-s.renderingStartTime>yo&&t!==1073741824&&(e.flags|=128,i=!0,al(s,!1),e.lanes=4194304);s.isBackwards?(f.sibling=e.child,e.child=f):(t=s.last,t!==null?t.sibling=f:e.child=f,s.last=f)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dt(),e.sibling=null,t=Mt.current,_t(Mt,i?t&1|2:t&1),e):(nn(e),null);case 22:case 23:return nv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Nn&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function iA(n,e){switch(Fm(e),e.tag){case 1:return Mn(e.type)&&Lh(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return mo(),St(En),St(on),Gm(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Vm(e),null;case 13:if(St(Mt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));po()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return St(Mt),null;case 4:return mo(),null;case 10:return jm(e.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var bu=!1,sn=!1,rA=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Ya(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Lt(n,e,i)}else t.current=null}function Ag(n,e,t){try{t()}catch(i){Lt(n,e,i)}}var Hy=!1;function sA(n,e){if(hg=Mh,n=qw(),Im(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var f=0,o=-1,a=-1,c=0,d=0,l=n,u=null;t:for(;;){for(var h;l!==t||r!==0&&l.nodeType!==3||(o=f+r),l!==s||i!==0&&l.nodeType!==3||(a=f+i),l.nodeType===3&&(f+=l.nodeValue.length),(h=l.firstChild)!==null;)u=l,l=h;for(;;){if(l===n)break t;if(u===t&&++c===r&&(o=f),u===s&&++d===i&&(a=f),(h=l.nextSibling)!==null)break;l=u,u=l.parentNode}l=h}t=o===-1||a===-1?null:{start:o,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;for(fg={focusedElem:n,selectionRange:t},Mh=!1,Le=e;Le!==null;)if(e=Le,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Le=n;else for(;Le!==null;){e=Le;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,p=g.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:_i(e.type,m),p);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(x){Lt(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,Le=n;break}Le=e.return}return g=Hy,Hy=!1,g}function Vl(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ag(e,t,s)}r=r.next}while(r!==i)}}function mf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Og(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function XS(n){var e=n.alternate;e!==null&&(n.alternate=null,XS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Bi],delete e[cc],delete e[gg],delete e[UM],delete e[$M])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function YS(n){return n.tag===5||n.tag===3||n.tag===4}function Vy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||YS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ph));else if(i!==4&&(n=n.child,n!==null))for(Pg(n,e,t),n=n.sibling;n!==null;)Pg(n,e,t),n=n.sibling}function Lg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Lg(n,e,t),n=n.sibling;n!==null;)Lg(n,e,t),n=n.sibling}var qt=null,xi=!1;function yr(n,e,t){for(t=t.child;t!==null;)KS(n,e,t),t=t.sibling}function KS(n,e,t){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(lf,t)}catch{}switch(t.tag){case 5:sn||Ya(t,e);case 6:var i=qt,r=xi;qt=null,yr(n,e,t),qt=i,xi=r,qt!==null&&(xi?(n=qt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):qt.removeChild(t.stateNode));break;case 18:qt!==null&&(xi?(n=qt,t=t.stateNode,n.nodeType===8?Ed(n.parentNode,t):n.nodeType===1&&Ed(n,t),rc(n)):Ed(qt,t.stateNode));break;case 4:i=qt,r=xi,qt=t.stateNode.containerInfo,xi=!0,yr(n,e,t),qt=i,xi=r;break;case 0:case 11:case 14:case 15:if(!sn&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,f=s.destroy;s=s.tag,f!==void 0&&(s&2||s&4)&&Ag(t,e,f),r=r.next}while(r!==i)}yr(n,e,t);break;case 1:if(!sn&&(Ya(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){Lt(t,e,o)}yr(n,e,t);break;case 21:yr(n,e,t);break;case 22:t.mode&1?(sn=(i=sn)||t.memoizedState!==null,yr(n,e,t),sn=i):yr(n,e,t);break;default:yr(n,e,t)}}function Gy(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new rA),e.forEach(function(i){var r=pA.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function di(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,f=e,o=f;e:for(;o!==null;){switch(o.tag){case 5:qt=o.stateNode,xi=!1;break e;case 3:qt=o.stateNode.containerInfo,xi=!0;break e;case 4:qt=o.stateNode.containerInfo,xi=!0;break e}o=o.return}if(qt===null)throw Error(Se(160));KS(s,f,r),qt=null,xi=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(c){Lt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qS(e,n),e=e.sibling}function qS(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(di(e,n),Li(n),i&4){try{Vl(3,n,n.return),mf(3,n)}catch(m){Lt(n,n.return,m)}try{Vl(5,n,n.return)}catch(m){Lt(n,n.return,m)}}break;case 1:di(e,n),Li(n),i&512&&t!==null&&Ya(t,t.return);break;case 5:if(di(e,n),Li(n),i&512&&t!==null&&Ya(t,t.return),n.flags&32){var r=n.stateNode;try{ec(r,"")}catch(m){Lt(n,n.return,m)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,f=t!==null?t.memoizedProps:s,o=n.type,a=n.updateQueue;if(n.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&vw(r,s),tg(o,f);var c=tg(o,s);for(f=0;f<a.length;f+=2){var d=a[f],l=a[f+1];d==="style"?ww(r,l):d==="dangerouslySetInnerHTML"?xw(r,l):d==="children"?ec(r,l):bm(r,d,l,c)}switch(o){case"input":qp(r,s);break;case"textarea":yw(r,s);break;case"select":var u=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Qa(r,!!s.multiple,h,!1):u!==!!s.multiple&&(s.defaultValue!=null?Qa(r,!!s.multiple,s.defaultValue,!0):Qa(r,!!s.multiple,s.multiple?[]:"",!1))}r[cc]=s}catch(m){Lt(n,n.return,m)}}break;case 6:if(di(e,n),Li(n),i&4){if(n.stateNode===null)throw Error(Se(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(m){Lt(n,n.return,m)}}break;case 3:if(di(e,n),Li(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{rc(e.containerInfo)}catch(m){Lt(n,n.return,m)}break;case 4:di(e,n),Li(n);break;case 13:di(e,n),Li(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(ev=Dt())),i&4&&Gy(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(sn=(c=sn)||d,di(e,n),sn=c):di(e,n),Li(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Le=n,d=n.child;d!==null;){for(l=Le=d;Le!==null;){switch(u=Le,h=u.child,u.tag){case 0:case 11:case 14:case 15:Vl(4,u,u.return);break;case 1:Ya(u,u.return);var g=u.stateNode;if(typeof g.componentWillUnmount=="function"){i=u,t=u.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Lt(i,t,m)}}break;case 5:Ya(u,u.return);break;case 22:if(u.memoizedState!==null){Xy(l);continue}}h!==null?(h.return=u,Le=h):Xy(l)}d=d.sibling}e:for(d=null,l=n;;){if(l.tag===5){if(d===null){d=l;try{r=l.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=l.stateNode,a=l.memoizedProps.style,f=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=bw("display",f))}catch(m){Lt(n,n.return,m)}}}else if(l.tag===6){if(d===null)try{l.stateNode.nodeValue=c?"":l.memoizedProps}catch(m){Lt(n,n.return,m)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===n)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break e;for(;l.sibling===null;){if(l.return===null||l.return===n)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}}break;case 19:di(e,n),Li(n),i&4&&Gy(n);break;case 21:break;default:di(e,n),Li(n)}}function Li(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(YS(t)){var i=t;break e}t=t.return}throw Error(Se(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ec(r,""),i.flags&=-33);var s=Vy(n);Lg(n,s,r);break;case 3:case 4:var f=i.stateNode.containerInfo,o=Vy(n);Pg(n,o,f);break;default:throw Error(Se(161))}}catch(a){Lt(n,n.return,a)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function aA(n,e,t){Le=n,ZS(n)}function ZS(n,e,t){for(var i=(n.mode&1)!==0;Le!==null;){var r=Le,s=r.child;if(r.tag===22&&i){var f=r.memoizedState!==null||bu;if(!f){var o=r.alternate,a=o!==null&&o.memoizedState!==null||sn;o=bu;var c=sn;if(bu=f,(sn=a)&&!c)for(Le=r;Le!==null;)f=Le,a=f.child,f.tag===22&&f.memoizedState!==null?Yy(r):a!==null?(a.return=f,Le=a):Yy(r);for(;s!==null;)Le=s,ZS(s),s=s.sibling;Le=r,bu=o,sn=c}Wy(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Le=s):Wy(n)}}function Wy(n){for(;Le!==null;){var e=Le;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||mf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!sn)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:_i(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Oy(e,s,i);break;case 3:var f=e.updateQueue;if(f!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Oy(e,f,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&t.focus();break;case"img":a.src&&(t.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var l=d.dehydrated;l!==null&&rc(l)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}sn||e.flags&512&&Og(e)}catch(u){Lt(e,e.return,u)}}if(e===n){Le=null;break}if(t=e.sibling,t!==null){t.return=e.return,Le=t;break}Le=e.return}}function Xy(n){for(;Le!==null;){var e=Le;if(e===n){Le=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Le=t;break}Le=e.return}}function Yy(n){for(;Le!==null;){var e=Le;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{mf(4,e)}catch(a){Lt(e,t,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){Lt(e,r,a)}}var s=e.return;try{Og(e)}catch(a){Lt(e,s,a)}break;case 5:var f=e.return;try{Og(e)}catch(a){Lt(e,f,a)}}}catch(a){Lt(e,e.return,a)}if(e===n){Le=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Le=o;break}Le=e.return}}var oA=Math.ceil,Uh=gr.ReactCurrentDispatcher,Jm=gr.ReactCurrentOwner,li=gr.ReactCurrentBatchConfig,ot=0,Xt=null,Nt=null,Zt=0,Nn=0,Ka=Jr(0),jt=0,gc=null,ks=0,vf=0,Qm=0,Gl=null,wn=null,ev=0,yo=1/0,nr=null,$h=!1,Rg=null,jr=null,wu=!1,Rr=null,Hh=0,Wl=0,Dg=null,uh=-1,hh=0;function vn(){return ot&6?Dt():uh!==-1?uh:uh=Dt()}function Ur(n){return n.mode&1?ot&2&&Zt!==0?Zt&-Zt:VM.transition!==null?(hh===0&&(hh=Iw()),hh):(n=dt,n!==0||(n=window.event,n=n===void 0?16:Uw(n.type)),n):1}function Ci(n,e,t,i){if(50<Wl)throw Wl=0,Dg=null,Error(Se(185));Lc(n,t,i),(!(ot&2)||n!==Xt)&&(n===Xt&&(!(ot&2)&&(vf|=t),jt===4&&Pr(n,Zt)),An(n,i),t===1&&ot===0&&!(e.mode&1)&&(yo=Dt()+500,df&&Qr()))}function An(n,e){var t=n.callbackNode;VE(n,e);var i=Eh(n,n===Xt?Zt:0);if(i===0)t!==null&&iy(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&iy(t),e===1)n.tag===0?HM(Ky.bind(null,n)):aS(Ky.bind(null,n)),zM(function(){!(ot&6)&&Qr()}),t=null;else{switch(kw(i)){case 1:t=Em;break;case 4:t=Rw;break;case 16:t=Th;break;case 536870912:t=Dw;break;default:t=Th}t=sC(t,JS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function JS(n,e){if(uh=-1,hh=0,ot&6)throw Error(Se(327));var t=n.callbackNode;if(ro()&&n.callbackNode!==t)return null;var i=Eh(n,n===Xt?Zt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Vh(n,i);else{e=i;var r=ot;ot|=2;var s=eC();(Xt!==n||Zt!==e)&&(nr=null,yo=Dt()+500,Ts(n,e));do try{uA();break}catch(o){QS(n,o)}while(1);zm(),Uh.current=s,ot=r,Nt!==null?e=0:(Xt=null,Zt=0,e=jt)}if(e!==0){if(e===2&&(r=ag(n),r!==0&&(i=r,e=Ig(n,r))),e===1)throw t=gc,Ts(n,0),Pr(n,i),An(n,Dt()),t;if(e===6)Pr(n,i);else{if(r=n.current.alternate,!(i&30)&&!lA(r)&&(e=Vh(n,i),e===2&&(s=ag(n),s!==0&&(i=s,e=Ig(n,s))),e===1))throw t=gc,Ts(n,0),Pr(n,i),An(n,Dt()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Se(345));case 2:fs(n,wn,nr);break;case 3:if(Pr(n,i),(i&130023424)===i&&(e=ev+500-Dt(),10<e)){if(Eh(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){vn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=pg(fs.bind(null,n,wn,nr),e);break}fs(n,wn,nr);break;case 4:if(Pr(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var f=31-Si(i);s=1<<f,f=e[f],f>r&&(r=f),i&=~s}if(i=r,i=Dt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*oA(i/1960))-i,10<i){n.timeoutHandle=pg(fs.bind(null,n,wn,nr),i);break}fs(n,wn,nr);break;case 5:fs(n,wn,nr);break;default:throw Error(Se(329))}}}return An(n,Dt()),n.callbackNode===t?JS.bind(null,n):null}function Ig(n,e){var t=Gl;return n.current.memoizedState.isDehydrated&&(Ts(n,e).flags|=256),n=Vh(n,e),n!==2&&(e=wn,wn=t,e!==null&&kg(e)),n}function kg(n){wn===null?wn=n:wn.push.apply(wn,n)}function lA(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Ei(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pr(n,e){for(e&=~Qm,e&=~vf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Si(e),i=1<<t;n[t]=-1,e&=~i}}function Ky(n){if(ot&6)throw Error(Se(327));ro();var e=Eh(n,0);if(!(e&1))return An(n,Dt()),null;var t=Vh(n,e);if(n.tag!==0&&t===2){var i=ag(n);i!==0&&(e=i,t=Ig(n,i))}if(t===1)throw t=gc,Ts(n,0),Pr(n,e),An(n,Dt()),t;if(t===6)throw Error(Se(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,fs(n,wn,nr),An(n,Dt()),null}function tv(n,e){var t=ot;ot|=1;try{return n(e)}finally{ot=t,ot===0&&(yo=Dt()+500,df&&Qr())}}function Fs(n){Rr!==null&&Rr.tag===0&&!(ot&6)&&ro();var e=ot;ot|=1;var t=li.transition,i=dt;try{if(li.transition=null,dt=1,n)return n()}finally{dt=i,li.transition=t,ot=e,!(ot&6)&&Qr()}}function nv(){Nn=Ka.current,St(Ka)}function Ts(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,BM(t)),Nt!==null)for(t=Nt.return;t!==null;){var i=t;switch(Fm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Lh();break;case 3:mo(),St(En),St(on),Gm();break;case 5:Vm(i);break;case 4:mo();break;case 13:St(Mt);break;case 19:St(Mt);break;case 10:jm(i.type._context);break;case 22:case 23:nv()}t=t.return}if(Xt=n,Nt=n=$r(n.current,null),Zt=Nn=e,jt=0,gc=null,Qm=vf=ks=0,wn=Gl=null,bs!==null){for(e=0;e<bs.length;e++)if(t=bs[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var f=s.next;s.next=r,i.next=f}t.pending=i}bs=null}return n}function QS(n,e){do{var t=Nt;try{if(zm(),oh.current=jh,zh){for(var i=At.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}zh=!1}if(Is=0,Gt=zt=At=null,Hl=!1,fc=0,Jm.current=null,t===null||t.return===null){jt=1,gc=e,Nt=null;break}e:{var s=n,f=t.return,o=t,a=e;if(e=Zt,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,l=d.tag;if(!(d.mode&1)&&(l===0||l===11||l===15)){var u=d.alternate;u?(d.updateQueue=u.updateQueue,d.memoizedState=u.memoizedState,d.lanes=u.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Fy(f);if(h!==null){h.flags&=-257,Ny(h,f,o,s,e),h.mode&1&&ky(s,c,e),e=h,a=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(a),e.updateQueue=m}else g.add(a);break e}else{if(!(e&1)){ky(s,c,e),iv();break e}a=Error(Se(426))}}else if(Et&&o.mode&1){var p=Fy(f);if(p!==null){!(p.flags&65536)&&(p.flags|=256),Ny(p,f,o,s,e),Nm(vo(a,o));break e}}s=a=vo(a,o),jt!==4&&(jt=2),Gl===null?Gl=[s]:Gl.push(s),s=f;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=FS(s,a,e);Ay(s,v);break e;case 1:o=a;var y=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jr===null||!jr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=NS(s,o,e);Ay(s,x);break e}}s=s.return}while(s!==null)}nC(t)}catch(b){e=b,Nt===t&&t!==null&&(Nt=t=t.return);continue}break}while(1)}function eC(){var n=Uh.current;return Uh.current=jh,n===null?jh:n}function iv(){(jt===0||jt===3||jt===2)&&(jt=4),Xt===null||!(ks&268435455)&&!(vf&268435455)||Pr(Xt,Zt)}function Vh(n,e){var t=ot;ot|=2;var i=eC();(Xt!==n||Zt!==e)&&(nr=null,Ts(n,e));do try{cA();break}catch(r){QS(n,r)}while(1);if(zm(),ot=t,Uh.current=i,Nt!==null)throw Error(Se(261));return Xt=null,Zt=0,jt}function cA(){for(;Nt!==null;)tC(Nt)}function uA(){for(;Nt!==null&&!kE();)tC(Nt)}function tC(n){var e=rC(n.alternate,n,Nn);n.memoizedProps=n.pendingProps,e===null?nC(n):Nt=e,Jm.current=null}function nC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=iA(t,e),t!==null){t.flags&=32767,Nt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{jt=6,Nt=null;return}}else if(t=nA(t,e,Nn),t!==null){Nt=t;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=n}while(e!==null);jt===0&&(jt=5)}function fs(n,e,t){var i=dt,r=li.transition;try{li.transition=null,dt=1,hA(n,e,t,i)}finally{li.transition=r,dt=i}return null}function hA(n,e,t,i){do ro();while(Rr!==null);if(ot&6)throw Error(Se(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Se(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(GE(n,s),n===Xt&&(Nt=Xt=null,Zt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||wu||(wu=!0,sC(Th,function(){return ro(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=li.transition,li.transition=null;var f=dt;dt=1;var o=ot;ot|=4,Jm.current=null,sA(n,t),qS(t,n),LM(fg),Mh=!!hg,fg=hg=null,n.current=t,aA(t),FE(),ot=o,dt=f,li.transition=s}else n.current=t;if(wu&&(wu=!1,Rr=n,Hh=r),s=n.pendingLanes,s===0&&(jr=null),zE(t.stateNode),An(n,Dt()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if($h)throw $h=!1,n=Rg,Rg=null,n;return Hh&1&&n.tag!==0&&ro(),s=n.pendingLanes,s&1?n===Dg?Wl++:(Wl=0,Dg=n):Wl=0,Qr(),null}function ro(){if(Rr!==null){var n=kw(Hh),e=li.transition,t=dt;try{if(li.transition=null,dt=16>n?16:n,Rr===null)var i=!1;else{if(n=Rr,Rr=null,Hh=0,ot&6)throw Error(Se(331));var r=ot;for(ot|=4,Le=n.current;Le!==null;){var s=Le,f=s.child;if(Le.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(Le=c;Le!==null;){var d=Le;switch(d.tag){case 0:case 11:case 15:Vl(8,d,s)}var l=d.child;if(l!==null)l.return=d,Le=l;else for(;Le!==null;){d=Le;var u=d.sibling,h=d.return;if(XS(d),d===c){Le=null;break}if(u!==null){u.return=h,Le=u;break}Le=h}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var p=m.sibling;m.sibling=null,m=p}while(m!==null)}}Le=s}}if(s.subtreeFlags&2064&&f!==null)f.return=s,Le=f;else e:for(;Le!==null;){if(s=Le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Le=v;break e}Le=s.return}}var y=n.current;for(Le=y;Le!==null;){f=Le;var _=f.child;if(f.subtreeFlags&2064&&_!==null)_.return=f,Le=_;else e:for(f=y;Le!==null;){if(o=Le,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:mf(9,o)}}catch(b){Lt(o,o.return,b)}if(o===f){Le=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,Le=x;break e}Le=o.return}}if(ot=r,Qr(),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(lf,n)}catch{}i=!0}return i}finally{dt=t,li.transition=e}}return!1}function qy(n,e,t){e=vo(t,e),e=FS(n,e,1),n=zr(n,e,1),e=vn(),n!==null&&(Lc(n,1,e),An(n,e))}function Lt(n,e,t){if(n.tag===3)qy(n,n,t);else for(;e!==null;){if(e.tag===3){qy(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(jr===null||!jr.has(i))){n=vo(t,n),n=NS(e,n,1),e=zr(e,n,1),n=vn(),e!==null&&(Lc(e,1,n),An(e,n));break}}e=e.return}}function fA(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=vn(),n.pingedLanes|=n.suspendedLanes&t,Xt===n&&(Zt&t)===t&&(jt===4||jt===3&&(Zt&130023424)===Zt&&500>Dt()-ev?Ts(n,0):Qm|=t),An(n,e)}function iC(n,e){e===0&&(n.mode&1?(e=fu,fu<<=1,!(fu&130023424)&&(fu=4194304)):e=1);var t=vn();n=dr(n,e),n!==null&&(Lc(n,e,t),An(n,t))}function dA(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),iC(n,t)}function pA(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Se(314))}i!==null&&i.delete(e),iC(n,t)}var rC;rC=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||En.current)Cn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Cn=!1,tA(n,e,t);Cn=!!(n.flags&131072)}else Cn=!1,Et&&e.flags&1048576&&oS(e,Ih,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ch(n,e),n=e.pendingProps;var r=fo(e,on.current);io(e,t),r=Xm(null,e,i,n,r,t);var s=Ym();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(i)?(s=!0,Rh(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$m(e),r.updater=pf,e.stateNode=r,r._reactInternals=e,bg(e,i,n,t),e=Cg(null,e,i,!0,s,t)):(e.tag=0,Et&&s&&km(e),dn(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(ch(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=mA(i),n=_i(i,n),r){case 0:e=Sg(null,e,i,n,t);break e;case 1:e=jy(null,e,i,n,t);break e;case 11:e=By(null,e,i,n,t);break e;case 14:e=zy(null,e,i,_i(i.type,n),t);break e}throw Error(Se(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_i(i,r),Sg(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_i(i,r),jy(n,e,i,r,t);case 3:e:{if(US(e),n===null)throw Error(Se(387));i=e.pendingProps,s=e.memoizedState,r=s.element,hS(n,e),Nh(e,i,null,t);var f=e.memoizedState;if(i=f.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=vo(Error(Se(423)),e),e=Uy(n,e,i,t,r);break e}else if(i!==r){r=vo(Error(Se(424)),e),e=Uy(n,e,i,t,r);break e}else for(zn=Br(e.stateNode.containerInfo.firstChild),Vn=e,Et=!0,bi=null,t=gS(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(po(),i===r){e=pr(n,e,t);break e}dn(n,e,i,t)}e=e.child}return e;case 5:return mS(e),n===null&&yg(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,f=r.children,dg(i,r)?f=null:s!==null&&dg(i,s)&&(e.flags|=32),jS(n,e),dn(n,e,f,t),e.child;case 6:return n===null&&yg(e),null;case 13:return $S(n,e,t);case 4:return Hm(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=go(e,null,i,t):dn(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_i(i,r),By(n,e,i,r,t);case 7:return dn(n,e,e.pendingProps,t),e.child;case 8:return dn(n,e,e.pendingProps.children,t),e.child;case 12:return dn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,f=r.value,_t(kh,i._currentValue),i._currentValue=f,s!==null)if(Ei(s.value,f)){if(s.children===r.children&&!En.current){e=pr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){f=s.child;for(var a=o.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=cr(-1,t&-t),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),_g(s.return,t,e),o.lanes|=t;break}a=a.next}}else if(s.tag===10)f=s.type===e.type?null:s.child;else if(s.tag===18){if(f=s.return,f===null)throw Error(Se(341));f.lanes|=t,o=f.alternate,o!==null&&(o.lanes|=t),_g(f,t,e),f=s.sibling}else f=s.child;if(f!==null)f.return=s;else for(f=s;f!==null;){if(f===e){f=null;break}if(s=f.sibling,s!==null){s.return=f.return,f=s;break}f=f.return}s=f}dn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,io(e,t),r=ui(r),i=i(r),e.flags|=1,dn(n,e,i,t),e.child;case 14:return i=e.type,r=_i(i,e.pendingProps),r=_i(i.type,r),zy(n,e,i,r,t);case 15:return BS(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_i(i,r),ch(n,e),e.tag=1,Mn(i)?(n=!0,Rh(e)):n=!1,io(e,t),dS(e,i,r),bg(e,i,r,t),Cg(null,e,i,!0,n,t);case 19:return HS(n,e,t);case 22:return zS(n,e,t)}throw Error(Se(156,e.tag))};function sC(n,e){return Lw(n,e)}function gA(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(n,e,t,i){return new gA(n,e,t,i)}function rv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mA(n){if(typeof n=="function")return rv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Sm)return 11;if(n===Cm)return 14}return 2}function $r(n,e){var t=n.alternate;return t===null?(t=oi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function fh(n,e,t,i,r,s){var f=2;if(i=n,typeof n=="function")rv(n)&&(f=1);else if(typeof n=="string")f=5;else e:switch(n){case za:return Es(t.children,r,s,e);case wm:f=8,r|=8;break;case Gp:return n=oi(12,t,e,r|2),n.elementType=Gp,n.lanes=s,n;case Wp:return n=oi(13,t,e,r),n.elementType=Wp,n.lanes=s,n;case Xp:return n=oi(19,t,e,r),n.elementType=Xp,n.lanes=s,n;case pw:return yf(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case fw:f=10;break e;case dw:f=9;break e;case Sm:f=11;break e;case Cm:f=14;break e;case Tr:f=16,i=null;break e}throw Error(Se(130,n==null?n:typeof n,""))}return e=oi(f,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Es(n,e,t,i){return n=oi(7,n,i,e),n.lanes=t,n}function yf(n,e,t,i){return n=oi(22,n,i,e),n.elementType=pw,n.lanes=t,n.stateNode={isHidden:!1},n}function Id(n,e,t){return n=oi(6,n,null,e),n.lanes=t,n}function kd(n,e,t){return e=oi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function vA(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gd(0),this.expirationTimes=gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function sv(n,e,t,i,r,s,f,o,a){return n=new vA(n,e,t,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=oi(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$m(s),n}function yA(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ba,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function aC(n){if(!n)return Gr;n=n._reactInternals;e:{if(Gs(n)!==n||n.tag!==1)throw Error(Se(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(n.tag===1){var t=n.type;if(Mn(t))return sS(n,t,e)}return e}function oC(n,e,t,i,r,s,f,o,a){return n=sv(t,i,!0,n,r,s,f,o,a),n.context=aC(null),t=n.current,i=vn(),r=Ur(t),s=cr(i,r),s.callback=e??null,zr(t,s,r),n.current.lanes=r,Lc(n,r,i),An(n,i),n}function _f(n,e,t,i){var r=e.current,s=vn(),f=Ur(r);return t=aC(t),e.context===null?e.context=t:e.pendingContext=t,e=cr(s,f),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=zr(r,e,f),n!==null&&(Ci(n,r,f,s),ah(n,r,f)),f}function Gh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Zy(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function av(n,e){Zy(n,e),(n=n.alternate)&&Zy(n,e)}function _A(){return null}var lC=typeof reportError=="function"?reportError:function(n){console.error(n)};function ov(n){this._internalRoot=n}xf.prototype.render=ov.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Se(409));_f(n,e,null,null)};xf.prototype.unmount=ov.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Fs(function(){_f(null,n,null,null)}),e[fr]=null}};function xf(n){this._internalRoot=n}xf.prototype.unstable_scheduleHydration=function(n){if(n){var e=Bw();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Or.length&&e!==0&&e<Or[t].priority;t++);Or.splice(t,0,n),t===0&&jw(n)}};function lv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function bf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Jy(){}function xA(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Gh(f);s.call(c)}}var f=oC(e,i,n,0,null,!1,!1,"",Jy);return n._reactRootContainer=f,n[fr]=f.current,oc(n.nodeType===8?n.parentNode:n),Fs(),f}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var c=Gh(a);o.call(c)}}var a=sv(n,0,!1,null,null,!1,!1,"",Jy);return n._reactRootContainer=a,n[fr]=a.current,oc(n.nodeType===8?n.parentNode:n),Fs(function(){_f(e,a,t,i)}),a}function wf(n,e,t,i,r){var s=t._reactRootContainer;if(s){var f=s;if(typeof r=="function"){var o=r;r=function(){var a=Gh(f);o.call(a)}}_f(e,f,n,r)}else f=xA(t,e,n,r,i);return Gh(f)}Fw=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Pl(e.pendingLanes);t!==0&&(Mm(e,t|1),An(e,Dt()),!(ot&6)&&(yo=Dt()+500,Qr()))}break;case 13:Fs(function(){var i=dr(n,1);if(i!==null){var r=vn();Ci(i,n,1,r)}}),av(n,1)}};Am=function(n){if(n.tag===13){var e=dr(n,134217728);if(e!==null){var t=vn();Ci(e,n,134217728,t)}av(n,134217728)}};Nw=function(n){if(n.tag===13){var e=Ur(n),t=dr(n,e);if(t!==null){var i=vn();Ci(t,n,e,i)}av(n,e)}};Bw=function(){return dt};zw=function(n,e){var t=dt;try{return dt=n,e()}finally{dt=t}};ig=function(n,e,t){switch(e){case"input":if(qp(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=ff(i);if(!r)throw Error(Se(90));mw(i),qp(i,r)}}}break;case"textarea":yw(n,t);break;case"select":e=t.value,e!=null&&Qa(n,!!t.multiple,e,!1)}};Tw=tv;Ew=Fs;var bA={usingClientEntryPoint:!1,Events:[Dc,Ha,ff,Sw,Cw,tv]},ol={findFiberByHostInstance:xs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wA={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ow(n),n===null?null:n.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||_A,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{lf=Su.inject(wA),ji=Su}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bA;Kn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lv(e))throw Error(Se(200));return yA(n,e,null,t)};Kn.createRoot=function(n,e){if(!lv(n))throw Error(Se(299));var t=!1,i="",r=lC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=sv(n,1,!1,null,null,t,!1,i,r),n[fr]=e.current,oc(n.nodeType===8?n.parentNode:n),new ov(e)};Kn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Se(188)):(n=Object.keys(n).join(","),Error(Se(268,n)));return n=Ow(e),n=n===null?null:n.stateNode,n};Kn.flushSync=function(n){return Fs(n)};Kn.hydrate=function(n,e,t){if(!bf(e))throw Error(Se(200));return wf(null,n,e,!0,t)};Kn.hydrateRoot=function(n,e,t){if(!lv(n))throw Error(Se(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",f=lC;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),e=oC(e,null,n,1,t??null,r,!1,s,f),n[fr]=e.current,oc(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new xf(e)};Kn.render=function(n,e,t){if(!bf(e))throw Error(Se(200));return wf(null,n,e,!1,t)};Kn.unmountComponentAtNode=function(n){if(!bf(n))throw Error(Se(40));return n._reactRootContainer?(Fs(function(){wf(null,null,n,!1,function(){n._reactRootContainer=null,n[fr]=null})}),!0):!1};Kn.unstable_batchedUpdates=tv;Kn.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!bf(t))throw Error(Se(200));if(n==null||n._reactInternals===void 0)throw Error(Se(38));return wf(n,e,t,!1,i)};Kn.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Kn})(_E);const Ms=pm(uo);var Qy=uo;$p.createRoot=Qy.createRoot,$p.hydrateRoot=Qy.hydrateRoot;function SA({className:n}){return be.jsx("nav",{className:`tooyea-nav ${n}`,children:be.jsx("a",{href:"/",children:be.jsx("img",{src:"./logo.png",alt:"logo",height:"32"})})})}function CA(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Zn=CA,TA=typeof au=="object"&&au&&au.Object===Object&&au,cC=TA,EA=cC,MA=typeof self=="object"&&self&&self.Object===Object&&self,AA=EA||MA||Function("return this")(),Mi=AA,OA=Mi,PA=function(){return OA.Date.now()},LA=PA,RA=/\s/;function DA(n){for(var e=n.length;e--&&RA.test(n.charAt(e)););return e}var IA=DA,kA=IA,FA=/^\s+/;function NA(n){return n&&n.slice(0,kA(n)+1).replace(FA,"")}var BA=NA,zA=Mi,jA=zA.Symbol,Do=jA,e_=Do,uC=Object.prototype,UA=uC.hasOwnProperty,$A=uC.toString,ll=e_?e_.toStringTag:void 0;function HA(n){var e=UA.call(n,ll),t=n[ll];try{n[ll]=void 0;var i=!0}catch{}var r=$A.call(n);return i&&(e?n[ll]=t:delete n[ll]),r}var VA=HA,GA=Object.prototype,WA=GA.toString;function XA(n){return WA.call(n)}var YA=XA,t_=Do,KA=VA,qA=YA,ZA="[object Null]",JA="[object Undefined]",n_=t_?t_.toStringTag:void 0;function QA(n){return n==null?n===void 0?JA:ZA:n_&&n_ in Object(n)?KA(n):qA(n)}var es=QA;function eO(n){return n!=null&&typeof n=="object"}var Ai=eO,tO=es,nO=Ai,iO="[object Symbol]";function rO(n){return typeof n=="symbol"||nO(n)&&tO(n)==iO}var Sf=rO,sO=BA,i_=Zn,aO=Sf,r_=0/0,oO=/^[-+]0x[0-9a-f]+$/i,lO=/^0b[01]+$/i,cO=/^0o[0-7]+$/i,uO=parseInt;function hO(n){if(typeof n=="number")return n;if(aO(n))return r_;if(i_(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=i_(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=sO(n);var t=lO.test(n);return t||cO.test(n)?uO(n.slice(2),t?2:8):oO.test(n)?r_:+n}var fO=hO,dO=Zn,Fd=LA,s_=fO,pO="Expected a function",gO=Math.max,mO=Math.min;function vO(n,e,t){var i,r,s,f,o,a,c=0,d=!1,l=!1,u=!0;if(typeof n!="function")throw new TypeError(pO);e=s_(e)||0,dO(t)&&(d=!!t.leading,l="maxWait"in t,s=l?gO(s_(t.maxWait)||0,e):s,u="trailing"in t?!!t.trailing:u);function h(w){var T=i,S=r;return i=r=void 0,c=w,f=n.apply(S,T),f}function g(w){return c=w,o=setTimeout(v,e),d?h(w):f}function m(w){var T=w-a,S=w-c,O=e-T;return l?mO(O,s-S):O}function p(w){var T=w-a,S=w-c;return a===void 0||T>=e||T<0||l&&S>=s}function v(){var w=Fd();if(p(w))return y(w);o=setTimeout(v,m(w))}function y(w){return o=void 0,u&&i?h(w):(i=r=void 0,f)}function _(){o!==void 0&&clearTimeout(o),c=0,i=a=r=o=void 0}function x(){return o===void 0?f:y(Fd())}function b(){var w=Fd(),T=p(w);if(i=arguments,r=this,a=w,T){if(o===void 0)return g(a);if(l)return clearTimeout(o),o=setTimeout(v,e),h(a)}return o===void 0&&(o=setTimeout(v,e)),f}return b.cancel=_,b.flush=x,b}var yO=vO,_O=yO,xO=Zn,bO="Expected a function";function wO(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(bO);return xO(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),_O(n,e,{leading:i,maxWait:e,trailing:r})}var SO=wO;const a_=SO;function CO(){}var Ke=CO,Fg={},TO={get exports(){return Fg},set exports(n){Fg=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var f=typeof s;if(f==="string"||f==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var o=t.apply(null,s);o&&i.push(o)}}else if(f==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){i.push(s.toString());continue}for(var a in s)e.call(s,a)&&s[a]&&i.push(a)}}}return i.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(TO);const Ne=Fg;var C={},EO={get exports(){return C},set exports(n){C=n}},MO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",AO=MO,OO=AO;function hC(){}function fC(){}fC.resetWarningCache=hC;var PO=function(){function n(i,r,s,f,o,a){if(a!==OO){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:fC,resetWarningCache:hC};return t.PropTypes=t,t};EO.exports=PO();const We="semi";var LO=Array.isArray,xn=LO,RO=xn,DO=Sf,IO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kO=/^\w*$/;function FO(n,e){if(RO(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||DO(n)?!0:kO.test(n)||!IO.test(n)||e!=null&&n in Object(e)}var cv=FO,NO=es,BO=Zn,zO="[object AsyncFunction]",jO="[object Function]",UO="[object GeneratorFunction]",$O="[object Proxy]";function HO(n){if(!BO(n))return!1;var e=NO(n);return e==jO||e==UO||e==zO||e==$O}var Bn=HO,VO=Mi,GO=VO["__core-js_shared__"],WO=GO,Nd=WO,o_=function(){var n=/[^.]+$/.exec(Nd&&Nd.keys&&Nd.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function XO(n){return!!o_&&o_ in n}var YO=XO,KO=Function.prototype,qO=KO.toString;function ZO(n){if(n!=null){try{return qO.call(n)}catch{}try{return n+""}catch{}}return""}var dC=ZO,JO=Bn,QO=YO,eP=Zn,tP=dC,nP=/[\\^$.*+?()[\]{}|]/g,iP=/^\[object .+?Constructor\]$/,rP=Function.prototype,sP=Object.prototype,aP=rP.toString,oP=sP.hasOwnProperty,lP=RegExp("^"+aP.call(oP).replace(nP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cP(n){if(!eP(n)||QO(n))return!1;var e=JO(n)?lP:iP;return e.test(tP(n))}var uP=cP;function hP(n,e){return n==null?void 0:n[e]}var fP=hP,dP=uP,pP=fP;function gP(n,e){var t=pP(n,e);return dP(t)?t:void 0}var Ws=gP,mP=Ws,vP=mP(Object,"create"),Cf=vP,l_=Cf;function yP(){this.__data__=l_?l_(null):{},this.size=0}var _P=yP;function xP(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var bP=xP,wP=Cf,SP="__lodash_hash_undefined__",CP=Object.prototype,TP=CP.hasOwnProperty;function EP(n){var e=this.__data__;if(wP){var t=e[n];return t===SP?void 0:t}return TP.call(e,n)?e[n]:void 0}var MP=EP,AP=Cf,OP=Object.prototype,PP=OP.hasOwnProperty;function LP(n){var e=this.__data__;return AP?e[n]!==void 0:PP.call(e,n)}var RP=LP,DP=Cf,IP="__lodash_hash_undefined__";function kP(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=DP&&e===void 0?IP:e,this}var FP=kP,NP=_P,BP=bP,zP=MP,jP=RP,UP=FP;function Io(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Io.prototype.clear=NP;Io.prototype.delete=BP;Io.prototype.get=zP;Io.prototype.has=jP;Io.prototype.set=UP;var $P=Io;function HP(){this.__data__=[],this.size=0}var VP=HP;function GP(n,e){return n===e||n!==n&&e!==e}var kc=GP,WP=kc;function XP(n,e){for(var t=n.length;t--;)if(WP(n[t][0],e))return t;return-1}var Tf=XP,YP=Tf,KP=Array.prototype,qP=KP.splice;function ZP(n){var e=this.__data__,t=YP(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():qP.call(e,t,1),--this.size,!0}var JP=ZP,QP=Tf;function e3(n){var e=this.__data__,t=QP(e,n);return t<0?void 0:e[t][1]}var t3=e3,n3=Tf;function i3(n){return n3(this.__data__,n)>-1}var r3=i3,s3=Tf;function a3(n,e){var t=this.__data__,i=s3(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var o3=a3,l3=VP,c3=JP,u3=t3,h3=r3,f3=o3;function ko(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}ko.prototype.clear=l3;ko.prototype.delete=c3;ko.prototype.get=u3;ko.prototype.has=h3;ko.prototype.set=f3;var Ef=ko,d3=Ws,p3=Mi,g3=d3(p3,"Map"),uv=g3,c_=$P,m3=Ef,v3=uv;function y3(){this.size=0,this.__data__={hash:new c_,map:new(v3||m3),string:new c_}}var _3=y3;function x3(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var b3=x3,w3=b3;function S3(n,e){var t=n.__data__;return w3(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Mf=S3,C3=Mf;function T3(n){var e=C3(this,n).delete(n);return this.size-=e?1:0,e}var E3=T3,M3=Mf;function A3(n){return M3(this,n).get(n)}var O3=A3,P3=Mf;function L3(n){return P3(this,n).has(n)}var R3=L3,D3=Mf;function I3(n,e){var t=D3(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var k3=I3,F3=_3,N3=E3,B3=O3,z3=R3,j3=k3;function Fo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Fo.prototype.clear=F3;Fo.prototype.delete=N3;Fo.prototype.get=B3;Fo.prototype.has=z3;Fo.prototype.set=j3;var hv=Fo,pC=hv,U3="Expected a function";function fv(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(U3);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var f=n.apply(this,i);return t.cache=s.set(r,f)||s,f};return t.cache=new(fv.Cache||pC),t}fv.Cache=pC;var $3=fv,H3=$3,V3=500;function G3(n){var e=H3(n,function(i){return t.size===V3&&t.clear(),i}),t=e.cache;return e}var W3=G3,X3=W3,Y3=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K3=/\\(\\)?/g,q3=X3(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Y3,function(t,i,r,s){e.push(r?s.replace(K3,"$1"):i||t)}),e}),Z3=q3;function J3(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var dv=J3,u_=Do,Q3=dv,eL=xn,tL=Sf,nL=1/0,h_=u_?u_.prototype:void 0,f_=h_?h_.toString:void 0;function gC(n){if(typeof n=="string")return n;if(eL(n))return Q3(n,gC)+"";if(tL(n))return f_?f_.call(n):"";var e=n+"";return e=="0"&&1/n==-nL?"-0":e}var iL=gC,rL=iL;function sL(n){return n==null?"":rL(n)}var aL=sL,oL=xn,lL=cv,cL=Z3,uL=aL;function hL(n,e){return oL(n)?n:lL(n,e)?[n]:cL(uL(n))}var No=hL,fL=Sf,dL=1/0;function pL(n){if(typeof n=="string"||fL(n))return n;var e=n+"";return e=="0"&&1/n==-dL?"-0":e}var Bo=pL,gL=No,mL=Bo;function vL(n,e){e=gL(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[mL(e[t++])];return t&&t==i?n:void 0}var Af=vL,yL=Af;function _L(n,e,t){var i=n==null?void 0:yL(n,e);return i===void 0?t:i}var st=_L;const xL=function(n){if(st(process,"env.NODE_ENV")==="development"){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];console.log(n,...t)}},mC=xL;class pv{constructor(e){this._adapter=Object.assign(Object.assign({},pv.defaultAdapter),e)}static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:Ke,getProps:Ke,getState:Ke,getStates:Ke,setState:Ke,getContext:Ke,getContexts:Ke,getCache:Ke,setCache:Ke,getCaches:Ke,stopPropagation:Ke,persistEvent:Ke}}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,t){return this._adapter.setState(Object.assign({},e),t)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,t){return e&&this._adapter.setCache(e,t)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"value";const t=this.getProps();return e in t}_isInProps(e){const t=this.getProps();return e in t}init(e){}destroy(){}log(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];mC(e,...i)}_persistEvent(e){this._adapter.persistEvent(e)}}const Oi=pv,{hasOwnProperty:bL}=Object.prototype;class ln extends fe.Component{constructor(e){super(e),this.isControlled=t=>Boolean(t&&this.props&&typeof this.props=="object"&&bL.call(this.props,t)),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&typeof this.foundation.init=="function"&&this.foundation.init()}componentWillUnmount(){this.foundation&&typeof this.foundation.destroy=="function"&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,t)=>this.setState(Object.assign({},e),t),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,t)=>e&&(this.cache[e]=t),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch{}},persistEvent:e=>{e&&e.persist&&typeof e.persist=="function"&&e.persist()}}}log(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return mC(e,...i)}}ln.propTypes={};ln.defaultProps={};const Of={PREFIX:`${We}-typography`},mn={TYPE:["primary","secondary","danger","warning","success","tertiary","quaternary"],SIZE:["normal","small"],SPACING:["normal","extended"],HEADING:[1,2,3,4,5,6],RULE:["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"],TRUNCATE:["ceil","floor","round"]};var wL=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const SL=Of.PREFIX;let gv=class extends fe.PureComponent{render(){const e=this.props,{component:t,className:i,children:r,forwardRef:s}=e,f=wL(e,["component","className","children","forwardRef"]),o=t,a=Ne(SL,i);return E.createElement(o,Object.assign({className:a,ref:s},f),r)}};gv.defaultProps={component:"article",style:{},className:""};gv.propTypes={component:C.string,style:C.object,className:C.string};const vC=gv;var CL=es,TL=xn,EL=Ai,ML="[object String]";function AL(n){return typeof n=="string"||!TL(n)&&EL(n)&&CL(n)==ML}var or=AL,OL=Ef;function PL(){this.__data__=new OL,this.size=0}var LL=PL;function RL(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var DL=RL;function IL(n){return this.__data__.get(n)}var kL=IL;function FL(n){return this.__data__.has(n)}var NL=FL,BL=Ef,zL=uv,jL=hv,UL=200;function $L(n,e){var t=this.__data__;if(t instanceof BL){var i=t.__data__;if(!zL||i.length<UL-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new jL(i)}return t.set(n,e),this.size=t.size,this}var HL=$L,VL=Ef,GL=LL,WL=DL,XL=kL,YL=NL,KL=HL;function zo(n){var e=this.__data__=new VL(n);this.size=e.size}zo.prototype.clear=GL;zo.prototype.delete=WL;zo.prototype.get=XL;zo.prototype.has=YL;zo.prototype.set=KL;var Pf=zo,qL=Ws,ZL=function(){try{var n=qL(Object,"defineProperty");return n({},"",{}),n}catch{}}(),yC=ZL,d_=yC;function JL(n,e,t){e=="__proto__"&&d_?d_(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var mv=JL,QL=mv,eR=kc;function tR(n,e,t){(t!==void 0&&!eR(n[e],t)||t===void 0&&!(e in n))&&QL(n,e,t)}var _C=tR;function nR(n){return function(e,t,i){for(var r=-1,s=Object(e),f=i(e),o=f.length;o--;){var a=f[n?o:++r];if(t(s[a],a,s)===!1)break}return e}}var iR=nR,rR=iR,sR=rR(),xC=sR,mc={},aR={get exports(){return mc},set exports(n){mc=n}};(function(n,e){var t=Mi,i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===i,f=s?t.Buffer:void 0,o=f?f.allocUnsafe:void 0;function a(c,d){if(d)return c.slice();var l=c.length,u=o?o(l):new c.constructor(l);return c.copy(u),u}n.exports=a})(aR,mc);var oR=Mi,lR=oR.Uint8Array,bC=lR,p_=bC;function cR(n){var e=new n.constructor(n.byteLength);return new p_(e).set(new p_(n)),e}var vv=cR,uR=vv;function hR(n,e){var t=e?uR(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var wC=hR;function fR(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var SC=fR,dR=Zn,g_=Object.create,pR=function(){function n(){}return function(e){if(!dR(e))return{};if(g_)return g_(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),gR=pR;function mR(n,e){return function(t){return n(e(t))}}var CC=mR,vR=CC,yR=vR(Object.getPrototypeOf,Object),yv=yR,_R=Object.prototype;function xR(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||_R;return n===t}var Lf=xR,bR=gR,wR=yv,SR=Lf;function CR(n){return typeof n.constructor=="function"&&!SR(n)?bR(wR(n)):{}}var TC=CR,TR=es,ER=Ai,MR="[object Arguments]";function AR(n){return ER(n)&&TR(n)==MR}var OR=AR,m_=OR,PR=Ai,EC=Object.prototype,LR=EC.hasOwnProperty,RR=EC.propertyIsEnumerable,DR=m_(function(){return arguments}())?m_:function(n){return PR(n)&&LR.call(n,"callee")&&!RR.call(n,"callee")},Fc=DR,IR=9007199254740991;function kR(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=IR}var _v=kR,FR=Bn,NR=_v;function BR(n){return n!=null&&NR(n.length)&&!FR(n)}var Xs=BR,zR=Xs,jR=Ai;function UR(n){return jR(n)&&zR(n)}var $R=UR,Wr={},HR={get exports(){return Wr},set exports(n){Wr=n}};function VR(){return!1}var GR=VR;(function(n,e){var t=Mi,i=GR,r=e&&!e.nodeType&&e,s=r&&!0&&n&&!n.nodeType&&n,f=s&&s.exports===r,o=f?t.Buffer:void 0,a=o?o.isBuffer:void 0,c=a||i;n.exports=c})(HR,Wr);var WR=es,XR=yv,YR=Ai,KR="[object Object]",qR=Function.prototype,ZR=Object.prototype,MC=qR.toString,JR=ZR.hasOwnProperty,QR=MC.call(Object);function eD(n){if(!YR(n)||WR(n)!=KR)return!1;var e=XR(n);if(e===null)return!0;var t=JR.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&MC.call(t)==QR}var xv=eD,tD=es,nD=_v,iD=Ai,rD="[object Arguments]",sD="[object Array]",aD="[object Boolean]",oD="[object Date]",lD="[object Error]",cD="[object Function]",uD="[object Map]",hD="[object Number]",fD="[object Object]",dD="[object RegExp]",pD="[object Set]",gD="[object String]",mD="[object WeakMap]",vD="[object ArrayBuffer]",yD="[object DataView]",_D="[object Float32Array]",xD="[object Float64Array]",bD="[object Int8Array]",wD="[object Int16Array]",SD="[object Int32Array]",CD="[object Uint8Array]",TD="[object Uint8ClampedArray]",ED="[object Uint16Array]",MD="[object Uint32Array]",bt={};bt[_D]=bt[xD]=bt[bD]=bt[wD]=bt[SD]=bt[CD]=bt[TD]=bt[ED]=bt[MD]=!0;bt[rD]=bt[sD]=bt[vD]=bt[aD]=bt[yD]=bt[oD]=bt[lD]=bt[cD]=bt[uD]=bt[hD]=bt[fD]=bt[dD]=bt[pD]=bt[gD]=bt[mD]=!1;function AD(n){return iD(n)&&nD(n.length)&&!!bt[tD(n)]}var OD=AD;function PD(n){return function(e){return n(e)}}var bv=PD,_o={},LD={get exports(){return _o},set exports(n){_o=n}};(function(n,e){var t=cC,i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===i,f=s&&t.process,o=function(){try{var a=r&&r.require&&r.require("util").types;return a||f&&f.binding&&f.binding("util")}catch{}}();n.exports=o})(LD,_o);var RD=OD,DD=bv,v_=_o,y_=v_&&v_.isTypedArray,ID=y_?DD(y_):RD,Rf=ID;function kD(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var AC=kD,FD=mv,ND=kc,BD=Object.prototype,zD=BD.hasOwnProperty;function jD(n,e,t){var i=n[e];(!(zD.call(n,e)&&ND(i,t))||t===void 0&&!(e in n))&&FD(n,e,t)}var wv=jD,UD=wv,$D=mv;function HD(n,e,t,i){var r=!t;t||(t={});for(var s=-1,f=e.length;++s<f;){var o=e[s],a=i?i(t[o],n[o],o,t,n):void 0;a===void 0&&(a=n[o]),r?$D(t,o,a):UD(t,o,a)}return t}var jo=HD;function VD(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var GD=VD,WD=9007199254740991,XD=/^(?:0|[1-9]\d*)$/;function YD(n,e){var t=typeof n;return e=e??WD,!!e&&(t=="number"||t!="symbol"&&XD.test(n))&&n>-1&&n%1==0&&n<e}var Df=YD,KD=GD,qD=Fc,ZD=xn,JD=Wr,QD=Df,eI=Rf,tI=Object.prototype,nI=tI.hasOwnProperty;function iI(n,e){var t=ZD(n),i=!t&&qD(n),r=!t&&!i&&JD(n),s=!t&&!i&&!r&&eI(n),f=t||i||r||s,o=f?KD(n.length,String):[],a=o.length;for(var c in n)(e||nI.call(n,c))&&!(f&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||QD(c,a)))&&o.push(c);return o}var OC=iI;function rI(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var sI=rI,aI=Zn,oI=Lf,lI=sI,cI=Object.prototype,uI=cI.hasOwnProperty;function hI(n){if(!aI(n))return lI(n);var e=oI(n),t=[];for(var i in n)i=="constructor"&&(e||!uI.call(n,i))||t.push(i);return t}var fI=hI,dI=OC,pI=fI,gI=Xs;function mI(n){return gI(n)?dI(n,!0):pI(n)}var Nc=mI,vI=jo,yI=Nc;function _I(n){return vI(n,yI(n))}var xI=_I,__=_C,bI=mc,wI=wC,SI=SC,CI=TC,x_=Fc,b_=xn,TI=$R,EI=Wr,MI=Bn,AI=Zn,OI=xv,PI=Rf,w_=AC,LI=xI;function RI(n,e,t,i,r,s,f){var o=w_(n,t),a=w_(e,t),c=f.get(a);if(c){__(n,t,c);return}var d=s?s(o,a,t+"",n,e,f):void 0,l=d===void 0;if(l){var u=b_(a),h=!u&&EI(a),g=!u&&!h&&PI(a);d=a,u||h||g?b_(o)?d=o:TI(o)?d=SI(o):h?(l=!1,d=bI(a,!0)):g?(l=!1,d=wI(a,!0)):d=[]:OI(a)||x_(a)?(d=o,x_(o)?d=LI(o):(!AI(o)||MI(o))&&(d=CI(a))):l=!1}l&&(f.set(a,d),r(d,a,i,s,f),f.delete(a)),__(n,t,d)}var DI=RI,II=Pf,kI=_C,FI=xC,NI=DI,BI=Zn,zI=Nc,jI=AC;function PC(n,e,t,i,r){n!==e&&FI(e,function(s,f){if(r||(r=new II),BI(s))NI(n,e,f,t,PC,i,r);else{var o=i?i(jI(n,f),s,f+"",n,e,r):void 0;o===void 0&&(o=s),kI(n,f,o)}},zI)}var UI=PC;function $I(n){return n}var If=$I;function HI(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var VI=HI,GI=VI,S_=Math.max;function WI(n,e,t){return e=S_(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=S_(i.length-e,0),f=Array(s);++r<s;)f[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=t(f),GI(n,this,o)}}var LC=WI;function XI(n){return function(){return n}}var YI=XI,KI=YI,C_=yC,qI=If,ZI=C_?function(n,e){return C_(n,"toString",{configurable:!0,enumerable:!1,value:KI(e),writable:!0})}:qI,JI=ZI,QI=800,e5=16,t5=Date.now;function n5(n){var e=0,t=0;return function(){var i=t5(),r=e5-(i-t);if(t=i,r>0){if(++e>=QI)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var i5=n5,r5=JI,s5=i5,a5=s5(r5),RC=a5,o5=If,l5=LC,c5=RC;function u5(n,e){return c5(l5(n,e,o5),n+"")}var h5=u5,f5=kc,d5=Xs,p5=Df,g5=Zn;function m5(n,e,t){if(!g5(t))return!1;var i=typeof e;return(i=="number"?d5(t)&&p5(e,t.length):i=="string"&&e in t)?f5(t[e],n):!1}var v5=m5,y5=h5,_5=v5;function x5(n){return y5(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,f=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,f&&_5(t[0],t[1],f)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=t[i];o&&n(e,o,i,s)}return e})}var b5=x5,w5=UI,S5=b5,C5=S5(function(n,e,t){w5(n,e,t)}),T5=C5;const E5=T5;function M5(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var DC=M5,A5=CC,O5=A5(Object.keys,Object),P5=O5,L5=Lf,R5=P5,D5=Object.prototype,I5=D5.hasOwnProperty;function k5(n){if(!L5(n))return R5(n);var e=[];for(var t in Object(n))I5.call(n,t)&&t!="constructor"&&e.push(t);return e}var IC=k5,F5=OC,N5=IC,B5=Xs;function z5(n){return B5(n)?F5(n):N5(n)}var Bc=z5,j5=jo,U5=Bc;function $5(n,e){return n&&j5(e,U5(e),n)}var H5=$5,V5=jo,G5=Nc;function W5(n,e){return n&&V5(e,G5(e),n)}var X5=W5;function Y5(n,e){for(var t=-1,i=n==null?0:n.length,r=0,s=[];++t<i;){var f=n[t];e(f,t,n)&&(s[r++]=f)}return s}var K5=Y5;function q5(){return[]}var kC=q5,Z5=K5,J5=kC,Q5=Object.prototype,ek=Q5.propertyIsEnumerable,T_=Object.getOwnPropertySymbols,tk=T_?function(n){return n==null?[]:(n=Object(n),Z5(T_(n),function(e){return ek.call(n,e)}))}:J5,Sv=tk,nk=jo,ik=Sv;function rk(n,e){return nk(n,ik(n),e)}var sk=rk;function ak(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var Cv=ak,ok=Cv,lk=yv,ck=Sv,uk=kC,hk=Object.getOwnPropertySymbols,fk=hk?function(n){for(var e=[];n;)ok(e,ck(n)),n=lk(n);return e}:uk,FC=fk,dk=jo,pk=FC;function gk(n,e){return dk(n,pk(n),e)}var mk=gk,vk=Cv,yk=xn;function _k(n,e,t){var i=e(n);return yk(n)?i:vk(i,t(n))}var NC=_k,xk=NC,bk=Sv,wk=Bc;function Sk(n){return xk(n,wk,bk)}var BC=Sk,Ck=NC,Tk=FC,Ek=Nc;function Mk(n){return Ck(n,Ek,Tk)}var zC=Mk,Ak=Ws,Ok=Mi,Pk=Ak(Ok,"DataView"),Lk=Pk,Rk=Ws,Dk=Mi,Ik=Rk(Dk,"Promise"),kk=Ik,Fk=Ws,Nk=Mi,Bk=Fk(Nk,"Set"),zk=Bk,jk=Ws,Uk=Mi,$k=jk(Uk,"WeakMap"),Hk=$k,Ng=Lk,Bg=uv,zg=kk,jg=zk,Ug=Hk,jC=es,Uo=dC,E_="[object Map]",Vk="[object Object]",M_="[object Promise]",A_="[object Set]",O_="[object WeakMap]",P_="[object DataView]",Gk=Uo(Ng),Wk=Uo(Bg),Xk=Uo(zg),Yk=Uo(jg),Kk=Uo(Ug),ds=jC;(Ng&&ds(new Ng(new ArrayBuffer(1)))!=P_||Bg&&ds(new Bg)!=E_||zg&&ds(zg.resolve())!=M_||jg&&ds(new jg)!=A_||Ug&&ds(new Ug)!=O_)&&(ds=function(n){var e=jC(n),t=e==Vk?n.constructor:void 0,i=t?Uo(t):"";if(i)switch(i){case Gk:return P_;case Wk:return E_;case Xk:return M_;case Yk:return A_;case Kk:return O_}return e});var zc=ds,qk=Object.prototype,Zk=qk.hasOwnProperty;function Jk(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Zk.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Qk=Jk,e4=vv;function t4(n,e){var t=e?e4(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var n4=t4,i4=/\w*$/;function r4(n){var e=new n.constructor(n.source,i4.exec(n));return e.lastIndex=n.lastIndex,e}var s4=r4,L_=Do,R_=L_?L_.prototype:void 0,D_=R_?R_.valueOf:void 0;function a4(n){return D_?Object(D_.call(n)):{}}var o4=a4,l4=vv,c4=n4,u4=s4,h4=o4,f4=wC,d4="[object Boolean]",p4="[object Date]",g4="[object Map]",m4="[object Number]",v4="[object RegExp]",y4="[object Set]",_4="[object String]",x4="[object Symbol]",b4="[object ArrayBuffer]",w4="[object DataView]",S4="[object Float32Array]",C4="[object Float64Array]",T4="[object Int8Array]",E4="[object Int16Array]",M4="[object Int32Array]",A4="[object Uint8Array]",O4="[object Uint8ClampedArray]",P4="[object Uint16Array]",L4="[object Uint32Array]";function R4(n,e,t){var i=n.constructor;switch(e){case b4:return l4(n);case d4:case p4:return new i(+n);case w4:return c4(n,t);case S4:case C4:case T4:case E4:case M4:case A4:case O4:case P4:case L4:return f4(n,t);case g4:return new i;case m4:case _4:return new i(n);case v4:return u4(n);case y4:return new i;case x4:return h4(n)}}var D4=R4,I4=zc,k4=Ai,F4="[object Map]";function N4(n){return k4(n)&&I4(n)==F4}var B4=N4,z4=B4,j4=bv,I_=_o,k_=I_&&I_.isMap,U4=k_?j4(k_):z4,$4=U4,H4=zc,V4=Ai,G4="[object Set]";function W4(n){return V4(n)&&H4(n)==G4}var X4=W4,Y4=X4,K4=bv,F_=_o,N_=F_&&F_.isSet,q4=N_?K4(N_):Y4,Z4=q4,J4=Pf,Q4=DC,eF=wv,tF=H5,nF=X5,iF=mc,rF=SC,sF=sk,aF=mk,oF=BC,lF=zC,cF=zc,uF=Qk,hF=D4,fF=TC,dF=xn,pF=Wr,gF=$4,mF=Zn,vF=Z4,yF=Bc,_F=Nc,xF=1,bF=2,wF=4,UC="[object Arguments]",SF="[object Array]",CF="[object Boolean]",TF="[object Date]",EF="[object Error]",$C="[object Function]",MF="[object GeneratorFunction]",AF="[object Map]",OF="[object Number]",HC="[object Object]",PF="[object RegExp]",LF="[object Set]",RF="[object String]",DF="[object Symbol]",IF="[object WeakMap]",kF="[object ArrayBuffer]",FF="[object DataView]",NF="[object Float32Array]",BF="[object Float64Array]",zF="[object Int8Array]",jF="[object Int16Array]",UF="[object Int32Array]",$F="[object Uint8Array]",HF="[object Uint8ClampedArray]",VF="[object Uint16Array]",GF="[object Uint32Array]",yt={};yt[UC]=yt[SF]=yt[kF]=yt[FF]=yt[CF]=yt[TF]=yt[NF]=yt[BF]=yt[zF]=yt[jF]=yt[UF]=yt[AF]=yt[OF]=yt[HC]=yt[PF]=yt[LF]=yt[RF]=yt[DF]=yt[$F]=yt[HF]=yt[VF]=yt[GF]=!0;yt[EF]=yt[$C]=yt[IF]=!1;function dh(n,e,t,i,r,s){var f,o=e&xF,a=e&bF,c=e&wF;if(t&&(f=r?t(n,i,r,s):t(n)),f!==void 0)return f;if(!mF(n))return n;var d=dF(n);if(d){if(f=uF(n),!o)return rF(n,f)}else{var l=cF(n),u=l==$C||l==MF;if(pF(n))return iF(n,o);if(l==HC||l==UC||u&&!r){if(f=a||u?{}:fF(n),!o)return a?aF(n,nF(f,n)):sF(n,tF(f,n))}else{if(!yt[l])return r?n:{};f=hF(n,l,o)}}s||(s=new J4);var h=s.get(n);if(h)return h;s.set(n,f),vF(n)?n.forEach(function(p){f.add(dh(p,e,t,p,n,s))}):gF(n)&&n.forEach(function(p,v){f.set(v,dh(p,e,t,v,n,s))});var g=c?a?lF:oF:a?_F:yF,m=d?void 0:g(n);return Q4(m||n,function(p,v){m&&(v=p,p=n[v]),eF(f,v,dh(p,e,t,v,n,s))}),f}var Tv=dh;function WF(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var XF=WF;function YF(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+e];return s}var KF=YF,qF=Af,ZF=KF;function JF(n,e){return e.length<2?n:qF(n,ZF(e,0,-1))}var QF=JF,eN=No,tN=XF,nN=QF,iN=Bo;function rN(n,e){return e=eN(e,n),n=nN(n,e),n==null||delete n[iN(tN(e))]}var sN=rN,aN=xv;function oN(n){return aN(n)?void 0:n}var lN=oN,B_=Do,cN=Fc,uN=xn,z_=B_?B_.isConcatSpreadable:void 0;function hN(n){return uN(n)||cN(n)||!!(z_&&n&&n[z_])}var fN=hN,dN=Cv,pN=fN;function VC(n,e,t,i,r){var s=-1,f=n.length;for(t||(t=pN),r||(r=[]);++s<f;){var o=n[s];e>0&&t(o)?e>1?VC(o,e-1,t,i,r):dN(r,o):i||(r[r.length]=o)}return r}var gN=VC,mN=gN;function vN(n){var e=n==null?0:n.length;return e?mN(n,1):[]}var yN=vN,_N=yN,xN=LC,bN=RC;function wN(n){return bN(xN(n,void 0,_N),n+"")}var GC=wN,SN=dv,CN=Tv,TN=sN,EN=No,MN=jo,AN=lN,ON=GC,PN=zC,LN=1,RN=2,DN=4,IN=ON(function(n,e){var t={};if(n==null)return t;var i=!1;e=SN(e,function(s){return s=EN(s,n),i||(i=s.length>1),s}),MN(n,PN(n),t),i&&(t=CN(t,LN|RN|DN,AN));for(var r=e.length;r--;)TN(t,e[r]);return t}),kN=IN;const Ev=kN;function FN(n){return n===void 0}var NN=FN;const Rl=NN;var BN="__lodash_hash_undefined__";function zN(n){return this.__data__.set(n,BN),this}var jN=zN;function UN(n){return this.__data__.has(n)}var $N=UN,HN=hv,VN=jN,GN=$N;function Wh(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new HN;++e<t;)this.add(n[e])}Wh.prototype.add=Wh.prototype.push=VN;Wh.prototype.has=GN;var WN=Wh;function XN(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}var YN=XN;function KN(n,e){return n.has(e)}var qN=KN,ZN=WN,JN=YN,QN=qN,eB=1,tB=2;function nB(n,e,t,i,r,s){var f=t&eB,o=n.length,a=e.length;if(o!=a&&!(f&&a>o))return!1;var c=s.get(n),d=s.get(e);if(c&&d)return c==e&&d==n;var l=-1,u=!0,h=t&tB?new ZN:void 0;for(s.set(n,e),s.set(e,n);++l<o;){var g=n[l],m=e[l];if(i)var p=f?i(m,g,l,e,n,s):i(g,m,l,n,e,s);if(p!==void 0){if(p)continue;u=!1;break}if(h){if(!JN(e,function(v,y){if(!QN(h,y)&&(g===v||r(g,v,t,i,s)))return h.push(y)})){u=!1;break}}else if(!(g===m||r(g,m,t,i,s))){u=!1;break}}return s.delete(n),s.delete(e),u}var WC=nB;function iB(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}var rB=iB;function sB(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var aB=sB,j_=Do,U_=bC,oB=kc,lB=WC,cB=rB,uB=aB,hB=1,fB=2,dB="[object Boolean]",pB="[object Date]",gB="[object Error]",mB="[object Map]",vB="[object Number]",yB="[object RegExp]",_B="[object Set]",xB="[object String]",bB="[object Symbol]",wB="[object ArrayBuffer]",SB="[object DataView]",$_=j_?j_.prototype:void 0,Bd=$_?$_.valueOf:void 0;function CB(n,e,t,i,r,s,f){switch(t){case SB:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case wB:return!(n.byteLength!=e.byteLength||!s(new U_(n),new U_(e)));case dB:case pB:case vB:return oB(+n,+e);case gB:return n.name==e.name&&n.message==e.message;case yB:case xB:return n==e+"";case mB:var o=cB;case _B:var a=i&hB;if(o||(o=uB),n.size!=e.size&&!a)return!1;var c=f.get(n);if(c)return c==e;i|=fB,f.set(n,e);var d=lB(o(n),o(e),i,r,s,f);return f.delete(n),d;case bB:if(Bd)return Bd.call(n)==Bd.call(e)}return!1}var TB=CB,H_=BC,EB=1,MB=Object.prototype,AB=MB.hasOwnProperty;function OB(n,e,t,i,r,s){var f=t&EB,o=H_(n),a=o.length,c=H_(e),d=c.length;if(a!=d&&!f)return!1;for(var l=a;l--;){var u=o[l];if(!(f?u in e:AB.call(e,u)))return!1}var h=s.get(n),g=s.get(e);if(h&&g)return h==e&&g==n;var m=!0;s.set(n,e),s.set(e,n);for(var p=f;++l<a;){u=o[l];var v=n[u],y=e[u];if(i)var _=f?i(y,v,u,e,n,s):i(v,y,u,n,e,s);if(!(_===void 0?v===y||r(v,y,t,i,s):_)){m=!1;break}p||(p=u=="constructor")}if(m&&!p){var x=n.constructor,b=e.constructor;x!=b&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof b=="function"&&b instanceof b)&&(m=!1)}return s.delete(n),s.delete(e),m}var PB=OB,zd=Pf,LB=WC,RB=TB,DB=PB,V_=zc,G_=xn,W_=Wr,IB=Rf,kB=1,X_="[object Arguments]",Y_="[object Array]",Cu="[object Object]",FB=Object.prototype,K_=FB.hasOwnProperty;function NB(n,e,t,i,r,s){var f=G_(n),o=G_(e),a=f?Y_:V_(n),c=o?Y_:V_(e);a=a==X_?Cu:a,c=c==X_?Cu:c;var d=a==Cu,l=c==Cu,u=a==c;if(u&&W_(n)){if(!W_(e))return!1;f=!0,d=!1}if(u&&!d)return s||(s=new zd),f||IB(n)?LB(n,e,t,i,r,s):RB(n,e,a,t,i,r,s);if(!(t&kB)){var h=d&&K_.call(n,"__wrapped__"),g=l&&K_.call(e,"__wrapped__");if(h||g){var m=h?n.value():n,p=g?e.value():e;return s||(s=new zd),r(m,p,t,i,s)}}return u?(s||(s=new zd),DB(n,e,t,i,r,s)):!1}var BB=NB,zB=BB,q_=Ai;function XC(n,e,t,i,r){return n===e?!0:n==null||e==null||!q_(n)&&!q_(e)?n!==n&&e!==e:zB(n,e,t,i,XC,r)}var Mv=XC,jB=Mv;function UB(n,e){return jB(n,e)}var Vi=UB,$B=IC,HB=zc,VB=Fc,GB=xn,WB=Xs,XB=Wr,YB=Lf,KB=Rf,qB="[object Map]",ZB="[object Set]",JB=Object.prototype,QB=JB.hasOwnProperty;function e6(n){if(n==null)return!0;if(WB(n)&&(GB(n)||typeof n=="string"||typeof n.splice=="function"||XB(n)||KB(n)||VB(n)))return!n.length;var e=HB(n);if(e==qB||e==ZB)return!n.size;if(YB(n))return!$B(n).length;for(var t in n)if(QB.call(n,t))return!1;return!0}var t6=e6;const Fi=t6;var $g={},n6={get exports(){return $g},set exports(n){$g=n}},i6=xC,r6=Bc;function s6(n,e){return n&&i6(n,e,r6)}var YC=s6,a6=Xs;function o6(n,e){return function(t,i){if(t==null)return t;if(!a6(t))return n(t,i);for(var r=t.length,s=e?r:-1,f=Object(t);(e?s--:++s<r)&&i(f[s],s,f)!==!1;);return t}}var l6=o6,c6=YC,u6=l6,h6=u6(c6),KC=h6,f6=If;function d6(n){return typeof n=="function"?n:f6}var qC=d6,p6=DC,g6=KC,m6=qC,v6=xn;function y6(n,e){var t=v6(n)?p6:g6;return t(n,m6(e))}var _6=y6;(function(n){n.exports=_6})(n6);const x6=pm($g);function vc(n,e){n&&console.warn(`Warning: ${e}`)}function Av(n){return n==null}class b6{constructor(){this._eventMap=new Map}on(e,t){return e&&typeof t=="function"&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var i=this;if(e&&typeof t=="function"){const r=function(){t(...arguments),i.off(e,r)};this.on(e,r)}}off(e,t){if(e)if(typeof t=="function"){const i=this._eventMap.get(e);if(Array.isArray(i)&&i.length){let r=-1;for(;(r=i.findIndex(s=>s===t))>-1;)i.splice(r,1)}}else Av(t)&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return this._eventMap.has(e)?(this._eventMap.get(e).forEach(s=>s(...i)),!0):!1}}function qa(n){try{return n instanceof HTMLElement}catch{return typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object"}}function w6(n){if(n&&typeof n=="object")return typeof n.toJSON=="function"?n.toJSON():["left","top","right","bottom","width","height"].reduce((t,i)=>(t[i]=n[i],t),{})}function Xr(n){n.stopPropagation(),n.preventDefault()}function S6(n){return n.length===1&&n.match(/\S/)}function jc(n,e){for(let t=0;t<n.length;t++)n[t]===e?(n[t].tabIndex=0,n[t].focus()):n[t].tabIndex=-1}function C6(n){n.length>0&&jc(n,n[0])}function T6(n){n.length>0&&jc(n,n[n.length-1])}function E6(n,e){let t,i;n.length>0&&(e===n[0]?t=n[n.length-1]:(i=n.indexOf(e),t=n[i-1]),jc(n,t))}function M6(n,e){let t,i;n.length>0&&(e===n[n.length-1]?t=n[0]:(i=n.indexOf(e),t=n[i+1]),jc(n,t))}function A6(n,e,t,i){let r,s;return!n||!t||!i||i.length>1?-1:(i=i.toLowerCase(),r=n.indexOf(e)+1,r>=n.length&&(r=0),s=t.indexOf(i,r),s===-1&&(s=t.indexOf(i,0)),s>=0?s:-1)}function O6(n,e){if(!n)return null;for(;n.parentElement&&st(n.parentElement,"attributes.role.value","")!==e;)n=n.parentElement;return n.parentElement}function P6(n,e){for(let t=0;t<n.length;t++){const i=n[t].attributes["data-popupid"];if(i&&i.value===e)return n[t]}return null}const Tu={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},ia={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};let L6=class extends Oi{constructor(e){var t;super(Object.assign({},e)),t=this,this.removePortal=()=>{this._adapter.removePortal()},this.onResize=()=>{this.calcPosition()},this.delayShow=()=>{const i=this.getProp("mouseEnterDelay");this.clearDelayTimer(),i>0?this._timer=setTimeout(()=>{this.show(),this.clearDelayTimer()},i):this.show()},this.show=()=>{const i=this.getProp("content"),r=this.getProp("trigger"),s=this.getProp("clickTriggerToHide"),{visible:f}=this.getStates();f||(this.clearDelayTimer(),this._adapter.on("portalInserted",()=>{this.calcPosition()}),this._adapter.on("positionUpdated",()=>{this._togglePortalVisible(!0)}),this._adapter.insertPortal(i,{left:-9999,top:-9999}),r==="custom"&&this._adapter.registerClickOutsideHandler(()=>{}),(r==="click"||s)&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent())},this.calcPosition=function(i,r,s){let f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;i=(Fi(i)?t._adapter.getTriggerBounding():i)||Object.assign({},ia),s=(Fi(s)?t._adapter.getPopupContainerRect():s)||Object.assign({},ia),r=(Fi(r)?t._adapter.getWrapperBounding():r)||Object.assign({},ia);let o=t.calcPosStyle({triggerRect:i,wrapperRect:r,containerRect:s}),a=t.getProp("position");if(t.getProp("autoAdjustOverflow")){const{position:c,isHeightOverFlow:d,isWidthOverFlow:l}=t.adjustPosIfNeed(a,o,i,r,s);(a!==c||d||l)&&(a=c,o=t.calcPosStyle({triggerRect:i,wrapperRect:r,containerRect:s,position:a,spacing:null,isOverFlow:[d,l]}))}return f&&t._mounted&&t._adapter.setPosition(Object.assign(Object.assign({},o),{position:a})),o},this.delayHide=()=>{const i=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),i>0?this._timer=setTimeout(()=>{this.hide(),this.clearDelayTimer()},i):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=i=>{const{guardFocus:r,closeOnEsc:s}=this.getProps();switch(i&&i.key){case"Escape":s&&this._handleEscKeyDown(i);break;case"Tab":if(r){const f=this._adapter.getContainer(),o=this._adapter.getFocusableElements(f);o.length&&(i.shiftKey?this._handleContainerShiftTabKeyDown(o,i):this._handleContainerTabKeyDown(o,i))}break}},this._timer=null}init(){const{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){const e=this.getProp("trigger"),{triggerEventSet:t,portalEventSet:i}=this._generateEvent(e);this._bindTriggerEvent(t),this._bindPortalEvent(i),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent()}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"reverse",r=arguments.length>3?arguments[3]:void 0;switch(i){case"reverse":return this._reversePos(e,t);case"expand":return this._expandPos(e,r);case"reduce":return this._reducePos(e);default:return this._reversePos(e,t)}}_reversePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){if(Tu.TOP.test(e))return e.replace("top","bottom").replace("Top","Bottom");if(Tu.BOTTOM.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else{if(Tu.LEFT.test(e))return e.replace("left","right").replace("Left","Right");if(Tu.RIGHT.test(e))return e.replace("right","left").replace("Right","Left")}return e}_expandPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.concat(t)}_reducePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const t=["Top","Bottom","Left","Right"].find(i=>e.endsWith(i));return t?e.replace(t,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){const t=this._adapter.getEventName(),i={[t.keydown]:s=>{this._handleTriggerKeydown(s)}};let r={};switch(e){case"focus":i[t.focus]=()=>{this.delayShow()},i[t.blur]=()=>{this.delayHide()},r=i;break;case"click":i[t.click]=()=>{this.show()},r={};break;case"hover":i[t.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},i[t.mouseLeave]=()=>{this.delayHide()},i[t.focus]=()=>{const{disableFocusListener:s}=this.getProps();!s&&this.delayShow()},i[t.blur]=()=>{const{disableFocusListener:s}=this.getProps();!s&&this.delayHide()},r=Object.assign({},i),this.getProp("clickToHide")&&(r[t.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},r[t.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break}return{triggerEventSet:i,portalEventSet:r}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){this.getState("visible")!==e&&this._adapter.togglePortalVisible(e,()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)})}_roundPixel(e){return typeof e=="number"?Math.round(e):e}calcTransformOrigin(e,t,i,r){if(e&&t&&i!=null&&r!=null){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return`${this._roundPixel(t.width/2)}px ${-r*100}%`;if(["topRight","bottomRight"].includes(e))return`calc(100% - ${this._roundPixel(t.width/2)}px) ${-r*100}%`;if(["leftTop","rightTop"].includes(e))return`${-i*100}% ${this._roundPixel(t.height/2)}px`;if(["leftBottom","rightBottom"].includes(e))return`${-i*100}% calc(100% - ${this._roundPixel(t.height/2)}px)`}return`${-i*100}% ${-r*100}%`}return null}calcPosStyle(e){const{spacing:t,isOverFlow:i}=e,r=(Fi(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},ia),s=(Fi(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},ia),f=(Fi(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},ia),o=e.position!=null?e.position:this.getProp("position"),a=t??this.getProp("spacing"),{arrowPointAtCenter:c,showArrow:d,arrowBounding:l}=this.getProps(),u=d&&c,h=st(l,"width",24),g=st(l,"width",24),m=st(l,"offsetY",0),p=6,v=6;let y,_,x=0,b=0;const w=r.left+r.width/2,T=r.top+r.height/2,S=p+h/2,O=v+g/2,N=f.height-s.height,V=f.width-s.width,Z=N>0?N:0,j=V>0?V:0,z=i&&i[0],G=i&&i[1],ne=w-s.left<s.right-w,re=T-s.top<s.bottom-T;switch(o){case"top":y=G?ne?s.left+f.width/2:s.right-f.width/2+j:w,_=z?s.bottom+Z:r.top-a,x=-.5,b=-1;break;case"topLeft":y=G?s.left:u?w-S:r.left,_=z?s.bottom+Z:r.top-a,b=-1;break;case"topRight":y=G?s.right+j:u?w+S:r.right,_=z?s.bottom+Z:r.top-a,b=-1,x=-1;break;case"left":y=G?s.right+j-a+S:r.left-a,_=z?re?s.top+f.height/2:s.bottom-f.height/2+Z:T,x=-1,b=-.5;break;case"leftTop":y=G?s.right+j-a+S:r.left-a,_=z?s.top:u?T-O:r.top,x=-1;break;case"leftBottom":y=G?s.right+j-a+S:r.left-a,_=z?s.bottom+Z:u?T+O:r.bottom,x=-1,b=-1;break;case"bottom":y=G?ne?s.left+f.width/2:s.right-f.width/2+j:w,_=z?s.top+O-a:r.top+r.height+a,x=-.5;break;case"bottomLeft":y=G?s.left:u?w-S:r.left,_=z?s.top+O-a:r.top+r.height+a;break;case"bottomRight":y=G?s.right+j:u?w+S:r.right,_=z?s.top+O-a:r.top+r.height+a,x=-1;break;case"right":y=G?s.left-a+S:r.right+a,_=z?re?s.top+f.height/2:s.bottom-f.height/2+Z:T,b=-.5;break;case"rightTop":y=G?s.left-a+S:r.right+a,_=z?s.top:u?T-O:r.top;break;case"rightBottom":y=G?s.left-a+S:r.right+a,_=z?s.bottom+Z:u?T+O:r.bottom,b=-1;break;case"leftTopOver":y=r.left-a,_=r.top-a;break;case"rightTopOver":y=r.right+a,_=r.top-a,x=-1;break;case"leftBottomOver":y=r.left-a,_=r.bottom+a,b=-1;break;case"rightBottomOver":y=r.right+a,_=r.bottom+a,x=-1,b=-1;break}const U=this.calcTransformOrigin(o,r,x,b),M=this._adapter.containerIsBody();if(y=y-s.left,_=_-s.top,M&&!this._adapter.containerIsRelativeOrAbsolute()){const H=this._adapter.getDocumentElementBounding();y+=s.left-H.left,_+=s.top-H.top}y=M?y:y+s.scrollLeft,_=M?_:_+s.scrollTop;const D=r.height;if(this.getProp("showArrow")&&!c&&D<=(g/2+m)*2){const H=D/2-(m+g/2);(o.includes("Top")||o.includes("Bottom"))&&!o.includes("Over")&&(_=o.includes("Top")?_+H:_-H)}const P={left:this._roundPixel(y),top:this._roundPixel(_)};let L="";return x!=null&&(L+=`translateX(${x*100}%) `,Object.defineProperty(P,"translateX",{enumerable:!1,value:x})),b!=null&&(L+=`translateY(${b*100}%) `,Object.defineProperty(P,"translateY",{enumerable:!1,value:b})),U!=null&&(P.transformOrigin=U),L&&(P.transform=L),P}isLR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,t,i){return e<i&&t>i}isOverFlow(e,t,i){return e<i&&t<i}isHalfOverFlow(e,t,i){return e<i||t<i}isHalfAllEnough(e,t,i){return e>=i||t>=i}getReverse(e,t,i,r){return e&&r||i&&t||i&&r}adjustPosIfNeed(e,t,i,r,s){const{innerWidth:f,innerHeight:o}=window,{spacing:a,margin:c}=this.getProps(),d=typeof c=="number"?c:c.marginLeft,l=typeof c=="number"?c:c.marginTop,u=typeof c=="number"?c:c.marginRight,h=typeof c=="number"?c:c.marginBottom;let g=!1,m=!1;if(r.width>0&&r.height>0){const p=i.left,v=i.right,y=i.top,_=i.bottom,x=f-p,b=o-y,w=f-v,T=o-_,S=r.width>i.width,O=r.height>i.height,N=y-l<r.height+a&&T-h>r.height+a,V=p-d<r.width+a&&w-u>r.width+a,Z=T-h<r.height+a&&y-l>r.height+a,j=w-u<r.width+a&&p-d>r.width+a;b-h<r.height+a&&_-l>r.height+a,_-l<r.height+a&&b-h>r.height+a;const z=b<r.height&&_>r.height,G=_<r.height&&b>r.height,ne=x<r.width&&v>r.width,re=v<r.width&&x>r.width,U=b<r.height+a&&_>r.height+a,M=_<r.height+a&&b>r.height+a,D=x<r.width&&v>r.width,P=v<r.width&&x>r.width,L=y-s.top,H=p-s.left,k=L+i.height,A=H+i.width,F=s.bottom-_,W=s.right-v,Y=F+i.height,X=W+i.width,ee=this.isReverse(L-l,F-h,r.height+a),he=this.isReverse(H-d,W-u,r.width+a),ge=this.isReverse(F-h,L-l,r.height+a),J=this.isReverse(W-u,H-d,r.width+a);this.isReverse(Y-h,k-l,r.height+a),this.isReverse(k-l,Y-h,r.height+a);const K=this.isReverse(Y,k,r.height),ce=this.isReverse(k,Y,r.height),ue=this.isReverse(X,A,r.width),ae=this.isReverse(A,X,r.width),le=i.height/2,ve=i.width/2,Ie=this.isOverFlow(y-l,T-h,r.height+a),Me=this.isOverFlow(p-d,w-u,r.width+a),R=this.isOverFlow(_-l,b-h,r.height+a),I=this.isOverFlow(v-d,x-u,r.width+a),ie=this.isHalfOverFlow(_-le,b-le,r.height/2),pe=this.isHalfOverFlow(v-ve,x-ve,r.width/2),_e=this.isHalfAllEnough(_-le,b-le,r.height/2),xe=this.isHalfAllEnough(v-ve,x-ve,r.width/2),Pe=this.isOverFlow(L-l,F-h,r.height+a),$=this.isOverFlow(H-d,W-u,r.width+a),te=this.isOverFlow(k-l,Y-h,r.height+a),Te=this.isOverFlow(A-d,X-u,r.width+a),Ce=this.isHalfOverFlow(k-le,Y-le,r.height/2),Ae=this.isHalfOverFlow(A-ve,X-ve,r.width/2),Re=this.isHalfAllEnough(k-le,Y-le,r.height/2),De=this.isHalfAllEnough(A-ve,X-ve,r.width/2),Ve=this.getReverse(Ie,Pe,N,ee),Xe=this.getReverse(Me,$,V,he),lt=this.getReverse(Ie,Pe,Z,ge),q=this.getReverse(Me,$,j,J),de=this.getReverse(R,te,z,K),we=this.getReverse(R,te,G,ce),Oe=this.getReverse(I,Te,ne,ue),ke=this.getReverse(I,Te,re,ae),rt=ie&&Ce,Rt=pe&&Ae;switch(e){case"top":Ve&&(e=this._adjustPos(e,!0)),Rt&&(Oe||ke)&&(e=this._adjustPos(e,!0,"expand",Oe?"Right":"Left"));break;case"topLeft":Ve&&(e=this._adjustPos(e,!0)),Oe&&S&&(e=this._adjustPos(e)),m&&(xe||De)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":Ve&&(e=this._adjustPos(e,!0)),ke&&S&&(e=this._adjustPos(e)),m&&(xe||De)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":Xe&&(e=this._adjustPos(e)),rt&&(de||we)&&(e=this._adjustPos(e,!1,"expand",de?"Bottom":"Top"));break;case"leftTop":Xe&&(e=this._adjustPos(e)),de&&O&&(e=this._adjustPos(e,!0)),g&&(_e||Re)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":Xe&&(e=this._adjustPos(e)),we&&O&&(e=this._adjustPos(e,!0)),g&&(_e||Re)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":lt&&(e=this._adjustPos(e,!0)),Rt&&(Oe||ke)&&(e=this._adjustPos(e,!0,"expand",Oe?"Right":"Left"));break;case"bottomLeft":lt&&(e=this._adjustPos(e,!0)),Oe&&S&&(e=this._adjustPos(e)),m&&(xe||De)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":lt&&(e=this._adjustPos(e,!0)),ke&&S&&(e=this._adjustPos(e)),m&&(xe||De)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":q&&(e=this._adjustPos(e)),rt&&(de||we)&&(e=this._adjustPos(e,!1,"expand",de?"Bottom":"Top"));break;case"rightTop":q&&(e=this._adjustPos(e)),de&&O&&(e=this._adjustPos(e,!0)),g&&(_e||Re)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":q&&(e=this._adjustPos(e)),we&&O&&(e=this._adjustPos(e,!0)),g&&(_e||Re)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":U&&(e=this._adjustPos(e,!0)),D&&(e=this._adjustPos(e));break;case"leftBottomOver":M&&(e=this._adjustPos(e,!0)),D&&(e=this._adjustPos(e));break;case"rightTopOver":U&&(e=this._adjustPos(e,!0)),P&&(e=this._adjustPos(e));break;case"rightBottomOver":M&&(e=this._adjustPos(e,!0)),P&&(e=this._adjustPos(e));break}this.isTB(e)&&(g=Ie&&Pe,e==="top"||e==="bottom"?m=pe&&Ae||v<0||w<0:m=I&&Te||v<0||w<0),this.isLR(e)&&(m=Me&&$,e==="left"||e==="right"?g=ie&&Ce||y<0||b<0:g=R&&te||y<0||b<0)}return{position:e,isHeightOverFlow:g,isWidthOverFlow:m}}_bindScrollEvent(){this._adapter.registerScrollHandler(()=>this.calcPosition())}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){const{closeOnEsc:t,disableArrowKeyDown:i}=this.getProps(),r=this._adapter.getContainer(),s=this._adapter.getFocusableElements(r),f=s.length;switch(e&&e.key){case"Escape":Xr(e),t&&this._handleEscKeyDown(e);break;case"ArrowUp":!i&&f&&this._handleTriggerArrowUpKeydown(s,e);break;case"ArrowDown":!i&&f&&this._handleTriggerArrowDownKeydown(s,e);break}}_focusTrigger(){const{trigger:e,returnFocusOnClose:t,preventScroll:i}=this.getProps();if(t&&e!=="custom"){const r=this._adapter.getTriggerNode();r&&"focus"in r&&r.focus({preventScroll:i})}}_handleEscKeyDown(e){const{trigger:t}=this.getProps();t!=="custom"&&(this._focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,t){const{preventScroll:i}=this.getProps(),r=this._adapter.getActiveElement();e[e.length-1]===r&&(e[0].focus({preventScroll:i}),t.preventDefault())}_handleContainerShiftTabKeyDown(e,t){const{preventScroll:i}=this.getProps(),r=this._adapter.getActiveElement();e[0]===r&&(e[e.length-1].focus({preventScroll:i}),t.preventDefault())}_handleTriggerArrowDownKeydown(e,t){const{preventScroll:i}=this.getProps();e[0].focus({preventScroll:i}),t.preventDefault()}_handleTriggerArrowUpKeydown(e,t){const{preventScroll:i}=this.getProps();e[e.length-1].focus({preventScroll:i}),t.preventDefault()}};const R6={PREFIX:`${We}-tooltip`},so={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},Mr={ARROW_BOUNDING:{offsetX:0,offsetY:2,width:24,height:7},DEFAULT_Z_INDEX:1060,MOUSE_ENTER_DELAY:50,MOUSE_LEAVE_DELAY:50,SPACING:8,MARGIN:0};function Xh(n){return`${n}-${new Date().getTime()}-${Math.random()}`}function D6(){var n,e;try{return(e=(n=crypto==null?void 0:crypto.randomUUID)===null||n===void 0?void 0:n.call(crypto))!==null&&e!==void 0?e:String(1e7+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(Number(t)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(t)/4).toString(16))}catch{return Xh("semi")}}function ZC(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{prefix:e="",length:t=7}=n,i="0123456789abcdefghijklmnopqrstuvwxyz",r=i.length;let s="";for(let f=0;f<t;f++){const o=Math.floor(Math.random()*r);s+=i.charAt(o)}return e?`${e}-${s}`:s}var I6=wv,k6=No,F6=Df,Z_=Zn,N6=Bo;function B6(n,e,t,i){if(!Z_(n))return n;e=k6(e,n);for(var r=-1,s=e.length,f=s-1,o=n;o!=null&&++r<s;){var a=N6(e[r]),c=t;if(a==="__proto__"||a==="constructor"||a==="prototype")return n;if(r!=f){var d=o[a];c=i?i(d,a,o):void 0,c===void 0&&(c=Z_(d)?d:F6(e[r+1])?[]:{})}I6(o,a,c),o=o[a]}return n}var JC=B6,z6=JC;function j6(n,e,t){return n==null?n:z6(n,e,t)}var QC=j6,U6=Tv,$6=1,H6=4;function V6(n,e){return e=typeof e=="function"?e:void 0,U6(n,$6|H6,e)}var G6=V6;function J_(n,e){n&&typeof n.stopPropagation=="function"&&n.stopPropagation(),!e&&n.nativeEvent&&typeof n.nativeEvent.stopImmediatePropagation=="function"&&n.nativeEvent.stopImmediatePropagation()}function Q_(n,e){return G6(n,t=>{if(typeof e=="function")return e(t);if(typeof t=="function"||E.isValidElement(t)||Object.prototype.toString.call(t)==="[object Error]")return t;if(Array.isArray(t)&&t.length===0){const i=Object.keys(t);if(i.length){const r=[];i.forEach(s=>{QC(r,s,t[s])});try{vc(st(process,"env.NODE_ENV")!=="production",`[Semi] You may use an out-of-bounds array. In some cases, your program may not behave as expected.
                    The maximum length of an array is 4294967295.
                    Please check whether the array subscript in your data exceeds the maximum value of the JS array subscript`)}catch{}return r}else return}})}const ys=n=>E.isValidElement(n)&&st(n.type,"elementType")==="Icon";function W6(){return document?document.activeElement:null}function X6(n){if(!qa(n))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(n.querySelectorAll(t))}const Y6=E.createContext({}),Uc=Y6,K6=()=>document.body;class kf extends fe.PureComponent{constructor(e){var t;super(e),t=this,this.addStyle=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.el)for(const r of Object.keys(i))t.el.style[r]=i[r]},this.addClass=function(i){const{direction:r}=t.context;for(var s=arguments.length,f=new Array(s>1?s-1:0),o=1;o<s;o++)f[o-1]=arguments[o];const a=Ne(i,...f,{[`${i}-rtl`]:r==="rtl"});t.el&&(t.el.className=a)};try{this.el=document.createElement("div")}catch{}this.state={container:void 0}}componentDidMount(){this.el||(this.el=document.createElement("div"));const{state:e,props:t,context:i}=this,s=(t.getPopupContainer||i.getPopupContainer||K6)();s!==e.container&&(s.appendChild(this.el),this.addStyle(t.style),this.addClass(t.prefixCls,t.className),this.setState({container:s}))}componentDidUpdate(e){const{didUpdate:t}=this.props;t&&t(e)}componentWillUnmount(){const{container:e}=this.state;e&&e.removeChild(this.el)}render(){const{state:e,props:t}=this;return e.container?uo.createPortal(t.children,this.el):null}}kf.contextType=Uc;kf.defaultProps={prefixCls:`${We}-portal`};kf.propTypes={children:C.node,prefixCls:C.string,getPopupContainer:C.func,className:C.string,didUpdate:C.func};const q6=kf;var Z6=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const J6=n=>{const{className:e,style:t}=n,i=Z6(n,["className","style"]);return E.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},i,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),E.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))},Q6=J6;var e8=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const t8=n=>{const{className:e,style:t}=n,i=e8(n,["className","style"]);return E.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},i,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),E.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},n8=t8,i8=C.shape({offsetX:C.number,offsetY:C.number,width:C.number,height:C.number});class eT extends E.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var t,i;(i=(t=this.props).onAnimationStart)===null||i===void 0||i.call(t)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},()=>{var t,i;(i=(t=this.props).onAnimationEnd)===null||i===void 0||i.call(t,!1)})},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,t,i,r;(t=(e=this.props).onAnimationStart)===null||t===void 0||t.call(e),this.props.motion||((r=(i=this.props).onAnimationEnd)===null||r===void 0||r.call(i,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,t,i){const r=Object.keys(this.props).filter(s=>!Vi(this.props[s],e[s]));r.includes("animationState"),(r.includes("startClassName")||r.includes("replayKey")||r.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},()=>{var s,f,o,a;(f=(s=this.props).onAnimationStart)===null||f===void 0||f.call(s),this.props.motion||((a=(o=this.props).onAnimationEnd)===null||a===void 0||a.call(o,this.state.isAnimating),this.setState({isAnimating:!1}))})}render(){var e;return this.props.motion?this.props.children({animationClassName:(e=this.state.currentClassName)!==null&&e!==void 0?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}eT.defaultProps={motion:!0,replayKey:""};const Ov=eT;var e1=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Hg=R6.PREFIX,r8=so.POSITION_SET,s8=so.TRIGGER_SET,a8=["flex","block","table","flow-root","grid"],o8=()=>document.body;class $i extends ln{constructor(e){super(e),this.setContainerEl=t=>this.containerEl={current:t},this.isSpecial=t=>{if(qa(t))return Boolean(t.disabled);if(fe.isValidElement(t)){if(st(t,"props.disabled"))return so.STATUS_DISABLED;const r=st(t,"props.loading"),s=!Fi(t)&&!Fi(t.type)&&t.type.name==="Button"||t.type.name==="IconButton";if(r&&s)return so.STATUS_LOADING}return!1},this.didLeave=()=>{this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{const{placement:t}=this.state,{showArrow:i,prefixCls:r,style:s}=this.props;let f=null;const o=Ne([`${r}-icon-arrow`]),a=st(s,"backgroundColor"),c=t.includes("left")||t.includes("right")?E.createElement(n8,null):E.createElement(Q6,null);return i&&(fe.isValidElement(i)?f=i:f=E.cloneElement(c,{className:o,style:{color:a,fill:"currentColor"}})),f},this.handlePortalInnerClick=t=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&J_(t)},this.handlePortalMouseDown=t=>{this.props.stopPropagation&&J_(t)},this.handlePortalInnerKeyDown=t=>{this.foundation.handleContainerKeydown(t)},this.renderContentNode=t=>{const i={initialFocusRef:this.initialFocusRef};return Bn(t)?t(i):t},this.renderPortal=()=>{const{containerStyle:t={},visible:i,portalEventSet:r,placement:s,transitionState:f,id:o,isPositionUpdated:a}=this.state,{prefixCls:c,content:d,showArrow:l,style:u,motion:h,role:g,zIndex:m}=this.props,p=this.renderContentNode(d),{className:v}=this.props,y=this.context.direction,_=Ne(v,{[`${c}-wrapper`]:!0,[`${c}-wrapper-show`]:i,[`${c}-with-arrow`]:Boolean(l),[`${c}-rtl`]:y==="rtl"}),x=this.renderIcon(),b=Ev(t,h?["transformOrigin"]:void 0),w=st(t,"transformOrigin"),T=st(u,"opacity"),S=T||1,O=E.createElement(Ov,{fillMode:"forwards",animationState:f,motion:h&&a,startClassName:f==="enter"?`${Hg}-animation-show`:`${Hg}-animation-hide`,onAnimationEnd:()=>{var N,V;f==="leave"&&(this.didLeave(),(V=(N=this.props).afterClose)===null||V===void 0||V.call(N))}},N=>{let{animationStyle:V,animationClassName:Z,animationEventsNeedBind:j}=N;return E.createElement("div",Object.assign({className:Ne(_,Z),style:Object.assign(Object.assign(Object.assign(Object.assign({},V),{transformOrigin:w}),u),{opacity:a?S:"0"})},r,j,{role:g,"x-placement":s,id:o}),p,x)});return E.createElement(q6,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:m}},E.createElement("div",{className:`${We}-portal-inner`,style:b,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},O))},this.wrapSpan=t=>{const{wrapperClassName:i}=this.props,r=st(t,"props.style.display"),s=st(t,"props.block"),f={display:"inline-block"};return(s||a8.includes(r))&&(f.width="100%"),E.createElement("span",{className:i,style:f},t)},this.mergeEvents=(t,i)=>{const r={};return x6(i,(s,f)=>{typeof s=="function"&&(r[f]=function(){s(...arguments),t&&typeof t[f]=="function"&&t[f](...arguments)})}),r},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId},this.foundation=new L6(this.adapter),this.eventManager=new b6,this.triggerEl=E.createRef(),this.containerEl=E.createRef(),this.initialFocusRef=E.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},insertPortal:(t,i)=>{var r=e1(i,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),r)},()=>{setTimeout(()=>{this.eventManager.emit("portalInserted")},0)})},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown"}),registerTriggerEvent:t=>{this.setState({triggerEventSet:t})},registerPortalEvent:t=>{this.setState({portalEventSet:t})},getTriggerBounding:()=>{const t=this.adapter.getTriggerNode();return this.triggerEl.current=t,t&&t.getBoundingClientRect()},getPopupContainerRect:()=>{const t=this.getPopupContainer();let i=null;if(t&&qa(t)){const r=w6(t.getBoundingClientRect());i=Object.assign(Object.assign({},r),{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}return i},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{const t=this.getPopupContainer();return window.getComputedStyle(t).getPropertyValue("position")==="relative"},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{const t=this.containerEl&&this.containerEl.current;return t&&t.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:t=>{var{position:i}=t,r=e1(t,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),r),placement:i,isPositionUpdated:!0},()=>{this.eventManager.emit("positionUpdated")})},updatePlacementAttr:t=>{this.setState({placement:t})},togglePortalVisible:(t,i)=>{const r={};r.transitionState=t?"enter":"leave",r.visible=t,this.mounted&&this.setState(r,()=>{i()})},registerClickOutsideHandler:t=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=i=>{if(!this.mounted)return!1;let r=this.triggerEl&&this.triggerEl.current,s=this.containerEl&&this.containerEl.current;r=Ms.findDOMNode(r),s=Ms.findDOMNode(s),(r&&!r.contains(i.target)&&s&&!s.contains(i.target)||this.props.clickTriggerToHide&&r&&r.contains(i.target))&&(this.props.onClickOutSide(i),t())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:t=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=a_(i=>{if(!this.mounted)return!1;t(i)},10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:t=>{this.props.onVisibleChange(t)},registerScrollHandler:t=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=a_(i=>{if(!this.mounted)return!1;const r=this.adapter.getTriggerNode();if(i.target.contains(r)){const f={x:i.target.scrollLeft,y:i.target.scrollTop};t(f)}},10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>Boolean(this.props.motion),updateContainerPosition:()=>{const t=this.getPopupContainer();if(t&&qa(t)){const r=window.getComputedStyle(t).getPropertyValue("position");this.containerPosition=r}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let t=this.triggerEl.current;return qa(this.triggerEl.current)||(t=Ms.findDOMNode(this.triggerEl.current)),t},getFocusableElements:t=>X6(t),getActiveElement:()=>W6(),setInitialFocus:()=>{const{preventScroll:t}=this.props,i=st(this,"initialFocusRef.current");i&&"focus"in i&&i.focus({preventScroll:t})},notifyEscKeydown:t=>{this.props.onEscKeyDown(t)},setId:()=>{this.setState({id:ZC()})}})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||o8,this.foundation.init()}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,t){vc(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),Vi(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){const{isInsert:e,triggerEventSet:t,visible:i,id:r}=this.state,{wrapWhenSpecial:s,role:f,trigger:o}=this.props;let{children:a}=this.props;const c=Object.assign({},st(a,"props.style")),d={};if(s){const h=this.isSpecial(a);h?(c.pointerEvents="none",h===so.STATUS_DISABLED&&(d.cursor="not-allowed"),a=fe.cloneElement(a,{style:c}),o!=="custom"&&(a=this.wrapSpan(a)),this.isWrapped=!0):fe.isValidElement(a)||(a=this.wrapSpan(a),this.isWrapped=!0)}let l={};f==="dialog"?(l["aria-expanded"]=i?"true":"false",l["aria-haspopup"]="dialog",l["aria-controls"]=r):l["aria-describedby"]=r;const u=E.cloneElement(a,Object.assign(Object.assign(Object.assign(Object.assign({},l),a.props),this.mergeEvents(a.props,t)),{style:Object.assign(Object.assign({},st(a,"props.style")),d),className:Ne(st(a,"props.className")),ref:h=>{this.triggerEl.current=h;const{ref:g}=a;typeof g=="function"?g(h):g&&typeof g=="object"&&(g.current=h)},tabIndex:a.props.tabIndex||0,"data-popupid":r}));return E.createElement(E.Fragment,null,e?this.renderPortal():null,u)}}$i.contextType=Uc;$i.propTypes={children:C.node,motion:C.bool,autoAdjustOverflow:C.bool,position:C.oneOf(r8),getPopupContainer:C.func,mouseEnterDelay:C.number,mouseLeaveDelay:C.number,trigger:C.oneOf(s8).isRequired,className:C.string,wrapperClassName:C.string,clickToHide:C.bool,clickTriggerToHide:C.bool,visible:C.bool,style:C.object,content:C.oneOfType([C.node,C.func]),prefixCls:C.string,onVisibleChange:C.func,onClickOutSide:C.func,spacing:C.number,margin:C.oneOfType([C.number,C.object]),showArrow:C.oneOfType([C.bool,C.node]),zIndex:C.number,rePosKey:C.oneOfType([C.string,C.number]),arrowBounding:i8,transformFromCenter:C.bool,arrowPointAtCenter:C.bool,stopPropagation:C.bool,role:C.string,wrapWhenSpecial:C.bool,guardFocus:C.bool,returnFocusOnClose:C.bool,preventScroll:C.bool};$i.defaultProps={arrowBounding:Mr.ARROW_BOUNDING,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:Hg,role:"tooltip",mouseEnterDelay:Mr.MOUSE_ENTER_DELAY,mouseLeaveDelay:Mr.MOUSE_LEAVE_DELAY,motion:!0,onVisibleChange:Ke,onClickOutSide:Ke,spacing:Mr.SPACING,margin:Mr.MARGIN,showArrow:!0,wrapWhenSpecial:!0,zIndex:Mr.DEFAULT_Z_INDEX,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:Ke,disableFocusListener:!1,disableArrowKeyDown:!1};var Yh={},l8={get exports(){return Yh},set exports(n){Yh=n}};const tT=(n,{target:e=document.body}={})=>{const t=document.createElement("textarea"),i=document.activeElement;t.value=n,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const r=document.getSelection();let s=!1;r.rangeCount>0&&(s=r.getRangeAt(0)),e.append(t),t.select(),t.selectionStart=0,t.selectionEnd=n.length;let f=!1;try{f=document.execCommand("copy")}catch{}return t.remove(),s&&(r.removeAllRanges(),r.addRange(s)),i&&i.focus(),f};l8.exports=tT;Yh.default=tT;function zi(){}const c8=E.createContext(null),u8=c8;function jd(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,i=n.formats[t]||n.formats[n.defaultWidth];return i}}function cl(n){return function(e,t){var i=t!=null&&t.context?String(t.context):"standalone",r;if(i==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,f=t!=null&&t.width?String(t.width):s;r=n.formattingValues[f]||n.formattingValues[s]}else{var o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[a]||n.values[o]}var c=n.argumentCallback?n.argumentCallback(e):e;return r[c]}}function ul(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],s=e.match(r);if(!s)return null;var f=s[0],o=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],a=Array.isArray(o)?f8(o,function(l){return l.test(f)}):h8(o,function(l){return l.test(f)}),c;c=n.valueCallback?n.valueCallback(a):a,c=t.valueCallback?t.valueCallback(c):c;var d=e.slice(f.length);return{value:c,rest:d}}}function h8(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function f8(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function d8(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.match(n.matchPattern);if(!i)return null;var r=i[0],s=e.match(n.parsePattern);if(!s)return null;var f=n.valueCallback?n.valueCallback(s[0]):s[0];f=t.valueCallback?t.valueCallback(f):f;var o=e.slice(r.length);return{value:f,rest:o}}}function p8(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Pv(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function ph(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ph=function(t){return typeof t}:ph=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ph(n)}function g8(n){Pv(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||ph(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var m8={};function v8(){return m8}function t1(n,e){var t,i,r,s,f,o,a,c;Pv(1,arguments);var d=v8(),l=p8((t=(i=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(f=e.locale)===null||f===void 0||(o=f.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&i!==void 0?i:(a=d.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=g8(n),h=u.getUTCDay(),g=(h<l?7:0)+h-l;return u.setUTCDate(u.getUTCDate()-g),u.setUTCHours(0,0,0,0),u}function y8(n,e,t){Pv(2,arguments);var i=t1(n,t),r=t1(e,t);return i.getTime()===r.getTime()}var _8={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},x8=function(e,t,i){var r,s=_8[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?r+"":r+"":r};const b8=x8;var w8={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},S8={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},C8={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},T8={date:jd({formats:w8,defaultWidth:"full"}),time:jd({formats:S8,defaultWidth:"full"}),dateTime:jd({formats:C8,defaultWidth:"full"})};const E8=T8;function n1(n,e,t){var i="eeee p";return y8(n,e,t)?i:n.getTime()>e.getTime()?"''"+i:"''"+i}var M8={lastWeek:n1,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:n1,other:"PP p"},A8=function(e,t,i,r){var s=M8[e];return typeof s=="function"?s(t,i,r):s};const O8=A8;var P8={narrow:["",""],abbreviated:["",""],wide:["",""]},L8={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},R8={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},D8={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},I8={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},k8={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},F8=function(e,t){var i=Number(e);switch(t==null?void 0:t.unit){case"date":return i.toString()+"";case"hour":return i.toString()+"";case"minute":return i.toString()+"";case"second":return i.toString()+"";default:return" "+i.toString()}},N8={ordinalNumber:F8,era:cl({values:P8,defaultWidth:"wide"}),quarter:cl({values:L8,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:cl({values:R8,defaultWidth:"wide"}),day:cl({values:D8,defaultWidth:"wide"}),dayPeriod:cl({values:I8,defaultWidth:"wide",formattingValues:k8,defaultFormattingWidth:"wide"})};const B8=N8;var z8=/^(\s*)?\d+(|||)?/i,j8=/\d+/i,U8={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},$8={any:[/^()/i,/^()/i]},H8={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},V8={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},G8={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},W8={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},X8={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},Y8={any:[//i,//i,//i,//i,//i,//i,//i]},K8={any:/^(?|?||[]|?||?||)/i},q8={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},Z8={ordinalNumber:d8({matchPattern:z8,parsePattern:j8,valueCallback:function(e){return parseInt(e,10)}}),era:ul({matchPatterns:U8,defaultMatchWidth:"wide",parsePatterns:$8,defaultParseWidth:"any"}),quarter:ul({matchPatterns:H8,defaultMatchWidth:"wide",parsePatterns:V8,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ul({matchPatterns:G8,defaultMatchWidth:"wide",parsePatterns:W8,defaultParseWidth:"any"}),day:ul({matchPatterns:X8,defaultMatchWidth:"wide",parsePatterns:Y8,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:K8,defaultMatchWidth:"any",parsePatterns:q8,defaultParseWidth:"any"})};const J8=Z8;var Q8={code:"zh-CN",formatDistance:b8,formatLong:E8,formatRelative:O8,localize:B8,match:J8,options:{weekStartsOn:1,firstWeekContainsDate:4}};const ez=Q8,tz={code:"zh-CN",dateFnsLocale:ez,Pagination:{pageSize:"${pageSize} /",total:" ${total} ",jumpTo:"",page:""},Modal:{confirm:"",cancel:""},TimePicker:{placeholder:{time:"",timeRange:""},begin:"",end:"",hour:"",minute:"",second:"",AM:"",PM:""},DatePicker:{placeholder:{date:"",dateTime:"",dateRange:["",""],dateTimeRange:["",""]},footer:{confirm:"",cancel:""},selectDate:"",selectTime:"",year:"",month:"",day:"",monthText:"${year} ${month}",months:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",Sun:""},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"",expandText:""},Popconfirm:{confirm:"",cancel:""},Table:{emptyText:"",pageText:" ${currentStart} - ${currentEnd}  ${total} "},Select:{emptyText:"",createText:""},Cascader:{emptyText:""},Tree:{emptyText:"",searchPlaceholder:""},List:{emptyText:""},Calendar:{allDay:"",AM:"${time}",PM:"${time}",datestring:"",remaining:"${remained}"},Upload:{mainText:"",illegalTips:"",legalTips:"",retry:"",replace:"",clear:"",selectedFiles:"",illegalSize:"",fail:""},TreeSelect:{searchPlaceholder:""},Typography:{copy:"",copied:"",expand:"",collapse:""},Transfer:{emptyLeft:"",emptySearch:"",emptyRight:"",placeholder:"",clear:"",selectAll:"",clearSelectAll:"",total:" ${total} ",selected:" ${total} "},Form:{optional:""},Image:{preview:"",loading:"",loadError:"",prevTip:"",nextTip:"",zoomInTip:"",zoomOutTip:"",rotateTip:"",downloadTip:"",adaptiveTip:"",originTip:""}},i1=tz;class yc extends fe.Component{renderChildren(e,t){const{componentName:i}=this.props;let r=e;e!=null&&e.code||(r=i1);const s=st(i1,"dateFnsLocale"),f=st(r,"dateFnsLocale",s);return t(r[i],r.code,f)}render(){const{children:e}=this.props;return E.createElement(Uc.Consumer,null,t=>{let{locale:i}=t;return E.createElement(u8.Consumer,null,r=>this.renderChildren(i||r,e))})}}yc.propTypes={componentName:C.string.isRequired,children:C.any};yc.defaultProps={componentName:""};const nz="semi";var iz=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const nT=E.forwardRef((n,e)=>{const{svg:t,spin:i=!1,rotate:r,style:s,className:f,prefixCls:o=nz,type:a,size:c="default"}=n,d=iz(n,["svg","spin","rotate","style","className","prefixCls","type","size"]),l=Ne(`${o}-icon`,{[`${o}-icon-extra-small`]:c==="extra-small",[`${o}-icon-small`]:c==="small",[`${o}-icon-default`]:c==="default",[`${o}-icon-large`]:c==="large",[`${o}-icon-extra-large`]:c==="extra-large",[`${o}-icon-spinning`]:i===!0,[`${o}-icon-${a}`]:Boolean(a)},f),u={};return Number.isSafeInteger(r)&&(u.transform=`rotate(${r}deg)`),Object.assign(u,s),E.createElement("span",Object.assign({role:"img",ref:e,"aria-label":a,className:l,style:u},d),t)});nT.elementType="Icon";const pt=(n,e)=>{const t=E.forwardRef((i,r)=>E.createElement(nT,Object.assign({svg:E.createElement(n),type:e,ref:r},i)));return t.elementType="Icon",t};function rz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}const sz=pt(rz,"alert_circle"),az=sz;function oz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}const lz=pt(oz,"alert_triangle"),cz=lz;function uz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{d:"M2 3C2 2.44772 2.44772 2 3 2H6C6.55228 2 7 2.44772 7 3V6C7 6.55228 6.55228 7 6 7H3C2.44772 7 2 6.55228 2 6V3Z",fill:"currentColor"}),fe.createElement("path",{d:"M9.5 3C9.5 2.44772 9.94771 2 10.5 2H13.5C14.0523 2 14.5 2.44772 14.5 3V6C14.5 6.55228 14.0523 7 13.5 7H10.5C9.94771 7 9.5 6.55228 9.5 6V3Z",fill:"currentColor"}),fe.createElement("path",{d:"M10.5 17C9.94771 17 9.5 17.4477 9.5 18V21C9.5 21.5523 9.94771 22 10.5 22H13.5C14.0523 22 14.5 21.5523 14.5 21V18C14.5 17.4477 14.0523 17 13.5 17H10.5Z",fill:"currentColor"}),fe.createElement("path",{d:"M2 10.5C2 9.94771 2.44772 9.5 3 9.5H6C6.55228 9.5 7 9.94771 7 10.5V13.5C7 14.0523 6.55228 14.5 6 14.5H3C2.44772 14.5 2 14.0523 2 13.5V10.5Z",fill:"currentColor"}),fe.createElement("path",{d:"M18 9.5C17.4477 9.5 17 9.94771 17 10.5V13.5C17 14.0523 17.4477 14.5 18 14.5H21C21.5523 14.5 22 14.0523 22 13.5V10.5C22 9.94771 21.5523 9.5 21 9.5H18Z",fill:"currentColor"}),fe.createElement("path",{d:"M9.5 10.5C9.5 9.94771 9.94771 9.5 10.5 9.5H13.5C14.0523 9.5 14.5 9.94771 14.5 10.5V13.5C14.5 14.0523 14.0523 14.5 13.5 14.5H10.5C9.94771 14.5 9.5 14.0523 9.5 13.5V10.5Z",fill:"currentColor"}),fe.createElement("path",{d:"M3 17C2.44772 17 2 17.4477 2 18V21C2 21.5523 2.44772 22 3 22H6C6.55228 22 7 21.5523 7 21V18C7 17.4477 6.55228 17 6 17H3Z",fill:"currentColor"}),fe.createElement("path",{d:"M17 3C17 2.44772 17.4477 2 18 2H21C21.5523 2 22 2.44772 22 3V6C22 6.55228 21.5523 7 21 7H18C17.4477 7 17 6.55228 17 6V3Z",fill:"currentColor"}),fe.createElement("path",{d:"M18 17C17.4477 17 17 17.4477 17 18V21C17 21.5523 17.4477 22 18 22H21C21.5523 22 22 21.5523 22 21V18C22 17.4477 21.5523 17 21 17H18Z",fill:"currentColor"}))}const hz=pt(uz,"apps"),fz=hz;function dz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08045 7.59809C4.66624 7.01231 5.61599 7.01231 6.20177 7.59809L11.8586 13.2549L17.5155 7.59809C18.1013 7.01231 19.051 7.01231 19.6368 7.59809C20.2226 8.18388 20.2226 9.13363 19.6368 9.71941L12.9193 16.4369C12.3335 17.0227 11.3838 17.0227 10.798 16.4369L4.08045 9.71941C3.49467 9.13363 3.49467 8.18388 4.08045 7.59809Z",fill:"currentColor"}))}const pz=pt(dz,"chevron_down"),gz=pz;function mz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2782 4.23933C16.864 4.82511 16.864 5.77486 16.2782 6.36065L10.6213 12.0175L16.2782 17.6744C16.864 18.2601 16.864 19.2099 16.2782 19.7957C15.6924 20.3815 14.7426 20.3815 14.1569 19.7957L7.43934 13.0782C6.85355 12.4924 6.85355 11.5426 7.43934 10.9568L14.1569 4.23933C14.7426 3.65354 15.6924 3.65354 16.2782 4.23933Z",fill:"currentColor"}))}const vz=pt(mz,"chevron_left"),yz=vz;function _z(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.43934 19.7957C6.85355 19.2099 6.85355 18.2601 7.43934 17.6744L13.0962 12.0175L7.43934 6.36065C6.85355 5.77486 6.85355 4.82511 7.43934 4.23933C8.02513 3.65354 8.97487 3.65354 9.56066 4.23933L16.2782 10.9568C16.864 11.5426 16.864 12.4924 16.2782 13.0782L9.56066 19.7957C8.97487 20.3815 8.02513 20.3815 7.43934 19.7957Z",fill:"currentColor"}))}const xz=pt(_z,"chevron_right"),bz=xz;function wz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.637 16.4369C19.0513 17.0227 18.1015 17.0227 17.5157 16.4369L11.8589 10.7801L6.20202 16.4369C5.61623 17.0227 4.66648 17.0227 4.0807 16.4369C3.49491 15.8511 3.49491 14.9014 4.0807 14.3156L10.7982 7.59809C11.384 7.01231 12.3337 7.01231 12.9195 7.59809L19.637 14.3156C20.2228 14.9014 20.2228 15.8511 19.637 16.4369Z",fill:"currentColor"}))}const Sz=pt(wz,"chevron_up"),Cz=Sz;function Tz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.0352 16.8626C16.4597 17.4585 15.5101 17.4751 14.9142 16.8996L12.0368 14.121L9.25822 16.9984C8.68274 17.5943 7.73314 17.6109 7.13722 17.0354C6.5413 16.4599 6.52472 15.5103 7.1002 14.9144L9.87883 12.037L7.00147 9.2584C6.40555 8.68293 6.38897 7.73332 6.96445 7.1374C7.53992 6.54148 8.48953 6.52491 9.08545 7.10038L11.9628 9.87901L14.7414 7.00165C15.3169 6.40573 16.2665 6.38916 16.8624 6.96463C17.4584 7.54011 17.4749 8.48971 16.8995 9.08563L14.1208 11.963L16.9982 14.7416C17.5941 15.3171 17.6107 16.2667 17.0352 16.8626Z",fill:"currentColor"}))}const Ez=pt(Tz,"clear"),Mz=Ez;function Az(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}const Oz=pt(Az,"close"),Lv=Oz;function Pz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 2.89543 2.89543 2 4 2H9C10.1046 2 11 2.89543 11 4V20C11 21.1046 10.1046 22 9 22H4C2.89543 22 2 21.1046 2 20V4ZM8 17.5C8 18.3284 7.32843 19 6.5 19C5.67157 19 5 18.3284 5 17.5C5 16.6716 5.67157 16 6.5 16C7.32843 16 8 16.6716 8 17.5ZM19.5858 8.58579L16.4142 5.41421C15.6332 4.63316 14.3668 4.63316 13.5858 5.41421L13 6V18L19.5858 11.4142C20.3668 10.6332 20.3668 9.36683 19.5858 8.58579ZM22 16C22 14.8954 21.1046 14 20 14L12 22H20C21.1046 22 22 21.1046 22 20V16Z",fill:"currentColor"}))}const Lz=pt(Pz,"color_palette"),Rz=Lz;function Dz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{d:"M6 4L11 0L16 4L11 9.5L6 4Z",fill:"currentColor"}),fe.createElement("path",{d:"M18 6L22 11L18 16L12.5 11L18 6Z",fill:"currentColor"}),fe.createElement("path",{d:"M4 16L0 11L4 6L9.5 11L4 16Z",fill:"currentColor"}),fe.createElement("path",{d:"M16 18L11 22L6 18L11 12.5L16 18Z",fill:"currentColor"}))}const Iz=pt(Dz,"component"),kz=Iz;function Fz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{d:"M7 4C7 2.89543 7.89543 2 9 2H20C21.1046 2 22 2.89543 22 4V15C22 16.1046 21.1046 17 20 17H19V8C19 6 18 5 16 5H7V4Z",fill:"currentColor"}),fe.createElement("path",{d:"M5 7C3.89543 7 3 7.89543 3 9V19C3 20.1046 3.89543 21 5 21H15C16.1046 21 17 20.1046 17 19V9C17 7.89543 16.1046 7 15 7H5Z",fill:"currentColor"}))}const Nz=pt(Fz,"copy"),Bz=Nz;function zz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.38055 2C9.00251 2 8.65678 2.21319 8.48703 2.55098L7.00505 5.5H3C2.44772 5.5 2 5.94772 2 6.5V7.5C2 8.05228 2.44772 8.5 3 8.5H21C21.5523 8.5 22 8.05228 22 7.5V6.5C22 5.94772 21.5523 5.5 21 5.5H16.9949L15.5129 2.55098C15.3432 2.21319 14.9975 2 14.6194 2H9.38055ZM14.8571 5.5L14.1439 4.25193C14.0549 4.09614 13.8893 4 13.7098 4H10.2901C10.1107 4 9.94505 4.09614 9.85602 4.25193L9.14284 5.5H14.8571ZM18.7192 10H5.28078C4.6302 10 4.15285 10.6114 4.31063 11.2425L6.4319 19.7276C6.76578 21.0631 7.96573 22 9.34233 22H14.6577C16.0343 22 17.2342 21.0631 17.5681 19.7276L19.6894 11.2425C19.8472 10.6114 19.3698 10 18.7192 10Z",fill:"currentColor"}))}const jz=pt(zz,"delete"),Uz=jz;function $z(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.5808 2.58665C17.7986 1.80445 16.5304 1.80445 15.7482 2.58665L13.6247 4.71011C13.6244 4.71044 13.624 4.71077 13.6237 4.7111L12.9156 5.41924L3.12239 15.2124C2.97399 15.3608 2.87597 15.5521 2.84215 15.7592L2.0131 20.8371C1.96117 21.1552 2.06547 21.4788 2.29334 21.7067C2.52121 21.9345 2.84481 22.0388 3.16285 21.9869L8.2408 21.1579C8.44792 21.124 8.63918 21.026 8.78758 20.8776L18.5808 11.0844L19.2889 10.3763L21.4134 8.25184C22.1956 7.46964 22.1956 6.20144 21.4134 5.41924L18.5808 2.58665ZM18.5808 8.25184L19.9971 6.83554L17.1645 4.00295L15.7482 5.41924L18.5808 8.25184ZM17.1645 9.66814L14.3319 6.83554L4.76692 16.4005L4.21421 19.7858L7.59951 19.2331L17.1645 9.66814Z",fill:"currentColor"}))}const Hz=pt($z,"edit_stroked"),Vz=Hz;function Gz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7071 3.70711C22.0976 3.31658 22.0976 2.68342 21.7071 2.29289C21.3166 1.90237 20.6834 1.90237 20.2929 2.29289L17.3135 5.27233C15.8114 4.50566 14.0321 4 12 4C5 4 1 10 1 12C1 13.1757 2.38219 15.7335 4.94345 17.6423L2.29289 20.2929C1.90237 20.6834 1.90237 21.3166 2.29289 21.7071C2.68342 22.0976 3.31658 22.0976 3.70711 21.7071L21.7071 3.70711ZM7.8284 14.7574L9.29237 13.2934C9.10495 12.9018 9 12.4631 9 12C9 10.3431 10.3431 9 12 9C12.4631 9 12.9018 9.10495 13.2934 9.29237L14.7574 7.8284C13.967 7.30488 13.0191 7 12 7C9.23858 7 7 9.23858 7 12C7 13.0191 7.30488 13.967 7.8284 14.7574Z",fill:"currentColor"}),fe.createElement("path",{d:"M12 20C10.7789 20 9.64914 19.8174 8.61594 19.5054L11.1871 16.9342C11.4516 16.9775 11.7232 17 12 17C14.7614 17 17 14.7614 17 12C17 11.7232 16.9775 11.4516 16.9342 11.1871L20.5032 7.61808C22.1342 9.27317 23 11.0695 23 12C23 14 19 20 12 20Z",fill:"currentColor"}))}const Wz=pt(Gz,"eye_closed_solid"),Xz=Wz;function Yz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12C1 14 5 20 12 20C19 20 23 14 23 12C23 10 19 4 12 4ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}))}const Kz=pt(Yz,"eye_opened"),qz=Kz;function Zz(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.41549 2.17229C7.80602 1.78176 8.43918 1.78176 8.82971 2.17229L18.264 11.6066C18.6545 11.9971 18.6545 12.6303 18.264 13.0208C18.2565 13.0282 18.249 13.0356 18.2413 13.0427L11.5462 19.7379C10.5699 20.7142 8.98698 20.7142 8.01067 19.7379L2.35382 14.081C1.3775 13.1047 1.3775 11.5218 2.35382 10.5455L8.36415 4.53516L7.41549 3.5865C7.02497 3.19598 7.02497 2.56281 7.41549 2.17229ZM9.77836 5.94937L16.1423 12.3133L13.9558 14.4998H5.60107L3.76803 12.6668C3.57277 12.4715 3.57277 12.155 3.76803 11.9597L9.77836 5.94937ZM21 18.9998C21 20.1043 20.3285 20.9998 19.5 20.9998C18.6716 20.9998 18 20.1044 18 18.9998C18 17.9207 18.6615 16.5108 19.106 15.6854C19.2801 15.3618 19.7199 15.3618 19.8941 15.6854C20.3386 16.5108 21 17.9207 21 18.9998Z",fill:"currentColor"}))}const Jz=pt(Zz,"fill_stroked"),Qz=Jz;function ej(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM10 7.5C10 8.88071 8.88071 10 7.5 10C6.11929 10 5 8.88071 5 7.5C5 6.11929 6.11929 5 7.5 5C8.88071 5 10 6.11929 10 7.5ZM16.7071 11.7071C16.3166 11.3166 15.6834 11.3166 15.2929 11.7071L11 16L9.70711 14.7071C9.31658 14.3166 8.68342 14.3166 8.29289 14.7071L5 18V19H8H12H19V14L16.7071 11.7071Z",fill:"currentColor"}))}const tj=pt(ej,"image"),nj=tj;function ij(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 2.89543 2.89543 2 4 2H20C21.1046 2 22 2.89543 22 4V20C22 21.1046 21.1046 22 20 22H4C2.89543 22 2 21.1046 2 20V4ZM20 4L4 4V20H20V4ZM9 8C8.44772 8 8 8.44772 8 9C8 9.55228 8.44772 10 9 10C9.55228 10 10 9.55228 10 9C10 8.44772 9.55228 8 9 8ZM6 9C6 7.34315 7.34315 6 9 6C10.6569 6 12 7.34315 12 9C12 10.6569 10.6569 12 9 12C7.34315 12 6 10.6569 6 9ZM17.7071 10.7929C17.3166 10.4024 16.6834 10.4024 16.2929 10.7929L12.4258 14.66L10.6247 13.2191C10.2268 12.9008 9.6532 12.9326 9.29289 13.2929L5.79289 16.7929C5.40237 17.1834 5.40237 17.8166 5.79289 18.2071C6.18342 18.5976 6.81658 18.5976 7.20711 18.2071L10.0742 15.34L11.8753 16.7809C12.2732 17.0992 12.8468 17.0674 13.2071 16.7071L17 12.9142L17.7929 13.7071C18.1834 14.0976 18.8166 14.0976 19.2071 13.7071C19.5976 13.3166 19.5976 12.6834 19.2071 12.2929L17.7071 10.7929Z",fill:"currentColor"}))}const rj=pt(ij,"image_stroked"),sj=rj;function aj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}const oj=pt(aj,"info_circle"),lj=oj;function cj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C8.41015 2 5.5 4.91015 5.5 8.5V10H5C3.89543 10 3 10.8954 3 12V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V12C21 10.8954 20.1046 10 19 10H18.5V8.5C18.5 4.91015 15.5899 2 12 2ZM15.5 10V8.5C15.5 6.567 13.933 5 12 5C10.067 5 8.5 6.567 8.5 8.5V10H15.5Z",fill:"currentColor"}))}const uj=pt(cj,"lock"),hj=uj;function fj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{d:"M2 12C2 11.1716 2.67157 10.5 3.5 10.5H20.5C21.3284 10.5 22 11.1716 22 12C22 12.8284 21.3284 13.5 20.5 13.5H3.5C2.67157 13.5 2 12.8284 2 12Z",fill:"currentColor"}))}const dj=pt(fj,"minus"),pj=dj;function gj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{d:"M7 12C7 13.3807 5.88071 14.5 4.5 14.5C3.11929 14.5 2 13.3807 2 12C2 10.6193 3.11929 9.5 4.5 9.5C5.88071 9.5 7 10.6193 7 12Z",fill:"currentColor"}),fe.createElement("path",{d:"M14.5 12C14.5 13.3807 13.3807 14.5 12 14.5C10.6193 14.5 9.5 13.3807 9.5 12C9.5 10.6193 10.6193 9.5 12 9.5C13.3807 9.5 14.5 10.6193 14.5 12Z",fill:"currentColor"}),fe.createElement("path",{d:"M19.5 14.5C20.8807 14.5 22 13.3807 22 12C22 10.6193 20.8807 9.5 19.5 9.5C18.1193 9.5 17 10.6193 17 12C17 13.3807 18.1193 14.5 19.5 14.5Z",fill:"currentColor"}))}const mj=pt(gj,"more"),vj=mj;function yj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{d:"M20.5 13.5C21.3284 13.5 22 12.8284 22 12C22 11.1716 21.3284 10.5 20.5 10.5L13.5 10.5L13.5 3.5C13.5 2.67157 12.8284 2 12 2C11.1716 2 10.5 2.67157 10.5 3.5L10.5 10.5L3.5 10.5C2.67157 10.5 2 11.1716 2 12C2 12.8284 2.67157 13.5 3.5 13.5L10.5 13.5V20.5C10.5 21.3284 11.1716 22 12 22C12.8284 22 13.5 21.3284 13.5 20.5V13.5L20.5 13.5Z",fill:"currentColor"}))}const _j=pt(yj,"plus"),xj=_j;function bj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM7 6C7 5.44772 6.55228 5 6 5C5.44772 5 5 5.44772 5 6C5 9.86599 8.13401 13 12 13C15.866 13 19 9.86599 19 6C19 5.44772 18.5523 5 18 5C17.4477 5 17 5.44772 17 6C17 8.76142 14.7614 11 12 11C9.23858 11 7 8.76142 7 6Z",fill:"currentColor"}))}const wj=pt(bj,"shopping_bag"),Sj=wj;function Cj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4.5C3 3.67157 3.67157 3 4.5 3H19.5C20.3284 3 21 3.67157 21 4.5V7.5C21 8.32843 20.3284 9 19.5 9C18.6716 9 18 8.32843 18 7.5V6H13.5V19H15.5C16.3284 19 17 19.6716 17 20.5C17 21.3284 16.3284 22 15.5 22H8.5C7.67157 22 7 21.3284 7 20.5C7 19.6716 7.67157 19 8.5 19H10.5V6H6V7.5C6 8.32843 5.32843 9 4.5 9C3.67157 9 3 8.32843 3 7.5V4.5Z",fill:"currentColor"}))}const Tj=pt(Cj,"text"),Ej=Tj;function Mj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 2C3.44772 2 3 2.44772 3 3V6C3 6.55228 3.44772 7 4 7C4.55228 7 5 6.55228 5 6V4H11V20H9C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22H15C15.5523 22 16 21.5523 16 21C16 20.4477 15.5523 20 15 20H13V4H19V6C19 6.55228 19.4477 7 20 7C20.5523 7 21 6.55228 21 6V3C21 2.44772 20.5523 2 20 2H4Z",fill:"currentColor"}))}const Aj=pt(Mj,"text_stroked"),Oj=Aj;function Pj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}const Lj=pt(Pj,"tick"),Vg=Lj;function Rj(n){return fe.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),fe.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}const Dj=pt(Rj,"tick_circle"),Ij=Dj,iT="Enter";function rT(n){return st(n,"key")===iT}const Ud=Of.PREFIX;class Rv extends E.PureComponent{constructor(e){super(e),this.copy=t=>{const{content:i,duration:r,onCopy:s}=this.props,f=Yh(i);s&&s(t,i,f),this.setCopied(i,r)},this.setCopied=(t,i)=>{this.setState({copied:!0,item:t}),this._timeId=setTimeout(()=>{this.resetCopied()},i*1e3)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{const{successTip:t}=this.props;return typeof t<"u"?t:E.createElement(yc,{componentName:"Typography"},i=>E.createElement("span",null,E.createElement(Vg,null),i.copied))},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){const{style:e,className:t,forwardRef:i,copyTip:r}=this.props,{copied:s}=this.state,f=Ne(t,{[`${Ud}-action-copy`]:!s,[`${Ud}-action-copied`]:s});return E.createElement(yc,{componentName:"Typography"},o=>E.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:f,ref:i},s?this.renderSuccessTip():E.createElement($i,{content:typeof r<"u"?r:o.copy},E.createElement("a",{className:`${Ud}-action-copy-icon`},E.createElement(Bz,{role:"button",tabIndex:0,onClick:this.copy,onKeyPress:a=>rT(a)&&this.copy(a)})))))}}Rv.propTypes={content:C.string,onCopy:C.func,successTip:C.node,copyTip:C.node,duration:C.number,style:C.object,className:C.string};Rv.defaultProps={content:"",onCopy:zi,duration:3,style:{},className:""};const kj=Rv,sT={PREFIX:`${We}-popover`,ARROW:`${We}-popover-icon-arrow`},Xl={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"],TRIGGER_SET:["hover","focus","click","custom"],DEFAULT_ARROW_STYLE:{borderOpacity:"1",backgroundColor:"var(--semi-color-bg-3)",borderColor:"var(--semi-color-border)"}},xo={ARROW_BOUNDING:Object.assign(Object.assign({},Mr.ARROW_BOUNDING),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030};var Fj=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const aT=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{position:e="",className:t,arrowStyle:i,popStyle:r}=n,s=Fj(n,["position","className","arrowStyle","popStyle"]),f=e.indexOf("top")===0||e.indexOf("bottom")===0,o=Ne(t,sT.ARROW),a=st(i,"borderOpacity",Xl.DEFAULT_ARROW_STYLE.borderOpacity),c=st(i,"backgroundColor",st(r,"backgroundColor",Xl.DEFAULT_ARROW_STYLE.backgroundColor)),d=st(i,"borderColor",st(r,"borderColor",Xl.DEFAULT_ARROW_STYLE.borderColor)),l=Object.assign(Object.assign({},s),{width:xo.ARROW_BOUNDING.width,height:xo.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:o});return f?E.createElement("svg",Object.assign({},l),E.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",fill:d,opacity:a}),E.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",fill:c})):E.createElement("svg",Object.assign({},l),E.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",fill:d,opacity:a}),E.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",fill:c}))};aT.propTypes={position:C.string,className:C.string,arrowStyle:C.object,popStyle:C.object};const Nj=aT;var Bj=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const zj=Xl.POSITION_SET,jj=Xl.TRIGGER_SET;class Ff extends E.PureComponent{constructor(){super(...arguments),this.renderPopCard=e=>{let{initialFocusRef:t}=e;const{content:i,contentClassName:r,prefixCls:s}=this.props,{direction:f}=this.context,o=Ne(s,r,{[`${s}-rtl`]:f==="rtl"}),a=this.renderContentNode({initialFocusRef:t,content:i});return E.createElement("div",{className:o},E.createElement("div",{className:`${s}-content`},a))},this.renderContentNode=e=>{const{initialFocusRef:t,content:i}=e,r={initialFocusRef:t};return Bn(i)?i(r):i}}render(){const e=this.props,{children:t,prefixCls:i,showArrow:r,arrowStyle:s={},arrowBounding:f,position:o,style:a,trigger:c}=e,d=Bj(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]);let{spacing:l}=this.props;const u={position:o,className:"",popStyle:a,arrowStyle:s},h=r?E.createElement(Nj,Object.assign({},u)):!1;typeof l!="number"&&(l=r?xo.SPACING_WITH_ARROW:xo.SPACING);const g=c==="click"||c==="custom"?"dialog":"tooltip";return E.createElement($i,Object.assign({guardFocus:!0},d,{trigger:c,position:o,style:a,content:this.renderPopCard,prefixCls:i,spacing:l,showArrow:h,arrowBounding:f,role:g}),t)}}Ff.contextType=Uc;Ff.propTypes={children:C.node,content:C.oneOfType([C.node,C.func]),visible:C.bool,autoAdjustOverflow:C.bool,motion:C.bool,position:C.oneOf(zj),margin:C.oneOfType([C.number,C.object]),mouseEnterDelay:C.number,mouseLeaveDelay:C.number,trigger:C.oneOf(jj).isRequired,contentClassName:C.oneOfType([C.string,C.array]),onVisibleChange:C.func,onClickOutSide:C.func,style:C.object,spacing:C.number,zIndex:C.number,showArrow:C.bool,arrowStyle:C.shape({borderColor:C.string,backgroundColor:C.string,borderOpacity:C.oneOfType([C.string,C.number])}),arrowPointAtCenter:C.bool,arrowBounding:C.object,prefixCls:C.string,guardFocus:C.bool,disableArrowKeyDown:C.bool};Ff.defaultProps={arrowBounding:xo.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:xo.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:sT.PREFIX,onClickOutSide:Ke,onEscKeyDown:Ke,closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0};const Uj=Ff;let Kt;function $d(n){if(!n)return 0;const e=n.match(/^\d*(\.\d*)?/);return e?Number(e[0]):0}function $j(n){return Array.prototype.slice.apply(n).map(t=>`${t}: ${n.getPropertyValue(t)};`).join("")}const Hj=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,f=arguments.length>6?arguments[6]:void 0;if(t.length===0)return"";Kt||(Kt=document.createElement("div"),Kt.setAttribute("aria-hidden","true"),document.body.appendChild(Kt));const o=window.getComputedStyle(n),a=$j(o),c=$d(o.lineHeight),d=Math.round(c*(e+1)+$d(o.paddingTop)+$d(o.paddingBottom));Kt.setAttribute("style",a),Kt.style.position="fixed",Kt.style.left="0",Kt.style.height="auto",Kt.style.top="-999999px",Kt.style.zIndex="-1000",Kt.style.textOverflow="clip",Kt.style.webkitLineClamp="none",Ms.render(E.createElement(E.Fragment,null),Kt);function l(){return Kt.scrollHeight<d}const u=document.createElement("span"),h=document.createTextNode(s);u.appendChild(h),Kt.appendChild(u),i.map(_=>_&&Kt.appendChild(_.cloneNode(!0)));function g(_){u.insertBefore(_,h)}function m(_,x){const b=_.length;return x?f==="end"||x>b-x?_.slice(0,x)+r:_.slice(0,x)+r+_.slice(b-x,b):r}function p(_,x){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x.length,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const S=Math.floor((b+w)/2),O=m(x,S);if(_.textContent=O,b>=w-1&&w>0)for(let N=w;N>=b;N-=1){const V=m(x,N);if(_.textContent=V,l()||!V)return N===x.length?x:V}else if(w===0)return r;return l()?p(_,x,S,w,S):p(_,x,b,S,T)}const v=document.createTextNode(t);g(v);const y=p(v,t);return Kt.innerHTML="",y},Vj=Hj;var Gj=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const bn=Of.PREFIX,Wj="...",Xj=(n,e)=>{const{mark:t,code:i,underline:r,strong:s,link:f,disabled:o}=n;let a=e;const c=(d,l)=>{let u={};d&&(typeof d=="object"&&(u=Object.assign({},d)),a=E.createElement(l,u,a))};return c(t,"mark"),c(i,"code"),c(r&&!f,"u"),c(s,"strong"),c(n.delete,"del"),c(f,o?"span":"a"),a};class $o extends fe.Component{constructor(e){super(e),this.onResize=()=>{this.rafId&&window.cancelAnimationFrame(this.rafId),this.rafId=window.requestAnimationFrame(this.getEllipsisState.bind(this))},this.canUseCSSEllipsis=()=>{const{copyable:t}=this.props,{expandable:i,expandText:r,pos:s,suffix:f}=this.getEllipsisOpt();return!i&&Rl(r)&&!t&&s==="end"&&!f.length},this.shouldTruncated=t=>!t||t<1?!1:t<=1?this.wrapperRef.current.scrollWidth>this.wrapperRef.current.clientWidth:this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight,this.showTooltip=()=>{const{isOverflowed:t,isTruncated:i,expanded:r}=this.state,{showTooltip:s,expandable:f,expandText:o}=this.getEllipsisOpt(),a=!r&&(t||i),d=!f&&Rl(o)&&a&&s;if(!d)return d;const l={type:"tooltip",opts:{}};return typeof s=="object"?s.type&&s.type.toLowerCase()==="popover"?E5({opts:{style:{width:"240px"},showArrow:!0}},s):Object.assign(Object.assign({},l),s):l},this.toggleOverflow=t=>{const{onExpand:i,expandable:r,collapsible:s}=this.getEllipsisOpt(),{expanded:f}=this.state;i&&i(!f,t),(r&&!f||s&&f)&&this.setState({expanded:!f,first:!1})},this.getEllipsisOpt=()=>{const{ellipsis:t}=this.props;return t?Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:t.expandable?this.expandStr:void 0,collapseText:t.collapsible?this.collapseStr:void 0},typeof t=="object"?t:null):{}},this.renderExpandable=()=>{const{expandText:t,expandable:i,collapseText:r,collapsible:s}=this.getEllipsisOpt(),{expanded:f,first:o}=this.state,a=!i&&Rl(t),c=!s&&Rl(r);let d;return!f&&!a?d=t:f&&!o&&!c&&(d=r),!a||!c?E.createElement("a",{role:"button",tabIndex:0,className:`${bn}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":d,onClick:this.toggleOverflow,onKeyPress:l=>rT(l)&&this.toggleOverflow(l)},d):null},this.getEllipsisStyle=()=>{const{ellipsis:t}=this.props;if(this.getEllipsisOpt(),!t)return{ellipsisCls:"",ellipsisStyle:{}};const{rows:i}=this.getEllipsisOpt(),{isOverflowed:r,expanded:s,isTruncated:f}=this.state,o=!s&&this.canUseCSSEllipsis(),a=Ne({[`${bn}-ellipsis`]:!0,[`${bn}-ellipsis-single-line`]:i===1,[`${bn}-ellipsis-multiple-line`]:i>1,[`${bn}-ellipsis-overflow-ellipsis`]:i===1&&o}),c=o&&i>1?{WebkitLineClamp:i}:{};return{ellipsisCls:a,ellipsisStyle:r?c:{}}},this.renderEllipsisText=t=>{const{suffix:i}=t,{children:r}=this.props,{isTruncated:s,expanded:f,isOverflowed:o,ellipsisContent:a}=this.state;return f||!s?E.createElement(E.Fragment,null,r,i&&i.length?i:null):E.createElement("span",null,a,i)},this.state={editable:!1,copied:!1,isOverflowed:!0,ellipsisContent:null,expanded:!1,isTruncated:!1,first:!0,prevChildren:null},this.wrapperRef=E.createRef(),this.expandRef=E.createRef(),this.copyRef=E.createRef()}componentDidMount(){this.props.ellipsis&&(this.getEllipsisState(),window.addEventListener("resize",this.onResize))}static getDerivedStateFromProps(e,t){const{prevChildren:i}=t,r={};return r.prevChildren=e.children,e.ellipsis&&i!==e.children&&(r.isOverflowed=!0,r.ellipsisContent=null,r.expanded=!1,r.isTruncated=!1,r.first=!0),r}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.getEllipsisState())}componentWillUnmount(){this.props.ellipsis&&window.removeEventListener("resize",this.onResize),this.rafId&&window.cancelAnimationFrame(this.rafId)}getEllipsisState(){const{rows:e,suffix:t,pos:i}=this.getEllipsisOpt(),{children:r}=this.props;if(!this.wrapperRef||!this.wrapperRef.current)return this.onResize(),!1;const{ellipsisContent:s,isOverflowed:f,isTruncated:o,expanded:a}=this.state,c=this.shouldTruncated(e),d=this.canUseCSSEllipsis(),l=c!==f;if(!e||e<0||a)return;if(d){l&&this.setState({expanded:!c});return}const u=[this.expandRef.current,this.copyRef&&this.copyRef.current];vc("children"in this.props&&typeof r!="string","[Semi Typography] 'Only children with pure text could be used with ellipsis at this moment.");const h=Vj(Ms.findDOMNode(this.wrapperRef.current),e,r,u,Wj,t,i);r===h?this.setState({expanded:!0}):(s!==h||f!==c)&&this.setState({ellipsisContent:h,isOverflowed:c,isTruncated:r!==h})}renderOperations(){return E.createElement(E.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){const{copyable:e,children:t}=this.props;if(!e)return null;let i,r=!1;Array.isArray(t)?(i="",t.forEach(f=>{typeof f=="object"&&(r=!0),i+=String(f)})):(typeof t!="object"||(r=!0),i=String(t)),vc(r,"Children in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");const s=Object.assign({content:i,duration:3},typeof e=="object"?e:null);return E.createElement(kj,Object.assign({},s,{forwardRef:this.copyRef}))}renderIcon(){const{icon:e,size:t}=this.props;if(!e)return null;const i=t==="small"?"small":"default";return E.createElement("span",{className:`${bn}-icon`,"x-semi-prop":"icon"},ys(e)?E.cloneElement(e,{size:i}):e)}renderContent(){const e=this.props,{component:t,children:i,className:r,type:s,spacing:f,disabled:o,style:a,ellipsis:c,icon:d,size:l,link:u,heading:h}=e,g=Gj(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading"]),m=Ev(g,["strong","editable","mark","copyable","underline","code","delete"]),p=this.renderIcon(),v=this.getEllipsisOpt(),{ellipsisCls:y,ellipsisStyle:_}=this.getEllipsisStyle();let x=c?this.renderEllipsisText(v):i;const b=Ne({[`${bn}-link-text`]:u,[`${bn}-link-underline`]:this.props.underline&&u});x=Xj(this.props,E.createElement(E.Fragment,null,p,this.props.link?E.createElement("span",{className:b},x):x));const w=/^h[1-6]$/,T=Ne(r,y,{[`${bn}-${s}`]:s&&!u,[`${bn}-${l}`]:l,[`${bn}-link`]:u,[`${bn}-disabled`]:o,[`${bn}-${f}`]:f,[`${bn}-${h}`]:or(h)&&w.test(h)});return E.createElement(vC,Object.assign({className:T,style:Object.assign(Object.assign({},a),_),component:t,forwardRef:this.wrapperRef},m),x,this.renderOperations())}renderTipWrapper(){const{children:e}=this.props,t=this.showTooltip(),i=this.renderContent();if(t){const{type:r,opts:s}=t;return r.toLowerCase()==="popover"?E.createElement(Uj,Object.assign({content:e,position:"top"},s),i):E.createElement($i,Object.assign({content:e,position:"top"},s),i)}else return i}render(){return E.createElement(yc,{componentName:"Typography"},e=>(this.expandStr=e.expand,this.collapseStr=e.collapse,this.renderTipWrapper()))}}$o.propTypes={children:C.node,copyable:C.oneOfType([C.shape({text:C.string,onCopy:C.func,successTip:C.node,copyTip:C.node}),C.bool]),delete:C.bool,disabled:C.bool,ellipsis:C.oneOfType([C.shape({rows:C.number,expandable:C.bool,expandText:C.string,onExpand:C.func,suffix:C.string,showTooltip:C.oneOfType([C.shape({type:C.string,opts:C.object}),C.bool]),collapsible:C.bool,collapseText:C.string,pos:C.oneOf(["end","middle"])}),C.bool]),mark:C.bool,underline:C.bool,link:C.oneOfType([C.object,C.bool]),spacing:C.oneOf(mn.SPACING),strong:C.bool,size:C.oneOf(mn.SIZE),type:C.oneOf(mn.TYPE),style:C.object,className:C.string,icon:C.oneOfType([C.node,C.string]),heading:C.string,component:C.string};$o.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""};class Dv extends fe.PureComponent{render(){return E.createElement($o,Object.assign({component:"span"},this.props))}}Dv.propTypes={copyable:C.oneOfType([C.object,C.bool]),delete:C.bool,disabled:C.bool,icon:C.oneOfType([C.node,C.string]),ellipsis:C.oneOfType([C.object,C.bool]),mark:C.bool,underline:C.bool,link:C.oneOfType([C.object,C.bool]),strong:C.bool,type:C.oneOf(mn.TYPE),size:C.oneOf(mn.SIZE),style:C.object,className:C.string,code:C.bool,component:C.string};Dv.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};var Yj=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class Iv extends fe.PureComponent{render(){const e=this.props,{heading:t}=e,i=Yj(e,["heading"]),r=mn.HEADING.indexOf(t)!==-1?`h${t}`:"h1";return E.createElement($o,Object.assign({component:r,heading:r},i))}}Iv.propTypes={copyable:C.oneOfType([C.object,C.bool]),delete:C.bool,disabled:C.bool,ellipsis:C.oneOfType([C.object,C.bool]),mark:C.bool,link:C.oneOfType([C.object,C.bool]),underline:C.bool,strong:C.bool,type:C.oneOf(mn.TYPE),heading:C.oneOf(mn.HEADING),style:C.object,className:C.string,component:C.string};Iv.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};const Kj=Of.PREFIX;class kv extends fe.PureComponent{render(){const{className:e}=this.props,t=Ne(e,`${Kj}-paragraph`);return E.createElement($o,Object.assign({component:"p"},this.props,{className:t}))}}kv.propTypes={copyable:C.oneOfType([C.object,C.bool]),delete:C.bool,disabled:C.bool,ellipsis:C.oneOfType([C.object,C.bool]),mark:C.bool,link:C.oneOfType([C.object,C.bool]),underline:C.bool,strong:C.bool,type:C.oneOf(mn.TYPE),size:C.oneOf(mn.SIZE),spacing:C.oneOf(mn.SPACING),style:C.object,className:C.string,component:C.string};kv.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""};class qj{constructor(e,t,i,r,s){this.ruleMethods={"bytes-decimal":f=>{const o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];let a=0;for(;f>=1e3;)f/=1e3,a++;return`${this.truncatePrecision(f)} ${o[a]}`},"bytes-binary":f=>{const o=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let a=0;for(;f>=1024;)f/=1024,a++;return`${this.truncatePrecision(f)} ${o[a]}`},percentages:f=>{const o=f.toString().split(".");return Number(o[0])===0?`${this.truncatePrecision(f*100)}%`:`${this.truncatePrecision(f)}%`},exponential:f=>{const a=f.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(a[0]))}e${a[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=typeof s<"u",this.content=e,this.rule=t,this.precision=i,this.truncate=r,this.parser=s}format(){return this.isDiyParser?this.parser(this.content):this.rule==="text"?Hd(this.content).map(e=>Vd(e)?this.truncatePrecision(e):e).join(""):this.rule==="numbers"?Hd(this.content).filter(e=>Vd(e)).map(e=>this.truncatePrecision(e)).join(","):Hd(this.content).map(e=>Vd(e)?this.ruleMethods[this.rule](Number(e)):e).join("")}truncatePrecision(e){const t=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),i=t.toString().split(".");if(i.length===1)return t.toFixed(this.precision);const r=i[1].length;return r<this.precision?`${i[0]}.${i[1]}${"0".repeat(this.precision-r)}`:t.toString()}}function Hd(n){const e=/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g;return n.match(e)||[]}function Vd(n){return!(isNaN(Number(n))||n.replace(/\s+/g,"")==="")}class Fv extends fe.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),e=e.map(t=>typeof t=="string"||typeof t=="number"?new qj(String(t),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():typeof t=="function"?this.formatNodeDFS(t()):typeof t=="object"&&"children"in t.props?Object.assign(Object.assign({},t),{props:Object.assign(Object.assign({},t.props),{children:this.formatNodeDFS(t.props.children)})}):t),e.length===1?e[0]:e}render(){const e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),E.createElement($o,Object.assign({component:"span"},e))}}Fv.propTypes={rule:C.oneOf(mn.RULE),precision:C.number,truncate:C.oneOf(mn.TRUNCATE),parser:C.func,copyable:C.oneOfType([C.object,C.bool]),delete:C.bool,disabled:C.bool,icon:C.oneOfType([C.node,C.string]),mark:C.bool,underline:C.bool,link:C.oneOfType([C.object,C.bool]),strong:C.bool,type:C.oneOf(mn.TYPE),size:C.oneOf(mn.SIZE),style:C.object,className:C.string,code:C.bool,component:C.string};Fv.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};const $c=vC;$c.Text=Dv;$c.Title=Iv;$c.Paragraph=kv;$c.Numeral=Fv;const Zj=$c;var Jj=es,Qj=Ai,eU="[object Number]";function tU(n){return typeof n=="number"||Qj(n)&&Jj(n)==eU}var Gg=tU,nU=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};let r1=-1;function iU(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:e,className:t}=n,i=nU(n,["id","className"]);let r=e;Av(r)&&(r1++,r=r1);const s=`linearGradient-${r}`;return E.createElement("svg",Object.assign({},i,{className:t,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),E.createElement("defs",null,E.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:s},E.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),E.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),E.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),E.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},E.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),E.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:`url(#${s})`,strokeWidth:"4",strokeLinecap:"round"})))}const rU={PREFIX:`${We}-input`},Nf={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]};class Nv extends Oi{constructor(e){super(Object.assign(Object.assign({},Nv.inputDefaultAdapter),e))}static get inputDefaultAdapter(){return{notifyChange:Ke,setValue:Ke}}init(){this._setInitValue()}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}_setInitValue(){const{defaultValue:e,value:t}=this.getProps();let i=e;this._isControlledComponent()&&(i=t),this._adapter.setValue(i)}setValue(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:i,minLength:r,getValueLength:s}=this._adapter.getProps();let f=e;i&&Bn(s)&&(f=this.handleVisibleMaxLength(e)),r&&Bn(s)&&this.handleVisibleMinLength(f),this._isControlledComponent()?this._adapter.notifyChange(f,t):(this._adapter.setValue(f),this._adapter.notifyChange(f,t))}handleVisibleMinLength(e){const{minLength:t,getValueLength:i}=this._adapter.getProps(),{minLength:r}=this._adapter.getStates();if(Gg(t)&&t>=0&&Bn(i)&&or(e)){const s=i(e);if(s<t){const f=e.length+(t-s);f!==r&&this._adapter.setMinLength(f)}else r!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:i}=this._adapter.getProps();if(Gg(t)&&t>=0&&Bn(i)&&or(e))return i(e)>t?(console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,t)):e}handleTruncateValue(e,t){const{getValueLength:i}=this._adapter.getProps();if(Bn(i)){let r="";for(let s=1,f=e.length;s<=f;s++){const o=e.slice(0,s);if(i(o)>t)return r;r=o}return r}else return e.slice(0,t)}handleClear(e){let t=e;const i="";this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),(!t||typeof t!="object")&&(t={}),QC(t,Nf.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange(i,t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:i}=this._adapter.getStates();t||i||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){e==="password"?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),i=this._adapter.getState("eyeClosed");return t==="password"?i?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===iT&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:i}=this._adapter.getStates(),{showClear:r,disabled:s}=this._adapter.getProps();return e&&r&&!s&&(t||i)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:i}=this._adapter.getStates();!t&&!i&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&Bn(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(e==null?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}const sU=Nv;var aU=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const ut=rU.PREFIX,oU=Nf.SIZE,lU=Nf.STATUS,cU=Nf.MODE;class Bv extends ln{constructor(e){super(e),this.handleClear=t=>{this.foundation.handleClear(t)},this.handleClick=t=>{this.foundation.handleClick(t)},this.handleMouseOver=t=>{this.setState({isHovering:!0})},this.handleMouseLeave=t=>{this.setState({isHovering:!1})},this.handleModeChange=t=>{this.foundation.handleModeChange(t)},this.handleClickEye=t=>{this.foundation.handleClickEye(t)},this.handleMouseDown=t=>{this.foundation.handleMouseDown(t)},this.handleMouseUp=t=>{this.foundation.handleMouseUp(t)},this.handleModeEnterPress=t=>{this.foundation.handleModeEnterPress(t)},this.handleClickPrefixOrSuffix=t=>{this.foundation.handleClickPrefixOrSuffix(t)},this.handlePreventMouseDown=t=>{this.foundation.handlePreventMouseDown(t)},this.state={value:"",cachedValue:null,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:e.mode==="password",minLength:e.minLength},this.inputRef=E.createRef(),this.prefixRef=E.createRef(),this.suffixRef=E.createRef(),this.foundation=new sU(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const i={};return e.value!==t.cachedValue&&(i.value=e.value,i.cachedValue=e.value),i}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=Ne({[`${ut}-prepend`]:!0,[`${ut}-prepend-text`]:e&&or(e),[`${ut}-prepend-icon`]:ys(e)});return E.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=Ne({[`${ut}-append`]:!0,[`${ut}-append-text`]:e&&or(e),[`${ut}-append-icon`]:ys(e)});return E.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=Ne(`${ut}-clearbtn`),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?E.createElement("div",{className:e,onMouseDown:this.handleClear},t||E.createElement(Mz,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:i}=this.props,r=Ne(`${ut}-modebtn`),s=e?E.createElement(Xz,null):E.createElement(qz,null),f=t==="password"&&!i,o=e?"Show password":"Hidden password";return f?E.createElement("div",{role:"button",tabIndex:0,"aria-label":o,className:r,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},s):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:i}=this.props,r=e||t;if(!r)return null;const s=Ne({[`${ut}-prefix`]:!0,[`${ut}-inset-label`]:t,[`${ut}-prefix-text`]:r&&or(r),[`${ut}-prefix-icon`]:ys(r)});return E.createElement("div",{className:s,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:i,"x-semi-prop":"prefix,insetLabel"},r)}showClearBtn(){const{value:e,isFocus:t,isHovering:i}=this.state,{disabled:r,showClear:s}=this.props;return Boolean(e)&&s&&!r&&(t||i)}renderSuffix(e){const{suffix:t,hideSuffix:i}=this.props;if(!t)return null;const r=Ne({[`${ut}-suffix`]:!0,[`${ut}-suffix-text`]:t&&or(t),[`${ut}-suffix-icon`]:ys(t),[`${ut}-suffix-hidden`]:e&&Boolean(i)});return E.createElement("div",{className:r,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!Rl(e)){if(typeof e=="function")return t=>{e(t),this.inputRef={current:t}};if(Object.prototype.toString.call(e)==="[object Object]")return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:i,autofocus:r,clearIcon:s,className:f,disabled:o,defaultValue:a,placeholder:c,prefix:d,mode:l,insetLabel:u,insetLabelId:h,validateStatus:g,type:m,readonly:p,size:v,suffix:y,style:_,showClear:x,onEnterPress:b,onClear:w,hideSuffix:T,inputStyle:S,forwardRef:O,maxLength:N,getValueLength:V,preventScroll:Z}=e,j=aU(e,["addonAfter","addonBefore","autofocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll"]),{value:z,isFocus:G,minLength:ne}=this.state,re=this.showClearBtn(),U=ys(y),M=this.getInputRef(),D=`${ut}-wrapper`,P=Ne(D,f,{[`${ut}-wrapper__with-prefix`]:d||u,[`${ut}-wrapper__with-suffix`]:y,[`${ut}-wrapper__with-suffix-hidden`]:re&&Boolean(T),[`${ut}-wrapper__with-suffix-icon`]:U,[`${ut}-wrapper__with-append`]:i,[`${ut}-wrapper__with-prepend`]:t,[`${ut}-wrapper__with-append-only`]:i&&!t,[`${ut}-wrapper__with-prepend-only`]:!i&&t,[`${D}-readonly`]:p,[`${D}-disabled`]:o,[`${D}-warning`]:g==="warning",[`${D}-error`]:g==="error",[`${D}-focus`]:G,[`${D}-clearable`]:x,[`${D}-modebtn`]:l==="password",[`${D}-hidden`]:m==="hidden",[`${D}-${v}`]:v}),L=Ne(ut,{[`${ut}-${v}`]:v,[`${ut}-disabled`]:o,[`${ut}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${ut}-sibling-modebtn`]:l==="password"}),H=z??"",k=Object.assign(Object.assign({},j),{style:S,autoFocus:r,className:L,disabled:o,readOnly:p,type:this.foundation.handleInputType(m),placeholder:c,onInput:A=>this.foundation.handleInput(A),onChange:A=>this.foundation.handleChange(A.target.value,A),onFocus:A=>this.foundation.handleFocus(A),onBlur:A=>this.foundation.handleBlur(A),onKeyUp:A=>this.foundation.handleKeyUp(A),onKeyDown:A=>this.foundation.handleKeyDown(A),onKeyPress:A=>this.foundation.handleKeyPress(A),value:H});return Bn(V)||(k.maxLength=N),ne&&(k.minLength=ne),g==="error"&&(k["aria-invalid"]="true"),E.createElement("div",{className:P,style:_,onMouseEnter:A=>this.handleMouseOver(A),onMouseLeave:A=>this.handleMouseLeave(A),onClick:A=>this.handleClick(A)},this.renderPrepend(),this.renderPrefix(),E.createElement("input",Object.assign({},k,{ref:M})),this.renderClearBtn(),this.renderSuffix(re),this.renderModeBtn(),this.renderAppend())}}Bv.propTypes={"aria-label":C.string,"aria-labelledby":C.string,"aria-invalid":C.bool,"aria-errormessage":C.string,"aria-describedby":C.string,"aria-required":C.bool,addonBefore:C.node,addonAfter:C.node,clearIcon:C.node,prefix:C.node,suffix:C.node,mode:C.oneOf(cU),value:C.any,defaultValue:C.any,disabled:C.bool,readonly:C.bool,autofocus:C.bool,type:C.string,showClear:C.bool,hideSuffix:C.bool,placeholder:C.any,size:C.oneOf(oU),className:C.string,style:C.object,validateStatus:C.oneOf(lU),onClear:C.func,onChange:C.func,onBlur:C.func,onFocus:C.func,onInput:C.func,onKeyDown:C.func,onKeyUp:C.func,onKeyPress:C.func,onEnterPress:C.func,insetLabel:C.node,insetLabelId:C.string,inputStyle:C.object,getValueLength:C.func,preventScroll:C.bool};Bv.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:Ke,onChange:Ke,onBlur:Ke,onFocus:Ke,onInput:Ke,onKeyDown:Ke,onKeyUp:Ke,onKeyPress:Ke,onEnterPress:Ke,validateStatus:"default"};const uU=E.forwardRef((n,e)=>E.createElement(Bv,Object.assign({},n,{forwardRef:e}))),hU=uU,fU={PREFIX:`${We}-avatar`},zv={SHAPE:["circle","square"],SIZE:["extra-extra-small","extra-small","small","default","medium","large","extra-large"],COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],OVERLAP_FROM:["start","end"]};class dU extends Oi{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=t=>{const{target:i}=t;try{i.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{vc(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();(e?e():void 0)!==!1&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}var pU=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const gU=zv.SIZE,mU=zv.SHAPE,vU=zv.COLOR,pi=fU.PREFIX;class Bf extends ln{constructor(e){super(e),this.handleFocusVisible=t=>{this.foundation.handleFocusVisible(t)},this.handleBlur=t=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:t,onClick:i,imgAttr:r,src:s,srcSet:f,alt:o}=this.props,{isImgExist:a}=this.state;let c=t;const d=i!==zi,l=s&&a,u={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(l){const h=d?`clickable Avatar: ${o}`:o,g=Object.assign(Object.assign({src:s,srcSet:f,onError:this.handleError},r),{className:Ne({[`${pi}-no-focus-visible`]:d})}),m=d?Object.assign(Object.assign({},g),u):g;c=E.createElement("img",Object.assign({alt:h},m))}else if(typeof t=="string"){const h=o??t,m={role:"img","aria-label":d?`clickable Avatar: ${h}`:h,className:Ne(`${pi}-label`,{[`${pi}-no-focus-visible`]:d})},p=d?Object.assign(Object.assign({},m),u):m;c=E.createElement("span",{className:`${pi}-content`},E.createElement("span",Object.assign({},p,{"x-semi-prop":"children"}),t))}return c},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,i=t;this.setState({hoverContent:i},()=>{const{onMouseEnter:r}=this.props;r&&r(e)})},notifyLeave:e=>{this.setState({hoverContent:""},()=>{const{onMouseLeave:t}=this.props;t&&t(e)})},setFocusVisible:e=>{this.setState({focusVisible:e})}})}componentDidMount(){this.foundation=new dU(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const t=new Image(0,0);t.src=this.props.src,t.onload=()=>{this.setState({isImgExist:!0})},t.onerror=()=>{this.setState({isImgExist:!1})},t.onabort=()=>{this.setState({isImgExist:!1})}}}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),Xr(e);break;case"Escape":e.target.blur();break}}render(){const e=this.props,{shape:t,children:i,size:r,color:s,className:f,hoverMask:o,onClick:a,imgAttr:c,src:d,srcSet:l,style:u,alt:h}=e,g=pU(e,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt"]),{isImgExist:m,hoverContent:p,focusVisible:v}=this.state,y=d&&m,_=Ne(pi,{[`${pi}-${t}`]:t,[`${pi}-${r}`]:r,[`${pi}-${s}`]:s&&!y,[`${pi}-img`]:y,[`${pi}-focus`]:v},f),x=p?E.createElement("div",{className:`${pi}-hover`,"x-semi-prop":"hoverContent"},p):null;return E.createElement("span",Object.assign({},g,{style:u,className:_,onClick:a,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave,role:"listitem"}),this.getContent(),x)}}Bf.defaultProps={size:"medium",color:"grey",shape:"circle",onClick:zi,onMouseEnter:zi,onMouseLeave:zi};Bf.propTypes={children:C.node,color:C.oneOf(vU),shape:C.oneOf(mU),size:C.oneOf(gU),hoverMask:C.node,className:C.string,style:C.object,imgAttr:C.object,src:C.string,srcSet:C.string,alt:C.string,onError:C.func,onClick:C.func,onMouseEnter:C.func,onMouseLeave:C.func};Bf.elementType="Avatar";const oT={PREFIX:`${We}-button`},Hc={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"},yU={SIZE:["extra-small","small","default","large","extra-large","custom"],ICON_PREFIX:"semi-icon-"};var _U=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const xU=Hc.sizes,{htmlTypes:bU,btnTypes:wU}=Hc;let Vc=class extends fe.PureComponent{render(){const e=this.props,{children:t,block:i,htmlType:r,loading:s,circle:f,className:o,style:a,disabled:c,size:d,theme:l,type:u,prefixCls:h,iconPosition:g}=e,m=_U(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),p=Object.assign(Object.assign({disabled:c},Ev(m,["x-semi-children-alias"])),{className:Ne(h,{[`${h}-${u}`]:!c&&u,[`${h}-disabled`]:c,[`${h}-size-large`]:d==="large",[`${h}-size-small`]:d==="small",[`${h}-light`]:l==="light",[`${h}-block`]:i,[`${h}-circle`]:f,[`${h}-borderless`]:l==="borderless"},o),type:r,"aria-disabled":c}),v={};return o&&o.includes("-with-icon")||(v["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),E.createElement("button",Object.assign({},p,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:a}),E.createElement("span",Object.assign({className:`${h}-content`,onClick:y=>c&&y.stopPropagation()},v),t))}};Vc.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:zi,onClick:zi,onMouseEnter:zi,onMouseLeave:zi,prefixCls:oT.PREFIX};Vc.propTypes={children:C.node,disabled:C.bool,prefixCls:C.string,style:C.object,size:C.oneOf(xU),type:C.oneOf(wU),block:C.bool,onClick:C.func,onMouseDown:C.func,circle:C.bool,loading:C.bool,htmlType:C.oneOf(bU),theme:C.oneOf(Hc.themes),className:C.string,onMouseEnter:C.func,onMouseLeave:C.func,"aria-label":C.string};var SU=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const CU=yU.SIZE;class jv extends fe.PureComponent{render(){const e=this.props,{children:t,iconPosition:i,iconSize:r,iconStyle:s,style:f,icon:o,noHorizontalPadding:a,theme:c,className:d,prefixCls:l,loading:u}=e,h=SU(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),g=Object.assign({},f);Array.isArray(a)?(a.includes("left")&&(g.paddingLeft=0),a.includes("right")&&(g.paddingRight=0)):a===!0?(g.paddingLeft=0,g.paddingRight=0):typeof a=="string"&&(a==="left"&&(g.paddingLeft=0),a==="right"&&(g.paddingRight=0));let m=null,p=null;u&&!h.disabled?p=E.createElement(iU,null):E.isValidElement(o)&&(p=o);const v=Ne({[`${l}-content-left`]:i==="right",[`${l}-content-right`]:i==="left"}),y=this.props["x-semi-children-alias"]||"children",_=t!=null?E.createElement("span",{className:v,"x-semi-prop":y},t):null;i==="left"?m=E.createElement(E.Fragment,null,p,_):m=E.createElement(E.Fragment,null,_,p);const x=Ne(d,`${l}-with-icon`,{[`${l}-with-icon-only`]:_==null||_==="",[`${l}-loading`]:u});return E.createElement(Vc,Object.assign({},h,{className:x,theme:c,style:g}),m)}}jv.defaultProps={iconPosition:Hc.DEFAULT_ICON_POSITION,prefixCls:oT.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:Ke,onMouseLeave:Ke};jv.propTypes={iconStyle:C.object,style:C.object,loading:C.bool,prefixCls:C.string,icon:C.oneOfType([C.object,C.string,C.node]),iconSize:C.oneOf(CU),noHorizontalPadding:C.oneOfType([C.bool,C.string,C.array]),children:C.node,theme:C.string,iconPosition:C.oneOf(Hc.iconPositions),className:C.string,onMouseEnter:C.func,onMouseLeave:C.func};const Uv=jv;class $v extends E.PureComponent{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e)}render(){const e=Object.assign({},this.props),t=Boolean(e.icon),i=Boolean(e.loading),r=Boolean(e.disabled);return t||i&&!r?E.createElement(Uv,Object.assign({},e)):E.createElement(Vc,Object.assign({},e))}}$v.propTypes=Object.assign(Object.assign({},Vc.propTypes),Uv.propTypes);$v.elementType="Button";const Kh=$v;function Hv(n){return Object.keys(n).reduce((e,t)=>((t.substr(0,5)==="aria-"||t.substr(0,5)==="data-"||t==="role")&&(e[t]=n[t]),e),{})}var TU=Tv,EU=1,MU=4;function AU(n){return TU(n,EU|MU)}var Wg=AU,OU=Af,PU=JC,LU=No;function RU(n,e,t){for(var i=-1,r=e.length,s={};++i<r;){var f=e[i],o=OU(n,f);t(o,f)&&PU(s,LU(f,n),o)}return s}var DU=RU;function IU(n,e){return n!=null&&e in Object(n)}var kU=IU,FU=No,NU=Fc,BU=xn,zU=Df,jU=_v,UU=Bo;function $U(n,e,t){e=FU(e,n);for(var i=-1,r=e.length,s=!1;++i<r;){var f=UU(e[i]);if(!(s=n!=null&&t(n,f)))break;n=n[f]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&jU(r)&&zU(f,r)&&(BU(n)||NU(n)))}var HU=$U,VU=kU,GU=HU;function WU(n,e){return n!=null&&GU(n,e,VU)}var lT=WU,XU=DU,YU=lT;function KU(n,e){return XU(n,e,function(t,i){return YU(n,i)})}var qU=KU,ZU=qU,JU=GC,QU=JU(function(n,e){return n==null?{}:ZU(n,e)}),Xg=QU;const e7={PREFIX:`${We}-tag`},zf={TAG_SIZE:["default","small","large"],TAG_COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],TAG_TYPE:["light","solid","ghost"],AVATAR_SHAPE:["square","circle"]};var t7=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Dn=e7.PREFIX,cT=zf.TAG_COLOR,uT=zf.TAG_SIZE,hT=zf.TAG_TYPE,n7=zf.AVATAR_SHAPE;class Gc extends fe.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,i){const{onClose:r}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),r&&r(t,e,i),!e.defaultPrevented&&this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:i,onKeyDown:r}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),Xr(e);break;case"Enter":i(e),Xr(e);break;case"Escape":e.target.blur();break}r&&r(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return E.createElement(Bf,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:i,size:r,color:s,closable:f,visible:o,onClose:a,onClick:c,className:d,type:l,shape:u,avatarSrc:h,avatarShape:g,tabIndex:m}=e,p=t7(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex"]),{visible:v}=this.state,y=c!==Gc.defaultProps.onClick||f,_={role:"button",tabIndex:m|0,onKeyDown:this.handleKeyDown},x=Object.assign(Object.assign({},p),{onClick:c,className:Ne(Dn,{[`${Dn}-default`]:r==="default",[`${Dn}-small`]:r==="small",[`${Dn}-large`]:r==="large",[`${Dn}-square`]:u==="square",[`${Dn}-circle`]:u==="circle",[`${Dn}-${l}`]:l,[`${Dn}-${s}-${l}`]:s&&l,[`${Dn}-closable`]:f,[`${Dn}-invisible`]:!v,[`${Dn}-avatar-${g}`]:h},d)}),b=y?Object.assign(Object.assign({},x),_):x,w=f?E.createElement("div",{className:`${Dn}-close`,onClick:T=>this.close(T,i,t)},E.createElement(Lv,{size:"small"})):null;return E.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||or(i)?`${f?"Closable ":""}Tag: ${i}`:""},b),h?this.renderAvatar():null,E.createElement("div",{className:`${Dn}-content`},i),w)}}Gc.defaultProps={size:uT[0],color:cT[0],closable:!1,type:hT[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square"};Gc.propTypes={children:C.node,tagKey:C.oneOfType([C.string,C.number]),size:C.oneOf(uT),color:C.oneOf(cT),type:C.oneOf(hT),closable:C.bool,visible:C.bool,onClose:C.func,onClick:C.func,style:C.object,className:C.string,avatarSrc:C.string,avatarShape:C.oneOf(n7),"aria-label":C.string};const Di={PREFIX:`${We}-collapse`},i7={iconPosition:["left","right"]};class r7 extends Oi{constructor(e){super(Object.assign({},e))}initActiveKey(){const{defaultActiveKey:e,activeKey:t,accordion:i}=this.getProps();let r=t||e;return i&&(r=Array.isArray(r)?r[0]:r),r&&r.length?(r=Array.isArray(r)?r:[r],r):[]}handleChange(e,t){const{activeKey:i,accordion:r}=this.getProps(),{activeSet:s}=this.getStates();let f=new Set(s);f.has(e)?f.delete(e):r?f=new Set([e]):f.add(e),this._adapter.handleChange([...f.values()],t),typeof i>"u"&&this._adapter.addActiveKey(f)}}class s7 extends Oi{constructor(e){super(Object.assign({},e)),this.updateDOMInRenderTree=t=>{this._adapter.setDOMInRenderTree(t)},this.updateDOMHeight=t=>{this._adapter.setDOMHeight(t)},this.updateVisible=t=>{this._adapter.setVisible(t)},this.updateIsTransitioning=t=>{this._adapter.setIsTransitioning(t)}}}const a7=s7,s1={PREFIX:`${We}-collapsible`};class Ho extends ln{constructor(e){super(e),this.domRef=E.createRef(),this.handleResize=t=>{const i=t[0];if(i){const r=Ho.getEntryInfo(i);this.foundation.updateDOMHeight(r.height),this.foundation.updateDOMInRenderTree(r.isShown)}},this.isChildrenInRenderTree=()=>this.domRef.current?this.domRef.current.offsetHeight>0:!1,this.state={domInRenderTree:!1,domHeight:0,visible:this.props.isOpen,isTransitioning:!1},this.foundation=new a7(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setDOMInRenderTree:e=>{this.state.domInRenderTree!==e&&this.setState({domInRenderTree:e})},setDOMHeight:e=>{this.state.domHeight!==e&&this.setState({domHeight:e})},setVisible:e=>{this.state.visible!==e&&this.setState({visible:e})},setIsTransitioning:e=>{this.state.isTransitioning!==e&&this.setState({isTransitioning:e})}})}componentDidMount(){super.componentDidMount(),this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.domRef.current);const e=this.isChildrenInRenderTree();this.foundation.updateDOMInRenderTree(e),e&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight)}componentDidUpdate(e,t,i){const r=Object.keys(this.props).filter(f=>!Vi(this.props[f],e[f])),s=Object.keys(this.state).filter(f=>!Vi(this.state[f],t[f]));r.includes("reCalcKey")&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),s.includes("domInRenderTree")&&this.state.domInRenderTree&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),r.includes("isOpen")&&(this.props.isOpen||!this.props.motion)&&this.foundation.updateVisible(this.props.isOpen),this.props.motion&&e.isOpen!==this.props.isOpen&&this.foundation.updateIsTransitioning(!0)}componentWillUnmount(){super.componentWillUnmount(),this.resizeObserver.disconnect()}render(){const e=Object.assign({overflow:"hidden",height:this.props.isOpen?this.state.domHeight:this.props.collapseHeight,opacity:this.props.isOpen||!this.props.fade||this.props.collapseHeight!==0?1:0,transitionDuration:`${this.props.motion&&this.state.isTransitioning?this.props.duration:0}ms`},this.props.style),t=Ne(`${s1.PREFIX}-wrapper`,{[`${s1.PREFIX}-transition`]:this.props.motion&&this.state.isTransitioning},this.props.className);return E.createElement("div",{className:t,style:e,onTransitionEnd:()=>{var i,r;this.props.isOpen||this.foundation.updateVisible(!1),this.foundation.updateIsTransitioning(!1),(r=(i=this.props).onMotionEnd)===null||r===void 0||r.call(i)}},E.createElement("div",{"x-semi-prop":"children",ref:this.domRef,style:{overflow:"hidden"},id:this.props.id},(this.props.keepDOM||this.props.collapseHeight!==0||this.state.visible||this.props.isOpen)&&this.props.children))}}Ho.defaultProps={isOpen:!1,duration:250,motion:!0,keepDOM:!1,collapseHeight:0,fade:!1};Ho.getEntryInfo=n=>{let e;n.borderBoxSize?e=!(n.borderBoxSize[0].blockSize===0&&n.borderBoxSize[0].inlineSize===0):e=!(n.contentRect.height===0&&n.contentRect.width===0);let t=0;return n.borderBoxSize?t=Math.ceil(n.borderBoxSize[0].blockSize):t=n.target.clientHeight,{isShown:e,height:t}};Ho.propTypes={motion:C.bool,children:C.node,isOpen:C.bool,duration:C.number,keepDOM:C.bool,collapseHeight:C.number,style:C.object,className:C.string,reCalcKey:C.oneOfType([C.string,C.number])};const o7=Ho,l7=E.createContext({}),fT=l7;var c7=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class jf extends fe.PureComponent{constructor(){super(...arguments),this.ariaID=ZC({})}renderHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const{showArrow:i,header:r,extra:s}=this.props;let{expandIcon:f,collapseIcon:o}=this.context;const{expandIconPosition:a}=this.context;typeof f>"u"&&(f=E.createElement(gz,null)),typeof o>"u"&&(o=E.createElement(Cz,null));const c=E.createElement("span",{"aria-hidden":"true",className:Ne([`${Di.PREFIX}-header-icon`,{[`${Di.PREFIX}-header-iconDisabled`]:!t}])},t&&e?o:f),d=a==="left";return typeof r=="string"?E.createElement(E.Fragment,null,i&&(d?c:null),E.createElement("span",null,r),E.createElement("span",{className:`${Di.PREFIX}-header-right`},E.createElement("span",null,s),i&&(d?null:c))):E.createElement(E.Fragment,null,i&&(d?c:null),r,i&&(d?null:c))}render(){const e=this.props,{className:t,children:i,itemKey:r,reCalcKey:s,header:f,extra:o,showArrow:a,disabled:c}=e,d=c7(e,["className","children","itemKey","reCalcKey","header","extra","showArrow","disabled"]),{keepDOM:l,expandIconPosition:u,activeSet:h,onClick:g,motion:m}=this.context,p=h.has(r),v=Ne(t,{[`${Di.PREFIX}-item`]:!0}),y=Ne({[`${Di.PREFIX}-header`]:!0,[`${Di.PREFIX}-header-disabled`]:c,[`${Di.PREFIX}-header-iconLeft`]:u==="left"}),_=Ne({[`${Di.PREFIX}-content`]:!0});return E.createElement("div",Object.assign({className:v},d),E.createElement("div",{role:"button",tabIndex:0,className:y,"aria-disabled":c,"aria-expanded":p?"true":"false","aria-owns":this.ariaID,onClick:x=>!c&&g(r,x)},this.renderHeader(p,i!==void 0&&!c)),i&&E.createElement(o7,{isOpen:p,keepDOM:l,motion:m,reCalcKey:s},E.createElement("div",{className:_,"aria-hidden":!p,id:this.ariaID},E.createElement("div",{className:`${Di.PREFIX}-content-wrapper`},i))))}}jf.contextType=fT;jf.propTypes={itemKey:C.string,extra:C.node,header:C.oneOfType([C.string,C.node]),className:C.string,reCalcKey:C.oneOfType([C.string,C.number]),showArrow:C.bool,disabled:C.bool};jf.defaultProps={showArrow:!0,disabled:!1};var u7=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class Uf extends ln{constructor(e){super(e),this.onChange=(i,r)=>{this.foundation.handleChange(i,r)},this.foundation=new r7(this.adapter);const t=this.foundation.initActiveKey();this.state={activeSet:new Set(t)},this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{handleChange:(e,t)=>this.props.onChange(e,t),addActiveKey:e=>this.setState({activeSet:e})})}static getDerivedStateFromProps(e,t){if(e.activeKey){const i=Array.isArray(e.activeKey)?e.activeKey:[e.activeKey],r=new Set(i);return Vi(r,t.activeSet)?t:Object.assign(Object.assign({},t),{activeSet:r})}return t}componentWillUnmount(){this.foundation.destroy()}render(){const e=this.props,{defaultActiveKey:t,accordion:i,style:r,motion:s,className:f,keepDOM:o,expandIconPosition:a,expandIcon:c,collapseIcon:d,children:l}=e;u7(e,["defaultActiveKey","accordion","style","motion","className","keepDOM","expandIconPosition","expandIcon","collapseIcon","children"]);const u=Ne(Di.PREFIX,f),{activeSet:h}=this.state;return E.createElement("div",{className:u,style:r},E.createElement(fT.Provider,{value:{activeSet:h,expandIcon:c,collapseIcon:d,keepDOM:o,expandIconPosition:a,onClick:this.onChange,motion:s}},l))}}Uf.Panel=jf;Uf.propTypes={activeKey:C.oneOfType([C.string,C.array]),defaultActiveKey:C.oneOfType([C.string,C.array]),accordion:C.bool,onChange:C.func,expandIcon:C.node,collapseIcon:C.node,style:C.object,className:C.string,keepDOM:C.bool,motion:C.oneOfType([C.bool,C.func,C.object]),expandIconPosition:C.oneOf(i7.iconPosition)};Uf.defaultProps={defaultActiveKey:"",onChange:zi,expandIconPosition:"right"};const a1=Uf;var h7=Pf,f7=Mv,d7=1,p7=2;function g7(n,e,t,i){var r=t.length,s=r,f=!i;if(n==null)return!s;for(n=Object(n);r--;){var o=t[r];if(f&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++r<s;){o=t[r];var a=o[0],c=n[a],d=o[1];if(f&&o[2]){if(c===void 0&&!(a in n))return!1}else{var l=new h7;if(i)var u=i(c,d,a,n,e,l);if(!(u===void 0?f7(d,c,d7|p7,i,l):u))return!1}}return!0}var m7=g7,v7=Zn;function y7(n){return n===n&&!v7(n)}var dT=y7,_7=dT,x7=Bc;function b7(n){for(var e=x7(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,_7(r)]}return e}var w7=b7;function S7(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var pT=S7,C7=m7,T7=w7,E7=pT;function M7(n){var e=T7(n);return e.length==1&&e[0][2]?E7(e[0][0],e[0][1]):function(t){return t===n||C7(t,n,e)}}var A7=M7,O7=Mv,P7=st,L7=lT,R7=cv,D7=dT,I7=pT,k7=Bo,F7=1,N7=2;function B7(n,e){return R7(n)&&D7(e)?I7(k7(n),e):function(t){var i=P7(t,n);return i===void 0&&i===e?L7(t,n):O7(e,i,F7|N7)}}var z7=B7;function j7(n){return function(e){return e==null?void 0:e[n]}}var U7=j7,$7=Af;function H7(n){return function(e){return $7(e,n)}}var V7=H7,G7=U7,W7=V7,X7=cv,Y7=Bo;function K7(n){return X7(n)?G7(Y7(n)):W7(n)}var q7=K7,Z7=A7,J7=z7,Q7=If,e9=xn,t9=q7;function n9(n){return typeof n=="function"?n:n==null?Q7:typeof n=="object"?e9(n)?J7(n[0],n[1]):Z7(n):t9(n)}var i9=n9,r9=KC,s9=Xs;function a9(n,e){var t=-1,i=s9(n)?Array(n.length):[];return r9(n,function(r,s,f){i[++t]=e(r,s,f)}),i}var o9=a9,l9=dv,c9=i9,u9=o9,h9=xn;function f9(n,e){var t=h9(n)?l9:u9;return t(n,c9(e))}var d9=f9;const p9={PREFIX:`${We}-empty`},as=p9.PREFIX;class Vv extends ln{constructor(e){super(e),this.observe=t=>{for(const i of t)i.type==="attributes"&&i.attributeName==="theme-mode"&&this.updateMode()},this.updateMode=()=>{const t=this.body.getAttribute("theme-mode");t!==this.state.mode&&this.setState({mode:t})},this.state={mode:null}}componentDidMount(){if(this.props.darkModeImage){this.body=window.document.body,this.updateMode();const e={attributes:!0,childList:!1,subtree:!1};this.observer=new MutationObserver(this.observe),this.observer.observe(this.body,e)}}componentWillUnmount(){this.observer&&this.observer.disconnect()}render(){const{className:e,image:t,description:i,style:r,title:s,imageStyle:f,children:o,layout:a,darkModeImage:c}=this.props,d=typeof i=="string"?i:"empty",l=this.state.mode==="dark"&&c?c:t;let u=null;typeof l=="string"?u=E.createElement("img",{alt:d,src:l}):l&&"id"in l?u=E.createElement("svg",{"aria-hidden":"true"},E.createElement("use",{xlinkHref:`#${l.id}`})):u=l;const h=Ne(e,as,{[`${as}-${a}`]:a}),g=u?{heading:4}:{heading:6,style:{fontWeight:400}};return E.createElement("div",{className:h,style:r},E.createElement("div",{className:`${as}-image`,style:f,"x-semi-prop":"image,darkModeImage"},u),E.createElement("div",{className:`${as}-content`},s?E.createElement(Zj.Title,Object.assign({},g,{className:`${as}-title`,"x-semi-prop":"title"}),s):null,i?E.createElement("div",{className:`${as}-description`,"x-semi-prop":"description"},i):null,o?E.createElement("div",{className:`${as}-footer`,"x-semi-prop":"children"},o):null))}}Vv.defaultProps={layout:"vertical"};const Wc={PREFIX:`${We}-dropdown`,SELECTED:`${We}-dropdown-item-selected`,DISABLED:`${We}-dropdown-item-disabled`},$f={POSITION_SET:so.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},o1={SPACING:4,NESTED_SPACING:2};class g9 extends Oi{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);const{trigger:t}=this.getProps();if(e&&t==="click"){const i=this._adapter.getPopupId();this.setFocusToFirstMenuItem(i)}}getMenuItemNodes(e){const t=document.getElementById(e);return t?Array.from(t.getElementsByTagName("li")).filter(i=>i.ariaDisabled==="false"):null}setFocusToFirstMenuItem(e){const t=this.getMenuItemNodes(e);t&&C6(t)}setFocusToLastMenuItem(e){const t=this.getMenuItemNodes(e);t&&T6(t)}handleKeyDown(e){var t,i;const r=(i=(t=e.target)===null||t===void 0?void 0:t.attributes["data-popupid"])===null||i===void 0?void 0:i.value;switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(r),Xr(e);break;case"ArrowUp":this.setFocusToLastMenuItem(r),Xr(e);break}}}class m9 extends Oi{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){this._adapter.getContext("trigger")==="custom"&&(e&&P6(document.querySelectorAll("[data-popupid]"),e.id)).focus()}setFocusByFirstCharacter(e,t){const i=A6(this.menuItemNodes,e,this.firstChars,t);i>=0&&jc(this.menuItemNodes,this.menuItemNodes[i])}onMenuKeydown(e){const t=O6(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter(r=>r.ariaDisabled!=="true")),this.firstChars.length===0&&this.menuItemNodes.forEach(r=>{var s;this.firstChars.push((s=r.textContent.trim()[0])===null||s===void 0?void 0:s.toLowerCase())});const i=this.menuItemNodes.find(r=>r.tabIndex===0);switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(t);break;case"ArrowUp":E6(this.menuItemNodes,i),Xr(e);break;case"ArrowDown":M6(this.menuItemNodes,i),Xr(e);break;default:S6(e.key)&&this.setFocusByFirstCharacter(i,e.key);break}}}const v9=E.createContext({level:0}),bo=v9;var y9=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const _9=Wc.PREFIX;class Gv extends ln{constructor(e){super(e),this.foundation=new m9(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){const e=this.props,{children:t,className:i,style:r}=e,s=y9(e,["children","className","style"]);return E.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},s,{className:Ne(`${_9}-menu`,i),style:r,onKeyDown:f=>this.foundation.onMenuKeydown(f)}),t)}}Gv.propTypes={children:C.node,className:C.string,style:C.object};Gv.contextType=bo;const x9=Gv,os=Wc.PREFIX;class Xc extends ln{render(){const{children:e,disabled:t,className:i,forwardRef:r,style:s,type:f,active:o,icon:a,onKeyDown:c,showTick:d,hover:l}=this.props,{showTick:u}=this.context,h=Ne(i,{[`${os}-item`]:!0,[`${os}-item-disabled`]:t,[`${os}-item-hover`]:l,[`${os}-item-withTick`]:u??d,[`${os}-item-${f}`]:f,[`${os}-item-active`]:o}),g={};t||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach(v=>{g[v]=this.props[v]});let m=null;switch(!0){case(d&&o):m=E.createElement(Vg,null);break;case(d&&!o):m=E.createElement(Vg,{style:{color:"transparent"}});break;default:m=null;break}let p=null;return a&&(p=E.createElement("div",{className:`${os}-item-icon`},a)),E.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":t},g,{onKeyDown:c,ref:v=>r(v),className:h,style:s}),m,p,e)}}Xc.propTypes={children:C.oneOfType([C.string,C.node]),name:C.string,disabled:C.bool,selected:C.bool,onClick:C.func,onMouseEnter:C.func,onMouseLeave:C.func,onContextMenu:C.func,className:C.string,style:C.object,forwardRef:C.func,type:C.oneOf($f.ITEM_TYPE),active:C.bool,icon:C.node};Xc.contextType=bo;Xc.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:Ke,onMouseLeave:Ke,forwardRef:Ke};Xc.elementType="Dropdown.Item";const b9=Xc,w9=Wc.PREFIX,gT=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{style:e,className:t}=n;return E.createElement("div",{className:Ne(`${w9}-divider`,t),style:e})};gT.propTypes={style:C.object,className:C.string};const S9=gT,l1=Wc.PREFIX;class Wv extends fe.PureComponent{render(){const{className:e,style:t,children:i}=this.props,{showTick:r}=this.context,s=Ne({[`${l1}-title`]:!0,[`${l1}-title-withTick`]:r},e);return E.createElement("div",{className:s,style:t},i)}}Wv.propTypes={children:C.node,className:C.string,style:C.object};Wv.contextType=bo;const C9=Wv;var Gd=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const T9=$f.POSITION_SET,E9=$f.TRIGGER_SET;class jn extends ln{constructor(e){super(e),this.handleVisibleChange=t=>this.foundation.handleVisibleChange(t),this.state={popVisible:e.visible},this.foundation=new g9(this.adapter),this.tooltipRef=E.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>this.props.onVisibleChange(e),getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){const{render:e,menu:t,contentClassName:i,style:r,showTick:s,prefixCls:f,trigger:o}=this.props,a=Ne(f,i),{level:c=0}=this.context,d={showTick:s,level:c+1,trigger:o};let l=null;return E.isValidElement(e)?l=e:Array.isArray(t)&&(l=this.renderMenu()),E.createElement(bo.Provider,{value:d},E.createElement("div",{className:a,style:r},E.createElement("div",{className:`${f}-content`,"x-semi-prop":"render"},l)))}renderMenu(){const{menu:e}=this.props,t=e.map((i,r)=>{switch(i.node){case"title":{const{name:s,node:f}=i,o=Gd(i,["name","node"]);return E.createElement(jn.Title,Object.assign({},o,{key:f+s+r}),s)}case"item":{const{node:s,name:f}=i,o=Gd(i,["node","name"]);return E.createElement(jn.Item,Object.assign({},o,{key:s+f+r}),f)}case"divider":return E.createElement(jn.Divider,{key:i.node+r});default:return null}});return E.createElement(jn.Menu,null,t)}renderPopCard(){const{render:e,contentClassName:t,style:i,showTick:r,prefixCls:s}=this.props,f=Ne(s,t),{level:o=0}=this.context,a={showTick:r,level:o+1};return E.createElement(bo.Provider,{value:a},E.createElement("div",{className:f,style:i},E.createElement("div",{className:`${s}-content`},e)))}render(){const e=this.props,{children:t,position:i,trigger:r,onVisibleChange:s,zIndex:f,className:o,motion:a,margin:c,style:d,prefixCls:l}=e,u=Gd(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]);let{spacing:h}=this.props;const{level:g}=this.context,{popVisible:m}=this.state,p=this.renderContent();return g>0?h=typeof h=="number"?h:o1.NESTED_SPACING:(h===null||typeof h>"u")&&(h=o1.SPACING),E.createElement($i,Object.assign({zIndex:f,motion:a,margin:c,content:p,className:o,prefixCls:l,spacing:h,position:i,trigger:r,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},u),E.isValidElement(t)?E.cloneElement(t,{className:Ne(st(t,"props.className"),{[`${l}-showing`]:m}),"aria-haspopup":!0,"aria-expanded":m,onKeyDown:v=>{this.foundation.handleKeyDown(v);const y=st(t,"props.onKeyDown");y&&y(v)}}):t)}}jn.Menu=x9;jn.Item=b9;jn.Divider=S9;jn.Title=C9;jn.contextType=bo;jn.propTypes={children:C.node,contentClassName:C.oneOfType([C.string,C.array]),className:C.string,getPopupContainer:C.func,margin:C.oneOfType([C.number,C.object]),mouseEnterDelay:C.number,mouseLeaveDelay:C.number,menu:C.array,motion:C.oneOfType([C.bool,C.func,C.object]),onVisibleChange:C.func,prefixCls:C.string,position:C.oneOf(T9),rePosKey:C.oneOfType([C.string,C.number]),render:C.node,spacing:C.number,showTick:C.bool,style:C.object,trigger:C.oneOf(E9),visible:C.bool,zIndex:C.number};jn.defaultProps={onVisibleChange:Ke,prefixCls:Wc.PREFIX,zIndex:Mr.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:$f.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:Ke};const Wd=jn,M9={PREFIX:We+"-overflow-list"},c1={COLLAPSE:"collapse",SCROLL:"scroll"},u1={START:"start",END:"end"},A9={NONE:0,GROW:1,SHRINK:2},As={BOUNDARY_SET:Object.values(u1),POSITION_SET:["vertical","horizontal"],MODE_SET:Object.values(c1),MODE_MAP:c1,BOUNDARY_MAP:u1,OVERFLOW_DIR:A9},h1={MINIMUM_HTML_ELEMENT_WIDTH:4};var mT=function(){if(typeof Map<"u")return Map;function n(e,t){var i=-1;return e.some(function(r,s){return r[0]===t?(i=s,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=n(this.__entries__,t),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(t,i){var r=n(this.__entries__,t);~r?this.__entries__[r][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,r=n(i,t);~r&&i.splice(r,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var r=0,s=this.__entries__;r<s.length;r++){var f=s[r];t.call(i,f[1],f[0])}},e}()}(),Yg=typeof window<"u"&&typeof document<"u"&&window.document===document,qh=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),O9=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(qh):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),P9=2;function L9(n,e){var t=!1,i=!1,r=0;function s(){t&&(t=!1,n()),i&&o()}function f(){O9(s)}function o(){var a=Date.now();if(t){if(a-r<P9)return;i=!0}else t=!0,i=!1,setTimeout(f,e);r=a}return o}var R9=20,D9=["top","right","bottom","left","width","height","size","weight"],I9=typeof MutationObserver<"u",k9=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=L9(this.refresh.bind(this),R9)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!Yg||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),I9?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!Yg||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,r=D9.some(function(s){return!!~i.indexOf(s)});r&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),vT=function(n,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var r=i[t];Object.defineProperty(n,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return n},wo=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||qh},yT=Hf(0,0,0,0);function Zh(n){return parseFloat(n)||0}function f1(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,r){var s=n["border-"+r+"-width"];return i+Zh(s)},0)}function F9(n){for(var e=["top","right","bottom","left"],t={},i=0,r=e;i<r.length;i++){var s=r[i],f=n["padding-"+s];t[s]=Zh(f)}return t}function N9(n){var e=n.getBBox();return Hf(0,0,e.width,e.height)}function B9(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return yT;var i=wo(n).getComputedStyle(n),r=F9(i),s=r.left+r.right,f=r.top+r.bottom,o=Zh(i.width),a=Zh(i.height);if(i.boxSizing==="border-box"&&(Math.round(o+s)!==e&&(o-=f1(i,"left","right")+s),Math.round(a+f)!==t&&(a-=f1(i,"top","bottom")+f)),!j9(n)){var c=Math.round(o+s)-e,d=Math.round(a+f)-t;Math.abs(c)!==1&&(o-=c),Math.abs(d)!==1&&(a-=d)}return Hf(r.left,r.top,o,a)}var z9=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof wo(n).SVGGraphicsElement}:function(n){return n instanceof wo(n).SVGElement&&typeof n.getBBox=="function"}}();function j9(n){return n===wo(n).document.documentElement}function U9(n){return Yg?z9(n)?N9(n):B9(n):yT}function $9(n){var e=n.x,t=n.y,i=n.width,r=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,f=Object.create(s.prototype);return vT(f,{x:e,y:t,width:i,height:r,top:t,right:e+i,bottom:r+t,left:e}),f}function Hf(n,e,t,i){return{x:n,y:e,width:t,height:i}}var H9=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Hf(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=U9(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),V9=function(){function n(e,t){var i=$9(t);vT(this,{target:e,contentRect:i})}return n}(),G9=function(){function n(e,t,i){if(this.activeObservations_=[],this.observations_=new mT,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof wo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new H9(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof wo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new V9(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),_T=typeof WeakMap<"u"?new WeakMap:new mT,xT=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=k9.getInstance(),i=new G9(e,t,this);_T.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){xT.prototype[n]=function(){var e;return(e=_T.get(this))[n].apply(e,arguments)}});var W9=function(){return typeof qh.ResizeObserver<"u"?qh.ResizeObserver:xT}();const d1=W9;class Yl extends ln{constructor(e){super(e),this.getElement=()=>{try{return uo.findDOMNode(this.childNode||this)}catch{return null}},this.mergeRef=(t,i)=>{this.childNode=i,typeof t=="function"?t(i):typeof t=="object"&&t&&"current"in t&&(t.current=i)},this.observer=new d1(e.onResize)}componentDidMount(){this.observeElement()}componentDidUpdate(e){this.observeElement(this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}observeElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this.getElement();if(this.observer||(this.observer=new d1(this.props.onResize)),!(t&&t instanceof Element)){this.observer.disconnect();return}t===this.element&&!e||(this.observer.disconnect(),this.element=t,this.observer.observe(t),this.props.observeParent&&t.parentNode&&t.parentNode.ownerDocument&&t.parentNode.ownerDocument.defaultView&&t.parentNode instanceof t.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=t.parentNode,this.observer.observe(this._parentNode)))}render(){const e=E.Children.only(this.props.children),{ref:t}=e;return E.cloneElement(e,{ref:i=>this.mergeRef(t,i)})}}Yl.propTypes={onResize:C.func,observeParent:C.bool};Yl.defaultProps={onResize:()=>{},observeParent:!1};class Xv extends E.PureComponent{componentDidMount(){const{items:e}=this.props;this.cachedKeys=Object.keys(e);const{root:t,threshold:i,rootMargin:r,option:s,onIntersect:f}=this.props;this.observer=new IntersectionObserver(f,Object.assign({root:t,threshold:i,rootMargin:r},s)),this.observeElement()}componentDidUpdate(){const{items:e}=this.props,t=Object.keys(e);Vi(this.cachedKeys,t)||(this.observeElement(!0),this.cachedKeys=t)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null)}observeElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{items:t}=this.props;if(Fi(t)){this.observer.disconnect();return}e&&this.observer.disconnect(),Object.keys(t).forEach(i=>{const r=t[i];r&&qa(r)&&this.observer.observe(r)})}render(){const{children:e}=this.props;return e}}Xv.propTypes={onIntersect:C.func,option:C.object,root:C.any,threshold:C.number,rootMargin:C.string,items:C.object};Xv.defaultProps={onIntersect:()=>{},threshold:.75,rootMargin:"0px",option:{},items:{}};const X9=As.BOUNDARY_MAP;class Y9 extends Oi{constructor(e){super(Object.assign({},e)),this.previousY=void 0,this.isScrollMode=()=>{const{renderMode:t}=this.getProps();return t==="scroll"},this.getReversedItems=()=>{const{items:t}=this.getProps();return Wg(t).reverse()}}getOverflowItem(){const{items:e}=this.getProps(),{visibleState:t,overflow:i}=this.getStates();if(!this.isScrollMode())return i;const r=e.map(a=>{let{key:c}=a;return Boolean(t.get(c))}),s=r.indexOf(!0),f=r.lastIndexOf(!0),o=[];return o[0]=s>=0?e.slice(0,s):[],o[1]=f>=0?e.slice(f+1,e.length):e,o}handleIntersect(e){const t=Wg(this.getState("visibleState")),i={};e.forEach(a=>{const c=st(a,"target.dataset.scrollkey"),d=a.isIntersecting;i[c]=a,t.set(c,d)});let r=!1;for(const a of t.values())if(a){r=!0;break}const s=r,[f]=e,o=f.boundingClientRect.y;if(!s&&this.previousY!==void 0&&o!==this.previousY){this.previousY=o;return}this.previousY=o,this._adapter.updateVisibleState(t),this._adapter.notifyIntersect(i)}handleCollapseOverflow(){const{minVisibleItems:e,collapseFrom:t}=this.getProps(),{overflowWidth:i,containerWidth:r,pivot:s,overflowStatus:f}=this.getStates(),{items:o,onOverflow:a}=this.getProps();let c=i,d=0,l=!1;for(const u of this._adapter.getItemSizeMap().values()){if(c+=u,c>r){l=!0;break}if(d===o.length-1){this._adapter.updateStates({overflowStatus:"normal",pivot:o.length-1,visible:o,overflow:[]});break}d++}if(l){const u=Math.max(e,d),h=t===X9.START,g=h?this.getReversedItems().slice(0,u).reverse():o.slice(0,u),m=h?this.getReversedItems().slice(u).reverse():o.slice(u);this._adapter.updateStates({overflowStatus:"overflowed",pivot:u,visible:g,overflow:m}),s!==u&&a(m);return}}}const K9=Y9,hl=M9.PREFIX,Xd=As.BOUNDARY_MAP,p1=As.OVERFLOW_DIR,fl=As.MODE_MAP;class Yv extends ln{constructor(e){var t;super(e),t=this,this.scroller=null,this.spacer=null,this.isScrollMode=()=>{const{renderMode:i}=this.props;return i===fl.SCROLL},this.resize=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var r;const s=(r=i[0])===null||r===void 0?void 0:r.target.clientWidth;t.setState({containerWidth:s,overflowStatus:"calculating"})},this.reintersect=i=>{this.foundation.handleIntersect(i)},this.mergeRef=(i,r,s)=>{this.itemRefs[s]=r,typeof i=="function"?i(r):typeof i=="object"&&i&&"current"in i&&(i.current=r)},this.renderOverflow=()=>{const i=this.foundation.getOverflowItem();return this.props.overflowRenderer(i)},this.getItemKey=(i,r)=>{const{itemKey:s}=this.props;return Bn(s)?s(i):st(i,s||"key",r)},this.renderItemList=()=>{const{className:i,wrapperClassName:r,wrapperStyle:s,style:f,visibleItemRenderer:o,renderMode:a,collapseFrom:c}=this.props,{visible:d,overflowStatus:l}=this.state;let u=this.renderOverflow();if(!this.isScrollMode()&&(Array.isArray(u)&&(u=E.createElement(E.Fragment,null,u)),E.isValidElement(u))){const m=E.cloneElement(u);u=E.createElement(Yl,{onResize:p=>{let[v]=p;this.setState({overflowWidth:v.target.clientWidth,overflowStatus:"calculating"})}},E.createElement("div",{className:`${hl}-overflow`},m))}const h=a===fl.SCROLL?[u[0],E.createElement("div",{className:Ne(r,`${hl}-scroll-wrapper`),ref:m=>{this.scroller=m},style:Object.assign({},s),key:`${hl}-scroll-wrapper`},d.map(o).map(m=>{const{forwardRef:p,key:v}=m;return E.cloneElement(m,{ref:y=>this.mergeRef(p,y,v),"data-scrollkey":`${v}`,key:v})})),u[1]]:[c===Xd.START?u:null,d.map((m,p)=>{const{key:v}=m,y=o(m,p),_=E.cloneElement(y);return E.createElement(Yl,{key:v,onResize:x=>{let[b]=x;return this.onItemResize(b,m,p)}},E.createElement("div",{key:v,className:`${hl}-item`},_))}),c===Xd.END?u:null];return E.createElement("div",{className:Ne(`${hl}`,i),style:Object.assign(Object.assign({},f),a===fl.COLLAPSE?{maxWidth:"100%",visibility:l==="calculating"?"hidden":"visible"}:null)},...h)},this.onItemResize=(i,r,s)=>{const f=this.getItemKey(r,s),o=this.itemSizeMap.get(f);o?o!==i.target.clientWidth&&(this.itemSizeMap.set(f,i.target.clientWidth),this.setState({overflowStatus:"calculating"})):this.itemSizeMap.set(f,i.target.clientWidth);const{maxCount:a}=this.state;this.itemSizeMap.size===a&&this.setState({overflowStatus:"calculating"})},this.state={direction:p1.GROW,lastOverflowCount:0,overflow:[],visible:[],containerWidth:0,visibleState:new Map,itemSizeMap:new Map,overflowStatus:"calculating",pivot:-1,overflowWidth:0,maxCount:0},this.foundation=new K9(this.adapter),this.previousWidths=new Map,this.itemRefs={},this.itemSizeMap=new Map}static getDerivedStateFromProps(e,t){const{prevProps:i}=t,r={};r.prevProps=e;const s=f=>!i&&f in e||i&&!Vi(i[f],e[f]);if(s("items")||s("style")){if(r.direction=p1.GROW,r.lastOverflowCount=0,r.maxCount=0,e.renderMode===fl.SCROLL)r.visible=e.items,r.overflow=[];else{let f=e.items.length;Math.floor(t.containerWidth/h1.MINIMUM_HTML_ELEMENT_WIDTH)!==0&&(f=Math.min(f,Math.floor(t.containerWidth/h1.MINIMUM_HTML_ELEMENT_WIDTH)));const o=e.collapseFrom===Xd.START,a=o?Q_(e.items).reverse().slice(0,f):e.items.slice(0,f),c=o?Q_(e.items).reverse().slice(f):e.items.slice(f);r.visible=a,r.overflow=c,r.maxCount=f}r.pivot=-1,r.overflowStatus="calculating"}return r}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateVisibleState:e=>{this.setState({visibleState:e})},updateStates:e=>{this.setState(Object.assign({},e))},notifyIntersect:e=>{this.props.onIntersect&&this.props.onIntersect(e)},getItemSizeMap:()=>this.itemSizeMap})}componentDidUpdate(e,t){Vi(e.items,this.props.items)||(this.itemRefs={},this.setState({visibleState:new Map}));const{overflow:i,containerWidth:r,visible:s,overflowStatus:f}=this.state;this.isScrollMode()||f!=="calculating"||this.foundation.handleCollapseOverflow()}render(){const e=this.renderItemList(),{renderMode:t}=this.props;return t===fl.SCROLL?E.createElement(Xv,{onIntersect:this.reintersect,root:this.scroller,threshold:this.props.threshold,items:this.itemRefs},e):E.createElement(Yl,{onResize:this.resize},e)}}Yv.defaultProps={collapseFrom:"end",minVisibleItems:0,overflowRenderer:()=>null,renderMode:"collapse",threshold:.75,visibleItemRenderer:()=>null,onOverflow:()=>null};Yv.propTypes={className:C.string,collapseFrom:C.oneOf(As.BOUNDARY_SET),direction:C.oneOf(As.POSITION_SET),items:C.array,minVisibleItems:C.number,onIntersect:C.func,onOverflow:C.func,overflowRenderer:C.func,renderMode:C.oneOf(As.MODE_SET),style:C.object,threshold:C.number,visibleItemRenderer:C.func,wrapperClassName:C.string,wrapperStyle:C.object};const q9=Yv,Je={TABS:`${We}-tabs`,TABS_BAR:`${We}-tabs-bar`,TABS_BAR_LINE:`${We}-tabs-bar-line`,TABS_BAR_CARD:`${We}-tabs-bar-card`,TABS_BAR_BUTTON:`${We}-tabs-bar-button`,TABS_BAR_EXTRA:`${We}-tabs-bar-extra`,TABS_TAB:`${We}-tabs-tab`,TABS_TAB_ACTIVE:`${We}-tabs-tab-active`,TABS_TAB_DISABLED:`${We}-tabs-tab-disabled`,TABS_CONTENT:`${We}-tabs-content`,TABS_CONTENT_ANIMATED:`${We}-tabs-content-animated`,TABS_CONTENT_NO_ANIMATED:`${We}-tabs-content-no-animated`,TABS_PANE:`${We}-tabs-pane`,TABS_PANE_INACTIVE:`${We}-tabs-pane-inactive`,TABS_PANE_ACTIVE:`${We}-tabs-pane-active`,TABS_PANE_MOTION_OVERLAY:`${We}-tabs-pane-motion-overlay`,TABS_PANE_ANIMATING:`${We}-tabs-pane-animating`,TABS_PANE_ANIMATE_LEFT_SHOW:`${We}-tabs-pane-animate-leftShow`,TABS_PANE_ANIMATE_RIGHT_SHOW:`${We}-tabs-pane-animate-rightShow`,TABS_PANE_ANIMATE_TOP_SHOW:`${We}-tabs-pane-animate-topShow`,TABS_PANE_ANIMATE_BOTTOM_SHOW:`${We}-tabs-pane-animate-bottomShow`},ao={TYPE_MAP:["line","card","button"],SIZE:["small","medium","large"],POSITION_MAP:["top","left"]};class Z9 extends Oi{constructor(e){super(Object.assign({},e)),this.destroy=Ke,this.handlePrevent=t=>{t.stopPropagation(),t.preventDefault()},this.handleKeyDown=(t,i,r)=>{const{preventScroll:s}=this.getProps(),f=[...t.target.parentNode.childNodes].filter(o=>st(o,"attributes.data-tabkey.value","").includes("semiTab")&&st(o,"attributes.aria-disabled.value","")!=="true");switch(t.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.determineOrientation(t,f);break;case"Backspace":case"Delete":this.handleDeleteKeyDown(t,f,i,r);break;case"Enter":case" ":this.handleTabClick(i,t),this.handlePrevent(t);break;case"Home":f[0].focus({preventScroll:s}),this.handlePrevent(t);break;case"End":f[f.length-1].focus({preventScroll:s}),this.handlePrevent(t);break}}}init(){this._adapter.collectPane()}_notifyChange(e){const{activeKey:t}=this.getStates();t!==e&&this._adapter.notifyChange(e)}handleTabClick(e,t){this._isInProps("activeKey")?this._notifyChange(e):(this._notifyChange(e),this.handleNewActiveKey(e)),this._adapter.notifyTabClick(e,t)}handleNewActiveKey(e){const{activeKey:t}=this.getStates();t!==e&&this._adapter.setNewActiveKey(e)}getDefaultActiveKey(){let e;const t=this.getProps();return"activeKey"in t?e=t.activeKey:"defaultActiveKey"in t?e=t.defaultActiveKey:e=this._adapter.getDefaultActiveKeyFromChildren(),e}handleTabListChange(){this._adapter.collectPane()}handleTabPanesChange(){this._adapter.collectPane(),this._adapter.collectActiveKey()}handleTabDelete(e){this._adapter.notifyTabDelete(e)}determineOrientation(e,t){const{tabPosition:i}=this.getProps();i==="left"?(e.key==="ArrowUp"||e.key==="ArrowDown")&&(this.switchTabOnArrowPress(e,t),this.handlePrevent(e)):(e.key==="ArrowLeft"||e.key==="ArrowRight")&&(this.switchTabOnArrowPress(e,t),this.handlePrevent(e))}handleDeleteKeyDown(e,t,i,r){const{preventScroll:s}=this.getProps();if(r){this.handleTabDelete(i);const f=t.indexOf(e.target);t.length!==1&&t[f+1>=t.length?f-1:f+1].focus({preventScroll:s})}}switchTabOnArrowPress(e,t){const{preventScroll:i}=this.getProps(),r=t.indexOf(e.target),s={ArrowLeft:-1,ArrowUp:-1,ArrowRight:1,ArrowDown:1};s[e.key]&&r!==void 0&&(t[r+s[e.key]]?t[r+s[e.key]].focus({preventScroll:i}):e.key==="ArrowLeft"||e.key==="ArrowUp"?t[t.length-1].focus({preventScroll:i}):(e.key==="ArrowRight"||e.key=="ArrowDown")&&t[0].focus({preventScroll:i}))}}const J9=Z9;var Q9=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const e$=(n,e)=>{const{tab:t,size:i,type:r,icon:s,selected:f,closable:o,disabled:a,itemKey:c,deleteTabItem:d,tabPosition:l,handleKeyDown:u,onClick:h}=n,g=Q9(n,["tab","size","type","icon","selected","closable","disabled","itemKey","deleteTabItem","tabPosition","handleKeyDown","onClick"]),m=fe.useMemo(()=>r==="card"&&o?E.createElement(Lv,{"aria-label":"Close",role:"button",className:`${Je.TABS_TAB}-icon-close`,onClick:b=>d(c,b)}):null,[r,o,d,c]),p=fe.useCallback(b=>E.createElement("span",null,b),[]),v=fe.useCallback(b=>{u&&u(b,c,o)},[u,c,o]),y=fe.useCallback(b=>{!a&&h&&h(c,b)},[c,a,h]),_=s?p(s):null,x=Ne(Je.TABS_TAB,`${Je.TABS_TAB}-${r}`,`${Je.TABS_TAB}-${l}`,`${Je.TABS_TAB}-single`,{[Je.TABS_TAB_ACTIVE]:f,[Je.TABS_TAB_DISABLED]:a,[`${Je.TABS_TAB}-small`]:i==="small",[`${Je.TABS_TAB}-medium`]:i==="medium"});return E.createElement("div",Object.assign({role:"tab",id:`semiTab${c}`,"data-tabkey":`semiTab${c}`,"aria-controls":`semiTabPanel${c}`,"aria-disabled":a?"true":"false","aria-selected":f?"true":"false",tabIndex:f?0:-1,onKeyDown:v,onClick:y,className:x},g,{ref:e}),_,t,m)},bT=fe.forwardRef(e$);bT.elementType="Tabs.TabItem";const wT=bT;var t$=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class ST extends E.Component{constructor(e){super(e),this.handleItemClick=(t,i)=>{if(this.props.onTabClick(t,i),this.props.collapsible){const r=this._getItemKey(t);document.querySelector(`[data-uuid="${this.state.uuid}"] .${Je.TABS_TAB}[data-scrollkey="${r}"]`).scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}},this.handleKeyDown=(t,i,r)=>{this.props.handleKeyDown(t,i,r)},this.renderTabItem=t=>{const{size:i,type:r,deleteTabItem:s,handleKeyDown:f,tabPosition:o}=this.props,a=this._isActive(t.itemKey);return E.createElement(wT,Object.assign({},Xg(t,["disabled","icon","itemKey","tab","closable"]),{key:this._getItemKey(t.itemKey),selected:a,size:i,type:r,tabPosition:o,handleKeyDown:f,deleteTabItem:s,onClick:this.handleItemClick}))},this.renderTabComponents=t=>t.map(i=>this.renderTabItem(i)),this.handleArrowClick=(t,i)=>{const r=i==="start"?t.pop():t.shift();if(!r)return;const s=this._getItemKey(r.itemKey);document.querySelector(`[data-uuid="${this.state.uuid}"] .${Je.TABS_TAB}[data-scrollkey="${s}"]`).scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},this.renderCollapse=(t,i,r)=>{if(Fi(t))return E.createElement(Kh,{disabled:!0,icon:i,theme:"borderless"});const{dropdownClassName:s,dropdownStyle:f}=this.props,{rePosKey:o}=this.state,a=!t.length,c=E.createElement(Wd.Menu,null,t.map(u=>{const{icon:h,tab:g,itemKey:m}=u,p=h?this.renderIcon(u.icon):null;return E.createElement(Wd.Item,{key:m,onClick:v=>this.handleItemClick(m,v),active:this._isActive(m)},p,g)})),d=Ne({[`${Je.TABS_BAR}-arrow-${r}`]:r,[`${Je.TABS_BAR}-arrow`]:!0}),l=Ne(s,{[`${Je.TABS_BAR}-dropdown`]:!0});return E.createElement(Wd,{className:l,clickToHide:!0,clickTriggerToHide:!0,key:`${o}-${r}`,position:r==="start"?"bottomLeft":"bottomRight",render:a?null:c,showTick:!0,style:f,trigger:"hover",disableFocusListener:!0},E.createElement("div",{role:"presentation",className:d,onClick:u=>this.handleArrowClick(t,r)},E.createElement(Kh,{disabled:a,icon:i,theme:"borderless"})))},this.renderOverflow=t=>t.map((i,r)=>{const s=r===0?E.createElement(yz,null):E.createElement(bz,null),f=r===0?"start":"end";return this.renderCollapse(i,s,f)}),this.renderCollapsedTab=()=>{const{list:t}=this.props,i=t.map(r=>{const{itemKey:s}=r;return Object.assign({key:this._getItemKey(s),active:this._isActive(s)},r)});return E.createElement(q9,{items:i,overflowRenderer:this.renderOverflow,renderMode:"scroll",className:`${Je.TABS_BAR}-overflow-list`,visibleItemRenderer:this.renderTabItem})},this._isActive=t=>t===this.props.activeKey,this._getItemKey=t=>`${t}-bar`,this.state={endInd:e.list.length,rePosKey:0,startInd:0,uuid:""}}componentDidMount(){this.setState({uuid:D6()})}renderIcon(e){return E.createElement("span",null,e)}renderExtra(){const{tabBarExtraContent:e,type:t,size:i}=this.props,r={float:"right"},s=e&&e.props?e.props.style:{},f=Ne(Je.TABS_BAR_EXTRA,{[`${Je.TABS_BAR}-${t}-extra`]:t,[`${Je.TABS_BAR}-${t}-extra-${i}`]:i});if(e){const o=Object.assign(Object.assign({},r),s);return E.createElement("div",{className:f,style:o,"x-semi-prop":"tabBarExtraContent"},e)}return null}render(){const e=this.props,{type:t,style:i,className:r,list:s,tabPosition:f,collapsible:o}=e,a=t$(e,["type","style","className","list","tabPosition","collapsible"]),c=Ne(r,{[Je.TABS_BAR]:!0,[Je.TABS_BAR_LINE]:t==="line",[Je.TABS_BAR_CARD]:t==="card",[Je.TABS_BAR_BUTTON]:t==="button",[`${Je.TABS_BAR}-${f}`]:f,[`${Je.TABS_BAR}-collapse`]:o}),d=this.renderExtra(),l=o?this.renderCollapsedTab():this.renderTabComponents(s);return E.createElement("div",Object.assign({role:"tablist","aria-orientation":f==="left"?"vertical":"horizontal",className:c,style:i},Hv(a),{"data-uuid":this.state.uuid}),l,d)}}ST.propTypes={activeKey:C.string,className:C.string,collapsible:C.bool,list:C.array,onTabClick:C.func,size:C.oneOf(ao.SIZE),style:C.object,tabBarExtraContent:C.node,tabPosition:C.oneOf(ao.POSITION_MAP),type:C.oneOf(ao.TYPE_MAP),closable:C.bool,deleteTabItem:C.func};const g1=ST,n$=E.createContext({}),CT=n$;var i$=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class Vf extends fe.PureComponent{constructor(){super(...arguments),this.ref=fe.createRef(),this.getDirection=(e,t,i,r)=>{if(t!==null&&e!==null&&Array.isArray(i)&&i.length){const s=i.findIndex(a=>a.itemKey===e),f=i.findIndex(a=>a.itemKey===t),o=i.findIndex(a=>a.itemKey===r);return s===f?o>s:f<s}return!1},this.shouldRender=()=>{const{itemKey:e}=this.props,{activeKey:t,lazyRender:i}=this.context,r=t===e;return this._active=this._active||r,i?this._active:!0}}render(){const{tabPaneMotion:e,tabPosition:t,prevActiveKey:i}=this.context,r=this.props,{className:s,style:f,children:o,itemKey:a,tabIndex:c}=r,d=i$(r,["className","style","children","itemKey","tabIndex"]),l=this.context.activeKey===a,u=Ne(s,{[Je.TABS_PANE_INACTIVE]:!l,[Je.TABS_PANE_ACTIVE]:l,[Je.TABS_PANE]:!0}),h=this.shouldRender(),g=(()=>{const v=this.getDirection(this.context.activeKey,a,this.context.panes,i);return t==="top"?v?Je.TABS_PANE_ANIMATE_RIGHT_SHOW:Je.TABS_PANE_ANIMATE_LEFT_SHOW:v?Je.TABS_PANE_ANIMATE_BOTTOM_SHOW:Je.TABS_PANE_ANIMATE_TOP_SHOW})(),m=!this.context.panes.find(v=>v.itemKey===i),p=e&&l&&!m&&!this.context.forceDisableMotion;return E.createElement("div",Object.assign({ref:this.ref,role:"tabpanel",id:`semiTabPanel${a}`,"aria-labelledby":`semiTab${a}`,className:u,style:f,"aria-hidden":l?"false":"true",tabIndex:c||0},Hv(d),{"x-semi-prop":"children"}),E.createElement(Ov,{motion:p,animationState:l?"enter":"leave",startClassName:g},v=>{let{animationClassName:y,animationEventsNeedBind:_}=v;return E.createElement("div",Object.assign({className:`${Je.TABS_PANE_MOTION_OVERLAY} ${y}`,"x-semi-prop":"children"},_),h?o:null)}))}}Vf.isTabPane=!0;Vf.contextType=CT;Vf.propTypes={className:C.string,style:C.object,children:C.node,disabled:C.bool,itemKey:C.string,tab:C.node,icon:C.node,closable:C.bool};const _c=Vf;var r$=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const m1=["className","style","disabled","itemKey","tab","icon"];class Yc extends ln{constructor(e){super(e),this.setContentRef=t=>{this.contentRef={current:t}},this.onTabClick=(t,i)=>{this.foundation.handleTabClick(t,i)},this.rePosChildren=(t,i)=>{const r=[],s=E.Children.toArray(t);return t.length&&(r.push(...s.filter(f=>f.props&&f.props.itemKey===i)),r.push(...s.filter(f=>f.props&&f.props.itemKey!==i))),r},this.getActiveItem=()=>{const{activeKey:t}=this.state,{children:i,tabList:r}=this.props;return r||!Array.isArray(i)?i:E.Children.toArray(i).filter(s=>fe.isValidElement(s)&&s.type&&s.type.isTabPane?s.props.itemKey===t:!0)},this.deleteTabItem=(t,i)=>{i.stopPropagation(),this.foundation.handleTabDelete(t)},this.foundation=new J9(this.adapter),this.state={activeKey:this.foundation.getDefaultActiveKey(),panes:[],prevActiveKey:null,forceDisableMotion:!1},this.contentRef=fe.createRef(),this.contentHeight="auto"}get adapter(){return Object.assign(Object.assign({},super.adapter),{collectPane:()=>{const{tabList:e,children:t}=this.props;if(Array.isArray(e)&&e.length){this.setState({panes:e});return}const i=E.Children.map(t,r=>{if(r){const{tab:s,icon:f,disabled:o,itemKey:a,closable:c}=r.props;return{tab:s,icon:f,disabled:o,itemKey:a,closable:c}}});this.setState({panes:i})},collectActiveKey:()=>{let e=[];const{tabList:t,children:i,activeKey:r}=this.props;if(typeof r<"u")return;const{activeKey:s}=this.state;Array.isArray(t)&&t.length?e=t:e=E.Children.map(i,f=>{if(f){const{tab:o,icon:a,disabled:c,itemKey:d,closable:l}=f.props;return{tab:o,icon:a,disabled:c,itemKey:d,closable:l}}}),e.findIndex(f=>f.itemKey===s)===-1&&(e.length>0?this.setState({activeKey:e[0].itemKey}):this.setState({activeKey:""}))},notifyTabClick:(e,t)=>{this.props.onTabClick(e,t)},notifyChange:e=>{this.props.onChange(e)},setNewActiveKey:e=>{this.setState({activeKey:e})},getDefaultActiveKeyFromChildren:()=>{const{tabList:e,children:t}=this.props;let i="";return(e||E.Children.toArray(t).map(s=>fe.isValidElement(s)?s.props:null)).forEach(s=>{s&&!i&&!s.disabled&&(i=s.itemKey)}),i},notifyTabDelete:e=>{this.props.onTabClose&&this.props.onTabClose(e)}})}static getDerivedStateFromProps(e,t){const i={};return!Av(e.activeKey)&&e.activeKey!==t.activeKey&&(t.prevActiveKey=t.activeKey,i.activeKey=e.activeKey),i}componentDidUpdate(e,t){const i=E.Children.toArray(e.children).map(f=>Xg(fe.isValidElement(f)?f.props:null,m1)),r=E.Children.toArray(this.props.children).map(f=>Xg(fe.isValidElement(f)?f.props:null,m1)),s=this.props.tabList||e.tabList;if(Vi(this.props.tabList,e.tabList)||this.foundation.handleTabListChange(),t.activeKey!==this.state.activeKey&&t.activeKey!==this.state.prevActiveKey&&this.setState({prevActiveKey:t.activeKey}),e.activeKey!==this.props.activeKey){const f=(()=>{const o=new Set(i.map(a=>a.itemKey));return r.map(a=>a.itemKey).filter(a=>!o.has(a))})();this.setState({forceDisableMotion:f.includes(this.props.activeKey)})}!Vi(i,r)&&!s&&this.foundation.handleTabPanesChange()}render(){const e=this.props,{children:t,className:i,collapsible:r,contentStyle:s,keepDOM:f,lazyRender:o,renderTabBar:a,size:c,style:d,tabBarClassName:l,tabBarExtraContent:u,tabBarStyle:h,tabPaneMotion:g,tabPosition:m,type:p}=e,v=r$(e,["children","className","collapsible","contentStyle","keepDOM","lazyRender","renderTabBar","size","style","tabBarClassName","tabBarExtraContent","tabBarStyle","tabPaneMotion","tabPosition","type"]),{panes:y,activeKey:_}=this.state,x=Ne(i,{[Je.TABS]:!0,[`${Je.TABS}-${m}`]:m}),b=Ne({[Je.TABS_CONTENT]:!0,[`${Je.TABS_CONTENT}-${m}`]:m}),w={activeKey:_,className:l,collapsible:r,list:y,onTabClick:this.onTabClick,size:c,style:h,tabBarExtraContent:u,tabPosition:m,type:p,deleteTabItem:this.deleteTabItem,handleKeyDown:this.foundation.handleKeyDown},T=a?a(w,g1):E.createElement(g1,Object.assign({},w)),S=f?t:this.getActiveItem();return E.createElement("div",Object.assign({className:x,style:d},Hv(v)),T,E.createElement(CT.Provider,{value:{activeKey:_,lazyRender:o,panes:y,tabPaneMotion:g,tabPosition:m,prevActiveKey:this.state.prevActiveKey,forceDisableMotion:this.state.forceDisableMotion}},E.createElement("div",{ref:this.setContentRef,className:b,style:Object.assign({},s)},S)))}}Yc.TabPane=_c;Yc.TabItem=wT;Yc.propTypes={activeKey:C.string,className:C.string,collapsible:C.bool,contentStyle:C.oneOfType([C.object]),defaultActiveKey:C.string,keepDOM:C.bool,lazyRender:C.bool,onChange:C.func,onTabClick:C.func,renderTabBar:C.func,size:C.oneOf(ao.SIZE),style:C.object,tabBarClassName:C.string,tabBarExtraContent:C.node,tabBarStyle:C.object,tabList:C.array,tabPaneMotion:C.bool,tabPosition:C.oneOf(ao.POSITION_MAP),type:C.oneOf(ao.TYPE_MAP),onTabClose:C.func,preventScroll:C.bool};Yc.defaultProps={children:[],collapsible:!1,keepDOM:!0,lazyRender:!1,onChange:()=>{},onTabClick:()=>{},size:"large",tabPaneMotion:!0,tabPosition:"top",type:"line",onTabClose:()=>{}};const TT=Yc;class Kv extends Oi{constructor(e){super(Object.assign(Object.assign({},Kv.defaultAdapter),e))}hasToast(e){return this._adapter.getState("list").map(i=>{let{id:r}=i;return r}).includes(e)}addToast(e){const t=this._adapter.getState("list");t.push(e),this._adapter.updateToast(t,[],[])}updateToast(e,t){let i=this._adapter.getState("list");i=i.map(s=>s.id===e?Object.assign(Object.assign({},s),t):s);const r=i.filter(s=>s.id===e);this._adapter.updateToast(i,[],r)}removeToast(e){let t=this._adapter.getState("list");const i=[];t=t.filter(r=>r.id===e?(i.push(r),!1):!0),this._adapter.updateToast(t,i,[])}destroyAll(){const e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}const Yd=`${We}-toast`,gh={PREFIX:Yd,WRAPPER:`${Yd}-wrapper`,LIST:`${Yd}-list`},mh={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]},s$={duration:3};class qv extends Oi{constructor(e){super(Object.assign(Object.assign({},qv.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){const e=this._adapter.getProp("duration");e&&Gg(e)&&(this._timer=setTimeout(()=>{this.close()},e*1e3))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}const Ri=gh.PREFIX;let Gf=class extends ln{constructor(e){super(e),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new qv(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){const{type:e,icon:t}=this.props,r={warning:E.createElement(cz,null),success:E.createElement(Ij,null),info:E.createElement(lj,null),error:E.createElement(az,null)}[e],s="large",f=Ne(`${Ri}-icon`,`${Ri}-icon-${e}`);return t?ys(t)?E.cloneElement(t,{size:s,className:`${Ri}-icon`}):t:e&&r?E.cloneElement(r,{size:s,className:f}):null}render(){const{content:e,type:t,theme:i,showClose:r,textMaxWidth:s,className:f,style:o}=this.props,a=this.props.direction||this.context.direction,c=Ne(Ri,f,{[`${Ri}-${t}`]:!0,[`${Ri}-${i}`]:i==="light",[`${Ri}-rtl`]:a==="rtl"}),d={};d.maxWidth=s;const l="borderless",u="small";return E.createElement("div",{role:"alert","aria-label":`${t||"default"} type`,className:c,style:o,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},E.createElement("div",{className:`${Ri}-content`},this.renderIcon(),E.createElement("span",{className:`${Ri}-content-text`,style:d,"x-semi-prop":"content"},e),r&&E.createElement("div",{className:`${Ri}-close-button`},E.createElement(Uv,{onClick:h=>this.close(h),type:"tertiary",icon:E.createElement(Lv,{"x-semi-prop":"icon"}),theme:l,size:u}))))}};Gf.contextType=Uc;Gf.propTypes={onClose:C.func,content:C.node,close:C.func,duration:C.number,theme:C.oneOf(mh.themes),type:C.oneOf(mh.types),textMaxWidth:C.oneOfType([C.string,C.number]),style:C.object,className:C.string,showClose:C.bool,icon:C.oneOfType([C.string,C.node]),direction:C.oneOf(mh.directions)};Gf.defaultProps={onClose:Ke,content:"",close:Ke,duration:s$.duration,textMaxWidth:450,showClose:!0,theme:"normal"};const ET=Gf;var a$=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const o$=(n,e)=>{var{afterClose:t}=n,i=a$(n,["afterClose"]);const[r,s]=fe.useState(!0),f=()=>{s(!1)};return E.useImperativeHandle(e,()=>({close:()=>{s(!1)}})),fe.useEffect(()=>{r||t(i.id)},[r]),r?E.createElement(ET,Object.assign({},i,{close:f})):null},l$=E.forwardRef(o$),dl={motion:!0,zIndex:1010,duration:3};function c$(){const[n,e]=E.useState([]);function t(i,r){return e(s=>[{element:i,config:r},...s]),s=>{e(f=>f.filter(o=>{let{config:a}=o;return a.id!==s}))}}return[n,t]}function u$(){const[n,e]=c$(),t=new Map,i=s=>{const f=Xh("semi_toast_"),o=Object.assign(Object.assign({},s),{id:f});let a;const c=l=>{t.set(f,l)},d=E.createElement(l$,Object.assign({},o,{key:f,afterClose:l=>a(l),ref:c}));return a=e(d,Object.assign({},o)),f},r=s=>{const f=t.get(s);f&&f.close()};return[{success:s=>i(Object.assign(Object.assign(Object.assign({},dl),s),{type:"success"})),info:s=>i(Object.assign(Object.assign(Object.assign({},dl),s),{type:"info"})),error:s=>i(Object.assign(Object.assign(Object.assign({},dl),s),{type:"error"})),warning:s=>i(Object.assign(Object.assign(Object.assign({},dl),s),{type:"warning"})),open:s=>i(Object.assign(Object.assign(Object.assign({},dl),s),{type:"default"})),close:s=>r(s)},E.createElement(E.Fragment,null,Array.isArray(n)&&n.length?E.createElement(E.Fragment,null,n.map(s=>s.element)):null)]}const h$=()=>{var n;return n=class vt extends ln{constructor(t){super(t),this.state={list:[],removedItems:[],updatedItems:[]},this.foundation=new Kv(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(t,i,r)=>{this.setState({list:t,removedItems:i,updatedItems:r})}})}static create(t){var i;const r=(i=t.id)!==null&&i!==void 0?i:Xh("toast");if(vt.ref){const s=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map(f=>{f in t&&(s.style[f]=typeof t[f]=="number"?`${t[f]}px`:t[f])}),vt.ref.has(r)?vt.ref.update(r,Object.assign(Object.assign({},t),{id:r})):vt.ref.add(Object.assign(Object.assign({},t),{id:r}))}else{const s=document.createElement("div");this.wrapperId||(this.wrapperId=Xh("toast-wrapper").slice(0,26)),s.className=gh.WRAPPER,s.id=this.wrapperId,s.style.zIndex=String(typeof t.zIndex=="number"?t.zIndex:vt.defaultOpts.zIndex),["top","left","bottom","right"].map(f=>{if(f in vt.defaultOpts||f in t){const o=t[f]?t[f]:vt.defaultOpts[f];s.style[f]=typeof o=="number"?`${o}px`:o}}),vt.defaultOpts.getPopupContainer?vt.defaultOpts.getPopupContainer().appendChild(s):document.body.appendChild(s),Ms.render(E.createElement(vt,{ref:f=>vt.ref=f}),s,()=>{vt.ref.add(Object.assign(Object.assign({},t),{id:r}))})}return r}static close(t){vt.ref&&vt.ref.remove(t)}static destroyAll(){if(vt.ref){vt.ref.destroyAll();const t=document.querySelector(`#${this.wrapperId}`);Ms.unmountComponentAtNode(t),t&&t.parentNode.removeChild(t),vt.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},vt.defaultOpts),t),{type:"info"}))}static warning(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},vt.defaultOpts),t),{type:"warning"}))}static error(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},vt.defaultOpts),t),{type:"error"}))}static success(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},vt.defaultOpts),t),{type:"success"}))}static config(t){["top","left","bottom","right"].forEach(i=>{i in t&&(vt.defaultOpts[i]=t[i])}),typeof t.zIndex=="number"&&(vt.defaultOpts.zIndex=t.zIndex),typeof t.duration=="number"&&(vt.defaultOpts.duration=t.duration),typeof t.getPopupContainer=="function"&&(vt.defaultOpts.getPopupContainer=t.getPopupContainer)}has(t){return this.foundation.hasToast(t)}add(t){return this.foundation.addToast(t)}update(t,i){return this.foundation.updateToast(t,i)}remove(t){return this.foundation.removeToast(t)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:t}=this.state;const{removedItems:i,updatedItems:r}=this.state;t=Array.from(new Set([...t,...i]));const s=r.map(o=>{let{id:a}=o;return a}),f=o=>{var a;!((a=o==null?void 0:o.foundation)===null||a===void 0)&&a._id&&s.includes(o.foundation._id)&&(o.foundation.setState({duration:o.props.duration}),o.foundation.restartCloseTimer())};return E.createElement(E.Fragment,null,t.map((o,a)=>{const c=i.find(d=>d.id===o.id)!==void 0;return E.createElement(Ov,{key:o.id,motion:o.motion,animationState:c?"leave":"enter",startClassName:c?`${gh.PREFIX}-animation-hide`:`${gh.PREFIX}-animation-show`},d=>{let{animationClassName:l,animationEventsNeedBind:u,isAnimating:h}=d;return c&&!h?null:E.createElement(ET,Object.assign({},o,{className:Ne({[o.className]:Boolean(o.className),[l]:!0})},u,{style:Object.assign({},o.style),close:g=>this.remove(g),ref:f}))})}))}},n.defaultOpts={motion:!0,zIndex:1010,content:""},n.propTypes={content:C.node,duration:C.number,onClose:C.func,icon:C.node,direction:C.oneOf(mh.directions)},n.defaultProps={},n};class f${static create(e){const t=h$();return t.useToast=u$,e&&t.config(e),t}}const d$=f$.create();/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Zv="148",ra={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},p$=0,v1=1,g$=2,MT=1,m$=2,Dl=3,Yr=0,ci=1,Wf=2,Eu=3,Hr=0,oo=1,y1=2,_1=3,x1=4,v$=5,xa=100,y$=101,_$=102,b1=103,w1=104,x$=200,b$=201,w$=202,S$=203,AT=204,OT=205,C$=206,T$=207,E$=208,M$=209,A$=210,O$=0,P$=1,L$=2,Kg=3,R$=4,D$=5,I$=6,k$=7,Jv=0,F$=1,N$=2,ur=0,B$=1,z$=2,j$=3,U$=4,$$=5,PT=300,So=301,Co=302,qg=303,Zg=304,Xf=306,To=1e3,ri=1001,Jh=1002,Wt=1003,Jg=1004,vh=1005,Sn=1006,LT=1007,Ns=1008,Bs=1009,H$=1010,V$=1011,RT=1012,G$=1013,Ss=1014,Dr=1015,xc=1016,W$=1017,X$=1018,lo=1020,Y$=1021,K$=1022,si=1023,q$=1024,Z$=1025,Os=1026,Eo=1027,J$=1028,Q$=1029,eH=1030,tH=1031,nH=1033,Kd=33776,qd=33777,Zd=33778,Jd=33779,S1=35840,C1=35841,T1=35842,E1=35843,iH=36196,M1=37492,A1=37496,O1=37808,P1=37809,L1=37810,R1=37811,D1=37812,I1=37813,k1=37814,F1=37815,N1=37816,B1=37817,z1=37818,j1=37819,U1=37820,$1=37821,H1=36492,bc=2300,Mo=2301,Qd=2302,V1=2400,G1=2401,W1=2402,rH=2500,sH=1,DT=2,zs=3e3,ht=3001,aH=3200,oH=3201,Qv=0,lH=1,ki="srgb",wc="srgb-linear",ep=7680,cH=519,Qg=35044,X1="300 es",em=1035;class Ys{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,f=r.length;s<f;s++)r[s].call(this,e);e.target=null}}}const rn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Y1=1234567;const Kl=Math.PI/180,Sc=180/Math.PI;function Ti(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(rn[n&255]+rn[n>>8&255]+rn[n>>16&255]+rn[n>>24&255]+"-"+rn[e&255]+rn[e>>8&255]+"-"+rn[e>>16&15|64]+rn[e>>24&255]+"-"+rn[t&63|128]+rn[t>>8&255]+"-"+rn[t>>16&255]+rn[t>>24&255]+rn[i&255]+rn[i>>8&255]+rn[i>>16&255]+rn[i>>24&255]).toLowerCase()}function an(n,e,t){return Math.max(e,Math.min(t,n))}function e0(n,e){return(n%e+e)%e}function uH(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function hH(n,e,t){return n!==e?(t-n)/(e-n):0}function ql(n,e,t){return(1-t)*n+t*e}function fH(n,e,t,i){return ql(n,e,1-Math.exp(-t*i))}function dH(n,e=1){return e-Math.abs(e0(n,e*2)-e)}function pH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function gH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function mH(n,e){return n+Math.floor(Math.random()*(e-n+1))}function vH(n,e){return n+Math.random()*(e-n)}function yH(n){return n*(.5-Math.random())}function _H(n){n!==void 0&&(Y1=n);let e=Y1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function xH(n){return n*Kl}function bH(n){return n*Sc}function tm(n){return(n&n-1)===0&&n!==0}function IT(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Qh(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function wH(n,e,t,i,r){const s=Math.cos,f=Math.sin,o=s(t/2),a=f(t/2),c=s((e+i)/2),d=f((e+i)/2),l=s((e-i)/2),u=f((e-i)/2),h=s((i-e)/2),g=f((i-e)/2);switch(r){case"XYX":n.set(o*d,a*l,a*u,o*c);break;case"YZY":n.set(a*u,o*d,a*l,o*c);break;case"ZXZ":n.set(a*l,a*u,o*d,o*c);break;case"XZX":n.set(o*d,a*g,a*h,o*c);break;case"YXY":n.set(a*h,o*d,a*g,o*c);break;case"ZYZ":n.set(a*g,a*h,o*d,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function lr(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function gt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var SH=Object.freeze({__proto__:null,DEG2RAD:Kl,RAD2DEG:Sc,generateUUID:Ti,clamp:an,euclideanModulo:e0,mapLinear:uH,inverseLerp:hH,lerp:ql,damp:fH,pingpong:dH,smoothstep:pH,smootherstep:gH,randInt:mH,randFloat:vH,randFloatSpread:yH,seededRandom:_H,degToRad:xH,radToDeg:bH,isPowerOfTwo:tm,ceilPowerOfTwo:IT,floorPowerOfTwo:Qh,setQuaternionFromProperEuler:wH,normalize:gt,denormalize:lr});class Ue{constructor(e=0,t=0){Ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,f=this.y-e.y;return this.x=s*i-f*r+e.x,this.y=s*r+f*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Un{constructor(){Un.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,f,o,a,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=s,d[5]=a,d[6]=i,d[7]=f,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,f=i[0],o=i[3],a=i[6],c=i[1],d=i[4],l=i[7],u=i[2],h=i[5],g=i[8],m=r[0],p=r[3],v=r[6],y=r[1],_=r[4],x=r[7],b=r[2],w=r[5],T=r[8];return s[0]=f*m+o*y+a*b,s[3]=f*p+o*_+a*w,s[6]=f*v+o*x+a*T,s[1]=c*m+d*y+l*b,s[4]=c*p+d*_+l*w,s[7]=c*v+d*x+l*T,s[2]=u*m+h*y+g*b,s[5]=u*p+h*_+g*w,s[8]=u*v+h*x+g*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],f=e[4],o=e[5],a=e[6],c=e[7],d=e[8];return t*f*d-t*o*c-i*s*d+i*o*a+r*s*c-r*f*a}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],f=e[4],o=e[5],a=e[6],c=e[7],d=e[8],l=d*f-o*c,u=o*a-d*s,h=c*s-f*a,g=t*l+i*u+r*h;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/g;return e[0]=l*m,e[1]=(r*c-d*i)*m,e[2]=(o*i-r*f)*m,e[3]=u*m,e[4]=(d*t-r*a)*m,e[5]=(r*s-o*t)*m,e[6]=h*m,e[7]=(i*a-c*t)*m,e[8]=(f*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,f,o){const a=Math.cos(s),c=Math.sin(s);return this.set(i*a,i*c,-i*(a*f+c*o)+f+e,-r*c,r*a,-r*(-c*f+a*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(tp.makeScale(e,t)),this}rotate(e){return this.premultiply(tp.makeRotation(-e)),this}translate(e,t){return this.premultiply(tp.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tp=new Un;function kT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Cc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Ps(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function yh(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const np={[ki]:{[wc]:Ps},[wc]:{[ki]:yh}},un={legacyMode:!0,get workingColorSpace(){return wc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(np[e]&&np[e][t]!==void 0){const i=np[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},FT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bt={r:0,g:0,b:0},gi={h:0,s:0,l:0},Mu={h:0,s:0,l:0};function ip(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function Au(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class He{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ki){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,un.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=un.workingColorSpace){return this.r=e,this.g=t,this.b=i,un.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=un.workingColorSpace){if(e=e0(e,1),t=an(t,0,1),i=an(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,f=2*i-s;this.r=ip(f,s,e+1/3),this.g=ip(f,s,e),this.b=ip(f,s,e-1/3)}return un.toWorkingColorSpace(this,r),this}setStyle(e,t=ki){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const f=r[1],o=r[2];switch(f){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,un.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,un.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(s[1])/360,c=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return i(s[4]),this.setHSL(a,c,d,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],f=s.length;if(f===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,un.toWorkingColorSpace(this,t),this;if(f===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,un.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=ki){const i=FT[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ps(e.r),this.g=Ps(e.g),this.b=Ps(e.b),this}copyLinearToSRGB(e){return this.r=yh(e.r),this.g=yh(e.g),this.b=yh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ki){return un.fromWorkingColorSpace(Au(this,Bt),e),an(Bt.r*255,0,255)<<16^an(Bt.g*255,0,255)<<8^an(Bt.b*255,0,255)<<0}getHexString(e=ki){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=un.workingColorSpace){un.fromWorkingColorSpace(Au(this,Bt),t);const i=Bt.r,r=Bt.g,s=Bt.b,f=Math.max(i,r,s),o=Math.min(i,r,s);let a,c;const d=(o+f)/2;if(o===f)a=0,c=0;else{const l=f-o;switch(c=d<=.5?l/(f+o):l/(2-f-o),f){case i:a=(r-s)/l+(r<s?6:0);break;case r:a=(s-i)/l+2;break;case s:a=(i-r)/l+4;break}a/=6}return e.h=a,e.s=c,e.l=d,e}getRGB(e,t=un.workingColorSpace){return un.fromWorkingColorSpace(Au(this,Bt),t),e.r=Bt.r,e.g=Bt.g,e.b=Bt.b,e}getStyle(e=ki){return un.fromWorkingColorSpace(Au(this,Bt),e),e!==ki?`color(${e} ${Bt.r} ${Bt.g} ${Bt.b})`:`rgb(${Bt.r*255|0},${Bt.g*255|0},${Bt.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(gi),gi.h+=e,gi.s+=t,gi.l+=i,this.setHSL(gi.h,gi.s,gi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(gi),e.getHSL(Mu);const i=ql(gi.h,Mu.h,t),r=ql(gi.s,Mu.s,t),s=ql(gi.l,Mu.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}He.NAMES=FT;let aa;class NT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{aa===void 0&&(aa=Cc("canvas")),aa.width=e.width,aa.height=e.height;const i=aa.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=aa}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Cc("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let f=0;f<s.length;f++)s[f]=Ps(s[f]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ps(t[i]/255)*255):t[i]=Ps(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class BT{constructor(e=null){this.isSource=!0,this.uuid=Ti(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let f=0,o=r.length;f<o;f++)r[f].isDataTexture?s.push(rp(r[f].image)):s.push(rp(r[f]))}else s=rp(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function rp(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?NT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let CH=0;class Yt extends Ys{constructor(e=Yt.DEFAULT_IMAGE,t=Yt.DEFAULT_MAPPING,i=ri,r=ri,s=Sn,f=Ns,o=si,a=Bs,c=Yt.DEFAULT_ANISOTROPY,d=zs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CH++}),this.uuid=Ti(),this.name="",this.source=new BT(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=f,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==PT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case To:e.x=e.x-Math.floor(e.x);break;case ri:e.x=e.x<0?0:1;break;case Jh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case To:e.y=e.y-Math.floor(e.y);break;case ri:e.y=e.y<0?0:1;break;case Jh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Yt.DEFAULT_IMAGE=null;Yt.DEFAULT_MAPPING=PT;Yt.DEFAULT_ANISOTROPY=1;class mt{constructor(e=0,t=0,i=0,r=1){mt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,f=e.elements;return this.x=f[0]*t+f[4]*i+f[8]*r+f[12]*s,this.y=f[1]*t+f[5]*i+f[9]*r+f[13]*s,this.z=f[2]*t+f[6]*i+f[10]*r+f[14]*s,this.w=f[3]*t+f[7]*i+f[11]*r+f[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const a=e.elements,c=a[0],d=a[4],l=a[8],u=a[1],h=a[5],g=a[9],m=a[2],p=a[6],v=a[10];if(Math.abs(d-u)<.01&&Math.abs(l-m)<.01&&Math.abs(g-p)<.01){if(Math.abs(d+u)<.1&&Math.abs(l+m)<.1&&Math.abs(g+p)<.1&&Math.abs(c+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,x=(h+1)/2,b=(v+1)/2,w=(d+u)/4,T=(l+m)/4,S=(g+p)/4;return _>x&&_>b?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=w/i,s=T/i):x>b?x<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(x),i=w/r,s=S/r):b<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(b),i=T/s,r=S/s),this.set(i,r,s,t),this}let y=Math.sqrt((p-g)*(p-g)+(l-m)*(l-m)+(u-d)*(u-d));return Math.abs(y)<.001&&(y=1),this.x=(p-g)/y,this.y=(l-m)/y,this.z=(u-d)/y,this.w=Math.acos((c+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class js extends Ys{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new mt(0,0,e,t),this.scissorTest=!1,this.viewport=new mt(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Yt(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Sn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new BT(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zT extends Yt{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Wt,this.minFilter=Wt,this.wrapR=ri,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class TH extends Yt{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Wt,this.minFilter=Wt,this.wrapR=ri,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,f,o){let a=i[r+0],c=i[r+1],d=i[r+2],l=i[r+3];const u=s[f+0],h=s[f+1],g=s[f+2],m=s[f+3];if(o===0){e[t+0]=a,e[t+1]=c,e[t+2]=d,e[t+3]=l;return}if(o===1){e[t+0]=u,e[t+1]=h,e[t+2]=g,e[t+3]=m;return}if(l!==m||a!==u||c!==h||d!==g){let p=1-o;const v=a*u+c*h+d*g+l*m,y=v>=0?1:-1,_=1-v*v;if(_>Number.EPSILON){const b=Math.sqrt(_),w=Math.atan2(b,v*y);p=Math.sin(p*w)/b,o=Math.sin(o*w)/b}const x=o*y;if(a=a*p+u*x,c=c*p+h*x,d=d*p+g*x,l=l*p+m*x,p===1-o){const b=1/Math.sqrt(a*a+c*c+d*d+l*l);a*=b,c*=b,d*=b,l*=b}}e[t]=a,e[t+1]=c,e[t+2]=d,e[t+3]=l}static multiplyQuaternionsFlat(e,t,i,r,s,f){const o=i[r],a=i[r+1],c=i[r+2],d=i[r+3],l=s[f],u=s[f+1],h=s[f+2],g=s[f+3];return e[t]=o*g+d*l+a*h-c*u,e[t+1]=a*g+d*u+c*l-o*h,e[t+2]=c*g+d*h+o*u-a*l,e[t+3]=d*g-o*l-a*u-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,f=e._order,o=Math.cos,a=Math.sin,c=o(i/2),d=o(r/2),l=o(s/2),u=a(i/2),h=a(r/2),g=a(s/2);switch(f){case"XYZ":this._x=u*d*l+c*h*g,this._y=c*h*l-u*d*g,this._z=c*d*g+u*h*l,this._w=c*d*l-u*h*g;break;case"YXZ":this._x=u*d*l+c*h*g,this._y=c*h*l-u*d*g,this._z=c*d*g-u*h*l,this._w=c*d*l+u*h*g;break;case"ZXY":this._x=u*d*l-c*h*g,this._y=c*h*l+u*d*g,this._z=c*d*g+u*h*l,this._w=c*d*l-u*h*g;break;case"ZYX":this._x=u*d*l-c*h*g,this._y=c*h*l+u*d*g,this._z=c*d*g-u*h*l,this._w=c*d*l+u*h*g;break;case"YZX":this._x=u*d*l+c*h*g,this._y=c*h*l+u*d*g,this._z=c*d*g-u*h*l,this._w=c*d*l-u*h*g;break;case"XZY":this._x=u*d*l-c*h*g,this._y=c*h*l-u*d*g,this._z=c*d*g+u*h*l,this._w=c*d*l+u*h*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+f)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],f=t[1],o=t[5],a=t[9],c=t[2],d=t[6],l=t[10],u=i+o+l;if(u>0){const h=.5/Math.sqrt(u+1);this._w=.25/h,this._x=(d-a)*h,this._y=(s-c)*h,this._z=(f-r)*h}else if(i>o&&i>l){const h=2*Math.sqrt(1+i-o-l);this._w=(d-a)/h,this._x=.25*h,this._y=(r+f)/h,this._z=(s+c)/h}else if(o>l){const h=2*Math.sqrt(1+o-i-l);this._w=(s-c)/h,this._x=(r+f)/h,this._y=.25*h,this._z=(a+d)/h}else{const h=2*Math.sqrt(1+l-i-o);this._w=(f-r)/h,this._x=(s+c)/h,this._y=(a+d)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(an(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,f=e._w,o=t._x,a=t._y,c=t._z,d=t._w;return this._x=i*d+f*o+r*c-s*a,this._y=r*d+f*a+s*o-i*c,this._z=s*d+f*c+i*a-r*o,this._w=f*d-i*o-r*a-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,f=this._w;let o=f*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=f,this._x=i,this._y=r,this._z=s,this;const a=1-o*o;if(a<=Number.EPSILON){const h=1-t;return this._w=h*f+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(a),d=Math.atan2(c,o),l=Math.sin((1-t)*d)/c,u=Math.sin(t*d)/c;return this._w=f*l+this._w*u,this._x=i*l+this._x*u,this._y=r*l+this._y*u,this._z=s*l+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,t=0,i=0){Q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(K1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(K1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,f=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*f,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*f,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*f,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,f=e.y,o=e.z,a=e.w,c=a*t+f*r-o*i,d=a*i+o*t-s*r,l=a*r+s*i-f*t,u=-s*t-f*i-o*r;return this.x=c*a+u*-s+d*-o-l*-f,this.y=d*a+u*-f+l*-s-c*-o,this.z=l*a+u*-o+c*-f-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,f=t.x,o=t.y,a=t.z;return this.x=r*a-s*o,this.y=s*f-i*a,this.z=i*o-r*f,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sp.copy(this).projectOnVector(e),this.sub(sp)}reflect(e){return this.sub(sp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(an(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sp=new Q,K1=new Gi;class Vo{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,f=-1/0,o=-1/0;for(let a=0,c=e.length;a<c;a+=3){const d=e[a],l=e[a+1],u=e[a+2];d<t&&(t=d),l<i&&(i=l),u<r&&(r=u),d>s&&(s=d),l>f&&(f=l),u>o&&(o=u)}return this.min.set(t,i,r),this.max.set(s,f,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,f=-1/0,o=-1/0;for(let a=0,c=e.count;a<c;a++){const d=e.getX(a),l=e.getY(a),u=e.getZ(a);d<t&&(t=d),l<i&&(i=l),u<r&&(r=u),d>s&&(s=d),l>f&&(f=l),u>o&&(o=u)}return this.min.set(t,i,r),this.max.set(s,f,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ls.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let f=0,o=s.count;f<o;f++)ls.fromBufferAttribute(s,f).applyMatrix4(e.matrixWorld),this.expandByPoint(ls)}else i.boundingBox===null&&i.computeBoundingBox(),ap.copy(i.boundingBox),ap.applyMatrix4(e.matrixWorld),this.union(ap);const r=e.children;for(let s=0,f=r.length;s<f;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ls),ls.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pl),Ou.subVectors(this.max,pl),oa.subVectors(e.a,pl),la.subVectors(e.b,pl),ca.subVectors(e.c,pl),_r.subVectors(la,oa),xr.subVectors(ca,la),cs.subVectors(oa,ca);let t=[0,-_r.z,_r.y,0,-xr.z,xr.y,0,-cs.z,cs.y,_r.z,0,-_r.x,xr.z,0,-xr.x,cs.z,0,-cs.x,-_r.y,_r.x,0,-xr.y,xr.x,0,-cs.y,cs.x,0];return!op(t,oa,la,ca,Ou)||(t=[1,0,0,0,1,0,0,0,1],!op(t,oa,la,ca,Ou))?!1:(Pu.crossVectors(_r,xr),t=[Pu.x,Pu.y,Pu.z],op(t,oa,la,ca,Ou))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ls.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ls).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ki[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ki[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ki[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ki[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ki[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ki[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ki[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ki[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ki),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ki=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],ls=new Q,ap=new Vo,oa=new Q,la=new Q,ca=new Q,_r=new Q,xr=new Q,cs=new Q,pl=new Q,Ou=new Q,Pu=new Q,us=new Q;function op(n,e,t,i,r){for(let s=0,f=n.length-3;s<=f;s+=3){us.fromArray(n,s);const o=r.x*Math.abs(us.x)+r.y*Math.abs(us.y)+r.z*Math.abs(us.z),a=e.dot(us),c=t.dot(us),d=i.dot(us);if(Math.max(-Math.max(a,c,d),Math.min(a,c,d))>o)return!1}return!0}const EH=new Vo,gl=new Q,lp=new Q;class Go{constructor(e=new Q,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):EH.setFromPoints(e).getCenter(i);let r=0;for(let s=0,f=e.length;s<f;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;gl.subVectors(e,this.center);const t=gl.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(gl,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(lp.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(gl.copy(e.center).add(lp)),this.expandByPoint(gl.copy(e.center).sub(lp))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const qi=new Q,cp=new Q,Lu=new Q,br=new Q,up=new Q,Ru=new Q,hp=new Q;class t0{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,qi)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=qi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(qi.copy(this.direction).multiplyScalar(t).add(this.origin),qi.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){cp.copy(e).add(t).multiplyScalar(.5),Lu.copy(t).sub(e).normalize(),br.copy(this.origin).sub(cp);const s=e.distanceTo(t)*.5,f=-this.direction.dot(Lu),o=br.dot(this.direction),a=-br.dot(Lu),c=br.lengthSq(),d=Math.abs(1-f*f);let l,u,h,g;if(d>0)if(l=f*a-o,u=f*o-a,g=s*d,l>=0)if(u>=-g)if(u<=g){const m=1/d;l*=m,u*=m,h=l*(l+f*u+2*o)+u*(f*l+u+2*a)+c}else u=s,l=Math.max(0,-(f*u+o)),h=-l*l+u*(u+2*a)+c;else u=-s,l=Math.max(0,-(f*u+o)),h=-l*l+u*(u+2*a)+c;else u<=-g?(l=Math.max(0,-(-f*s+o)),u=l>0?-s:Math.min(Math.max(-s,-a),s),h=-l*l+u*(u+2*a)+c):u<=g?(l=0,u=Math.min(Math.max(-s,-a),s),h=u*(u+2*a)+c):(l=Math.max(0,-(f*s+o)),u=l>0?s:Math.min(Math.max(-s,-a),s),h=-l*l+u*(u+2*a)+c);else u=f>0?-s:s,l=Math.max(0,-(f*u+o)),h=-l*l+u*(u+2*a)+c;return i&&i.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(Lu).multiplyScalar(u).add(cp),h}intersectSphere(e,t){qi.subVectors(e.center,this.origin);const i=qi.dot(this.direction),r=qi.dot(qi)-i*i,s=e.radius*e.radius;if(r>s)return null;const f=Math.sqrt(s-r),o=i-f,a=i+f;return o<0&&a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,f,o,a;const c=1/this.direction.x,d=1/this.direction.y,l=1/this.direction.z,u=this.origin;return c>=0?(i=(e.min.x-u.x)*c,r=(e.max.x-u.x)*c):(i=(e.max.x-u.x)*c,r=(e.min.x-u.x)*c),d>=0?(s=(e.min.y-u.y)*d,f=(e.max.y-u.y)*d):(s=(e.max.y-u.y)*d,f=(e.min.y-u.y)*d),i>f||s>r||((s>i||isNaN(i))&&(i=s),(f<r||isNaN(r))&&(r=f),l>=0?(o=(e.min.z-u.z)*l,a=(e.max.z-u.z)*l):(o=(e.max.z-u.z)*l,a=(e.min.z-u.z)*l),i>a||o>r)||((o>i||i!==i)&&(i=o),(a<r||r!==r)&&(r=a),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,qi)!==null}intersectTriangle(e,t,i,r,s){up.subVectors(t,e),Ru.subVectors(i,e),hp.crossVectors(up,Ru);let f=this.direction.dot(hp),o;if(f>0){if(r)return null;o=1}else if(f<0)o=-1,f=-f;else return null;br.subVectors(this.origin,e);const a=o*this.direction.dot(Ru.crossVectors(br,Ru));if(a<0)return null;const c=o*this.direction.dot(up.cross(br));if(c<0||a+c>f)return null;const d=-o*br.dot(hp);return d<0?null:this.at(d/f,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ze{constructor(){Ze.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,f,o,a,c,d,l,u,h,g,m,p){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=f,v[9]=o,v[13]=a,v[2]=c,v[6]=d,v[10]=l,v[14]=u,v[3]=h,v[7]=g,v[11]=m,v[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ze().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ua.setFromMatrixColumn(e,0).length(),s=1/ua.setFromMatrixColumn(e,1).length(),f=1/ua.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*f,t[9]=i[9]*f,t[10]=i[10]*f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,f=Math.cos(i),o=Math.sin(i),a=Math.cos(r),c=Math.sin(r),d=Math.cos(s),l=Math.sin(s);if(e.order==="XYZ"){const u=f*d,h=f*l,g=o*d,m=o*l;t[0]=a*d,t[4]=-a*l,t[8]=c,t[1]=h+g*c,t[5]=u-m*c,t[9]=-o*a,t[2]=m-u*c,t[6]=g+h*c,t[10]=f*a}else if(e.order==="YXZ"){const u=a*d,h=a*l,g=c*d,m=c*l;t[0]=u+m*o,t[4]=g*o-h,t[8]=f*c,t[1]=f*l,t[5]=f*d,t[9]=-o,t[2]=h*o-g,t[6]=m+u*o,t[10]=f*a}else if(e.order==="ZXY"){const u=a*d,h=a*l,g=c*d,m=c*l;t[0]=u-m*o,t[4]=-f*l,t[8]=g+h*o,t[1]=h+g*o,t[5]=f*d,t[9]=m-u*o,t[2]=-f*c,t[6]=o,t[10]=f*a}else if(e.order==="ZYX"){const u=f*d,h=f*l,g=o*d,m=o*l;t[0]=a*d,t[4]=g*c-h,t[8]=u*c+m,t[1]=a*l,t[5]=m*c+u,t[9]=h*c-g,t[2]=-c,t[6]=o*a,t[10]=f*a}else if(e.order==="YZX"){const u=f*a,h=f*c,g=o*a,m=o*c;t[0]=a*d,t[4]=m-u*l,t[8]=g*l+h,t[1]=l,t[5]=f*d,t[9]=-o*d,t[2]=-c*d,t[6]=h*l+g,t[10]=u-m*l}else if(e.order==="XZY"){const u=f*a,h=f*c,g=o*a,m=o*c;t[0]=a*d,t[4]=-l,t[8]=c*d,t[1]=u*l+m,t[5]=f*d,t[9]=h*l-g,t[2]=g*l-h,t[6]=o*d,t[10]=m*l+u}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(MH,e,AH)}lookAt(e,t,i){const r=this.elements;return In.subVectors(e,t),In.lengthSq()===0&&(In.z=1),In.normalize(),wr.crossVectors(i,In),wr.lengthSq()===0&&(Math.abs(i.z)===1?In.x+=1e-4:In.z+=1e-4,In.normalize(),wr.crossVectors(i,In)),wr.normalize(),Du.crossVectors(In,wr),r[0]=wr.x,r[4]=Du.x,r[8]=In.x,r[1]=wr.y,r[5]=Du.y,r[9]=In.y,r[2]=wr.z,r[6]=Du.z,r[10]=In.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,f=i[0],o=i[4],a=i[8],c=i[12],d=i[1],l=i[5],u=i[9],h=i[13],g=i[2],m=i[6],p=i[10],v=i[14],y=i[3],_=i[7],x=i[11],b=i[15],w=r[0],T=r[4],S=r[8],O=r[12],N=r[1],V=r[5],Z=r[9],j=r[13],z=r[2],G=r[6],ne=r[10],re=r[14],U=r[3],M=r[7],D=r[11],P=r[15];return s[0]=f*w+o*N+a*z+c*U,s[4]=f*T+o*V+a*G+c*M,s[8]=f*S+o*Z+a*ne+c*D,s[12]=f*O+o*j+a*re+c*P,s[1]=d*w+l*N+u*z+h*U,s[5]=d*T+l*V+u*G+h*M,s[9]=d*S+l*Z+u*ne+h*D,s[13]=d*O+l*j+u*re+h*P,s[2]=g*w+m*N+p*z+v*U,s[6]=g*T+m*V+p*G+v*M,s[10]=g*S+m*Z+p*ne+v*D,s[14]=g*O+m*j+p*re+v*P,s[3]=y*w+_*N+x*z+b*U,s[7]=y*T+_*V+x*G+b*M,s[11]=y*S+_*Z+x*ne+b*D,s[15]=y*O+_*j+x*re+b*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],f=e[1],o=e[5],a=e[9],c=e[13],d=e[2],l=e[6],u=e[10],h=e[14],g=e[3],m=e[7],p=e[11],v=e[15];return g*(+s*a*l-r*c*l-s*o*u+i*c*u+r*o*h-i*a*h)+m*(+t*a*h-t*c*u+s*f*u-r*f*h+r*c*d-s*a*d)+p*(+t*c*l-t*o*h-s*f*l+i*f*h+s*o*d-i*c*d)+v*(-r*o*d-t*a*l+t*o*u+r*f*l-i*f*u+i*a*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],f=e[4],o=e[5],a=e[6],c=e[7],d=e[8],l=e[9],u=e[10],h=e[11],g=e[12],m=e[13],p=e[14],v=e[15],y=l*p*c-m*u*c+m*a*h-o*p*h-l*a*v+o*u*v,_=g*u*c-d*p*c-g*a*h+f*p*h+d*a*v-f*u*v,x=d*m*c-g*l*c+g*o*h-f*m*h-d*o*v+f*l*v,b=g*l*a-d*m*a-g*o*u+f*m*u+d*o*p-f*l*p,w=t*y+i*_+r*x+s*b;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/w;return e[0]=y*T,e[1]=(m*u*s-l*p*s-m*r*h+i*p*h+l*r*v-i*u*v)*T,e[2]=(o*p*s-m*a*s+m*r*c-i*p*c-o*r*v+i*a*v)*T,e[3]=(l*a*s-o*u*s-l*r*c+i*u*c+o*r*h-i*a*h)*T,e[4]=_*T,e[5]=(d*p*s-g*u*s+g*r*h-t*p*h-d*r*v+t*u*v)*T,e[6]=(g*a*s-f*p*s-g*r*c+t*p*c+f*r*v-t*a*v)*T,e[7]=(f*u*s-d*a*s+d*r*c-t*u*c-f*r*h+t*a*h)*T,e[8]=x*T,e[9]=(g*l*s-d*m*s-g*i*h+t*m*h+d*i*v-t*l*v)*T,e[10]=(f*m*s-g*o*s+g*i*c-t*m*c-f*i*v+t*o*v)*T,e[11]=(d*o*s-f*l*s-d*i*c+t*l*c+f*i*h-t*o*h)*T,e[12]=b*T,e[13]=(d*m*r-g*l*r+g*i*u-t*m*u-d*i*p+t*l*p)*T,e[14]=(g*o*r-f*m*r-g*i*a+t*m*a+f*i*p-t*o*p)*T,e[15]=(f*l*r-d*o*r+d*i*a-t*l*a-f*i*u+t*o*u)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,f=e.x,o=e.y,a=e.z,c=s*f,d=s*o;return this.set(c*f+i,c*o-r*a,c*a+r*o,0,c*o+r*a,d*o+i,d*a-r*f,0,c*a-r*o,d*a+r*f,s*a*a+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,f){return this.set(1,i,s,0,e,1,f,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,f=t._y,o=t._z,a=t._w,c=s+s,d=f+f,l=o+o,u=s*c,h=s*d,g=s*l,m=f*d,p=f*l,v=o*l,y=a*c,_=a*d,x=a*l,b=i.x,w=i.y,T=i.z;return r[0]=(1-(m+v))*b,r[1]=(h+x)*b,r[2]=(g-_)*b,r[3]=0,r[4]=(h-x)*w,r[5]=(1-(u+v))*w,r[6]=(p+y)*w,r[7]=0,r[8]=(g+_)*T,r[9]=(p-y)*T,r[10]=(1-(u+m))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=ua.set(r[0],r[1],r[2]).length();const f=ua.set(r[4],r[5],r[6]).length(),o=ua.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],mi.copy(this);const c=1/s,d=1/f,l=1/o;return mi.elements[0]*=c,mi.elements[1]*=c,mi.elements[2]*=c,mi.elements[4]*=d,mi.elements[5]*=d,mi.elements[6]*=d,mi.elements[8]*=l,mi.elements[9]*=l,mi.elements[10]*=l,t.setFromRotationMatrix(mi),i.x=s,i.y=f,i.z=o,this}makePerspective(e,t,i,r,s,f){const o=this.elements,a=2*s/(t-e),c=2*s/(i-r),d=(t+e)/(t-e),l=(i+r)/(i-r),u=-(f+s)/(f-s),h=-2*f*s/(f-s);return o[0]=a,o[4]=0,o[8]=d,o[12]=0,o[1]=0,o[5]=c,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,f){const o=this.elements,a=1/(t-e),c=1/(i-r),d=1/(f-s),l=(t+e)*a,u=(i+r)*c,h=(f+s)*d;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*d,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const ua=new Q,mi=new Ze,MH=new Q(0,0,0),AH=new Q(1,1,1),wr=new Q,Du=new Q,In=new Q,q1=new Ze,Z1=new Gi;class Kc{constructor(e=0,t=0,i=0,r=Kc.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],f=r[4],o=r[8],a=r[1],c=r[5],d=r[9],l=r[2],u=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(an(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,h),this._z=Math.atan2(-f,s)):(this._x=Math.atan2(u,c),this._z=0);break;case"YXZ":this._x=Math.asin(-an(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(a,c)):(this._y=Math.atan2(-l,s),this._z=0);break;case"ZXY":this._x=Math.asin(an(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-l,h),this._z=Math.atan2(-f,c)):(this._y=0,this._z=Math.atan2(a,s));break;case"ZYX":this._y=Math.asin(-an(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,s)):(this._x=0,this._z=Math.atan2(-f,c));break;case"YZX":this._z=Math.asin(an(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-l,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-an(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(u,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-d,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return q1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(q1,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Z1.setFromEuler(this),this.setFromQuaternion(Z1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Kc.DefaultOrder="XYZ";Kc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class jT{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let OH=0;const J1=new Q,ha=new Gi,Zi=new Ze,Iu=new Q,ml=new Q,PH=new Q,LH=new Gi,Q1=new Q(1,0,0),ex=new Q(0,1,0),tx=new Q(0,0,1),RH={type:"added"},nx={type:"removed"};class Ot extends Ys{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:OH++}),this.uuid=Ti(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ot.DefaultUp.clone();const e=new Q,t=new Kc,i=new Gi,r=new Q(1,1,1);function s(){i.setFromEuler(t,!1)}function f(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(f),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ze},normalMatrix:{value:new Un}}),this.matrix=new Ze,this.matrixWorld=new Ze,this.matrixAutoUpdate=Ot.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ot.DefaultMatrixWorldAutoUpdate,this.layers=new jT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ha.setFromAxisAngle(e,t),this.quaternion.multiply(ha),this}rotateOnWorldAxis(e,t){return ha.setFromAxisAngle(e,t),this.quaternion.premultiply(ha),this}rotateX(e){return this.rotateOnAxis(Q1,e)}rotateY(e){return this.rotateOnAxis(ex,e)}rotateZ(e){return this.rotateOnAxis(tx,e)}translateOnAxis(e,t){return J1.copy(e).applyQuaternion(this.quaternion),this.position.add(J1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Q1,e)}translateY(e){return this.translateOnAxis(ex,e)}translateZ(e){return this.translateOnAxis(tx,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Zi.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Iu.copy(e):Iu.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ml.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zi.lookAt(ml,Iu,this.up):Zi.lookAt(Iu,ml,this.up),this.quaternion.setFromRotationMatrix(Zi),r&&(Zi.extractRotation(r.matrixWorld),ha.setFromRotationMatrix(Zi),this.quaternion.premultiply(ha.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(RH)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nx)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(nx)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Zi.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Zi.multiply(e.parent.matrixWorld)),e.applyMatrix4(Zi),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const f=this.children[i].getObjectByProperty(e,t);if(f!==void 0)return f}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const f=this.children[r].getObjectsByProperty(e,t);f.length>0&&(i=i.concat(f))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ml,e,PH),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ml,LH,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,f=r.length;s<f;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(e)),a.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const a=o.shapes;if(Array.isArray(a))for(let c=0,d=a.length;c<d;c++){const l=a[c];s(e.shapes,l)}else s(e.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let a=0,c=this.material.length;a<c;a++)o.push(s(e.materials,this.material[a]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const a=this.animations[o];r.animations.push(s(e.animations,a))}}if(t){const o=f(e.geometries),a=f(e.materials),c=f(e.textures),d=f(e.images),l=f(e.shapes),u=f(e.skeletons),h=f(e.animations),g=f(e.nodes);o.length>0&&(i.geometries=o),a.length>0&&(i.materials=a),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),l.length>0&&(i.shapes=l),u.length>0&&(i.skeletons=u),h.length>0&&(i.animations=h),g.length>0&&(i.nodes=g)}return i.object=r,i;function f(o){const a=[];for(const c in o){const d=o[c];delete d.metadata,a.push(d)}return a}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ot.DefaultUp=new Q(0,1,0);Ot.DefaultMatrixAutoUpdate=!0;Ot.DefaultMatrixWorldAutoUpdate=!0;const vi=new Q,Ji=new Q,fp=new Q,Qi=new Q,fa=new Q,da=new Q,ix=new Q,dp=new Q,pp=new Q,gp=new Q;class rr{constructor(e=new Q,t=new Q,i=new Q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),vi.subVectors(e,t),r.cross(vi);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){vi.subVectors(r,t),Ji.subVectors(i,t),fp.subVectors(e,t);const f=vi.dot(vi),o=vi.dot(Ji),a=vi.dot(fp),c=Ji.dot(Ji),d=Ji.dot(fp),l=f*c-o*o;if(l===0)return s.set(-2,-1,-1);const u=1/l,h=(c*a-o*d)*u,g=(f*d-o*a)*u;return s.set(1-h-g,g,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Qi),Qi.x>=0&&Qi.y>=0&&Qi.x+Qi.y<=1}static getUV(e,t,i,r,s,f,o,a){return this.getBarycoord(e,t,i,r,Qi),a.set(0,0),a.addScaledVector(s,Qi.x),a.addScaledVector(f,Qi.y),a.addScaledVector(o,Qi.z),a}static isFrontFacing(e,t,i,r){return vi.subVectors(i,t),Ji.subVectors(e,t),vi.cross(Ji).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vi.subVectors(this.c,this.b),Ji.subVectors(this.a,this.b),vi.cross(Ji).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return rr.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return rr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let f,o;fa.subVectors(r,i),da.subVectors(s,i),dp.subVectors(e,i);const a=fa.dot(dp),c=da.dot(dp);if(a<=0&&c<=0)return t.copy(i);pp.subVectors(e,r);const d=fa.dot(pp),l=da.dot(pp);if(d>=0&&l<=d)return t.copy(r);const u=a*l-d*c;if(u<=0&&a>=0&&d<=0)return f=a/(a-d),t.copy(i).addScaledVector(fa,f);gp.subVectors(e,s);const h=fa.dot(gp),g=da.dot(gp);if(g>=0&&h<=g)return t.copy(s);const m=h*c-a*g;if(m<=0&&c>=0&&g<=0)return o=c/(c-g),t.copy(i).addScaledVector(da,o);const p=d*g-h*l;if(p<=0&&l-d>=0&&h-g>=0)return ix.subVectors(s,r),o=(l-d)/(l-d+(h-g)),t.copy(r).addScaledVector(ix,o);const v=1/(p+m+u);return f=m*v,o=u*v,t.copy(i).addScaledVector(fa,f).addScaledVector(da,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let DH=0,Gn=class extends Ys{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:DH++}),this.uuid=Ti(),this.name="",this.type="Material",this.blending=oo,this.side=Yr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=AT,this.blendDst=OT,this.blendEquation=xa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Kg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=cH,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ep,this.stencilZFail=ep,this.stencilZPass=ep,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==oo&&(i.blending=this.blending),this.side!==Yr&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const f=[];for(const o in s){const a=s[o];delete a.metadata,f.push(a)}return f}if(t){const s=r(e.textures),f=r(e.images);s.length>0&&(i.textures=s),f.length>0&&(i.images=f)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};class Cs extends Gn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ft=new Q,ku=new Ue;class Jt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Qg,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)ku.fromBufferAttribute(this,t),ku.applyMatrix3(e),this.setXY(t,ku.x,ku.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ft.fromBufferAttribute(this,t),Ft.applyMatrix3(e),this.setXYZ(t,Ft.x,Ft.y,Ft.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ft.fromBufferAttribute(this,t),Ft.applyMatrix4(e),this.setXYZ(t,Ft.x,Ft.y,Ft.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ft.fromBufferAttribute(this,t),Ft.applyNormalMatrix(e),this.setXYZ(t,Ft.x,Ft.y,Ft.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ft.fromBufferAttribute(this,t),Ft.transformDirection(e),this.setXYZ(t,Ft.x,Ft.y,Ft.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=lr(t,this.array)),t}setX(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=lr(t,this.array)),t}setY(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=lr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=lr(t,this.array)),t}setW(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qg&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class UT extends Jt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class $T extends Jt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class pn extends Jt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let IH=0;const Qn=new Ze,mp=new Ot,pa=new Q,kn=new Vo,vl=new Vo,Vt=new Q;class Xn extends Ys{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:IH++}),this.uuid=Ti(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(kT(e)?$T:UT)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Un().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qn.makeRotationFromQuaternion(e),this.applyMatrix4(Qn),this}rotateX(e){return Qn.makeRotationX(e),this.applyMatrix4(Qn),this}rotateY(e){return Qn.makeRotationY(e),this.applyMatrix4(Qn),this}rotateZ(e){return Qn.makeRotationZ(e),this.applyMatrix4(Qn),this}translate(e,t,i){return Qn.makeTranslation(e,t,i),this.applyMatrix4(Qn),this}scale(e,t,i){return Qn.makeScale(e,t,i),this.applyMatrix4(Qn),this}lookAt(e){return mp.lookAt(e),mp.updateMatrix(),this.applyMatrix4(mp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pa).negate(),this.translate(pa.x,pa.y,pa.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new pn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];kn.setFromBufferAttribute(s),this.morphTargetsRelative?(Vt.addVectors(this.boundingBox.min,kn.min),this.boundingBox.expandByPoint(Vt),Vt.addVectors(this.boundingBox.max,kn.max),this.boundingBox.expandByPoint(Vt)):(this.boundingBox.expandByPoint(kn.min),this.boundingBox.expandByPoint(kn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Go);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Q,1/0);return}if(e){const i=this.boundingSphere.center;if(kn.setFromBufferAttribute(e),t)for(let s=0,f=t.length;s<f;s++){const o=t[s];vl.setFromBufferAttribute(o),this.morphTargetsRelative?(Vt.addVectors(kn.min,vl.min),kn.expandByPoint(Vt),Vt.addVectors(kn.max,vl.max),kn.expandByPoint(Vt)):(kn.expandByPoint(vl.min),kn.expandByPoint(vl.max))}kn.getCenter(i);let r=0;for(let s=0,f=e.count;s<f;s++)Vt.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Vt));if(t)for(let s=0,f=t.length;s<f;s++){const o=t[s],a=this.morphTargetsRelative;for(let c=0,d=o.count;c<d;c++)Vt.fromBufferAttribute(o,c),a&&(pa.fromBufferAttribute(e,c),Vt.add(pa)),r=Math.max(r,i.distanceToSquared(Vt))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,f=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jt(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,c=[],d=[];for(let N=0;N<o;N++)c[N]=new Q,d[N]=new Q;const l=new Q,u=new Q,h=new Q,g=new Ue,m=new Ue,p=new Ue,v=new Q,y=new Q;function _(N,V,Z){l.fromArray(r,N*3),u.fromArray(r,V*3),h.fromArray(r,Z*3),g.fromArray(f,N*2),m.fromArray(f,V*2),p.fromArray(f,Z*2),u.sub(l),h.sub(l),m.sub(g),p.sub(g);const j=1/(m.x*p.y-p.x*m.y);isFinite(j)&&(v.copy(u).multiplyScalar(p.y).addScaledVector(h,-m.y).multiplyScalar(j),y.copy(h).multiplyScalar(m.x).addScaledVector(u,-p.x).multiplyScalar(j),c[N].add(v),c[V].add(v),c[Z].add(v),d[N].add(y),d[V].add(y),d[Z].add(y))}let x=this.groups;x.length===0&&(x=[{start:0,count:i.length}]);for(let N=0,V=x.length;N<V;++N){const Z=x[N],j=Z.start,z=Z.count;for(let G=j,ne=j+z;G<ne;G+=3)_(i[G+0],i[G+1],i[G+2])}const b=new Q,w=new Q,T=new Q,S=new Q;function O(N){T.fromArray(s,N*3),S.copy(T);const V=c[N];b.copy(V),b.sub(T.multiplyScalar(T.dot(V))).normalize(),w.crossVectors(S,V);const j=w.dot(d[N])<0?-1:1;a[N*4]=b.x,a[N*4+1]=b.y,a[N*4+2]=b.z,a[N*4+3]=j}for(let N=0,V=x.length;N<V;++N){const Z=x[N],j=Z.start,z=Z.count;for(let G=j,ne=j+z;G<ne;G+=3)O(i[G+0]),O(i[G+1]),O(i[G+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Jt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let u=0,h=i.count;u<h;u++)i.setXYZ(u,0,0,0);const r=new Q,s=new Q,f=new Q,o=new Q,a=new Q,c=new Q,d=new Q,l=new Q;if(e)for(let u=0,h=e.count;u<h;u+=3){const g=e.getX(u+0),m=e.getX(u+1),p=e.getX(u+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,m),f.fromBufferAttribute(t,p),d.subVectors(f,s),l.subVectors(r,s),d.cross(l),o.fromBufferAttribute(i,g),a.fromBufferAttribute(i,m),c.fromBufferAttribute(i,p),o.add(d),a.add(d),c.add(d),i.setXYZ(g,o.x,o.y,o.z),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(p,c.x,c.y,c.z)}else for(let u=0,h=t.count;u<h;u+=3)r.fromBufferAttribute(t,u+0),s.fromBufferAttribute(t,u+1),f.fromBufferAttribute(t,u+2),d.subVectors(f,s),l.subVectors(r,s),d.cross(l),i.setXYZ(u+0,d.x,d.y,d.z),i.setXYZ(u+1,d.x,d.y,d.z),i.setXYZ(u+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Vt.fromBufferAttribute(e,t),Vt.normalize(),e.setXYZ(t,Vt.x,Vt.y,Vt.z)}toNonIndexed(){function e(o,a){const c=o.array,d=o.itemSize,l=o.normalized,u=new c.constructor(a.length*d);let h=0,g=0;for(let m=0,p=a.length;m<p;m++){o.isInterleavedBufferAttribute?h=a[m]*o.data.stride+o.offset:h=a[m]*d;for(let v=0;v<d;v++)u[g++]=c[h++]}return new Jt(u,d,l)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Xn,i=this.index.array,r=this.attributes;for(const o in r){const a=r[o],c=e(a,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const a=[],c=s[o];for(let d=0,l=c.length;d<l;d++){const u=c[d],h=e(u,i);a.push(h)}t.morphAttributes[o]=a}t.morphTargetsRelative=this.morphTargetsRelative;const f=this.groups;for(let o=0,a=f.length;o<a;o++){const c=f[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const c in a)a[c]!==void 0&&(e[c]=a[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const a in i){const c=i[a];e.data.attributes[a]=c.toJSON(e.data)}const r={};let s=!1;for(const a in this.morphAttributes){const c=this.morphAttributes[a],d=[];for(let l=0,u=c.length;l<u;l++){const h=c[l];d.push(h.toJSON(e.data))}d.length>0&&(r[a]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const f=this.groups;f.length>0&&(e.data.groups=JSON.parse(JSON.stringify(f)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],l=s[c];for(let u=0,h=l.length;u<h;u++)d.push(l[u].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const f=e.groups;for(let c=0,d=f.length;c<d;c++){const l=f[c];this.addGroup(l.start,l.count,l.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const a=e.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const rx=new Ze,ga=new t0,vp=new Go,yl=new Q,_l=new Q,xl=new Q,yp=new Q,Fu=new Q,Nu=new Ue,Bu=new Ue,zu=new Ue,_p=new Q,ju=new Q;class Tn extends Ot{constructor(e=new Xn,t=new Cs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,f=r.length;s<f;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,f=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){Fu.set(0,0,0);for(let a=0,c=s.length;a<c;a++){const d=o[a],l=s[a];d!==0&&(yp.fromBufferAttribute(l,e),f?Fu.addScaledVector(yp,d):Fu.addScaledVector(yp.sub(t),d))}t.add(Fu)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),vp.copy(i.boundingSphere),vp.applyMatrix4(s),e.ray.intersectsSphere(vp)===!1)||(rx.copy(s).invert(),ga.copy(e.ray).applyMatrix4(rx),i.boundingBox!==null&&ga.intersectsBox(i.boundingBox)===!1))return;let f;const o=i.index,a=i.attributes.position,c=i.attributes.uv,d=i.attributes.uv2,l=i.groups,u=i.drawRange;if(o!==null)if(Array.isArray(r))for(let h=0,g=l.length;h<g;h++){const m=l[h],p=r[m.materialIndex],v=Math.max(m.start,u.start),y=Math.min(o.count,Math.min(m.start+m.count,u.start+u.count));for(let _=v,x=y;_<x;_+=3){const b=o.getX(_),w=o.getX(_+1),T=o.getX(_+2);f=Uu(this,p,e,ga,c,d,b,w,T),f&&(f.faceIndex=Math.floor(_/3),f.face.materialIndex=m.materialIndex,t.push(f))}}else{const h=Math.max(0,u.start),g=Math.min(o.count,u.start+u.count);for(let m=h,p=g;m<p;m+=3){const v=o.getX(m),y=o.getX(m+1),_=o.getX(m+2);f=Uu(this,r,e,ga,c,d,v,y,_),f&&(f.faceIndex=Math.floor(m/3),t.push(f))}}else if(a!==void 0)if(Array.isArray(r))for(let h=0,g=l.length;h<g;h++){const m=l[h],p=r[m.materialIndex],v=Math.max(m.start,u.start),y=Math.min(a.count,Math.min(m.start+m.count,u.start+u.count));for(let _=v,x=y;_<x;_+=3){const b=_,w=_+1,T=_+2;f=Uu(this,p,e,ga,c,d,b,w,T),f&&(f.faceIndex=Math.floor(_/3),f.face.materialIndex=m.materialIndex,t.push(f))}}else{const h=Math.max(0,u.start),g=Math.min(a.count,u.start+u.count);for(let m=h,p=g;m<p;m+=3){const v=m,y=m+1,_=m+2;f=Uu(this,r,e,ga,c,d,v,y,_),f&&(f.faceIndex=Math.floor(m/3),t.push(f))}}}}function kH(n,e,t,i,r,s,f,o){let a;if(e.side===ci?a=i.intersectTriangle(f,s,r,!0,o):a=i.intersectTriangle(r,s,f,e.side===Yr,o),a===null)return null;ju.copy(o),ju.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ju);return c<t.near||c>t.far?null:{distance:c,point:ju.clone(),object:n}}function Uu(n,e,t,i,r,s,f,o,a){n.getVertexPosition(f,yl),n.getVertexPosition(o,_l),n.getVertexPosition(a,xl);const c=kH(n,e,t,i,yl,_l,xl,_p);if(c){r&&(Nu.fromBufferAttribute(r,f),Bu.fromBufferAttribute(r,o),zu.fromBufferAttribute(r,a),c.uv=rr.getUV(_p,yl,_l,xl,Nu,Bu,zu,new Ue)),s&&(Nu.fromBufferAttribute(s,f),Bu.fromBufferAttribute(s,o),zu.fromBufferAttribute(s,a),c.uv2=rr.getUV(_p,yl,_l,xl,Nu,Bu,zu,new Ue));const d={a:f,b:o,c:a,normal:new Q,materialIndex:0};rr.getNormal(yl,_l,xl,d.normal),c.face=d}return c}class qc extends Xn{constructor(e=1,t=1,i=1,r=1,s=1,f=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:f};const o=this;r=Math.floor(r),s=Math.floor(s),f=Math.floor(f);const a=[],c=[],d=[],l=[];let u=0,h=0;g("z","y","x",-1,-1,i,t,e,f,s,0),g("z","y","x",1,-1,i,t,-e,f,s,1),g("x","z","y",1,1,e,i,t,r,f,2),g("x","z","y",1,-1,e,i,-t,r,f,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(a),this.setAttribute("position",new pn(c,3)),this.setAttribute("normal",new pn(d,3)),this.setAttribute("uv",new pn(l,2));function g(m,p,v,y,_,x,b,w,T,S,O){const N=x/T,V=b/S,Z=x/2,j=b/2,z=w/2,G=T+1,ne=S+1;let re=0,U=0;const M=new Q;for(let D=0;D<ne;D++){const P=D*V-j;for(let L=0;L<G;L++){const H=L*N-Z;M[m]=H*y,M[p]=P*_,M[v]=z,c.push(M.x,M.y,M.z),M[m]=0,M[p]=0,M[v]=w>0?1:-1,d.push(M.x,M.y,M.z),l.push(L/T),l.push(1-D/S),re+=1}}for(let D=0;D<S;D++)for(let P=0;P<T;P++){const L=u+P+G*D,H=u+P+G*(D+1),k=u+(P+1)+G*(D+1),A=u+(P+1)+G*D;a.push(L,H,A),a.push(H,k,A),U+=6}o.addGroup(h,U,O),h+=U,u+=re}}static fromJSON(e){return new qc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ao(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function fn(n){const e={};for(let t=0;t<n.length;t++){const i=Ao(n[t]);for(const r in i)e[r]=i[r]}return e}function FH(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function HT(n){return n.getRenderTarget()===null&&n.outputEncoding===ht?ki:wc}const NH={clone:Ao,merge:fn};var BH=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zH=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Us extends Gn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=BH,this.fragmentShader=zH,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ao(e.uniforms),this.uniformsGroups=FH(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const f=this.uniforms[r].value;f&&f.isTexture?t.uniforms[r]={type:"t",value:f.toJSON(e).uuid}:f&&f.isColor?t.uniforms[r]={type:"c",value:f.getHex()}:f&&f.isVector2?t.uniforms[r]={type:"v2",value:f.toArray()}:f&&f.isVector3?t.uniforms[r]={type:"v3",value:f.toArray()}:f&&f.isVector4?t.uniforms[r]={type:"v4",value:f.toArray()}:f&&f.isMatrix3?t.uniforms[r]={type:"m3",value:f.toArray()}:f&&f.isMatrix4?t.uniforms[r]={type:"m4",value:f.toArray()}:t.uniforms[r]={value:f}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class VT extends Ot{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ze,this.projectionMatrix=new Ze,this.projectionMatrixInverse=new Ze}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class gn extends VT{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Sc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Kl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sc*2*Math.atan(Math.tan(Kl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,f){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Kl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const f=this.view;if(this.view!==null&&this.view.enabled){const a=f.fullWidth,c=f.fullHeight;s+=f.offsetX*r/a,t-=f.offsetY*i/c,r*=f.width/a,i*=f.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ma=-90,va=1;class jH extends Ot{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new gn(ma,va,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new gn(ma,va,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const f=new gn(ma,va,e,t);f.layers=this.layers,f.up.set(0,0,-1),f.lookAt(0,1,0),this.add(f);const o=new gn(ma,va,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);const a=new gn(ma,va,e,t);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);const c=new gn(ma,va,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,f,o,a,c]=this.children,d=e.getRenderTarget(),l=e.toneMapping,u=e.xr.enabled;e.toneMapping=ur,e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,f),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,a),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=l,e.xr.enabled=u,i.texture.needsPMREMUpdate=!0}}class GT extends Yt{constructor(e,t,i,r,s,f,o,a,c,d){e=e!==void 0?e:[],t=t!==void 0?t:So,super(e,t,i,r,s,f,o,a,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class UH extends js{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new GT(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Sn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new qc(5,5,5),s=new Us({name:"CubemapFromEquirect",uniforms:Ao(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ci,blending:Hr});s.uniforms.tEquirect.value=t;const f=new Tn(r,s),o=t.minFilter;return t.minFilter===Ns&&(t.minFilter=Sn),new jH(1,10,this).update(e,f),t.minFilter=o,f.geometry.dispose(),f.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let f=0;f<6;f++)e.setRenderTarget(this,f),e.clear(t,i,r);e.setRenderTarget(s)}}const xp=new Q,$H=new Q,HH=new Un;class ps{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=xp.subVectors(i,t).cross($H.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(xp),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||HH.getNormalMatrix(e),r=this.coplanarPoint(xp).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ya=new Go,$u=new Q;class n0{constructor(e=new ps,t=new ps,i=new ps,r=new ps,s=new ps,f=new ps){this.planes=[e,t,i,r,s,f]}set(e,t,i,r,s,f){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(f),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],f=i[2],o=i[3],a=i[4],c=i[5],d=i[6],l=i[7],u=i[8],h=i[9],g=i[10],m=i[11],p=i[12],v=i[13],y=i[14],_=i[15];return t[0].setComponents(o-r,l-a,m-u,_-p).normalize(),t[1].setComponents(o+r,l+a,m+u,_+p).normalize(),t[2].setComponents(o+s,l+c,m+h,_+v).normalize(),t[3].setComponents(o-s,l-c,m-h,_-v).normalize(),t[4].setComponents(o-f,l-d,m-g,_-y).normalize(),t[5].setComponents(o+f,l+d,m+g,_+y).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),ya.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ya)}intersectsSprite(e){return ya.center.set(0,0,0),ya.radius=.7071067811865476,ya.applyMatrix4(e.matrixWorld),this.intersectsSphere(ya)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if($u.x=r.normal.x>0?e.max.x:e.min.x,$u.y=r.normal.y>0?e.max.y:e.min.y,$u.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint($u)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WT(){let n=null,e=!1,t=null,i=null;function r(s,f){t(s,f),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function VH(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,d){const l=c.array,u=c.usage,h=n.createBuffer();n.bindBuffer(d,h),n.bufferData(d,l,u),c.onUploadCallback();let g;if(l instanceof Float32Array)g=5126;else if(l instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(l instanceof Int16Array)g=5122;else if(l instanceof Uint32Array)g=5125;else if(l instanceof Int32Array)g=5124;else if(l instanceof Int8Array)g=5120;else if(l instanceof Uint8Array)g=5121;else if(l instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:g,bytesPerElement:l.BYTES_PER_ELEMENT,version:c.version}}function s(c,d,l){const u=d.array,h=d.updateRange;n.bindBuffer(l,c),h.count===-1?n.bufferSubData(l,0,u):(t?n.bufferSubData(l,h.offset*u.BYTES_PER_ELEMENT,u,h.offset,h.count):n.bufferSubData(l,h.offset*u.BYTES_PER_ELEMENT,u.subarray(h.offset,h.offset+h.count)),h.count=-1),d.onUploadCallback()}function f(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d&&(n.deleteBuffer(d.buffer),i.delete(c))}function a(c,d){if(c.isGLBufferAttribute){const u=i.get(c);(!u||u.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const l=i.get(c);l===void 0?i.set(c,r(c,d)):l.version<c.version&&(s(l.buffer,c,d),l.version=c.version)}return{get:f,remove:o,update:a}}class i0 extends Xn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,f=t/2,o=Math.floor(i),a=Math.floor(r),c=o+1,d=a+1,l=e/o,u=t/a,h=[],g=[],m=[],p=[];for(let v=0;v<d;v++){const y=v*u-f;for(let _=0;_<c;_++){const x=_*l-s;g.push(x,-y,0),m.push(0,0,1),p.push(_/o),p.push(1-v/a)}}for(let v=0;v<a;v++)for(let y=0;y<o;y++){const _=y+c*v,x=y+c*(v+1),b=y+1+c*(v+1),w=y+1+c*v;h.push(_,x,w),h.push(x,b,w)}this.setIndex(h),this.setAttribute("position",new pn(g,3)),this.setAttribute("normal",new pn(m,3)),this.setAttribute("uv",new pn(p,2))}static fromJSON(e){return new i0(e.width,e.height,e.widthSegments,e.heightSegments)}}var GH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,WH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XH=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,YH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,KH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ZH="vec3 transformed = vec3( position );",JH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,QH=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,eV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,tV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,nV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,iV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,sV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,aV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,oV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,lV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,cV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,uV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,hV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,fV=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,dV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,gV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,mV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,vV="gl_FragColor = linearToOutputTexel( gl_FragColor );",yV=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,_V=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,wV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,SV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,CV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,TV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,EV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,MV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,AV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,OV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,PV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,LV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,RV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,DV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,IV=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,kV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,FV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,NV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,BV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,zV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,jV=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,UV=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$V=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,HV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,VV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,XV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,YV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,KV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ZV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,JV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,QV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,eG=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,tG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,nG=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,iG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,rG=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,sG=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,uG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,hG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,fG=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,dG=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,pG=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,mG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,yG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_G=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,bG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,wG=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,SG=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,CG=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,TG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,EG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,MG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,AG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,OG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,PG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,LG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,RG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,DG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,IG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,kG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,FG=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,NG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,BG=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,zG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,jG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,UG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,$G=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const HG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,VG=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WG=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YG=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,KG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,ZG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,JG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,QG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,eW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iW=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,lW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,hW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_W=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ge={alphamap_fragment:GH,alphamap_pars_fragment:WH,alphatest_fragment:XH,alphatest_pars_fragment:YH,aomap_fragment:KH,aomap_pars_fragment:qH,begin_vertex:ZH,beginnormal_vertex:JH,bsdfs:QH,iridescence_fragment:eV,bumpmap_pars_fragment:tV,clipping_planes_fragment:nV,clipping_planes_pars_fragment:iV,clipping_planes_pars_vertex:rV,clipping_planes_vertex:sV,color_fragment:aV,color_pars_fragment:oV,color_pars_vertex:lV,color_vertex:cV,common:uV,cube_uv_reflection_fragment:hV,defaultnormal_vertex:fV,displacementmap_pars_vertex:dV,displacementmap_vertex:pV,emissivemap_fragment:gV,emissivemap_pars_fragment:mV,encodings_fragment:vV,encodings_pars_fragment:yV,envmap_fragment:_V,envmap_common_pars_fragment:xV,envmap_pars_fragment:bV,envmap_pars_vertex:wV,envmap_physical_pars_fragment:IV,envmap_vertex:SV,fog_vertex:CV,fog_pars_vertex:TV,fog_fragment:EV,fog_pars_fragment:MV,gradientmap_pars_fragment:AV,lightmap_fragment:OV,lightmap_pars_fragment:PV,lights_lambert_fragment:LV,lights_lambert_pars_fragment:RV,lights_pars_begin:DV,lights_toon_fragment:kV,lights_toon_pars_fragment:FV,lights_phong_fragment:NV,lights_phong_pars_fragment:BV,lights_physical_fragment:zV,lights_physical_pars_fragment:jV,lights_fragment_begin:UV,lights_fragment_maps:$V,lights_fragment_end:HV,logdepthbuf_fragment:VV,logdepthbuf_pars_fragment:GV,logdepthbuf_pars_vertex:WV,logdepthbuf_vertex:XV,map_fragment:YV,map_pars_fragment:KV,map_particle_fragment:qV,map_particle_pars_fragment:ZV,metalnessmap_fragment:JV,metalnessmap_pars_fragment:QV,morphcolor_vertex:eG,morphnormal_vertex:tG,morphtarget_pars_vertex:nG,morphtarget_vertex:iG,normal_fragment_begin:rG,normal_fragment_maps:sG,normal_pars_fragment:aG,normal_pars_vertex:oG,normal_vertex:lG,normalmap_pars_fragment:cG,clearcoat_normal_fragment_begin:uG,clearcoat_normal_fragment_maps:hG,clearcoat_pars_fragment:fG,iridescence_pars_fragment:dG,output_fragment:pG,packing:gG,premultiplied_alpha_fragment:mG,project_vertex:vG,dithering_fragment:yG,dithering_pars_fragment:_G,roughnessmap_fragment:xG,roughnessmap_pars_fragment:bG,shadowmap_pars_fragment:wG,shadowmap_pars_vertex:SG,shadowmap_vertex:CG,shadowmask_pars_fragment:TG,skinbase_vertex:EG,skinning_pars_vertex:MG,skinning_vertex:AG,skinnormal_vertex:OG,specularmap_fragment:PG,specularmap_pars_fragment:LG,tonemapping_fragment:RG,tonemapping_pars_fragment:DG,transmission_fragment:IG,transmission_pars_fragment:kG,uv_pars_fragment:FG,uv_pars_vertex:NG,uv_vertex:BG,uv2_pars_fragment:zG,uv2_pars_vertex:jG,uv2_vertex:UG,worldpos_vertex:$G,background_vert:HG,background_frag:VG,backgroundCube_vert:GG,backgroundCube_frag:WG,cube_vert:XG,cube_frag:YG,depth_vert:KG,depth_frag:qG,distanceRGBA_vert:ZG,distanceRGBA_frag:JG,equirect_vert:QG,equirect_frag:eW,linedashed_vert:tW,linedashed_frag:nW,meshbasic_vert:iW,meshbasic_frag:rW,meshlambert_vert:sW,meshlambert_frag:aW,meshmatcap_vert:oW,meshmatcap_frag:lW,meshnormal_vert:cW,meshnormal_frag:uW,meshphong_vert:hW,meshphong_frag:fW,meshphysical_vert:dW,meshphysical_frag:pW,meshtoon_vert:gW,meshtoon_frag:mW,points_vert:vW,points_frag:yW,shadow_vert:_W,shadow_frag:xW,sprite_vert:bW,sprite_frag:wW},Ee={common:{diffuse:{value:new He(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Un},uv2Transform:{value:new Un},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new He(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new He(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Un}},sprite:{diffuse:{value:new He(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Un}}},Ni={basic:{uniforms:fn([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.fog]),vertexShader:Ge.meshbasic_vert,fragmentShader:Ge.meshbasic_frag},lambert:{uniforms:fn([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,Ee.lights,{emissive:{value:new He(0)}}]),vertexShader:Ge.meshlambert_vert,fragmentShader:Ge.meshlambert_frag},phong:{uniforms:fn([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,Ee.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:Ge.meshphong_vert,fragmentShader:Ge.meshphong_frag},standard:{uniforms:fn([Ee.common,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.roughnessmap,Ee.metalnessmap,Ee.fog,Ee.lights,{emissive:{value:new He(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag},toon:{uniforms:fn([Ee.common,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.gradientmap,Ee.fog,Ee.lights,{emissive:{value:new He(0)}}]),vertexShader:Ge.meshtoon_vert,fragmentShader:Ge.meshtoon_frag},matcap:{uniforms:fn([Ee.common,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,{matcap:{value:null}}]),vertexShader:Ge.meshmatcap_vert,fragmentShader:Ge.meshmatcap_frag},points:{uniforms:fn([Ee.points,Ee.fog]),vertexShader:Ge.points_vert,fragmentShader:Ge.points_frag},dashed:{uniforms:fn([Ee.common,Ee.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ge.linedashed_vert,fragmentShader:Ge.linedashed_frag},depth:{uniforms:fn([Ee.common,Ee.displacementmap]),vertexShader:Ge.depth_vert,fragmentShader:Ge.depth_frag},normal:{uniforms:fn([Ee.common,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,{opacity:{value:1}}]),vertexShader:Ge.meshnormal_vert,fragmentShader:Ge.meshnormal_frag},sprite:{uniforms:fn([Ee.sprite,Ee.fog]),vertexShader:Ge.sprite_vert,fragmentShader:Ge.sprite_frag},background:{uniforms:{uvTransform:{value:new Un},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ge.background_vert,fragmentShader:Ge.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ge.backgroundCube_vert,fragmentShader:Ge.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ge.cube_vert,fragmentShader:Ge.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ge.equirect_vert,fragmentShader:Ge.equirect_frag},distanceRGBA:{uniforms:fn([Ee.common,Ee.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ge.distanceRGBA_vert,fragmentShader:Ge.distanceRGBA_frag},shadow:{uniforms:fn([Ee.lights,Ee.fog,{color:{value:new He(0)},opacity:{value:1}}]),vertexShader:Ge.shadow_vert,fragmentShader:Ge.shadow_frag}};Ni.physical={uniforms:fn([Ni.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new He(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new He(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new He(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag};const Hu={r:0,b:0,g:0};function SW(n,e,t,i,r,s,f){const o=new He(0);let a=s===!0?0:1,c,d,l=null,u=0,h=null;function g(p,v){let y=!1,_=v.isScene===!0?v.background:null;_&&_.isTexture&&(_=(v.backgroundBlurriness>0?t:e).get(_));const x=n.xr,b=x.getSession&&x.getSession();b&&b.environmentBlendMode==="additive"&&(_=null),_===null?m(o,a):_&&_.isColor&&(m(_,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Xf)?(d===void 0&&(d=new Tn(new qc(1,1,1),new Us({name:"BackgroundCubeMaterial",uniforms:Ao(Ni.backgroundCube.uniforms),vertexShader:Ni.backgroundCube.vertexShader,fragmentShader:Ni.backgroundCube.fragmentShader,side:ci,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(w,T,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=_,d.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,d.material.toneMapped=_.encoding!==ht,(l!==_||u!==_.version||h!==n.toneMapping)&&(d.material.needsUpdate=!0,l=_,u=_.version,h=n.toneMapping),d.layers.enableAll(),p.unshift(d,d.geometry,d.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new Tn(new i0(2,2),new Us({name:"BackgroundMaterial",uniforms:Ao(Ni.background.uniforms),vertexShader:Ni.background.vertexShader,fragmentShader:Ni.background.fragmentShader,side:Yr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=_.encoding!==ht,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(l!==_||u!==_.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,l=_,u=_.version,h=n.toneMapping),c.layers.enableAll(),p.unshift(c,c.geometry,c.material,0,0,null))}function m(p,v){p.getRGB(Hu,HT(n)),i.buffers.color.setClear(Hu.r,Hu.g,Hu.b,v,f)}return{getClearColor:function(){return o},setClearColor:function(p,v=1){o.set(p),a=v,m(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(p){a=p,m(o,a)},render:g}}function CW(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),f=i.isWebGL2||s!==null,o={},a=p(null);let c=a,d=!1;function l(z,G,ne,re,U){let M=!1;if(f){const D=m(re,ne,G);c!==D&&(c=D,h(c.object)),M=v(z,re,ne,U),M&&y(z,re,ne,U)}else{const D=G.wireframe===!0;(c.geometry!==re.id||c.program!==ne.id||c.wireframe!==D)&&(c.geometry=re.id,c.program=ne.id,c.wireframe=D,M=!0)}U!==null&&t.update(U,34963),(M||d)&&(d=!1,S(z,G,ne,re),U!==null&&n.bindBuffer(34963,t.get(U).buffer))}function u(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(z){return i.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function g(z){return i.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function m(z,G,ne){const re=ne.wireframe===!0;let U=o[z.id];U===void 0&&(U={},o[z.id]=U);let M=U[G.id];M===void 0&&(M={},U[G.id]=M);let D=M[re];return D===void 0&&(D=p(u()),M[re]=D),D}function p(z){const G=[],ne=[],re=[];for(let U=0;U<r;U++)G[U]=0,ne[U]=0,re[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:ne,attributeDivisors:re,object:z,attributes:{},index:null}}function v(z,G,ne,re){const U=c.attributes,M=G.attributes;let D=0;const P=ne.getAttributes();for(const L in P)if(P[L].location>=0){const k=U[L];let A=M[L];if(A===void 0&&(L==="instanceMatrix"&&z.instanceMatrix&&(A=z.instanceMatrix),L==="instanceColor"&&z.instanceColor&&(A=z.instanceColor)),k===void 0||k.attribute!==A||A&&k.data!==A.data)return!0;D++}return c.attributesNum!==D||c.index!==re}function y(z,G,ne,re){const U={},M=G.attributes;let D=0;const P=ne.getAttributes();for(const L in P)if(P[L].location>=0){let k=M[L];k===void 0&&(L==="instanceMatrix"&&z.instanceMatrix&&(k=z.instanceMatrix),L==="instanceColor"&&z.instanceColor&&(k=z.instanceColor));const A={};A.attribute=k,k&&k.data&&(A.data=k.data),U[L]=A,D++}c.attributes=U,c.attributesNum=D,c.index=re}function _(){const z=c.newAttributes;for(let G=0,ne=z.length;G<ne;G++)z[G]=0}function x(z){b(z,0)}function b(z,G){const ne=c.newAttributes,re=c.enabledAttributes,U=c.attributeDivisors;ne[z]=1,re[z]===0&&(n.enableVertexAttribArray(z),re[z]=1),U[z]!==G&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,G),U[z]=G)}function w(){const z=c.newAttributes,G=c.enabledAttributes;for(let ne=0,re=G.length;ne<re;ne++)G[ne]!==z[ne]&&(n.disableVertexAttribArray(ne),G[ne]=0)}function T(z,G,ne,re,U,M){i.isWebGL2===!0&&(ne===5124||ne===5125)?n.vertexAttribIPointer(z,G,ne,U,M):n.vertexAttribPointer(z,G,ne,re,U,M)}function S(z,G,ne,re){if(i.isWebGL2===!1&&(z.isInstancedMesh||re.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const U=re.attributes,M=ne.getAttributes(),D=G.defaultAttributeValues;for(const P in M){const L=M[P];if(L.location>=0){let H=U[P];if(H===void 0&&(P==="instanceMatrix"&&z.instanceMatrix&&(H=z.instanceMatrix),P==="instanceColor"&&z.instanceColor&&(H=z.instanceColor)),H!==void 0){const k=H.normalized,A=H.itemSize,F=t.get(H);if(F===void 0)continue;const W=F.buffer,Y=F.type,X=F.bytesPerElement;if(H.isInterleavedBufferAttribute){const ee=H.data,he=ee.stride,ge=H.offset;if(ee.isInstancedInterleavedBuffer){for(let J=0;J<L.locationSize;J++)b(L.location+J,ee.meshPerAttribute);z.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let J=0;J<L.locationSize;J++)x(L.location+J);n.bindBuffer(34962,W);for(let J=0;J<L.locationSize;J++)T(L.location+J,A/L.locationSize,Y,k,he*X,(ge+A/L.locationSize*J)*X)}else{if(H.isInstancedBufferAttribute){for(let ee=0;ee<L.locationSize;ee++)b(L.location+ee,H.meshPerAttribute);z.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=H.meshPerAttribute*H.count)}else for(let ee=0;ee<L.locationSize;ee++)x(L.location+ee);n.bindBuffer(34962,W);for(let ee=0;ee<L.locationSize;ee++)T(L.location+ee,A/L.locationSize,Y,k,A*X,A/L.locationSize*ee*X)}}else if(D!==void 0){const k=D[P];if(k!==void 0)switch(k.length){case 2:n.vertexAttrib2fv(L.location,k);break;case 3:n.vertexAttrib3fv(L.location,k);break;case 4:n.vertexAttrib4fv(L.location,k);break;default:n.vertexAttrib1fv(L.location,k)}}}}w()}function O(){Z();for(const z in o){const G=o[z];for(const ne in G){const re=G[ne];for(const U in re)g(re[U].object),delete re[U];delete G[ne]}delete o[z]}}function N(z){if(o[z.id]===void 0)return;const G=o[z.id];for(const ne in G){const re=G[ne];for(const U in re)g(re[U].object),delete re[U];delete G[ne]}delete o[z.id]}function V(z){for(const G in o){const ne=o[G];if(ne[z.id]===void 0)continue;const re=ne[z.id];for(const U in re)g(re[U].object),delete re[U];delete ne[z.id]}}function Z(){j(),d=!0,c!==a&&(c=a,h(c.object))}function j(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:l,reset:Z,resetDefaultState:j,dispose:O,releaseStatesOfGeometry:N,releaseStatesOfProgram:V,initAttributes:_,enableAttribute:x,disableUnusedAttributes:w}}function TW(n,e,t,i){const r=i.isWebGL2;let s;function f(c){s=c}function o(c,d){n.drawArrays(s,c,d),t.update(d,s,1)}function a(c,d,l){if(l===0)return;let u,h;if(r)u=n,h="drawArraysInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",u===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}u[h](s,c,d,l),t.update(d,s,l)}this.setMode=f,this.render=o,this.renderInstances=a}function EW(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(T){if(T==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const f=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const a=s(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const c=f||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,l=n.getParameter(34930),u=n.getParameter(35660),h=n.getParameter(3379),g=n.getParameter(34076),m=n.getParameter(34921),p=n.getParameter(36347),v=n.getParameter(36348),y=n.getParameter(36349),_=u>0,x=f||e.has("OES_texture_float"),b=_&&x,w=f?n.getParameter(36183):0;return{isWebGL2:f,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:d,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:p,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:b,maxSamples:w}}function MW(n){const e=this;let t=null,i=0,r=!1,s=!1;const f=new ps,o=new Un,a={value:null,needsUpdate:!1};this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(l,u,h){const g=l.length!==0||u||i!==0||r;return r=u,t=d(l,h,0),i=l.length,g},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,c()},this.setState=function(l,u,h){const g=l.clippingPlanes,m=l.clipIntersection,p=l.clipShadows,v=n.get(l);if(!r||g===null||g.length===0||s&&!p)s?d(null):c();else{const y=s?0:i,_=y*4;let x=v.clippingState||null;a.value=x,x=d(g,u,_,h);for(let b=0;b!==_;++b)x[b]=t[b];v.clippingState=x,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){a.value!==t&&(a.value=t,a.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(l,u,h,g){const m=l!==null?l.length:0;let p=null;if(m!==0){if(p=a.value,g!==!0||p===null){const v=h+m*4,y=u.matrixWorldInverse;o.getNormalMatrix(y),(p===null||p.length<v)&&(p=new Float32Array(v));for(let _=0,x=h;_!==m;++_,x+=4)f.copy(l[_]).applyMatrix4(y,o),f.normal.toArray(p,x),p[x+3]=f.constant}a.value=p,a.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,p}}function AW(n){let e=new WeakMap;function t(f,o){return o===qg?f.mapping=So:o===Zg&&(f.mapping=Co),f}function i(f){if(f&&f.isTexture&&f.isRenderTargetTexture===!1){const o=f.mapping;if(o===qg||o===Zg)if(e.has(f)){const a=e.get(f).texture;return t(a,f.mapping)}else{const a=f.image;if(a&&a.height>0){const c=new UH(a.height/2);return c.fromEquirectangularTexture(n,f),e.set(f,c),f.addEventListener("dispose",r),t(c.texture,f.mapping)}else return null}}return f}function r(f){const o=f.target;o.removeEventListener("dispose",r);const a=e.get(o);a!==void 0&&(e.delete(o),a.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class r0 extends VT{constructor(e=-1,t=1,i=1,r=-1,s=.1,f=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=f,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,f){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,f=i+e,o=r+t,a=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,f=s+c*this.view.width,o-=d*this.view.offsetY,a=o-d*this.view.height}this.projectionMatrix.makeOrthographic(s,f,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Za=4,sx=[.125,.215,.35,.446,.526,.582],_s=20,bp=new r0,ax=new He;let wp=null;const gs=(1+Math.sqrt(5))/2,_a=1/gs,ox=[new Q(1,1,1),new Q(-1,1,1),new Q(1,1,-1),new Q(-1,1,-1),new Q(0,gs,_a),new Q(0,gs,-_a),new Q(_a,0,gs),new Q(-_a,0,gs),new Q(gs,_a,0),new Q(-gs,_a,0)];class lx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){wp=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hx(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ux(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wp),e.scissorTest=!1,Vu(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===So||e.mapping===Co?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wp=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Sn,minFilter:Sn,generateMipmaps:!1,type:xc,format:si,encoding:zs,depthBuffer:!1},r=cx(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=cx(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=OW(s)),this._blurMaterial=PW(s,e,t)}return r}_compileMaterial(e){const t=new Tn(this._lodPlanes[0],e);this._renderer.compile(t,bp)}_sceneToCubeUV(e,t,i,r){const o=new gn(90,1,t,i),a=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,l=d.autoClear,u=d.toneMapping;d.getClearColor(ax),d.toneMapping=ur,d.autoClear=!1;const h=new Cs({name:"PMREM.Background",side:ci,depthWrite:!1,depthTest:!1}),g=new Tn(new qc,h);let m=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,m=!0):(h.color.copy(ax),m=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(o.up.set(0,a[v],0),o.lookAt(c[v],0,0)):y===1?(o.up.set(0,0,a[v]),o.lookAt(0,c[v],0)):(o.up.set(0,a[v],0),o.lookAt(0,0,c[v]));const _=this._cubeSize;Vu(r,y*_,v>2?_:0,_,_),d.setRenderTarget(r),m&&d.render(g,o),d.render(e,o)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=u,d.autoClear=l,e.background=p}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===So||e.mapping===Co;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=hx()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ux());const s=r?this._cubemapMaterial:this._equirectMaterial,f=new Tn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const a=this._cubeSize;Vu(t,0,0,3*a,2*a),i.setRenderTarget(t),i.render(f,bp)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),f=ox[(r-1)%ox.length];this._blur(e,r-1,r,s,f)}t.autoClear=i}_blur(e,t,i,r,s){const f=this._pingPongRenderTarget;this._halfBlur(e,f,t,i,r,"latitudinal",s),this._halfBlur(f,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,f,o){const a=this._renderer,c=this._blurMaterial;f!=="latitudinal"&&f!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,l=new Tn(this._lodPlanes[r],c),u=c.uniforms,h=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*_s-1),m=s/g,p=isFinite(s)?1+Math.floor(d*m):_s;p>_s&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${_s}`);const v=[];let y=0;for(let T=0;T<_s;++T){const S=T/m,O=Math.exp(-S*S/2);v.push(O),T===0?y+=O:T<p&&(y+=2*O)}for(let T=0;T<v.length;T++)v[T]=v[T]/y;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=v,u.latitudinal.value=f==="latitudinal",o&&(u.poleAxis.value=o);const{_lodMax:_}=this;u.dTheta.value=g,u.mipInt.value=_-i;const x=this._sizeLods[r],b=3*x*(r>_-Za?r-_+Za:0),w=4*(this._cubeSize-x);Vu(t,b,w,3*x,2*x),a.setRenderTarget(t),a.render(l,bp)}}function OW(n){const e=[],t=[],i=[];let r=n;const s=n-Za+1+sx.length;for(let f=0;f<s;f++){const o=Math.pow(2,r);t.push(o);let a=1/o;f>n-Za?a=sx[f-n+Za-1]:f===0&&(a=0),i.push(a);const c=1/(o-2),d=-c,l=1+c,u=[d,d,l,d,l,l,d,d,l,l,d,l],h=6,g=6,m=3,p=2,v=1,y=new Float32Array(m*g*h),_=new Float32Array(p*g*h),x=new Float32Array(v*g*h);for(let w=0;w<h;w++){const T=w%3*2/3-1,S=w>2?0:-1,O=[T,S,0,T+2/3,S,0,T+2/3,S+1,0,T,S,0,T+2/3,S+1,0,T,S+1,0];y.set(O,m*g*w),_.set(u,p*g*w);const N=[w,w,w,w,w,w];x.set(N,v*g*w)}const b=new Xn;b.setAttribute("position",new Jt(y,m)),b.setAttribute("uv",new Jt(_,p)),b.setAttribute("faceIndex",new Jt(x,v)),e.push(b),r>Za&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function cx(n,e,t){const i=new js(n,e,t);return i.texture.mapping=Xf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vu(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function PW(n,e,t){const i=new Float32Array(_s),r=new Q(0,1,0);return new Us({name:"SphericalGaussianBlur",defines:{n:_s,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:s0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function ux(){return new Us({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:s0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function hx(){return new Us({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:s0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function s0(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function LW(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const a=o.mapping,c=a===qg||a===Zg,d=a===So||a===Co;if(c||d)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let l=e.get(o);return t===null&&(t=new lx(n)),l=c?t.fromEquirectangular(o,l):t.fromCubemap(o,l),e.set(o,l),l.texture}else{if(e.has(o))return e.get(o).texture;{const l=o.image;if(c&&l&&l.height>0||d&&l&&r(l)){t===null&&(t=new lx(n));const u=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,u),o.addEventListener("dispose",s),u.texture}else return null}}}return o}function r(o){let a=0;const c=6;for(let d=0;d<c;d++)o[d]!==void 0&&a++;return a===c}function s(o){const a=o.target;a.removeEventListener("dispose",s);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function f(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:f}}function RW(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function DW(n,e,t,i){const r={},s=new WeakMap;function f(l){const u=l.target;u.index!==null&&e.remove(u.index);for(const g in u.attributes)e.remove(u.attributes[g]);u.removeEventListener("dispose",f),delete r[u.id];const h=s.get(u);h&&(e.remove(h),s.delete(u)),i.releaseStatesOfGeometry(u),u.isInstancedBufferGeometry===!0&&delete u._maxInstanceCount,t.memory.geometries--}function o(l,u){return r[u.id]===!0||(u.addEventListener("dispose",f),r[u.id]=!0,t.memory.geometries++),u}function a(l){const u=l.attributes;for(const g in u)e.update(u[g],34962);const h=l.morphAttributes;for(const g in h){const m=h[g];for(let p=0,v=m.length;p<v;p++)e.update(m[p],34962)}}function c(l){const u=[],h=l.index,g=l.attributes.position;let m=0;if(h!==null){const y=h.array;m=h.version;for(let _=0,x=y.length;_<x;_+=3){const b=y[_+0],w=y[_+1],T=y[_+2];u.push(b,w,w,T,T,b)}}else{const y=g.array;m=g.version;for(let _=0,x=y.length/3-1;_<x;_+=3){const b=_+0,w=_+1,T=_+2;u.push(b,w,w,T,T,b)}}const p=new(kT(u)?$T:UT)(u,1);p.version=m;const v=s.get(l);v&&e.remove(v),s.set(l,p)}function d(l){const u=s.get(l);if(u){const h=l.index;h!==null&&u.version<h.version&&c(l)}else c(l);return s.get(l)}return{get:o,update:a,getWireframeAttribute:d}}function IW(n,e,t,i){const r=i.isWebGL2;let s;function f(u){s=u}let o,a;function c(u){o=u.type,a=u.bytesPerElement}function d(u,h){n.drawElements(s,h,o,u*a),t.update(h,s,1)}function l(u,h,g){if(g===0)return;let m,p;if(r)m=n,p="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[p](s,h,o,u*a,g),t.update(h,s,g)}this.setMode=f,this.setIndex=c,this.render=d,this.renderInstances=l}function kW(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,f,o){switch(t.calls++,f){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",f);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function FW(n,e){return n[0]-e[0]}function NW(n,e){return Math.abs(e[1])-Math.abs(n[1])}function BW(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,f=new mt,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function a(c,d,l,u){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,p=m!==void 0?m.length:0;let v=s.get(d);if(v===void 0||v.count!==p){let ne=function(){z.dispose(),s.delete(d),d.removeEventListener("dispose",ne)};var g=ne;v!==void 0&&v.texture.dispose();const x=d.morphAttributes.position!==void 0,b=d.morphAttributes.normal!==void 0,w=d.morphAttributes.color!==void 0,T=d.morphAttributes.position||[],S=d.morphAttributes.normal||[],O=d.morphAttributes.color||[];let N=0;x===!0&&(N=1),b===!0&&(N=2),w===!0&&(N=3);let V=d.attributes.position.count*N,Z=1;V>e.maxTextureSize&&(Z=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);const j=new Float32Array(V*Z*4*p),z=new zT(j,V,Z,p);z.type=Dr,z.needsUpdate=!0;const G=N*4;for(let re=0;re<p;re++){const U=T[re],M=S[re],D=O[re],P=V*Z*4*re;for(let L=0;L<U.count;L++){const H=L*G;x===!0&&(f.fromBufferAttribute(U,L),j[P+H+0]=f.x,j[P+H+1]=f.y,j[P+H+2]=f.z,j[P+H+3]=0),b===!0&&(f.fromBufferAttribute(M,L),j[P+H+4]=f.x,j[P+H+5]=f.y,j[P+H+6]=f.z,j[P+H+7]=0),w===!0&&(f.fromBufferAttribute(D,L),j[P+H+8]=f.x,j[P+H+9]=f.y,j[P+H+10]=f.z,j[P+H+11]=D.itemSize===4?f.w:1)}}v={count:p,texture:z,size:new Ue(V,Z)},s.set(d,v),d.addEventListener("dispose",ne)}let y=0;for(let x=0;x<h.length;x++)y+=h[x];const _=d.morphTargetsRelative?1:1-y;u.getUniforms().setValue(n,"morphTargetBaseInfluence",_),u.getUniforms().setValue(n,"morphTargetInfluences",h),u.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),u.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const m=h===void 0?0:h.length;let p=i[d.id];if(p===void 0||p.length!==m){p=[];for(let b=0;b<m;b++)p[b]=[b,0];i[d.id]=p}for(let b=0;b<m;b++){const w=p[b];w[0]=b,w[1]=h[b]}p.sort(NW);for(let b=0;b<8;b++)b<m&&p[b][1]?(o[b][0]=p[b][0],o[b][1]=p[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(FW);const v=d.morphAttributes.position,y=d.morphAttributes.normal;let _=0;for(let b=0;b<8;b++){const w=o[b],T=w[0],S=w[1];T!==Number.MAX_SAFE_INTEGER&&S?(v&&d.getAttribute("morphTarget"+b)!==v[T]&&d.setAttribute("morphTarget"+b,v[T]),y&&d.getAttribute("morphNormal"+b)!==y[T]&&d.setAttribute("morphNormal"+b,y[T]),r[b]=S,_+=S):(v&&d.hasAttribute("morphTarget"+b)===!0&&d.deleteAttribute("morphTarget"+b),y&&d.hasAttribute("morphNormal"+b)===!0&&d.deleteAttribute("morphNormal"+b),r[b]=0)}const x=d.morphTargetsRelative?1:1-_;u.getUniforms().setValue(n,"morphTargetBaseInfluence",x),u.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:a}}function zW(n,e,t,i){let r=new WeakMap;function s(a){const c=i.render.frame,d=a.geometry,l=e.get(a,d);return r.get(l)!==c&&(e.update(l),r.set(l,c)),a.isInstancedMesh&&(a.hasEventListener("dispose",o)===!1&&a.addEventListener("dispose",o),t.update(a.instanceMatrix,34962),a.instanceColor!==null&&t.update(a.instanceColor,34962)),l}function f(){r=new WeakMap}function o(a){const c=a.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:f}}const XT=new Yt,YT=new zT,KT=new TH,qT=new GT,fx=[],dx=[],px=new Float32Array(16),gx=new Float32Array(9),mx=new Float32Array(4);function Wo(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=fx[r];if(s===void 0&&(s=new Float32Array(r),fx[r]=s),e!==0){i.toArray(s,0);for(let f=1,o=0;f!==e;++f)o+=t,n[f].toArray(s,o)}return s}function Ut(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function $t(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Yf(n,e){let t=dx[e];t===void 0&&(t=new Int32Array(e),dx[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function jW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function UW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ut(t,e))return;n.uniform2fv(this.addr,e),$t(t,e)}}function $W(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ut(t,e))return;n.uniform3fv(this.addr,e),$t(t,e)}}function HW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ut(t,e))return;n.uniform4fv(this.addr,e),$t(t,e)}}function VW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ut(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),$t(t,e)}else{if(Ut(t,i))return;mx.set(i),n.uniformMatrix2fv(this.addr,!1,mx),$t(t,i)}}function GW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ut(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),$t(t,e)}else{if(Ut(t,i))return;gx.set(i),n.uniformMatrix3fv(this.addr,!1,gx),$t(t,i)}}function WW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ut(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),$t(t,e)}else{if(Ut(t,i))return;px.set(i),n.uniformMatrix4fv(this.addr,!1,px),$t(t,i)}}function XW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function YW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ut(t,e))return;n.uniform2iv(this.addr,e),$t(t,e)}}function KW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ut(t,e))return;n.uniform3iv(this.addr,e),$t(t,e)}}function qW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ut(t,e))return;n.uniform4iv(this.addr,e),$t(t,e)}}function ZW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function JW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ut(t,e))return;n.uniform2uiv(this.addr,e),$t(t,e)}}function QW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ut(t,e))return;n.uniform3uiv(this.addr,e),$t(t,e)}}function eX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ut(t,e))return;n.uniform4uiv(this.addr,e),$t(t,e)}}function tX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||XT,r)}function nX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||KT,r)}function iX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||qT,r)}function rX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||YT,r)}function sX(n){switch(n){case 5126:return jW;case 35664:return UW;case 35665:return $W;case 35666:return HW;case 35674:return VW;case 35675:return GW;case 35676:return WW;case 5124:case 35670:return XW;case 35667:case 35671:return YW;case 35668:case 35672:return KW;case 35669:case 35673:return qW;case 5125:return ZW;case 36294:return JW;case 36295:return QW;case 36296:return eX;case 35678:case 36198:case 36298:case 36306:case 35682:return tX;case 35679:case 36299:case 36307:return nX;case 35680:case 36300:case 36308:case 36293:return iX;case 36289:case 36303:case 36311:case 36292:return rX}}function aX(n,e){n.uniform1fv(this.addr,e)}function oX(n,e){const t=Wo(e,this.size,2);n.uniform2fv(this.addr,t)}function lX(n,e){const t=Wo(e,this.size,3);n.uniform3fv(this.addr,t)}function cX(n,e){const t=Wo(e,this.size,4);n.uniform4fv(this.addr,t)}function uX(n,e){const t=Wo(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function hX(n,e){const t=Wo(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function fX(n,e){const t=Wo(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function dX(n,e){n.uniform1iv(this.addr,e)}function pX(n,e){n.uniform2iv(this.addr,e)}function gX(n,e){n.uniform3iv(this.addr,e)}function mX(n,e){n.uniform4iv(this.addr,e)}function vX(n,e){n.uniform1uiv(this.addr,e)}function yX(n,e){n.uniform2uiv(this.addr,e)}function _X(n,e){n.uniform3uiv(this.addr,e)}function xX(n,e){n.uniform4uiv(this.addr,e)}function bX(n,e,t){const i=this.cache,r=e.length,s=Yf(t,r);Ut(i,s)||(n.uniform1iv(this.addr,s),$t(i,s));for(let f=0;f!==r;++f)t.setTexture2D(e[f]||XT,s[f])}function wX(n,e,t){const i=this.cache,r=e.length,s=Yf(t,r);Ut(i,s)||(n.uniform1iv(this.addr,s),$t(i,s));for(let f=0;f!==r;++f)t.setTexture3D(e[f]||KT,s[f])}function SX(n,e,t){const i=this.cache,r=e.length,s=Yf(t,r);Ut(i,s)||(n.uniform1iv(this.addr,s),$t(i,s));for(let f=0;f!==r;++f)t.setTextureCube(e[f]||qT,s[f])}function CX(n,e,t){const i=this.cache,r=e.length,s=Yf(t,r);Ut(i,s)||(n.uniform1iv(this.addr,s),$t(i,s));for(let f=0;f!==r;++f)t.setTexture2DArray(e[f]||YT,s[f])}function TX(n){switch(n){case 5126:return aX;case 35664:return oX;case 35665:return lX;case 35666:return cX;case 35674:return uX;case 35675:return hX;case 35676:return fX;case 5124:case 35670:return dX;case 35667:case 35671:return pX;case 35668:case 35672:return gX;case 35669:case 35673:return mX;case 5125:return vX;case 36294:return yX;case 36295:return _X;case 36296:return xX;case 35678:case 36198:case 36298:case 36306:case 35682:return bX;case 35679:case 36299:case 36307:return wX;case 35680:case 36300:case 36308:case 36293:return SX;case 36289:case 36303:case 36311:case 36292:return CX}}class EX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=sX(t.type)}}class MX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=TX(t.type)}}class AX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,f=r.length;s!==f;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const Sp=/(\w+)(\])?(\[|\.)?/g;function vx(n,e){n.seq.push(e),n.map[e.id]=e}function OX(n,e,t){const i=n.name,r=i.length;for(Sp.lastIndex=0;;){const s=Sp.exec(i),f=Sp.lastIndex;let o=s[1];const a=s[2]==="]",c=s[3];if(a&&(o=o|0),c===void 0||c==="["&&f+2===r){vx(t,c===void 0?new EX(o,n,e):new MX(o,n,e));break}else{let l=t.map[o];l===void 0&&(l=new AX(o),vx(t,l)),t=l}}}class _h{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),f=e.getUniformLocation(t,s.name);OX(s,f,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,f=t.length;s!==f;++s){const o=t[s],a=i[o.id];a.needsUpdate!==!1&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const f=e[r];f.id in t&&i.push(f)}return i}}function yx(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let PX=0;function LX(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let f=r;f<s;f++){const o=f+1;i.push(`${o===e?">":" "} ${o}: ${t[f]}`)}return i.join(`
`)}function RX(n){switch(n){case zs:return["Linear","( value )"];case ht:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function _x(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const f=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+LX(n.getShaderSource(e),f)}else return r}function DX(n,e){const t=RX(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function IX(n,e){let t;switch(e){case B$:t="Linear";break;case z$:t="Reinhard";break;case j$:t="OptimizedCineon";break;case U$:t="ACESFilmic";break;case $$:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function kX(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Il).join(`
`)}function FX(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function NX(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),f=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[f]={type:s.type,location:n.getAttribLocation(e,f),locationSize:o}}return t}function Il(n){return n!==""}function xx(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bx(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const BX=/^[ \t]*#include +<([\w\d./]+)>/gm;function nm(n){return n.replace(BX,zX)}function zX(n,e){const t=Ge[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return nm(t)}const jX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wx(n){return n.replace(jX,UX)}function UX(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Sx(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $X(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===MT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===m$?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Dl&&(e="SHADOWMAP_TYPE_VSM"),e}function HX(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case So:case Co:e="ENVMAP_TYPE_CUBE";break;case Xf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function VX(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Co:e="ENVMAP_MODE_REFRACTION";break}return e}function GX(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Jv:e="ENVMAP_BLENDING_MULTIPLY";break;case F$:e="ENVMAP_BLENDING_MIX";break;case N$:e="ENVMAP_BLENDING_ADD";break}return e}function WX(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function XX(n,e,t,i){const r=n.getContext(),s=t.defines;let f=t.vertexShader,o=t.fragmentShader;const a=$X(t),c=HX(t),d=VX(t),l=GX(t),u=WX(t),h=t.isWebGL2?"":kX(t),g=FX(s),m=r.createProgram();let p,v,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(p=[g].filter(Il).join(`
`),p.length>0&&(p+=`
`),v=[h,g].filter(Il).join(`
`),v.length>0&&(v+=`
`)):(p=[Sx(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+a:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Il).join(`
`),v=[h,Sx(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+l:"",u?"#define CUBEUV_TEXEL_WIDTH "+u.texelWidth:"",u?"#define CUBEUV_TEXEL_HEIGHT "+u.texelHeight:"",u?"#define CUBEUV_MAX_MIP "+u.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+a:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ur?"#define TONE_MAPPING":"",t.toneMapping!==ur?Ge.tonemapping_pars_fragment:"",t.toneMapping!==ur?IX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ge.encodings_pars_fragment,DX("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Il).join(`
`)),f=nm(f),f=xx(f,t),f=bx(f,t),o=nm(o),o=xx(o,t),o=bx(o,t),f=wx(f),o=wx(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,p=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,v=["#define varying in",t.glslVersion===X1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===X1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const _=y+p+f,x=y+v+o,b=yx(r,35633,_),w=yx(r,35632,x);if(r.attachShader(m,b),r.attachShader(m,w),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const O=r.getProgramInfoLog(m).trim(),N=r.getShaderInfoLog(b).trim(),V=r.getShaderInfoLog(w).trim();let Z=!0,j=!0;if(r.getProgramParameter(m,35714)===!1){Z=!1;const z=_x(r,b,"vertex"),G=_x(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+O+`
`+z+`
`+G)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(N===""||V==="")&&(j=!1);j&&(this.diagnostics={runnable:Z,programLog:O,vertexShader:{log:N,prefix:p},fragmentShader:{log:V,prefix:v}})}r.deleteShader(b),r.deleteShader(w);let T;this.getUniforms=function(){return T===void 0&&(T=new _h(r,m)),T};let S;return this.getAttributes=function(){return S===void 0&&(S=NX(r,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=PX++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=w,this}let YX=0;class KX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),f=this._getShaderCacheForMaterial(e);return f.has(r)===!1&&(f.add(r),r.usedTimes++),f.has(s)===!1&&(f.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new qX(e),t.set(e,i)),i}}class qX{constructor(e){this.id=YX++,this.code=e,this.usedTimes=0}}function ZX(n,e,t,i,r,s,f){const o=new jT,a=new KX,c=[],d=r.isWebGL2,l=r.logarithmicDepthBuffer,u=r.vertexTextures;let h=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(S,O,N,V,Z){const j=V.fog,z=Z.geometry,G=S.isMeshStandardMaterial?V.environment:null,ne=(S.isMeshStandardMaterial?t:e).get(S.envMap||G),re=ne&&ne.mapping===Xf?ne.image.height:null,U=g[S.type];S.precision!==null&&(h=r.getMaxPrecision(S.precision),h!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",h,"instead."));const M=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,D=M!==void 0?M.length:0;let P=0;z.morphAttributes.position!==void 0&&(P=1),z.morphAttributes.normal!==void 0&&(P=2),z.morphAttributes.color!==void 0&&(P=3);let L,H,k,A;if(U){const he=Ni[U];L=he.vertexShader,H=he.fragmentShader}else L=S.vertexShader,H=S.fragmentShader,a.update(S),k=a.getVertexShaderID(S),A=a.getFragmentShaderID(S);const F=n.getRenderTarget(),W=S.alphaTest>0,Y=S.clearcoat>0,X=S.iridescence>0;return{isWebGL2:d,shaderID:U,shaderName:S.type,vertexShader:L,fragmentShader:H,defines:S.defines,customVertexShaderID:k,customFragmentShaderID:A,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:h,instancing:Z.isInstancedMesh===!0,instancingColor:Z.isInstancedMesh===!0&&Z.instanceColor!==null,supportsVertexTextures:u,outputEncoding:F===null?n.outputEncoding:F.isXRRenderTarget===!0?F.texture.encoding:zs,map:!!S.map,matcap:!!S.matcap,envMap:!!ne,envMapMode:ne&&ne.mapping,envMapCubeUVHeight:re,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===lH,tangentSpaceNormalMap:S.normalMapType===Qv,decodeVideoTexture:!!S.map&&S.map.isVideoTexture===!0&&S.map.encoding===ht,clearcoat:Y,clearcoatMap:Y&&!!S.clearcoatMap,clearcoatRoughnessMap:Y&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:Y&&!!S.clearcoatNormalMap,iridescence:X,iridescenceMap:X&&!!S.iridescenceMap,iridescenceThicknessMap:X&&!!S.iridescenceThicknessMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:S.transparent===!1&&S.blending===oo,alphaMap:!!S.alphaMap,alphaTest:W,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!z.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.iridescenceMap||S.iridescenceThicknessMap||S.transmission>0||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||S.sheen>0||S.sheenColorMap||S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!j,useFog:S.fog===!0,fogExp2:j&&j.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:l,skinning:Z.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:D,morphTextureStride:P,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:S.toneMapped?n.toneMapping:ur,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Wf,flipSided:S.side===ci,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function p(S){const O=[];if(S.shaderID?O.push(S.shaderID):(O.push(S.customVertexShaderID),O.push(S.customFragmentShaderID)),S.defines!==void 0)for(const N in S.defines)O.push(N),O.push(S.defines[N]);return S.isRawShaderMaterial===!1&&(v(O,S),y(O,S),O.push(n.outputEncoding)),O.push(S.customProgramCacheKey),O.join()}function v(S,O){S.push(O.precision),S.push(O.outputEncoding),S.push(O.envMapMode),S.push(O.envMapCubeUVHeight),S.push(O.combine),S.push(O.vertexUvs),S.push(O.fogExp2),S.push(O.sizeAttenuation),S.push(O.morphTargetsCount),S.push(O.morphAttributeCount),S.push(O.numDirLights),S.push(O.numPointLights),S.push(O.numSpotLights),S.push(O.numSpotLightMaps),S.push(O.numHemiLights),S.push(O.numRectAreaLights),S.push(O.numDirLightShadows),S.push(O.numPointLightShadows),S.push(O.numSpotLightShadows),S.push(O.numSpotLightShadowsWithMaps),S.push(O.shadowMapType),S.push(O.toneMapping),S.push(O.numClippingPlanes),S.push(O.numClipIntersection),S.push(O.depthPacking)}function y(S,O){o.disableAll(),O.isWebGL2&&o.enable(0),O.supportsVertexTextures&&o.enable(1),O.instancing&&o.enable(2),O.instancingColor&&o.enable(3),O.map&&o.enable(4),O.matcap&&o.enable(5),O.envMap&&o.enable(6),O.lightMap&&o.enable(7),O.aoMap&&o.enable(8),O.emissiveMap&&o.enable(9),O.bumpMap&&o.enable(10),O.normalMap&&o.enable(11),O.objectSpaceNormalMap&&o.enable(12),O.tangentSpaceNormalMap&&o.enable(13),O.clearcoat&&o.enable(14),O.clearcoatMap&&o.enable(15),O.clearcoatRoughnessMap&&o.enable(16),O.clearcoatNormalMap&&o.enable(17),O.iridescence&&o.enable(18),O.iridescenceMap&&o.enable(19),O.iridescenceThicknessMap&&o.enable(20),O.displacementMap&&o.enable(21),O.specularMap&&o.enable(22),O.roughnessMap&&o.enable(23),O.metalnessMap&&o.enable(24),O.gradientMap&&o.enable(25),O.alphaMap&&o.enable(26),O.alphaTest&&o.enable(27),O.vertexColors&&o.enable(28),O.vertexAlphas&&o.enable(29),O.vertexUvs&&o.enable(30),O.vertexTangents&&o.enable(31),O.uvsVertexOnly&&o.enable(32),S.push(o.mask),o.disableAll(),O.fog&&o.enable(0),O.useFog&&o.enable(1),O.flatShading&&o.enable(2),O.logarithmicDepthBuffer&&o.enable(3),O.skinning&&o.enable(4),O.morphTargets&&o.enable(5),O.morphNormals&&o.enable(6),O.morphColors&&o.enable(7),O.premultipliedAlpha&&o.enable(8),O.shadowMapEnabled&&o.enable(9),O.physicallyCorrectLights&&o.enable(10),O.doubleSided&&o.enable(11),O.flipSided&&o.enable(12),O.useDepthPacking&&o.enable(13),O.dithering&&o.enable(14),O.specularIntensityMap&&o.enable(15),O.specularColorMap&&o.enable(16),O.transmission&&o.enable(17),O.transmissionMap&&o.enable(18),O.thicknessMap&&o.enable(19),O.sheen&&o.enable(20),O.sheenColorMap&&o.enable(21),O.sheenRoughnessMap&&o.enable(22),O.decodeVideoTexture&&o.enable(23),O.opaque&&o.enable(24),S.push(o.mask)}function _(S){const O=g[S.type];let N;if(O){const V=Ni[O];N=NH.clone(V.uniforms)}else N=S.uniforms;return N}function x(S,O){let N;for(let V=0,Z=c.length;V<Z;V++){const j=c[V];if(j.cacheKey===O){N=j,++N.usedTimes;break}}return N===void 0&&(N=new XX(n,O,S,s),c.push(N)),N}function b(S){if(--S.usedTimes===0){const O=c.indexOf(S);c[O]=c[c.length-1],c.pop(),S.destroy()}}function w(S){a.remove(S)}function T(){a.dispose()}return{getParameters:m,getProgramCacheKey:p,getUniforms:_,acquireProgram:x,releaseProgram:b,releaseShaderCache:w,programs:c,dispose:T}}function JX(){let n=new WeakMap;function e(s){let f=n.get(s);return f===void 0&&(f={},n.set(s,f)),f}function t(s){n.delete(s)}function i(s,f,o){n.get(s)[f]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function QX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Cx(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Tx(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function f(l,u,h,g,m,p){let v=n[e];return v===void 0?(v={id:l.id,object:l,geometry:u,material:h,groupOrder:g,renderOrder:l.renderOrder,z:m,group:p},n[e]=v):(v.id=l.id,v.object=l,v.geometry=u,v.material=h,v.groupOrder=g,v.renderOrder=l.renderOrder,v.z=m,v.group=p),e++,v}function o(l,u,h,g,m,p){const v=f(l,u,h,g,m,p);h.transmission>0?i.push(v):h.transparent===!0?r.push(v):t.push(v)}function a(l,u,h,g,m,p){const v=f(l,u,h,g,m,p);h.transmission>0?i.unshift(v):h.transparent===!0?r.unshift(v):t.unshift(v)}function c(l,u){t.length>1&&t.sort(l||QX),i.length>1&&i.sort(u||Cx),r.length>1&&r.sort(u||Cx)}function d(){for(let l=e,u=n.length;l<u;l++){const h=n[l];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:a,finish:d,sort:c}}function eY(){let n=new WeakMap;function e(i,r){const s=n.get(i);let f;return s===void 0?(f=new Tx,n.set(i,[f])):r>=s.length?(f=new Tx,s.push(f)):f=s[r],f}function t(){n=new WeakMap}return{get:e,dispose:t}}function tY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new He};break;case"SpotLight":t={position:new Q,direction:new Q,color:new He,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new He,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new He,groundColor:new He};break;case"RectAreaLight":t={color:new He,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return n[e.id]=t,t}}}function nY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let iY=0;function rY(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function sY(n,e){const t=new tY,i=nY(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new Q);const s=new Q,f=new Ze,o=new Ze;function a(d,l){let u=0,h=0,g=0;for(let V=0;V<9;V++)r.probe[V].set(0,0,0);let m=0,p=0,v=0,y=0,_=0,x=0,b=0,w=0,T=0,S=0;d.sort(rY);const O=l!==!0?Math.PI:1;for(let V=0,Z=d.length;V<Z;V++){const j=d[V],z=j.color,G=j.intensity,ne=j.distance,re=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)u+=z.r*G*O,h+=z.g*G*O,g+=z.b*G*O;else if(j.isLightProbe)for(let U=0;U<9;U++)r.probe[U].addScaledVector(j.sh.coefficients[U],G);else if(j.isDirectionalLight){const U=t.get(j);if(U.color.copy(j.color).multiplyScalar(j.intensity*O),j.castShadow){const M=j.shadow,D=i.get(j);D.shadowBias=M.bias,D.shadowNormalBias=M.normalBias,D.shadowRadius=M.radius,D.shadowMapSize=M.mapSize,r.directionalShadow[m]=D,r.directionalShadowMap[m]=re,r.directionalShadowMatrix[m]=j.shadow.matrix,x++}r.directional[m]=U,m++}else if(j.isSpotLight){const U=t.get(j);U.position.setFromMatrixPosition(j.matrixWorld),U.color.copy(z).multiplyScalar(G*O),U.distance=ne,U.coneCos=Math.cos(j.angle),U.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),U.decay=j.decay,r.spot[v]=U;const M=j.shadow;if(j.map&&(r.spotLightMap[T]=j.map,T++,M.updateMatrices(j),j.castShadow&&S++),r.spotLightMatrix[v]=M.matrix,j.castShadow){const D=i.get(j);D.shadowBias=M.bias,D.shadowNormalBias=M.normalBias,D.shadowRadius=M.radius,D.shadowMapSize=M.mapSize,r.spotShadow[v]=D,r.spotShadowMap[v]=re,w++}v++}else if(j.isRectAreaLight){const U=t.get(j);U.color.copy(z).multiplyScalar(G),U.halfWidth.set(j.width*.5,0,0),U.halfHeight.set(0,j.height*.5,0),r.rectArea[y]=U,y++}else if(j.isPointLight){const U=t.get(j);if(U.color.copy(j.color).multiplyScalar(j.intensity*O),U.distance=j.distance,U.decay=j.decay,j.castShadow){const M=j.shadow,D=i.get(j);D.shadowBias=M.bias,D.shadowNormalBias=M.normalBias,D.shadowRadius=M.radius,D.shadowMapSize=M.mapSize,D.shadowCameraNear=M.camera.near,D.shadowCameraFar=M.camera.far,r.pointShadow[p]=D,r.pointShadowMap[p]=re,r.pointShadowMatrix[p]=j.shadow.matrix,b++}r.point[p]=U,p++}else if(j.isHemisphereLight){const U=t.get(j);U.skyColor.copy(j.color).multiplyScalar(G*O),U.groundColor.copy(j.groundColor).multiplyScalar(G*O),r.hemi[_]=U,_++}}y>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ee.LTC_FLOAT_1,r.rectAreaLTC2=Ee.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ee.LTC_HALF_1,r.rectAreaLTC2=Ee.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=g;const N=r.hash;(N.directionalLength!==m||N.pointLength!==p||N.spotLength!==v||N.rectAreaLength!==y||N.hemiLength!==_||N.numDirectionalShadows!==x||N.numPointShadows!==b||N.numSpotShadows!==w||N.numSpotMaps!==T)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=y,r.point.length=p,r.hemi.length=_,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=w+T-S,r.spotLightMap.length=T,r.numSpotLightShadowsWithMaps=S,N.directionalLength=m,N.pointLength=p,N.spotLength=v,N.rectAreaLength=y,N.hemiLength=_,N.numDirectionalShadows=x,N.numPointShadows=b,N.numSpotShadows=w,N.numSpotMaps=T,r.version=iY++)}function c(d,l){let u=0,h=0,g=0,m=0,p=0;const v=l.matrixWorldInverse;for(let y=0,_=d.length;y<_;y++){const x=d[y];if(x.isDirectionalLight){const b=r.directional[u];b.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),u++}else if(x.isSpotLight){const b=r.spot[g];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),g++}else if(x.isRectAreaLight){const b=r.rectArea[m];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),o.identity(),f.copy(x.matrixWorld),f.premultiply(v),o.extractRotation(f),b.halfWidth.set(x.width*.5,0,0),b.halfHeight.set(0,x.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),m++}else if(x.isPointLight){const b=r.point[h];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),h++}else if(x.isHemisphereLight){const b=r.hemi[p];b.direction.setFromMatrixPosition(x.matrixWorld),b.direction.transformDirection(v),p++}}}return{setup:a,setupView:c,state:r}}function Ex(n,e){const t=new sY(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function f(l){i.push(l)}function o(l){r.push(l)}function a(l){t.setup(i,l)}function c(l){t.setupView(i,l)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:a,setupLightsView:c,pushLight:f,pushShadow:o}}function aY(n,e){let t=new WeakMap;function i(s,f=0){const o=t.get(s);let a;return o===void 0?(a=new Ex(n,e),t.set(s,[a])):f>=o.length?(a=new Ex(n,e),o.push(a)):a=o[f],a}function r(){t=new WeakMap}return{get:i,dispose:r}}class oY extends Gn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class lY extends Gn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const cY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uY=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hY(n,e,t){let i=new n0;const r=new Ue,s=new Ue,f=new mt,o=new oY({depthPacking:oH}),a=new lY,c={},d=t.maxTextureSize,l={0:ci,1:Yr,2:Wf},u=new Us({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:cY,fragmentShader:uY}),h=u.clone();h.defines.HORIZONTAL_PASS=1;const g=new Xn;g.setAttribute("position",new Jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Tn(g,u),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=MT,this.render=function(x,b,w){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||x.length===0)return;const T=n.getRenderTarget(),S=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),N=n.state;N.setBlending(Hr),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let V=0,Z=x.length;V<Z;V++){const j=x[V],z=j.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;r.copy(z.mapSize);const G=z.getFrameExtents();if(r.multiply(G),s.copy(z.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/G.x),r.x=s.x*G.x,z.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/G.y),r.y=s.y*G.y,z.mapSize.y=s.y)),z.map===null){const re=this.type!==Dl?{minFilter:Wt,magFilter:Wt}:{};z.map=new js(r.x,r.y,re),z.map.texture.name=j.name+".shadowMap",z.camera.updateProjectionMatrix()}n.setRenderTarget(z.map),n.clear();const ne=z.getViewportCount();for(let re=0;re<ne;re++){const U=z.getViewport(re);f.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),N.viewport(f),z.updateMatrices(j,re),i=z.getFrustum(),_(b,w,z.camera,j,this.type)}z.isPointLightShadow!==!0&&this.type===Dl&&v(z,w),z.needsUpdate=!1}p.needsUpdate=!1,n.setRenderTarget(T,S,O)};function v(x,b){const w=e.update(m);u.defines.VSM_SAMPLES!==x.blurSamples&&(u.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,u.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new js(r.x,r.y)),u.uniforms.shadow_pass.value=x.map.texture,u.uniforms.resolution.value=x.mapSize,u.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(b,null,w,u,m,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(b,null,w,h,m,null)}function y(x,b,w,T,S,O){let N=null;const V=w.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(V!==void 0)N=V;else if(N=w.isPointLight===!0?a:o,n.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const Z=N.uuid,j=b.uuid;let z=c[Z];z===void 0&&(z={},c[Z]=z);let G=z[j];G===void 0&&(G=N.clone(),z[j]=G),N=G}return N.visible=b.visible,N.wireframe=b.wireframe,O===Dl?N.side=b.shadowSide!==null?b.shadowSide:b.side:N.side=b.shadowSide!==null?b.shadowSide:l[b.side],N.alphaMap=b.alphaMap,N.alphaTest=b.alphaTest,N.map=b.map,N.clipShadows=b.clipShadows,N.clippingPlanes=b.clippingPlanes,N.clipIntersection=b.clipIntersection,N.displacementMap=b.displacementMap,N.displacementScale=b.displacementScale,N.displacementBias=b.displacementBias,N.wireframeLinewidth=b.wireframeLinewidth,N.linewidth=b.linewidth,w.isPointLight===!0&&N.isMeshDistanceMaterial===!0&&(N.referencePosition.setFromMatrixPosition(w.matrixWorld),N.nearDistance=T,N.farDistance=S),N}function _(x,b,w,T,S){if(x.visible===!1)return;if(x.layers.test(b.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&S===Dl)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,x.matrixWorld);const V=e.update(x),Z=x.material;if(Array.isArray(Z)){const j=V.groups;for(let z=0,G=j.length;z<G;z++){const ne=j[z],re=Z[ne.materialIndex];if(re&&re.visible){const U=y(x,re,T,w.near,w.far,S);n.renderBufferDirect(w,null,V,U,x,ne)}}}else if(Z.visible){const j=y(x,Z,T,w.near,w.far,S);n.renderBufferDirect(w,null,V,j,x,null)}}const N=x.children;for(let V=0,Z=N.length;V<Z;V++)_(N[V],b,w,T,S)}}function fY(n,e,t){const i=t.isWebGL2;function r(){let q=!1;const de=new mt;let we=null;const Oe=new mt(0,0,0,0);return{setMask:function(ke){we!==ke&&!q&&(n.colorMask(ke,ke,ke,ke),we=ke)},setLocked:function(ke){q=ke},setClear:function(ke,rt,Rt,en,ns){ns===!0&&(ke*=en,rt*=en,Rt*=en),de.set(ke,rt,Rt,en),Oe.equals(de)===!1&&(n.clearColor(ke,rt,Rt,en),Oe.copy(de))},reset:function(){q=!1,we=null,Oe.set(-1,0,0,0)}}}function s(){let q=!1,de=null,we=null,Oe=null;return{setTest:function(ke){ke?W(2929):Y(2929)},setMask:function(ke){de!==ke&&!q&&(n.depthMask(ke),de=ke)},setFunc:function(ke){if(we!==ke){switch(ke){case O$:n.depthFunc(512);break;case P$:n.depthFunc(519);break;case L$:n.depthFunc(513);break;case Kg:n.depthFunc(515);break;case R$:n.depthFunc(514);break;case D$:n.depthFunc(518);break;case I$:n.depthFunc(516);break;case k$:n.depthFunc(517);break;default:n.depthFunc(515)}we=ke}},setLocked:function(ke){q=ke},setClear:function(ke){Oe!==ke&&(n.clearDepth(ke),Oe=ke)},reset:function(){q=!1,de=null,we=null,Oe=null}}}function f(){let q=!1,de=null,we=null,Oe=null,ke=null,rt=null,Rt=null,en=null,ns=null;return{setTest:function(Ct){q||(Ct?W(2960):Y(2960))},setMask:function(Ct){de!==Ct&&!q&&(n.stencilMask(Ct),de=Ct)},setFunc:function(Ct,Xi,Jn){(we!==Ct||Oe!==Xi||ke!==Jn)&&(n.stencilFunc(Ct,Xi,Jn),we=Ct,Oe=Xi,ke=Jn)},setOp:function(Ct,Xi,Jn){(rt!==Ct||Rt!==Xi||en!==Jn)&&(n.stencilOp(Ct,Xi,Jn),rt=Ct,Rt=Xi,en=Jn)},setLocked:function(Ct){q=Ct},setClear:function(Ct){ns!==Ct&&(n.clearStencil(Ct),ns=Ct)},reset:function(){q=!1,de=null,we=null,Oe=null,ke=null,rt=null,Rt=null,en=null,ns=null}}}const o=new r,a=new s,c=new f,d=new WeakMap,l=new WeakMap;let u={},h={},g=new WeakMap,m=[],p=null,v=!1,y=null,_=null,x=null,b=null,w=null,T=null,S=null,O=!1,N=null,V=null,Z=null,j=null,z=null;const G=n.getParameter(35661);let ne=!1,re=0;const U=n.getParameter(7938);U.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(U)[1]),ne=re>=1):U.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),ne=re>=2);let M=null,D={};const P=n.getParameter(3088),L=n.getParameter(2978),H=new mt().fromArray(P),k=new mt().fromArray(L);function A(q,de,we){const Oe=new Uint8Array(4),ke=n.createTexture();n.bindTexture(q,ke),n.texParameteri(q,10241,9728),n.texParameteri(q,10240,9728);for(let rt=0;rt<we;rt++)n.texImage2D(de+rt,0,6408,1,1,0,6408,5121,Oe);return ke}const F={};F[3553]=A(3553,3553,1),F[34067]=A(34067,34069,6),o.setClear(0,0,0,1),a.setClear(1),c.setClear(0),W(2929),a.setFunc(Kg),ue(!1),ae(v1),W(2884),K(Hr);function W(q){u[q]!==!0&&(n.enable(q),u[q]=!0)}function Y(q){u[q]!==!1&&(n.disable(q),u[q]=!1)}function X(q,de){return h[q]!==de?(n.bindFramebuffer(q,de),h[q]=de,i&&(q===36009&&(h[36160]=de),q===36160&&(h[36009]=de)),!0):!1}function ee(q,de){let we=m,Oe=!1;if(q)if(we=g.get(de),we===void 0&&(we=[],g.set(de,we)),q.isWebGLMultipleRenderTargets){const ke=q.texture;if(we.length!==ke.length||we[0]!==36064){for(let rt=0,Rt=ke.length;rt<Rt;rt++)we[rt]=36064+rt;we.length=ke.length,Oe=!0}}else we[0]!==36064&&(we[0]=36064,Oe=!0);else we[0]!==1029&&(we[0]=1029,Oe=!0);Oe&&(t.isWebGL2?n.drawBuffers(we):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(we))}function he(q){return p!==q?(n.useProgram(q),p=q,!0):!1}const ge={[xa]:32774,[y$]:32778,[_$]:32779};if(i)ge[b1]=32775,ge[w1]=32776;else{const q=e.get("EXT_blend_minmax");q!==null&&(ge[b1]=q.MIN_EXT,ge[w1]=q.MAX_EXT)}const J={[x$]:0,[b$]:1,[w$]:768,[AT]:770,[A$]:776,[E$]:774,[C$]:772,[S$]:769,[OT]:771,[M$]:775,[T$]:773};function K(q,de,we,Oe,ke,rt,Rt,en){if(q===Hr){v===!0&&(Y(3042),v=!1);return}if(v===!1&&(W(3042),v=!0),q!==v$){if(q!==y||en!==O){if((_!==xa||w!==xa)&&(n.blendEquation(32774),_=xa,w=xa),en)switch(q){case oo:n.blendFuncSeparate(1,771,1,771);break;case y1:n.blendFunc(1,1);break;case _1:n.blendFuncSeparate(0,769,0,1);break;case x1:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case oo:n.blendFuncSeparate(770,771,1,771);break;case y1:n.blendFunc(770,1);break;case _1:n.blendFuncSeparate(0,769,0,1);break;case x1:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}x=null,b=null,T=null,S=null,y=q,O=en}return}ke=ke||de,rt=rt||we,Rt=Rt||Oe,(de!==_||ke!==w)&&(n.blendEquationSeparate(ge[de],ge[ke]),_=de,w=ke),(we!==x||Oe!==b||rt!==T||Rt!==S)&&(n.blendFuncSeparate(J[we],J[Oe],J[rt],J[Rt]),x=we,b=Oe,T=rt,S=Rt),y=q,O=!1}function ce(q,de){q.side===Wf?Y(2884):W(2884);let we=q.side===ci;de&&(we=!we),ue(we),q.blending===oo&&q.transparent===!1?K(Hr):K(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.premultipliedAlpha),a.setFunc(q.depthFunc),a.setTest(q.depthTest),a.setMask(q.depthWrite),o.setMask(q.colorWrite);const Oe=q.stencilWrite;c.setTest(Oe),Oe&&(c.setMask(q.stencilWriteMask),c.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),c.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),ve(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?W(32926):Y(32926)}function ue(q){N!==q&&(q?n.frontFace(2304):n.frontFace(2305),N=q)}function ae(q){q!==p$?(W(2884),q!==V&&(q===v1?n.cullFace(1029):q===g$?n.cullFace(1028):n.cullFace(1032))):Y(2884),V=q}function le(q){q!==Z&&(ne&&n.lineWidth(q),Z=q)}function ve(q,de,we){q?(W(32823),(j!==de||z!==we)&&(n.polygonOffset(de,we),j=de,z=we)):Y(32823)}function Ie(q){q?W(3089):Y(3089)}function Me(q){q===void 0&&(q=33984+G-1),M!==q&&(n.activeTexture(q),M=q)}function R(q,de,we){we===void 0&&(M===null?we=33984+G-1:we=M);let Oe=D[we];Oe===void 0&&(Oe={type:void 0,texture:void 0},D[we]=Oe),(Oe.type!==q||Oe.texture!==de)&&(M!==we&&(n.activeTexture(we),M=we),n.bindTexture(q,de||F[q]),Oe.type=q,Oe.texture=de)}function I(){const q=D[M];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function ie(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function xe(){try{n.texSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Pe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function $(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function te(){try{n.texStorage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Te(){try{n.texStorage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ce(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ae(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Re(q){H.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),H.copy(q))}function De(q){k.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),k.copy(q))}function Ve(q,de){let we=l.get(de);we===void 0&&(we=new WeakMap,l.set(de,we));let Oe=we.get(q);Oe===void 0&&(Oe=n.getUniformBlockIndex(de,q.name),we.set(q,Oe))}function Xe(q,de){const Oe=l.get(de).get(q);d.get(de)!==Oe&&(n.uniformBlockBinding(de,Oe,q.__bindingPointIndex),d.set(de,Oe))}function lt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},M=null,D={},h={},g=new WeakMap,m=[],p=null,v=!1,y=null,_=null,x=null,b=null,w=null,T=null,S=null,O=!1,N=null,V=null,Z=null,j=null,z=null,H.set(0,0,n.canvas.width,n.canvas.height),k.set(0,0,n.canvas.width,n.canvas.height),o.reset(),a.reset(),c.reset()}return{buffers:{color:o,depth:a,stencil:c},enable:W,disable:Y,bindFramebuffer:X,drawBuffers:ee,useProgram:he,setBlending:K,setMaterial:ce,setFlipSided:ue,setCullFace:ae,setLineWidth:le,setPolygonOffset:ve,setScissorTest:Ie,activeTexture:Me,bindTexture:R,unbindTexture:I,compressedTexImage2D:ie,compressedTexImage3D:pe,texImage2D:Ce,texImage3D:Ae,updateUBOMapping:Ve,uniformBlockBinding:Xe,texStorage2D:te,texStorage3D:Te,texSubImage2D:_e,texSubImage3D:xe,compressedTexSubImage2D:Pe,compressedTexSubImage3D:$,scissor:Re,viewport:De,reset:lt}}function dY(n,e,t,i,r,s,f){const o=r.isWebGL2,a=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,l=r.maxSamples,u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let m;const p=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(R,I){return v?new OffscreenCanvas(R,I):Cc("canvas")}function _(R,I,ie,pe){let _e=1;if((R.width>pe||R.height>pe)&&(_e=pe/Math.max(R.width,R.height)),_e<1||I===!0)if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R instanceof ImageBitmap){const xe=I?Qh:Math.floor,Pe=xe(_e*R.width),$=xe(_e*R.height);m===void 0&&(m=y(Pe,$));const te=ie?y(Pe,$):m;return te.width=Pe,te.height=$,te.getContext("2d").drawImage(R,0,0,Pe,$),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+Pe+"x"+$+")."),te}else return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R;return R}function x(R){return tm(R.width)&&tm(R.height)}function b(R){return o?!1:R.wrapS!==ri||R.wrapT!==ri||R.minFilter!==Wt&&R.minFilter!==Sn}function w(R,I){return R.generateMipmaps&&I&&R.minFilter!==Wt&&R.minFilter!==Sn}function T(R){n.generateMipmap(R)}function S(R,I,ie,pe,_e=!1){if(o===!1)return I;if(R!==null){if(n[R]!==void 0)return n[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let xe=I;return I===6403&&(ie===5126&&(xe=33326),ie===5131&&(xe=33325),ie===5121&&(xe=33321)),I===33319&&(ie===5126&&(xe=33328),ie===5131&&(xe=33327),ie===5121&&(xe=33323)),I===6408&&(ie===5126&&(xe=34836),ie===5131&&(xe=34842),ie===5121&&(xe=pe===ht&&_e===!1?35907:32856),ie===32819&&(xe=32854),ie===32820&&(xe=32855)),(xe===33325||xe===33326||xe===33327||xe===33328||xe===34842||xe===34836)&&e.get("EXT_color_buffer_float"),xe}function O(R,I,ie){return w(R,ie)===!0||R.isFramebufferTexture&&R.minFilter!==Wt&&R.minFilter!==Sn?Math.log2(Math.max(I.width,I.height))+1:R.mipmaps!==void 0&&R.mipmaps.length>0?R.mipmaps.length:R.isCompressedTexture&&Array.isArray(R.image)?I.mipmaps.length:1}function N(R){return R===Wt||R===Jg||R===vh?9728:9729}function V(R){const I=R.target;I.removeEventListener("dispose",V),j(I),I.isVideoTexture&&g.delete(I)}function Z(R){const I=R.target;I.removeEventListener("dispose",Z),G(I)}function j(R){const I=i.get(R);if(I.__webglInit===void 0)return;const ie=R.source,pe=p.get(ie);if(pe){const _e=pe[I.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&z(R),Object.keys(pe).length===0&&p.delete(ie)}i.remove(R)}function z(R){const I=i.get(R);n.deleteTexture(I.__webglTexture);const ie=R.source,pe=p.get(ie);delete pe[I.__cacheKey],f.memory.textures--}function G(R){const I=R.texture,ie=i.get(R),pe=i.get(I);if(pe.__webglTexture!==void 0&&(n.deleteTexture(pe.__webglTexture),f.memory.textures--),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++)n.deleteFramebuffer(ie.__webglFramebuffer[_e]),ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer[_e]);else{if(n.deleteFramebuffer(ie.__webglFramebuffer),ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let _e=0;_e<ie.__webglColorRenderbuffer.length;_e++)ie.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(ie.__webglColorRenderbuffer[_e]);ie.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}if(R.isWebGLMultipleRenderTargets)for(let _e=0,xe=I.length;_e<xe;_e++){const Pe=i.get(I[_e]);Pe.__webglTexture&&(n.deleteTexture(Pe.__webglTexture),f.memory.textures--),i.remove(I[_e])}i.remove(I),i.remove(R)}let ne=0;function re(){ne=0}function U(){const R=ne;return R>=a&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+a),ne+=1,R}function M(R){const I=[];return I.push(R.wrapS),I.push(R.wrapT),I.push(R.wrapR||0),I.push(R.magFilter),I.push(R.minFilter),I.push(R.anisotropy),I.push(R.internalFormat),I.push(R.format),I.push(R.type),I.push(R.generateMipmaps),I.push(R.premultiplyAlpha),I.push(R.flipY),I.push(R.unpackAlignment),I.push(R.encoding),I.join()}function D(R,I){const ie=i.get(R);if(R.isVideoTexture&&Ie(R),R.isRenderTargetTexture===!1&&R.version>0&&ie.__version!==R.version){const pe=R.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Y(ie,R,I);return}}t.bindTexture(3553,ie.__webglTexture,33984+I)}function P(R,I){const ie=i.get(R);if(R.version>0&&ie.__version!==R.version){Y(ie,R,I);return}t.bindTexture(35866,ie.__webglTexture,33984+I)}function L(R,I){const ie=i.get(R);if(R.version>0&&ie.__version!==R.version){Y(ie,R,I);return}t.bindTexture(32879,ie.__webglTexture,33984+I)}function H(R,I){const ie=i.get(R);if(R.version>0&&ie.__version!==R.version){X(ie,R,I);return}t.bindTexture(34067,ie.__webglTexture,33984+I)}const k={[To]:10497,[ri]:33071,[Jh]:33648},A={[Wt]:9728,[Jg]:9984,[vh]:9986,[Sn]:9729,[LT]:9985,[Ns]:9987};function F(R,I,ie){if(ie?(n.texParameteri(R,10242,k[I.wrapS]),n.texParameteri(R,10243,k[I.wrapT]),(R===32879||R===35866)&&n.texParameteri(R,32882,k[I.wrapR]),n.texParameteri(R,10240,A[I.magFilter]),n.texParameteri(R,10241,A[I.minFilter])):(n.texParameteri(R,10242,33071),n.texParameteri(R,10243,33071),(R===32879||R===35866)&&n.texParameteri(R,32882,33071),(I.wrapS!==ri||I.wrapT!==ri)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(R,10240,N(I.magFilter)),n.texParameteri(R,10241,N(I.minFilter)),I.minFilter!==Wt&&I.minFilter!==Sn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const pe=e.get("EXT_texture_filter_anisotropic");if(I.magFilter===Wt||I.minFilter!==vh&&I.minFilter!==Ns||I.type===Dr&&e.has("OES_texture_float_linear")===!1||o===!1&&I.type===xc&&e.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(R,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function W(R,I){let ie=!1;R.__webglInit===void 0&&(R.__webglInit=!0,I.addEventListener("dispose",V));const pe=I.source;let _e=p.get(pe);_e===void 0&&(_e={},p.set(pe,_e));const xe=M(I);if(xe!==R.__cacheKey){_e[xe]===void 0&&(_e[xe]={texture:n.createTexture(),usedTimes:0},f.memory.textures++,ie=!0),_e[xe].usedTimes++;const Pe=_e[R.__cacheKey];Pe!==void 0&&(_e[R.__cacheKey].usedTimes--,Pe.usedTimes===0&&z(I)),R.__cacheKey=xe,R.__webglTexture=_e[xe].texture}return ie}function Y(R,I,ie){let pe=3553;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(pe=35866),I.isData3DTexture&&(pe=32879);const _e=W(R,I),xe=I.source;t.bindTexture(pe,R.__webglTexture,33984+ie);const Pe=i.get(xe);if(xe.version!==Pe.__version||_e===!0){t.activeTexture(33984+ie),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const $=b(I)&&x(I.image)===!1;let te=_(I.image,$,!1,d);te=Me(I,te);const Te=x(te)||o,Ce=s.convert(I.format,I.encoding);let Ae=s.convert(I.type),Re=S(I.internalFormat,Ce,Ae,I.encoding,I.isVideoTexture);F(pe,I,Te);let De;const Ve=I.mipmaps,Xe=o&&I.isVideoTexture!==!0,lt=Pe.__version===void 0||_e===!0,q=O(I,te,Te);if(I.isDepthTexture)Re=6402,o?I.type===Dr?Re=36012:I.type===Ss?Re=33190:I.type===lo?Re=35056:Re=33189:I.type===Dr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===Os&&Re===6402&&I.type!==RT&&I.type!==Ss&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Ss,Ae=s.convert(I.type)),I.format===Eo&&Re===6402&&(Re=34041,I.type!==lo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=lo,Ae=s.convert(I.type))),lt&&(Xe?t.texStorage2D(3553,1,Re,te.width,te.height):t.texImage2D(3553,0,Re,te.width,te.height,0,Ce,Ae,null));else if(I.isDataTexture)if(Ve.length>0&&Te){Xe&&lt&&t.texStorage2D(3553,q,Re,Ve[0].width,Ve[0].height);for(let de=0,we=Ve.length;de<we;de++)De=Ve[de],Xe?t.texSubImage2D(3553,de,0,0,De.width,De.height,Ce,Ae,De.data):t.texImage2D(3553,de,Re,De.width,De.height,0,Ce,Ae,De.data);I.generateMipmaps=!1}else Xe?(lt&&t.texStorage2D(3553,q,Re,te.width,te.height),t.texSubImage2D(3553,0,0,0,te.width,te.height,Ce,Ae,te.data)):t.texImage2D(3553,0,Re,te.width,te.height,0,Ce,Ae,te.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){Xe&&lt&&t.texStorage3D(35866,q,Re,Ve[0].width,Ve[0].height,te.depth);for(let de=0,we=Ve.length;de<we;de++)De=Ve[de],I.format!==si?Ce!==null?Xe?t.compressedTexSubImage3D(35866,de,0,0,0,De.width,De.height,te.depth,Ce,De.data,0,0):t.compressedTexImage3D(35866,de,Re,De.width,De.height,te.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xe?t.texSubImage3D(35866,de,0,0,0,De.width,De.height,te.depth,Ce,Ae,De.data):t.texImage3D(35866,de,Re,De.width,De.height,te.depth,0,Ce,Ae,De.data)}else{Xe&&lt&&t.texStorage2D(3553,q,Re,Ve[0].width,Ve[0].height);for(let de=0,we=Ve.length;de<we;de++)De=Ve[de],I.format!==si?Ce!==null?Xe?t.compressedTexSubImage2D(3553,de,0,0,De.width,De.height,Ce,De.data):t.compressedTexImage2D(3553,de,Re,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xe?t.texSubImage2D(3553,de,0,0,De.width,De.height,Ce,Ae,De.data):t.texImage2D(3553,de,Re,De.width,De.height,0,Ce,Ae,De.data)}else if(I.isDataArrayTexture)Xe?(lt&&t.texStorage3D(35866,q,Re,te.width,te.height,te.depth),t.texSubImage3D(35866,0,0,0,0,te.width,te.height,te.depth,Ce,Ae,te.data)):t.texImage3D(35866,0,Re,te.width,te.height,te.depth,0,Ce,Ae,te.data);else if(I.isData3DTexture)Xe?(lt&&t.texStorage3D(32879,q,Re,te.width,te.height,te.depth),t.texSubImage3D(32879,0,0,0,0,te.width,te.height,te.depth,Ce,Ae,te.data)):t.texImage3D(32879,0,Re,te.width,te.height,te.depth,0,Ce,Ae,te.data);else if(I.isFramebufferTexture){if(lt)if(Xe)t.texStorage2D(3553,q,Re,te.width,te.height);else{let de=te.width,we=te.height;for(let Oe=0;Oe<q;Oe++)t.texImage2D(3553,Oe,Re,de,we,0,Ce,Ae,null),de>>=1,we>>=1}}else if(Ve.length>0&&Te){Xe&&lt&&t.texStorage2D(3553,q,Re,Ve[0].width,Ve[0].height);for(let de=0,we=Ve.length;de<we;de++)De=Ve[de],Xe?t.texSubImage2D(3553,de,0,0,Ce,Ae,De):t.texImage2D(3553,de,Re,Ce,Ae,De);I.generateMipmaps=!1}else Xe?(lt&&t.texStorage2D(3553,q,Re,te.width,te.height),t.texSubImage2D(3553,0,0,0,Ce,Ae,te)):t.texImage2D(3553,0,Re,Ce,Ae,te);w(I,Te)&&T(pe),Pe.__version=xe.version,I.onUpdate&&I.onUpdate(I)}R.__version=I.version}function X(R,I,ie){if(I.image.length!==6)return;const pe=W(R,I),_e=I.source;t.bindTexture(34067,R.__webglTexture,33984+ie);const xe=i.get(_e);if(_e.version!==xe.__version||pe===!0){t.activeTexture(33984+ie),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const Pe=I.isCompressedTexture||I.image[0].isCompressedTexture,$=I.image[0]&&I.image[0].isDataTexture,te=[];for(let de=0;de<6;de++)!Pe&&!$?te[de]=_(I.image[de],!1,!0,c):te[de]=$?I.image[de].image:I.image[de],te[de]=Me(I,te[de]);const Te=te[0],Ce=x(Te)||o,Ae=s.convert(I.format,I.encoding),Re=s.convert(I.type),De=S(I.internalFormat,Ae,Re,I.encoding),Ve=o&&I.isVideoTexture!==!0,Xe=xe.__version===void 0||pe===!0;let lt=O(I,Te,Ce);F(34067,I,Ce);let q;if(Pe){Ve&&Xe&&t.texStorage2D(34067,lt,De,Te.width,Te.height);for(let de=0;de<6;de++){q=te[de].mipmaps;for(let we=0;we<q.length;we++){const Oe=q[we];I.format!==si?Ae!==null?Ve?t.compressedTexSubImage2D(34069+de,we,0,0,Oe.width,Oe.height,Ae,Oe.data):t.compressedTexImage2D(34069+de,we,De,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ve?t.texSubImage2D(34069+de,we,0,0,Oe.width,Oe.height,Ae,Re,Oe.data):t.texImage2D(34069+de,we,De,Oe.width,Oe.height,0,Ae,Re,Oe.data)}}}else{q=I.mipmaps,Ve&&Xe&&(q.length>0&&lt++,t.texStorage2D(34067,lt,De,te[0].width,te[0].height));for(let de=0;de<6;de++)if($){Ve?t.texSubImage2D(34069+de,0,0,0,te[de].width,te[de].height,Ae,Re,te[de].data):t.texImage2D(34069+de,0,De,te[de].width,te[de].height,0,Ae,Re,te[de].data);for(let we=0;we<q.length;we++){const ke=q[we].image[de].image;Ve?t.texSubImage2D(34069+de,we+1,0,0,ke.width,ke.height,Ae,Re,ke.data):t.texImage2D(34069+de,we+1,De,ke.width,ke.height,0,Ae,Re,ke.data)}}else{Ve?t.texSubImage2D(34069+de,0,0,0,Ae,Re,te[de]):t.texImage2D(34069+de,0,De,Ae,Re,te[de]);for(let we=0;we<q.length;we++){const Oe=q[we];Ve?t.texSubImage2D(34069+de,we+1,0,0,Ae,Re,Oe.image[de]):t.texImage2D(34069+de,we+1,De,Ae,Re,Oe.image[de])}}}w(I,Ce)&&T(34067),xe.__version=_e.version,I.onUpdate&&I.onUpdate(I)}R.__version=I.version}function ee(R,I,ie,pe,_e){const xe=s.convert(ie.format,ie.encoding),Pe=s.convert(ie.type),$=S(ie.internalFormat,xe,Pe,ie.encoding);i.get(I).__hasExternalTextures||(_e===32879||_e===35866?t.texImage3D(_e,0,$,I.width,I.height,I.depth,0,xe,Pe,null):t.texImage2D(_e,0,$,I.width,I.height,0,xe,Pe,null)),t.bindFramebuffer(36160,R),ve(I)?u.framebufferTexture2DMultisampleEXT(36160,pe,_e,i.get(ie).__webglTexture,0,le(I)):(_e===3553||_e>=34069&&_e<=34074)&&n.framebufferTexture2D(36160,pe,_e,i.get(ie).__webglTexture,0),t.bindFramebuffer(36160,null)}function he(R,I,ie){if(n.bindRenderbuffer(36161,R),I.depthBuffer&&!I.stencilBuffer){let pe=33189;if(ie||ve(I)){const _e=I.depthTexture;_e&&_e.isDepthTexture&&(_e.type===Dr?pe=36012:_e.type===Ss&&(pe=33190));const xe=le(I);ve(I)?u.renderbufferStorageMultisampleEXT(36161,xe,pe,I.width,I.height):n.renderbufferStorageMultisample(36161,xe,pe,I.width,I.height)}else n.renderbufferStorage(36161,pe,I.width,I.height);n.framebufferRenderbuffer(36160,36096,36161,R)}else if(I.depthBuffer&&I.stencilBuffer){const pe=le(I);ie&&ve(I)===!1?n.renderbufferStorageMultisample(36161,pe,35056,I.width,I.height):ve(I)?u.renderbufferStorageMultisampleEXT(36161,pe,35056,I.width,I.height):n.renderbufferStorage(36161,34041,I.width,I.height),n.framebufferRenderbuffer(36160,33306,36161,R)}else{const pe=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let _e=0;_e<pe.length;_e++){const xe=pe[_e],Pe=s.convert(xe.format,xe.encoding),$=s.convert(xe.type),te=S(xe.internalFormat,Pe,$,xe.encoding),Te=le(I);ie&&ve(I)===!1?n.renderbufferStorageMultisample(36161,Te,te,I.width,I.height):ve(I)?u.renderbufferStorageMultisampleEXT(36161,Te,te,I.width,I.height):n.renderbufferStorage(36161,te,I.width,I.height)}}n.bindRenderbuffer(36161,null)}function ge(R,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,R),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),D(I.depthTexture,0);const pe=i.get(I.depthTexture).__webglTexture,_e=le(I);if(I.depthTexture.format===Os)ve(I)?u.framebufferTexture2DMultisampleEXT(36160,36096,3553,pe,0,_e):n.framebufferTexture2D(36160,36096,3553,pe,0);else if(I.depthTexture.format===Eo)ve(I)?u.framebufferTexture2DMultisampleEXT(36160,33306,3553,pe,0,_e):n.framebufferTexture2D(36160,33306,3553,pe,0);else throw new Error("Unknown depthTexture format")}function J(R){const I=i.get(R),ie=R.isWebGLCubeRenderTarget===!0;if(R.depthTexture&&!I.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");ge(I.__webglFramebuffer,R)}else if(ie){I.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)t.bindFramebuffer(36160,I.__webglFramebuffer[pe]),I.__webglDepthbuffer[pe]=n.createRenderbuffer(),he(I.__webglDepthbuffer[pe],R,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),he(I.__webglDepthbuffer,R,!1);t.bindFramebuffer(36160,null)}function K(R,I,ie){const pe=i.get(R);I!==void 0&&ee(pe.__webglFramebuffer,R,R.texture,36064,3553),ie!==void 0&&J(R)}function ce(R){const I=R.texture,ie=i.get(R),pe=i.get(I);R.addEventListener("dispose",Z),R.isWebGLMultipleRenderTargets!==!0&&(pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture()),pe.__version=I.version,f.memory.textures++);const _e=R.isWebGLCubeRenderTarget===!0,xe=R.isWebGLMultipleRenderTargets===!0,Pe=x(R)||o;if(_e){ie.__webglFramebuffer=[];for(let $=0;$<6;$++)ie.__webglFramebuffer[$]=n.createFramebuffer()}else{if(ie.__webglFramebuffer=n.createFramebuffer(),xe)if(r.drawBuffers){const $=R.texture;for(let te=0,Te=$.length;te<Te;te++){const Ce=i.get($[te]);Ce.__webglTexture===void 0&&(Ce.__webglTexture=n.createTexture(),f.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&R.samples>0&&ve(R)===!1){const $=xe?I:[I];ie.__webglMultisampledFramebuffer=n.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ie.__webglMultisampledFramebuffer);for(let te=0;te<$.length;te++){const Te=$[te];ie.__webglColorRenderbuffer[te]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ie.__webglColorRenderbuffer[te]);const Ce=s.convert(Te.format,Te.encoding),Ae=s.convert(Te.type),Re=S(Te.internalFormat,Ce,Ae,Te.encoding,R.isXRRenderTarget===!0),De=le(R);n.renderbufferStorageMultisample(36161,De,Re,R.width,R.height),n.framebufferRenderbuffer(36160,36064+te,36161,ie.__webglColorRenderbuffer[te])}n.bindRenderbuffer(36161,null),R.depthBuffer&&(ie.__webglDepthRenderbuffer=n.createRenderbuffer(),he(ie.__webglDepthRenderbuffer,R,!0)),t.bindFramebuffer(36160,null)}}if(_e){t.bindTexture(34067,pe.__webglTexture),F(34067,I,Pe);for(let $=0;$<6;$++)ee(ie.__webglFramebuffer[$],R,I,36064,34069+$);w(I,Pe)&&T(34067),t.unbindTexture()}else if(xe){const $=R.texture;for(let te=0,Te=$.length;te<Te;te++){const Ce=$[te],Ae=i.get(Ce);t.bindTexture(3553,Ae.__webglTexture),F(3553,Ce,Pe),ee(ie.__webglFramebuffer,R,Ce,36064+te,3553),w(Ce,Pe)&&T(3553)}t.unbindTexture()}else{let $=3553;(R.isWebGL3DRenderTarget||R.isWebGLArrayRenderTarget)&&(o?$=R.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture($,pe.__webglTexture),F($,I,Pe),ee(ie.__webglFramebuffer,R,I,36064,$),w(I,Pe)&&T($),t.unbindTexture()}R.depthBuffer&&J(R)}function ue(R){const I=x(R)||o,ie=R.isWebGLMultipleRenderTargets===!0?R.texture:[R.texture];for(let pe=0,_e=ie.length;pe<_e;pe++){const xe=ie[pe];if(w(xe,I)){const Pe=R.isWebGLCubeRenderTarget?34067:3553,$=i.get(xe).__webglTexture;t.bindTexture(Pe,$),T(Pe),t.unbindTexture()}}}function ae(R){if(o&&R.samples>0&&ve(R)===!1){const I=R.isWebGLMultipleRenderTargets?R.texture:[R.texture],ie=R.width,pe=R.height;let _e=16384;const xe=[],Pe=R.stencilBuffer?33306:36096,$=i.get(R),te=R.isWebGLMultipleRenderTargets===!0;if(te)for(let Te=0;Te<I.length;Te++)t.bindFramebuffer(36160,$.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Te,36161,null),t.bindFramebuffer(36160,$.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Te,3553,null,0);t.bindFramebuffer(36008,$.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,$.__webglFramebuffer);for(let Te=0;Te<I.length;Te++){xe.push(36064+Te),R.depthBuffer&&xe.push(Pe);const Ce=$.__ignoreDepthValues!==void 0?$.__ignoreDepthValues:!1;if(Ce===!1&&(R.depthBuffer&&(_e|=256),R.stencilBuffer&&(_e|=1024)),te&&n.framebufferRenderbuffer(36008,36064,36161,$.__webglColorRenderbuffer[Te]),Ce===!0&&(n.invalidateFramebuffer(36008,[Pe]),n.invalidateFramebuffer(36009,[Pe])),te){const Ae=i.get(I[Te]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Ae,0)}n.blitFramebuffer(0,0,ie,pe,0,0,ie,pe,_e,9728),h&&n.invalidateFramebuffer(36008,xe)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),te)for(let Te=0;Te<I.length;Te++){t.bindFramebuffer(36160,$.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Te,36161,$.__webglColorRenderbuffer[Te]);const Ce=i.get(I[Te]).__webglTexture;t.bindFramebuffer(36160,$.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Te,3553,Ce,0)}t.bindFramebuffer(36009,$.__webglMultisampledFramebuffer)}}function le(R){return Math.min(l,R.samples)}function ve(R){const I=i.get(R);return o&&R.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Ie(R){const I=f.render.frame;g.get(R)!==I&&(g.set(R,I),R.update())}function Me(R,I){const ie=R.encoding,pe=R.format,_e=R.type;return R.isCompressedTexture===!0||R.isVideoTexture===!0||R.format===em||ie!==zs&&(ie===ht?o===!1?e.has("EXT_sRGB")===!0&&pe===si?(R.format=em,R.minFilter=Sn,R.generateMipmaps=!1):I=NT.sRGBToLinear(I):(pe!==si||_e!==Bs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ie)),I}this.allocateTextureUnit=U,this.resetTextureUnits=re,this.setTexture2D=D,this.setTexture2DArray=P,this.setTexture3D=L,this.setTextureCube=H,this.rebindTextures=K,this.setupRenderTarget=ce,this.updateRenderTargetMipmap=ue,this.updateMultisampleRenderTarget=ae,this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=ve}function pY(n,e,t){const i=t.isWebGL2;function r(s,f=null){let o;if(s===Bs)return 5121;if(s===W$)return 32819;if(s===X$)return 32820;if(s===H$)return 5120;if(s===V$)return 5122;if(s===RT)return 5123;if(s===G$)return 5124;if(s===Ss)return 5125;if(s===Dr)return 5126;if(s===xc)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===Y$)return 6406;if(s===si)return 6408;if(s===q$)return 6409;if(s===Z$)return 6410;if(s===Os)return 6402;if(s===Eo)return 34041;if(s===K$)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===em)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===J$)return 6403;if(s===Q$)return 36244;if(s===eH)return 33319;if(s===tH)return 33320;if(s===nH)return 36249;if(s===Kd||s===qd||s===Zd||s===Jd)if(f===ht)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===Kd)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===qd)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Zd)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Jd)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Kd)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===qd)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Zd)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Jd)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===S1||s===C1||s===T1||s===E1)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===S1)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===C1)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===T1)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===E1)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===iH)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===M1||s===A1)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===M1)return f===ht?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===A1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===O1||s===P1||s===L1||s===R1||s===D1||s===I1||s===k1||s===F1||s===N1||s===B1||s===z1||s===j1||s===U1||s===$1)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===O1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===P1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===L1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===R1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===D1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===I1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===k1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===F1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===N1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===B1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===z1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===j1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===U1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===$1)return f===ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===H1)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===H1)return f===ht?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===lo?i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class gY extends gn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ir extends Ot{constructor(){super(),this.isGroup=!0,this.type="Group"}}const mY={type:"move"};class Cp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ir,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ir,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ir,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,f=null;const o=this._targetRay,a=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){f=!0;for(const m of e.hand.values()){const p=t.getJointPose(m,i),v=this._getHandJoint(c,m);p!==null&&(v.matrix.fromArray(p.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=p.radius),v.visible=p!==null}const d=c.joints["index-finger-tip"],l=c.joints["thumb-tip"],u=d.position.distanceTo(l.position),h=.02,g=.005;c.inputState.pinching&&u>h+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&u<=h-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else a!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(mY)))}return o!==null&&(o.visible=r!==null),a!==null&&(a.visible=s!==null),c!==null&&(c.visible=f!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ir;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class vY extends Yt{constructor(e,t,i,r,s,f,o,a,c,d){if(d=d!==void 0?d:Os,d!==Os&&d!==Eo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Os&&(i=Ss),i===void 0&&d===Eo&&(i=lo),super(null,r,s,f,o,a,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Wt,this.minFilter=a!==void 0?a:Wt,this.flipY=!1,this.generateMipmaps=!1}}class yY extends Ys{constructor(e,t){super();const i=this;let r=null,s=1,f=null,o="local-floor",a=null,c=null,d=null,l=null,u=null,h=null;const g=t.getContextAttributes();let m=null,p=null;const v=[],y=[],_=new Set,x=new Map,b=new gn;b.layers.enable(1),b.viewport=new mt;const w=new gn;w.layers.enable(2),w.viewport=new mt;const T=[b,w],S=new gY;S.layers.enable(1),S.layers.enable(2);let O=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(P){let L=v[P];return L===void 0&&(L=new Cp,v[P]=L),L.getTargetRaySpace()},this.getControllerGrip=function(P){let L=v[P];return L===void 0&&(L=new Cp,v[P]=L),L.getGripSpace()},this.getHand=function(P){let L=v[P];return L===void 0&&(L=new Cp,v[P]=L),L.getHandSpace()};function V(P){const L=y.indexOf(P.inputSource);if(L===-1)return;const H=v[L];H!==void 0&&H.dispatchEvent({type:P.type,data:P.inputSource})}function Z(){r.removeEventListener("select",V),r.removeEventListener("selectstart",V),r.removeEventListener("selectend",V),r.removeEventListener("squeeze",V),r.removeEventListener("squeezestart",V),r.removeEventListener("squeezeend",V),r.removeEventListener("end",Z),r.removeEventListener("inputsourceschange",j);for(let P=0;P<v.length;P++){const L=y[P];L!==null&&(y[P]=null,v[P].disconnect(L))}O=null,N=null,e.setRenderTarget(m),u=null,l=null,d=null,r=null,p=null,D.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(P){s=P,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(P){o=P,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||f},this.setReferenceSpace=function(P){a=P},this.getBaseLayer=function(){return l!==null?l:u},this.getBinding=function(){return d},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(P){if(r=P,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",V),r.addEventListener("selectstart",V),r.addEventListener("selectend",V),r.addEventListener("squeeze",V),r.addEventListener("squeezestart",V),r.addEventListener("squeezeend",V),r.addEventListener("end",Z),r.addEventListener("inputsourceschange",j),g.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const L={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};u=new XRWebGLLayer(r,t,L),r.updateRenderState({baseLayer:u}),p=new js(u.framebufferWidth,u.framebufferHeight,{format:si,type:Bs,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let L=null,H=null,k=null;g.depth&&(k=g.stencil?35056:33190,L=g.stencil?Eo:Os,H=g.stencil?lo:Ss);const A={colorFormat:32856,depthFormat:k,scaleFactor:s};d=new XRWebGLBinding(r,t),l=d.createProjectionLayer(A),r.updateRenderState({layers:[l]}),p=new js(l.textureWidth,l.textureHeight,{format:si,type:Bs,depthTexture:new vY(l.textureWidth,l.textureHeight,H,void 0,void 0,void 0,void 0,void 0,void 0,L),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const F=e.properties.get(p);F.__ignoreDepthValues=l.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(1),a=null,f=await r.requestReferenceSpace(o),D.setContext(r),D.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function j(P){for(let L=0;L<P.removed.length;L++){const H=P.removed[L],k=y.indexOf(H);k>=0&&(y[k]=null,v[k].disconnect(H))}for(let L=0;L<P.added.length;L++){const H=P.added[L];let k=y.indexOf(H);if(k===-1){for(let F=0;F<v.length;F++)if(F>=y.length){y.push(H),k=F;break}else if(y[F]===null){y[F]=H,k=F;break}if(k===-1)break}const A=v[k];A&&A.connect(H)}}const z=new Q,G=new Q;function ne(P,L,H){z.setFromMatrixPosition(L.matrixWorld),G.setFromMatrixPosition(H.matrixWorld);const k=z.distanceTo(G),A=L.projectionMatrix.elements,F=H.projectionMatrix.elements,W=A[14]/(A[10]-1),Y=A[14]/(A[10]+1),X=(A[9]+1)/A[5],ee=(A[9]-1)/A[5],he=(A[8]-1)/A[0],ge=(F[8]+1)/F[0],J=W*he,K=W*ge,ce=k/(-he+ge),ue=ce*-he;L.matrixWorld.decompose(P.position,P.quaternion,P.scale),P.translateX(ue),P.translateZ(ce),P.matrixWorld.compose(P.position,P.quaternion,P.scale),P.matrixWorldInverse.copy(P.matrixWorld).invert();const ae=W+ce,le=Y+ce,ve=J-ue,Ie=K+(k-ue),Me=X*Y/le*ae,R=ee*Y/le*ae;P.projectionMatrix.makePerspective(ve,Ie,Me,R,ae,le)}function re(P,L){L===null?P.matrixWorld.copy(P.matrix):P.matrixWorld.multiplyMatrices(L.matrixWorld,P.matrix),P.matrixWorldInverse.copy(P.matrixWorld).invert()}this.updateCamera=function(P){if(r===null)return;S.near=w.near=b.near=P.near,S.far=w.far=b.far=P.far,(O!==S.near||N!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),O=S.near,N=S.far);const L=P.parent,H=S.cameras;re(S,L);for(let A=0;A<H.length;A++)re(H[A],L);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),P.matrix.copy(S.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale);const k=P.children;for(let A=0,F=k.length;A<F;A++)k[A].updateMatrixWorld(!0);H.length===2?ne(S,b,w):S.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(l!==null)return l.fixedFoveation;if(u!==null)return u.fixedFoveation},this.setFoveation=function(P){l!==null&&(l.fixedFoveation=P),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=P)},this.getPlanes=function(){return _};let U=null;function M(P,L){if(c=L.getViewerPose(a||f),h=L,c!==null){const H=c.views;u!==null&&(e.setRenderTargetFramebuffer(p,u.framebuffer),e.setRenderTarget(p));let k=!1;H.length!==S.cameras.length&&(S.cameras.length=0,k=!0);for(let A=0;A<H.length;A++){const F=H[A];let W=null;if(u!==null)W=u.getViewport(F);else{const X=d.getViewSubImage(l,F);W=X.viewport,A===0&&(e.setRenderTargetTextures(p,X.colorTexture,l.ignoreDepthValues?void 0:X.depthStencilTexture),e.setRenderTarget(p))}let Y=T[A];Y===void 0&&(Y=new gn,Y.layers.enable(A),Y.viewport=new mt,T[A]=Y),Y.matrix.fromArray(F.transform.matrix),Y.projectionMatrix.fromArray(F.projectionMatrix),Y.viewport.set(W.x,W.y,W.width,W.height),A===0&&S.matrix.copy(Y.matrix),k===!0&&S.cameras.push(Y)}}for(let H=0;H<v.length;H++){const k=y[H],A=v[H];k!==null&&A!==void 0&&A.update(k,L,a||f)}if(U&&U(P,L),L.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:L.detectedPlanes});let H=null;for(const k of _)L.detectedPlanes.has(k)||(H===null&&(H=[]),H.push(k));if(H!==null)for(const k of H)_.delete(k),x.delete(k),i.dispatchEvent({type:"planeremoved",data:k});for(const k of L.detectedPlanes)if(!_.has(k))_.add(k),x.set(k,L.lastChangedTime),i.dispatchEvent({type:"planeadded",data:k});else{const A=x.get(k);k.lastChangedTime>A&&(x.set(k,k.lastChangedTime),i.dispatchEvent({type:"planechanged",data:k}))}}h=null}const D=new WT;D.setAnimationLoop(M),this.setAnimationLoop=function(P){U=P},this.dispose=function(){}}}function _Y(n,e){function t(m,p){p.color.getRGB(m.fogColor.value,HT(n)),p.isFog?(m.fogNear.value=p.near,m.fogFar.value=p.far):p.isFogExp2&&(m.fogDensity.value=p.density)}function i(m,p,v,y,_){p.isMeshBasicMaterial||p.isMeshLambertMaterial?r(m,p):p.isMeshToonMaterial?(r(m,p),d(m,p)):p.isMeshPhongMaterial?(r(m,p),c(m,p)):p.isMeshStandardMaterial?(r(m,p),l(m,p),p.isMeshPhysicalMaterial&&u(m,p,_)):p.isMeshMatcapMaterial?(r(m,p),h(m,p)):p.isMeshDepthMaterial?r(m,p):p.isMeshDistanceMaterial?(r(m,p),g(m,p)):p.isMeshNormalMaterial?r(m,p):p.isLineBasicMaterial?(s(m,p),p.isLineDashedMaterial&&f(m,p)):p.isPointsMaterial?o(m,p,v,y):p.isSpriteMaterial?a(m,p):p.isShadowMaterial?(m.color.value.copy(p.color),m.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function r(m,p){m.opacity.value=p.opacity,p.color&&m.diffuse.value.copy(p.color),p.emissive&&m.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(m.map.value=p.map),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.bumpMap&&(m.bumpMap.value=p.bumpMap,m.bumpScale.value=p.bumpScale,p.side===ci&&(m.bumpScale.value*=-1)),p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap),p.normalMap&&(m.normalMap.value=p.normalMap,m.normalScale.value.copy(p.normalScale),p.side===ci&&m.normalScale.value.negate()),p.specularMap&&(m.specularMap.value=p.specularMap),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest);const v=e.get(p).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=p.reflectivity,m.ior.value=p.ior,m.refractionRatio.value=p.refractionRatio),p.lightMap){m.lightMap.value=p.lightMap;const x=n.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=p.lightMapIntensity*x}p.aoMap&&(m.aoMap.value=p.aoMap,m.aoMapIntensity.value=p.aoMapIntensity);let y;p.map?y=p.map:p.specularMap?y=p.specularMap:p.displacementMap?y=p.displacementMap:p.normalMap?y=p.normalMap:p.bumpMap?y=p.bumpMap:p.roughnessMap?y=p.roughnessMap:p.metalnessMap?y=p.metalnessMap:p.alphaMap?y=p.alphaMap:p.emissiveMap?y=p.emissiveMap:p.clearcoatMap?y=p.clearcoatMap:p.clearcoatNormalMap?y=p.clearcoatNormalMap:p.clearcoatRoughnessMap?y=p.clearcoatRoughnessMap:p.iridescenceMap?y=p.iridescenceMap:p.iridescenceThicknessMap?y=p.iridescenceThicknessMap:p.specularIntensityMap?y=p.specularIntensityMap:p.specularColorMap?y=p.specularColorMap:p.transmissionMap?y=p.transmissionMap:p.thicknessMap?y=p.thicknessMap:p.sheenColorMap?y=p.sheenColorMap:p.sheenRoughnessMap&&(y=p.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let _;p.aoMap?_=p.aoMap:p.lightMap&&(_=p.lightMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uv2Transform.value.copy(_.matrix))}function s(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity}function f(m,p){m.dashSize.value=p.dashSize,m.totalSize.value=p.dashSize+p.gapSize,m.scale.value=p.scale}function o(m,p,v,y){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.size.value=p.size*v,m.scale.value=y*.5,p.map&&(m.map.value=p.map),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest);let _;p.map?_=p.map:p.alphaMap&&(_=p.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}function a(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.rotation.value=p.rotation,p.map&&(m.map.value=p.map),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest);let v;p.map?v=p.map:p.alphaMap&&(v=p.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function c(m,p){m.specular.value.copy(p.specular),m.shininess.value=Math.max(p.shininess,1e-4)}function d(m,p){p.gradientMap&&(m.gradientMap.value=p.gradientMap)}function l(m,p){m.roughness.value=p.roughness,m.metalness.value=p.metalness,p.roughnessMap&&(m.roughnessMap.value=p.roughnessMap),p.metalnessMap&&(m.metalnessMap.value=p.metalnessMap),e.get(p).envMap&&(m.envMapIntensity.value=p.envMapIntensity)}function u(m,p,v){m.ior.value=p.ior,p.sheen>0&&(m.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),m.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(m.sheenColorMap.value=p.sheenColorMap),p.sheenRoughnessMap&&(m.sheenRoughnessMap.value=p.sheenRoughnessMap)),p.clearcoat>0&&(m.clearcoat.value=p.clearcoat,m.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(m.clearcoatMap.value=p.clearcoatMap),p.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap),p.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),m.clearcoatNormalMap.value=p.clearcoatNormalMap,p.side===ci&&m.clearcoatNormalScale.value.negate())),p.iridescence>0&&(m.iridescence.value=p.iridescence,m.iridescenceIOR.value=p.iridescenceIOR,m.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(m.iridescenceMap.value=p.iridescenceMap),p.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=p.iridescenceThicknessMap)),p.transmission>0&&(m.transmission.value=p.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),p.transmissionMap&&(m.transmissionMap.value=p.transmissionMap),m.thickness.value=p.thickness,p.thicknessMap&&(m.thicknessMap.value=p.thicknessMap),m.attenuationDistance.value=p.attenuationDistance,m.attenuationColor.value.copy(p.attenuationColor)),m.specularIntensity.value=p.specularIntensity,m.specularColor.value.copy(p.specularColor),p.specularIntensityMap&&(m.specularIntensityMap.value=p.specularIntensityMap),p.specularColorMap&&(m.specularColorMap.value=p.specularColorMap)}function h(m,p){p.matcap&&(m.matcap.value=p.matcap)}function g(m,p){m.referencePosition.value.copy(p.referencePosition),m.nearDistance.value=p.nearDistance,m.farDistance.value=p.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function xY(n,e,t,i){let r={},s={},f=[];const o=t.isWebGL2?n.getParameter(35375):0;function a(y,_){const x=_.program;i.uniformBlockBinding(y,x)}function c(y,_){let x=r[y.id];x===void 0&&(g(y),x=d(y),r[y.id]=x,y.addEventListener("dispose",p));const b=_.program;i.updateUBOMapping(y,b);const w=e.render.frame;s[y.id]!==w&&(u(y),s[y.id]=w)}function d(y){const _=l();y.__bindingPointIndex=_;const x=n.createBuffer(),b=y.__size,w=y.usage;return n.bindBuffer(35345,x),n.bufferData(35345,b,w),n.bindBuffer(35345,null),n.bindBufferBase(35345,_,x),x}function l(){for(let y=0;y<o;y++)if(f.indexOf(y)===-1)return f.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function u(y){const _=r[y.id],x=y.uniforms,b=y.__cache;n.bindBuffer(35345,_);for(let w=0,T=x.length;w<T;w++){const S=x[w];if(h(S,w,b)===!0){const O=S.__offset,N=Array.isArray(S.value)?S.value:[S.value];let V=0;for(let Z=0;Z<N.length;Z++){const j=N[Z],z=m(j);typeof j=="number"?(S.__data[0]=j,n.bufferSubData(35345,O+V,S.__data)):j.isMatrix3?(S.__data[0]=j.elements[0],S.__data[1]=j.elements[1],S.__data[2]=j.elements[2],S.__data[3]=j.elements[0],S.__data[4]=j.elements[3],S.__data[5]=j.elements[4],S.__data[6]=j.elements[5],S.__data[7]=j.elements[0],S.__data[8]=j.elements[6],S.__data[9]=j.elements[7],S.__data[10]=j.elements[8],S.__data[11]=j.elements[0]):(j.toArray(S.__data,V),V+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,O,S.__data)}}n.bindBuffer(35345,null)}function h(y,_,x){const b=y.value;if(x[_]===void 0){if(typeof b=="number")x[_]=b;else{const w=Array.isArray(b)?b:[b],T=[];for(let S=0;S<w.length;S++)T.push(w[S].clone());x[_]=T}return!0}else if(typeof b=="number"){if(x[_]!==b)return x[_]=b,!0}else{const w=Array.isArray(x[_])?x[_]:[x[_]],T=Array.isArray(b)?b:[b];for(let S=0;S<w.length;S++){const O=w[S];if(O.equals(T[S])===!1)return O.copy(T[S]),!0}}return!1}function g(y){const _=y.uniforms;let x=0;const b=16;let w=0;for(let T=0,S=_.length;T<S;T++){const O=_[T],N={boundary:0,storage:0},V=Array.isArray(O.value)?O.value:[O.value];for(let Z=0,j=V.length;Z<j;Z++){const z=V[Z],G=m(z);N.boundary+=G.boundary,N.storage+=G.storage}if(O.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=x,T>0){w=x%b;const Z=b-w;w!==0&&Z-N.boundary<0&&(x+=b-w,O.__offset=x)}x+=N.storage}return w=x%b,w>0&&(x+=b-w),y.__size=x,y.__cache={},this}function m(y){const _={boundary:0,storage:0};return typeof y=="number"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function p(y){const _=y.target;_.removeEventListener("dispose",p);const x=f.indexOf(_.__bindingPointIndex);f.splice(x,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function v(){for(const y in r)n.deleteBuffer(r[y]);f=[],r={},s={}}return{bind:a,update:c,dispose:v}}function bY(){const n=Cc("canvas");return n.style.display="block",n}function ZT(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:bY(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,f=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,a=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let d;t!==null?d=t.getContextAttributes().alpha:d=n.alpha!==void 0?n.alpha:!1;let l=null,u=null;const h=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=zs,this.physicallyCorrectLights=!1,this.toneMapping=ur,this.toneMappingExposure=1;const m=this;let p=!1,v=0,y=0,_=null,x=-1,b=null;const w=new mt,T=new mt;let S=null,O=e.width,N=e.height,V=1,Z=null,j=null;const z=new mt(0,0,O,N),G=new mt(0,0,O,N);let ne=!1;const re=new n0;let U=!1,M=!1,D=null;const P=new Ze,L=new Ue,H=new Q,k={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function A(){return _===null?V:1}let F=t;function W(B,oe){for(let me=0;me<B.length;me++){const se=B[me],ye=e.getContext(se,oe);if(ye!==null)return ye}return null}try{const B={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:f,preserveDrawingBuffer:o,powerPreference:a,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Zv}`),e.addEventListener("webglcontextlost",Re,!1),e.addEventListener("webglcontextrestored",De,!1),e.addEventListener("webglcontextcreationerror",Ve,!1),F===null){const oe=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&oe.shift(),F=W(oe,B),F===null)throw W(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}F.getShaderPrecisionFormat===void 0&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let Y,X,ee,he,ge,J,K,ce,ue,ae,le,ve,Ie,Me,R,I,ie,pe,_e,xe,Pe,$,te,Te;function Ce(){Y=new RW(F),X=new EW(F,Y,n),Y.init(X),$=new pY(F,Y,X),ee=new fY(F,Y,X),he=new kW,ge=new JX,J=new dY(F,Y,ee,ge,X,$,he),K=new AW(m),ce=new LW(m),ue=new VH(F,X),te=new CW(F,Y,ue,X),ae=new DW(F,ue,he,te),le=new zW(F,ae,ue,he),_e=new BW(F,X,J),I=new MW(ge),ve=new ZX(m,K,ce,Y,X,te,I),Ie=new _Y(m,ge),Me=new eY,R=new aY(Y,X),pe=new SW(m,K,ce,ee,le,d,f),ie=new hY(m,le,X),Te=new xY(F,he,X,ee),xe=new TW(F,Y,he,X),Pe=new IW(F,Y,he,X),he.programs=ve.programs,m.capabilities=X,m.extensions=Y,m.properties=ge,m.renderLists=Me,m.shadowMap=ie,m.state=ee,m.info=he}Ce();const Ae=new yY(m,F);this.xr=Ae,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){const B=Y.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=Y.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(B){B!==void 0&&(V=B,this.setSize(O,N,!1))},this.getSize=function(B){return B.set(O,N)},this.setSize=function(B,oe,me){if(Ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=B,N=oe,e.width=Math.floor(B*V),e.height=Math.floor(oe*V),me!==!1&&(e.style.width=B+"px",e.style.height=oe+"px"),this.setViewport(0,0,B,oe)},this.getDrawingBufferSize=function(B){return B.set(O*V,N*V).floor()},this.setDrawingBufferSize=function(B,oe,me){O=B,N=oe,V=me,e.width=Math.floor(B*me),e.height=Math.floor(oe*me),this.setViewport(0,0,B,oe)},this.getCurrentViewport=function(B){return B.copy(w)},this.getViewport=function(B){return B.copy(z)},this.setViewport=function(B,oe,me,se){B.isVector4?z.set(B.x,B.y,B.z,B.w):z.set(B,oe,me,se),ee.viewport(w.copy(z).multiplyScalar(V).floor())},this.getScissor=function(B){return B.copy(G)},this.setScissor=function(B,oe,me,se){B.isVector4?G.set(B.x,B.y,B.z,B.w):G.set(B,oe,me,se),ee.scissor(T.copy(G).multiplyScalar(V).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(B){ee.setScissorTest(ne=B)},this.setOpaqueSort=function(B){Z=B},this.setTransparentSort=function(B){j=B},this.getClearColor=function(B){return B.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(B=!0,oe=!0,me=!0){let se=0;B&&(se|=16384),oe&&(se|=256),me&&(se|=1024),F.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Re,!1),e.removeEventListener("webglcontextrestored",De,!1),e.removeEventListener("webglcontextcreationerror",Ve,!1),Me.dispose(),R.dispose(),ge.dispose(),K.dispose(),ce.dispose(),le.dispose(),te.dispose(),Te.dispose(),ve.dispose(),Ae.dispose(),Ae.removeEventListener("sessionstart",Oe),Ae.removeEventListener("sessionend",ke),D&&(D.dispose(),D=null),rt.stop()};function Re(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function De(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1;const B=he.autoReset,oe=ie.enabled,me=ie.autoUpdate,se=ie.needsUpdate,ye=ie.type;Ce(),he.autoReset=B,ie.enabled=oe,ie.autoUpdate=me,ie.needsUpdate=se,ie.type=ye}function Ve(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Xe(B){const oe=B.target;oe.removeEventListener("dispose",Xe),lt(oe)}function lt(B){q(B),ge.remove(B)}function q(B){const oe=ge.get(B).programs;oe!==void 0&&(oe.forEach(function(me){ve.releaseProgram(me)}),B.isShaderMaterial&&ve.releaseShaderCache(B))}this.renderBufferDirect=function(B,oe,me,se,ye,ze){oe===null&&(oe=k);const $e=ye.isMesh&&ye.matrixWorld.determinant()<0,Ye=$2(B,oe,me,se,ye);ee.setMaterial(se,$e);let qe=me.index,ct=1;se.wireframe===!0&&(qe=ae.getWireframeAttribute(me),ct=2);const tt=me.drawRange,nt=me.attributes.position;let It=tt.start*ct,Ln=(tt.start+tt.count)*ct;ze!==null&&(It=Math.max(It,ze.start*ct),Ln=Math.min(Ln,(ze.start+ze.count)*ct)),qe!==null?(It=Math.max(It,0),Ln=Math.min(Ln,qe.count)):nt!=null&&(It=Math.max(It,0),Ln=Math.min(Ln,nt.count));const Yi=Ln-It;if(Yi<0||Yi===1/0)return;te.setup(ye,se,Ye,me,qe);let is,kt=xe;if(qe!==null&&(is=ue.get(qe),kt=Pe,kt.setIndex(is)),ye.isMesh)se.wireframe===!0?(ee.setLineWidth(se.wireframeLinewidth*A()),kt.setMode(1)):kt.setMode(4);else if(ye.isLine){let it=se.linewidth;it===void 0&&(it=1),ee.setLineWidth(it*A()),ye.isLineSegments?kt.setMode(1):ye.isLineLoop?kt.setMode(2):kt.setMode(3)}else ye.isPoints?kt.setMode(0):ye.isSprite&&kt.setMode(4);if(ye.isInstancedMesh)kt.renderInstances(It,Yi,ye.count);else if(me.isInstancedBufferGeometry){const it=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,ad=Math.min(me.instanceCount,it);kt.renderInstances(It,Yi,ad)}else kt.render(It,Yi)},this.compile=function(B,oe){function me(se,ye,ze){se.transparent===!0&&se.side===Eu?(se.side=ci,se.needsUpdate=!0,Jn(se,ye,ze),se.side=Yr,se.needsUpdate=!0,Jn(se,ye,ze),se.side=Eu):Jn(se,ye,ze)}u=R.get(B),u.init(),g.push(u),B.traverseVisible(function(se){se.isLight&&se.layers.test(oe.layers)&&(u.pushLight(se),se.castShadow&&u.pushShadow(se))}),u.setupLights(m.physicallyCorrectLights),B.traverse(function(se){const ye=se.material;if(ye)if(Array.isArray(ye))for(let ze=0;ze<ye.length;ze++){const $e=ye[ze];me($e,B,se)}else me(ye,B,se)}),g.pop(),u=null};let de=null;function we(B){de&&de(B)}function Oe(){rt.stop()}function ke(){rt.start()}const rt=new WT;rt.setAnimationLoop(we),typeof self<"u"&&rt.setContext(self),this.setAnimationLoop=function(B){de=B,Ae.setAnimationLoop(B),B===null?rt.stop():rt.start()},Ae.addEventListener("sessionstart",Oe),Ae.addEventListener("sessionend",ke),this.render=function(B,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p===!0)return;B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Ae.enabled===!0&&Ae.isPresenting===!0&&(Ae.cameraAutoUpdate===!0&&Ae.updateCamera(oe),oe=Ae.getCamera()),B.isScene===!0&&B.onBeforeRender(m,B,oe,_),u=R.get(B,g.length),u.init(),g.push(u),P.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),re.setFromProjectionMatrix(P),M=this.localClippingEnabled,U=I.init(this.clippingPlanes,M,oe),l=Me.get(B,h.length),l.init(),h.push(l),Rt(B,oe,0,m.sortObjects),l.finish(),m.sortObjects===!0&&l.sort(Z,j),U===!0&&I.beginShadows();const me=u.state.shadowsArray;if(ie.render(me,B,oe),U===!0&&I.endShadows(),this.info.autoReset===!0&&this.info.reset(),pe.render(l,B),u.setupLights(m.physicallyCorrectLights),oe.isArrayCamera){const se=oe.cameras;for(let ye=0,ze=se.length;ye<ze;ye++){const $e=se[ye];en(l,B,$e,$e.viewport)}}else en(l,B,oe);_!==null&&(J.updateMultisampleRenderTarget(_),J.updateRenderTargetMipmap(_)),B.isScene===!0&&B.onAfterRender(m,B,oe),te.resetDefaultState(),x=-1,b=null,g.pop(),g.length>0?u=g[g.length-1]:u=null,h.pop(),h.length>0?l=h[h.length-1]:l=null};function Rt(B,oe,me,se){if(B.visible===!1)return;if(B.layers.test(oe.layers)){if(B.isGroup)me=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(oe);else if(B.isLight)u.pushLight(B),B.castShadow&&u.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||re.intersectsSprite(B)){se&&H.setFromMatrixPosition(B.matrixWorld).applyMatrix4(P);const $e=le.update(B),Ye=B.material;Ye.visible&&l.push(B,$e,Ye,me,H.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(B.isSkinnedMesh&&B.skeleton.frame!==he.render.frame&&(B.skeleton.update(),B.skeleton.frame=he.render.frame),!B.frustumCulled||re.intersectsObject(B))){se&&H.setFromMatrixPosition(B.matrixWorld).applyMatrix4(P);const $e=le.update(B),Ye=B.material;if(Array.isArray(Ye)){const qe=$e.groups;for(let ct=0,tt=qe.length;ct<tt;ct++){const nt=qe[ct],It=Ye[nt.materialIndex];It&&It.visible&&l.push(B,$e,It,me,H.z,nt)}}else Ye.visible&&l.push(B,$e,Ye,me,H.z,null)}}const ze=B.children;for(let $e=0,Ye=ze.length;$e<Ye;$e++)Rt(ze[$e],oe,me,se)}function en(B,oe,me,se){const ye=B.opaque,ze=B.transmissive,$e=B.transparent;u.setupLightsView(me),ze.length>0&&ns(ye,oe,me),se&&ee.viewport(w.copy(se)),ye.length>0&&Ct(ye,oe,me),ze.length>0&&Ct(ze,oe,me),$e.length>0&&Ct($e,oe,me),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function ns(B,oe,me){const se=X.isWebGL2;D===null&&(D=new js(1,1,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")?xc:Bs,minFilter:Ns,samples:se&&s===!0?4:0})),m.getDrawingBufferSize(L),se?D.setSize(L.x,L.y):D.setSize(Qh(L.x),Qh(L.y));const ye=m.getRenderTarget();m.setRenderTarget(D),m.clear();const ze=m.toneMapping;m.toneMapping=ur,Ct(B,oe,me),m.toneMapping=ze,J.updateMultisampleRenderTarget(D),J.updateRenderTargetMipmap(D),m.setRenderTarget(ye)}function Ct(B,oe,me){const se=oe.isScene===!0?oe.overrideMaterial:null;for(let ye=0,ze=B.length;ye<ze;ye++){const $e=B[ye],Ye=$e.object,qe=$e.geometry,ct=se===null?$e.material:se,tt=$e.group;Ye.layers.test(me.layers)&&Xi(Ye,oe,me,qe,ct,tt)}}function Xi(B,oe,me,se,ye,ze){B.onBeforeRender(m,oe,me,se,ye,ze),B.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),ye.onBeforeRender(m,oe,me,se,B,ze),ye.transparent===!0&&ye.side===Eu?(ye.side=ci,ye.needsUpdate=!0,m.renderBufferDirect(me,oe,se,ye,B,ze),ye.side=Yr,ye.needsUpdate=!0,m.renderBufferDirect(me,oe,se,ye,B,ze),ye.side=Eu):m.renderBufferDirect(me,oe,se,ye,B,ze),B.onAfterRender(m,oe,me,se,ye,ze)}function Jn(B,oe,me){oe.isScene!==!0&&(oe=k);const se=ge.get(B),ye=u.state.lights,ze=u.state.shadowsArray,$e=ye.state.version,Ye=ve.getParameters(B,ye.state,ze,oe,me),qe=ve.getProgramCacheKey(Ye);let ct=se.programs;se.environment=B.isMeshStandardMaterial?oe.environment:null,se.fog=oe.fog,se.envMap=(B.isMeshStandardMaterial?ce:K).get(B.envMap||se.environment),ct===void 0&&(B.addEventListener("dispose",Xe),ct=new Map,se.programs=ct);let tt=ct.get(qe);if(tt!==void 0){if(se.currentProgram===tt&&se.lightsStateVersion===$e)return $0(B,Ye),tt}else Ye.uniforms=ve.getUniforms(B),B.onBuild(me,Ye,m),B.onBeforeCompile(Ye,m),tt=ve.acquireProgram(Ye,qe),ct.set(qe,tt),se.uniforms=Ye.uniforms;const nt=se.uniforms;(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(nt.clippingPlanes=I.uniform),$0(B,Ye),se.needsLights=V2(B),se.lightsStateVersion=$e,se.needsLights&&(nt.ambientLightColor.value=ye.state.ambient,nt.lightProbe.value=ye.state.probe,nt.directionalLights.value=ye.state.directional,nt.directionalLightShadows.value=ye.state.directionalShadow,nt.spotLights.value=ye.state.spot,nt.spotLightShadows.value=ye.state.spotShadow,nt.rectAreaLights.value=ye.state.rectArea,nt.ltc_1.value=ye.state.rectAreaLTC1,nt.ltc_2.value=ye.state.rectAreaLTC2,nt.pointLights.value=ye.state.point,nt.pointLightShadows.value=ye.state.pointShadow,nt.hemisphereLights.value=ye.state.hemi,nt.directionalShadowMap.value=ye.state.directionalShadowMap,nt.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,nt.spotShadowMap.value=ye.state.spotShadowMap,nt.spotLightMatrix.value=ye.state.spotLightMatrix,nt.spotLightMap.value=ye.state.spotLightMap,nt.pointShadowMap.value=ye.state.pointShadowMap,nt.pointShadowMatrix.value=ye.state.pointShadowMatrix);const It=tt.getUniforms(),Ln=_h.seqWithValue(It.seq,nt);return se.currentProgram=tt,se.uniformsList=Ln,tt}function $0(B,oe){const me=ge.get(B);me.outputEncoding=oe.outputEncoding,me.instancing=oe.instancing,me.skinning=oe.skinning,me.morphTargets=oe.morphTargets,me.morphNormals=oe.morphNormals,me.morphColors=oe.morphColors,me.morphTargetsCount=oe.morphTargetsCount,me.numClippingPlanes=oe.numClippingPlanes,me.numIntersection=oe.numClipIntersection,me.vertexAlphas=oe.vertexAlphas,me.vertexTangents=oe.vertexTangents,me.toneMapping=oe.toneMapping}function $2(B,oe,me,se,ye){oe.isScene!==!0&&(oe=k),J.resetTextureUnits();const ze=oe.fog,$e=se.isMeshStandardMaterial?oe.environment:null,Ye=_===null?m.outputEncoding:_.isXRRenderTarget===!0?_.texture.encoding:zs,qe=(se.isMeshStandardMaterial?ce:K).get(se.envMap||$e),ct=se.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,tt=!!se.normalMap&&!!me.attributes.tangent,nt=!!me.morphAttributes.position,It=!!me.morphAttributes.normal,Ln=!!me.morphAttributes.color,Yi=se.toneMapped?m.toneMapping:ur,is=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,kt=is!==void 0?is.length:0,it=ge.get(se),ad=u.state.lights;if(U===!0&&(M===!0||B!==b)){const Rn=B===b&&se.id===x;I.setState(se,B,Rn)}let Ht=!1;se.version===it.__version?(it.needsLights&&it.lightsStateVersion!==ad.state.version||it.outputEncoding!==Ye||ye.isInstancedMesh&&it.instancing===!1||!ye.isInstancedMesh&&it.instancing===!0||ye.isSkinnedMesh&&it.skinning===!1||!ye.isSkinnedMesh&&it.skinning===!0||it.envMap!==qe||se.fog===!0&&it.fog!==ze||it.numClippingPlanes!==void 0&&(it.numClippingPlanes!==I.numPlanes||it.numIntersection!==I.numIntersection)||it.vertexAlphas!==ct||it.vertexTangents!==tt||it.morphTargets!==nt||it.morphNormals!==It||it.morphColors!==Ln||it.toneMapping!==Yi||X.isWebGL2===!0&&it.morphTargetsCount!==kt)&&(Ht=!0):(Ht=!0,it.__version=se.version);let rs=it.currentProgram;Ht===!0&&(rs=Jn(se,oe,ye));let H0=!1,Qo=!1,od=!1;const cn=rs.getUniforms(),ss=it.uniforms;if(ee.useProgram(rs.program)&&(H0=!0,Qo=!0,od=!0),se.id!==x&&(x=se.id,Qo=!0),H0||b!==B){if(cn.setValue(F,"projectionMatrix",B.projectionMatrix),X.logarithmicDepthBuffer&&cn.setValue(F,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),b!==B&&(b=B,Qo=!0,od=!0),se.isShaderMaterial||se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshStandardMaterial||se.envMap){const Rn=cn.map.cameraPosition;Rn!==void 0&&Rn.setValue(F,H.setFromMatrixPosition(B.matrixWorld))}(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&cn.setValue(F,"isOrthographic",B.isOrthographicCamera===!0),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial||se.isShadowMaterial||ye.isSkinnedMesh)&&cn.setValue(F,"viewMatrix",B.matrixWorldInverse)}if(ye.isSkinnedMesh){cn.setOptional(F,ye,"bindMatrix"),cn.setOptional(F,ye,"bindMatrixInverse");const Rn=ye.skeleton;Rn&&(X.floatVertexTextures?(Rn.boneTexture===null&&Rn.computeBoneTexture(),cn.setValue(F,"boneTexture",Rn.boneTexture,J),cn.setValue(F,"boneTextureSize",Rn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ld=me.morphAttributes;if((ld.position!==void 0||ld.normal!==void 0||ld.color!==void 0&&X.isWebGL2===!0)&&_e.update(ye,me,se,rs),(Qo||it.receiveShadow!==ye.receiveShadow)&&(it.receiveShadow=ye.receiveShadow,cn.setValue(F,"receiveShadow",ye.receiveShadow)),se.isMeshGouraudMaterial&&se.envMap!==null&&(ss.envMap.value=qe,ss.flipEnvMap.value=qe.isCubeTexture&&qe.isRenderTargetTexture===!1?-1:1),Qo&&(cn.setValue(F,"toneMappingExposure",m.toneMappingExposure),it.needsLights&&H2(ss,od),ze&&se.fog===!0&&Ie.refreshFogUniforms(ss,ze),Ie.refreshMaterialUniforms(ss,se,V,N,D),_h.upload(F,it.uniformsList,ss,J)),se.isShaderMaterial&&se.uniformsNeedUpdate===!0&&(_h.upload(F,it.uniformsList,ss,J),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&cn.setValue(F,"center",ye.center),cn.setValue(F,"modelViewMatrix",ye.modelViewMatrix),cn.setValue(F,"normalMatrix",ye.normalMatrix),cn.setValue(F,"modelMatrix",ye.matrixWorld),se.isShaderMaterial||se.isRawShaderMaterial){const Rn=se.uniformsGroups;for(let cd=0,G2=Rn.length;cd<G2;cd++)if(X.isWebGL2){const V0=Rn[cd];Te.update(V0,rs),Te.bind(V0,rs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return rs}function H2(B,oe){B.ambientLightColor.needsUpdate=oe,B.lightProbe.needsUpdate=oe,B.directionalLights.needsUpdate=oe,B.directionalLightShadows.needsUpdate=oe,B.pointLights.needsUpdate=oe,B.pointLightShadows.needsUpdate=oe,B.spotLights.needsUpdate=oe,B.spotLightShadows.needsUpdate=oe,B.rectAreaLights.needsUpdate=oe,B.hemisphereLights.needsUpdate=oe}function V2(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(B,oe,me){ge.get(B.texture).__webglTexture=oe,ge.get(B.depthTexture).__webglTexture=me;const se=ge.get(B);se.__hasExternalTextures=!0,se.__hasExternalTextures&&(se.__autoAllocateDepthBuffer=me===void 0,se.__autoAllocateDepthBuffer||Y.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(B,oe){const me=ge.get(B);me.__webglFramebuffer=oe,me.__useDefaultFramebuffer=oe===void 0},this.setRenderTarget=function(B,oe=0,me=0){_=B,v=oe,y=me;let se=!0,ye=null,ze=!1,$e=!1;if(B){const qe=ge.get(B);qe.__useDefaultFramebuffer!==void 0?(ee.bindFramebuffer(36160,null),se=!1):qe.__webglFramebuffer===void 0?J.setupRenderTarget(B):qe.__hasExternalTextures&&J.rebindTextures(B,ge.get(B.texture).__webglTexture,ge.get(B.depthTexture).__webglTexture);const ct=B.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&($e=!0);const tt=ge.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(ye=tt[oe],ze=!0):X.isWebGL2&&B.samples>0&&J.useMultisampledRTT(B)===!1?ye=ge.get(B).__webglMultisampledFramebuffer:ye=tt,w.copy(B.viewport),T.copy(B.scissor),S=B.scissorTest}else w.copy(z).multiplyScalar(V).floor(),T.copy(G).multiplyScalar(V).floor(),S=ne;if(ee.bindFramebuffer(36160,ye)&&X.drawBuffers&&se&&ee.drawBuffers(B,ye),ee.viewport(w),ee.scissor(T),ee.setScissorTest(S),ze){const qe=ge.get(B.texture);F.framebufferTexture2D(36160,36064,34069+oe,qe.__webglTexture,me)}else if($e){const qe=ge.get(B.texture),ct=oe||0;F.framebufferTextureLayer(36160,36064,qe.__webglTexture,me||0,ct)}x=-1},this.readRenderTargetPixels=function(B,oe,me,se,ye,ze,$e){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=ge.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&$e!==void 0&&(Ye=Ye[$e]),Ye){ee.bindFramebuffer(36160,Ye);try{const qe=B.texture,ct=qe.format,tt=qe.type;if(ct!==si&&$.convert(ct)!==F.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const nt=tt===xc&&(Y.has("EXT_color_buffer_half_float")||X.isWebGL2&&Y.has("EXT_color_buffer_float"));if(tt!==Bs&&$.convert(tt)!==F.getParameter(35738)&&!(tt===Dr&&(X.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float")))&&!nt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=B.width-se&&me>=0&&me<=B.height-ye&&F.readPixels(oe,me,se,ye,$.convert(ct),$.convert(tt),ze)}finally{const qe=_!==null?ge.get(_).__webglFramebuffer:null;ee.bindFramebuffer(36160,qe)}}},this.copyFramebufferToTexture=function(B,oe,me=0){const se=Math.pow(2,-me),ye=Math.floor(oe.image.width*se),ze=Math.floor(oe.image.height*se);J.setTexture2D(oe,0),F.copyTexSubImage2D(3553,me,0,0,B.x,B.y,ye,ze),ee.unbindTexture()},this.copyTextureToTexture=function(B,oe,me,se=0){const ye=oe.image.width,ze=oe.image.height,$e=$.convert(me.format),Ye=$.convert(me.type);J.setTexture2D(me,0),F.pixelStorei(37440,me.flipY),F.pixelStorei(37441,me.premultiplyAlpha),F.pixelStorei(3317,me.unpackAlignment),oe.isDataTexture?F.texSubImage2D(3553,se,B.x,B.y,ye,ze,$e,Ye,oe.image.data):oe.isCompressedTexture?F.compressedTexSubImage2D(3553,se,B.x,B.y,oe.mipmaps[0].width,oe.mipmaps[0].height,$e,oe.mipmaps[0].data):F.texSubImage2D(3553,se,B.x,B.y,$e,Ye,oe.image),se===0&&me.generateMipmaps&&F.generateMipmap(3553),ee.unbindTexture()},this.copyTextureToTexture3D=function(B,oe,me,se,ye=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ze=B.max.x-B.min.x+1,$e=B.max.y-B.min.y+1,Ye=B.max.z-B.min.z+1,qe=$.convert(se.format),ct=$.convert(se.type);let tt;if(se.isData3DTexture)J.setTexture3D(se,0),tt=32879;else if(se.isDataArrayTexture)J.setTexture2DArray(se,0),tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}F.pixelStorei(37440,se.flipY),F.pixelStorei(37441,se.premultiplyAlpha),F.pixelStorei(3317,se.unpackAlignment);const nt=F.getParameter(3314),It=F.getParameter(32878),Ln=F.getParameter(3316),Yi=F.getParameter(3315),is=F.getParameter(32877),kt=me.isCompressedTexture?me.mipmaps[0]:me.image;F.pixelStorei(3314,kt.width),F.pixelStorei(32878,kt.height),F.pixelStorei(3316,B.min.x),F.pixelStorei(3315,B.min.y),F.pixelStorei(32877,B.min.z),me.isDataTexture||me.isData3DTexture?F.texSubImage3D(tt,ye,oe.x,oe.y,oe.z,ze,$e,Ye,qe,ct,kt.data):me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),F.compressedTexSubImage3D(tt,ye,oe.x,oe.y,oe.z,ze,$e,Ye,qe,kt.data)):F.texSubImage3D(tt,ye,oe.x,oe.y,oe.z,ze,$e,Ye,qe,ct,kt),F.pixelStorei(3314,nt),F.pixelStorei(32878,It),F.pixelStorei(3316,Ln),F.pixelStorei(3315,Yi),F.pixelStorei(32877,is),ye===0&&se.generateMipmaps&&F.generateMipmap(tt),ee.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?J.setTextureCube(B,0):B.isData3DTexture?J.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?J.setTexture2DArray(B,0):J.setTexture2D(B,0),ee.unbindTexture()},this.resetState=function(){v=0,y=0,_=null,ee.reset(),te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class wY extends ZT{}wY.prototype.isWebGL1Renderer=!0;class SY extends Ot{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class CY{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Qg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ti()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ti()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ti()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const hn=new Q;class a0{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)hn.fromBufferAttribute(this,t),hn.applyMatrix4(e),this.setXYZ(t,hn.x,hn.y,hn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)hn.fromBufferAttribute(this,t),hn.applyNormalMatrix(e),this.setXYZ(t,hn.x,hn.y,hn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)hn.fromBufferAttribute(this,t),hn.transformDirection(e),this.setXYZ(t,hn.x,hn.y,hn.z);return this}setX(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=lr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=lr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=lr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=lr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Jt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new a0(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Mx=new Q,Ax=new mt,Ox=new mt,TY=new Q,Px=new Ze;class EY extends Tn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ze,this.bindMatrixInverse=new Ze}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new mt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;Ax.fromBufferAttribute(r.attributes.skinIndex,e),Ox.fromBufferAttribute(r.attributes.skinWeight,e),Mx.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const f=Ox.getComponent(s);if(f!==0){const o=Ax.getComponent(s);Px.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(TY.copy(Mx).applyMatrix4(Px),f)}}return t.applyMatrix4(this.bindMatrixInverse)}}class JT extends Ot{constructor(){super(),this.isBone=!0,this.type="Bone"}}class MY extends Yt{constructor(e=null,t=1,i=1,r,s,f,o,a,c=Wt,d=Wt,l,u){super(null,f,o,a,c,d,r,s,l,u),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Lx=new Ze,AY=new Ze;class o0{constructor(e=[],t=[]){this.uuid=Ti(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ze)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ze;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,f=e.length;s<f;s++){const o=e[s]?e[s].matrixWorld:AY;Lx.multiplyMatrices(o,t[s]),Lx.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new o0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=IT(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new MY(t,e,e,si,Dr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let f=t[s];f===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),f=new JT),this.bones.push(f),this.boneInverses.push(new Ze().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const f=t[r];e.bones.push(f.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class Rx extends Jt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Dx=new Ze,Ix=new Ze,Gu=[],OY=new Ze,bl=new Tn;class PY extends Tn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Rx(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,OY)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(bl.geometry=this.geometry,bl.material=this.material,bl.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,Dx),Ix.multiplyMatrices(i,Dx),bl.matrixWorld=Ix,bl.raycast(e,Gu);for(let f=0,o=Gu.length;f<o;f++){const a=Gu[f];a.instanceId=s,a.object=this,t.push(a)}Gu.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Rx(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Zl extends Gn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new He(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kx=new Q,Fx=new Q,Nx=new Ze,Tp=new t0,Wu=new Go;class l0 extends Ot{constructor(e=new Xn,t=new Zl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)kx.fromBufferAttribute(t,r-1),Fx.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=kx.distanceTo(Fx);e.setAttribute("lineDistance",new pn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Wu.copy(i.boundingSphere),Wu.applyMatrix4(r),Wu.radius+=s,e.ray.intersectsSphere(Wu)===!1)return;Nx.copy(r).invert(),Tp.copy(e.ray).applyMatrix4(Nx);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,c=new Q,d=new Q,l=new Q,u=new Q,h=this.isLineSegments?2:1,g=i.index,p=i.attributes.position;if(g!==null){const v=Math.max(0,f.start),y=Math.min(g.count,f.start+f.count);for(let _=v,x=y-1;_<x;_+=h){const b=g.getX(_),w=g.getX(_+1);if(c.fromBufferAttribute(p,b),d.fromBufferAttribute(p,w),Tp.distanceSqToSegment(c,d,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(u);S<e.near||S>e.far||t.push({distance:S,point:l.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,f.start),y=Math.min(p.count,f.start+f.count);for(let _=v,x=y-1;_<x;_+=h){if(c.fromBufferAttribute(p,_),d.fromBufferAttribute(p,_+1),Tp.distanceSqToSegment(c,d,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(u);w<e.near||w>e.far||t.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,f=r.length;s<f;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const Bx=new Q,zx=new Q;class im extends l0{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Bx.fromBufferAttribute(t,r),zx.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Bx.distanceTo(zx);e.setAttribute("lineDistance",new pn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LY extends l0{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Ja extends Gn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const jx=new Ze,rm=new t0,Xu=new Go,Yu=new Q;class xh extends Ot{constructor(e=new Xn,t=new Ja){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Xu.copy(i.boundingSphere),Xu.applyMatrix4(r),Xu.radius+=s,e.ray.intersectsSphere(Xu)===!1)return;jx.copy(r).invert(),rm.copy(e.ray).applyMatrix4(jx);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,c=i.index,l=i.attributes.position;if(c!==null){const u=Math.max(0,f.start),h=Math.min(c.count,f.start+f.count);for(let g=u,m=h;g<m;g++){const p=c.getX(g);Yu.fromBufferAttribute(l,p),Ux(Yu,p,a,r,e,t,this)}}else{const u=Math.max(0,f.start),h=Math.min(l.count,f.start+f.count);for(let g=u,m=h;g<m;g++)Yu.fromBufferAttribute(l,g),Ux(Yu,g,a,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,f=r.length;s<f;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Ux(n,e,t,i,r,s,f){const o=rm.distanceSqToPoint(n);if(o<t){const a=new Q;rm.closestPointToPoint(n,a),a.applyMatrix4(i);const c=r.ray.origin.distanceTo(a);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:a,index:e,face:null,object:f})}}class RY extends Yt{constructor(e,t,i,r,s,f,o,a,c){super(e,t,i,r,s,f,o,a,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class c0 extends Gn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new He(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qv,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ks extends c0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return an(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new He(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new He(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new He(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class DY extends Gn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qv,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Sr(n,e,t){return QT(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Ku(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function QT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function IY(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function $x(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,f=0;f!==i;++s){const o=t[s]*e;for(let a=0;a!==e;++a)r[f++]=n[o+a]}return r}function e2(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let f=s[i];if(f!==void 0)if(Array.isArray(f))do f=s[i],f!==void 0&&(e.push(s.time),t.push.apply(t,f)),s=n[r++];while(s!==void 0);else if(f.toArray!==void 0)do f=s[i],f!==void 0&&(e.push(s.time),f.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do f=s[i],f!==void 0&&(e.push(s.time),t.push(f)),s=n[r++];while(s!==void 0)}class Zc{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let f;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}f=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let a=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===a)break;if(r=s,s=t[--i-1],e>=s)break t}f=i,i=0;break n}break e}for(;i<f;){const o=i+f>>>1;e<t[o]?f=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let f=0;f!==r;++f)t[f]=i[s+f];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kY extends Zc{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:V1,endingEnd:V1}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,f=e+1,o=r[s],a=r[f];if(o===void 0)switch(this.getSettings_().endingStart){case G1:s=e,o=2*t-i;break;case W1:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(a===void 0)switch(this.getSettings_().endingEnd){case G1:f=e,a=2*i-t;break;case W1:f=1,a=i+r[1]-r[0];break;default:f=e-1,a=t}const c=(i-t)*.5,d=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(a-i),this._offsetPrev=s*d,this._offsetNext=f*d}interpolate_(e,t,i,r){const s=this.resultBuffer,f=this.sampleValues,o=this.valueSize,a=e*o,c=a-o,d=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,h=this._weightNext,g=(i-t)/(r-t),m=g*g,p=m*g,v=-u*p+2*u*m-u*g,y=(1+u)*p+(-1.5-2*u)*m+(-.5+u)*g+1,_=(-1-h)*p+(1.5+h)*m+.5*g,x=h*p-h*m;for(let b=0;b!==o;++b)s[b]=v*f[d+b]+y*f[c+b]+_*f[a+b]+x*f[l+b];return s}}class FY extends Zc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,f=this.sampleValues,o=this.valueSize,a=e*o,c=a-o,d=(i-t)/(r-t),l=1-d;for(let u=0;u!==o;++u)s[u]=f[c+u]*l+f[a+u]*d;return s}}class NY extends Zc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Wi{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ku(t,this.TimeBufferType),this.values=Ku(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ku(e.times,Array),values:Ku(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new NY(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new FY(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kY(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case bc:t=this.InterpolantFactoryMethodDiscrete;break;case Mo:t=this.InterpolantFactoryMethodLinear;break;case Qd:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bc;case this.InterpolantFactoryMethodLinear:return Mo;case this.InterpolantFactoryMethodSmooth:return Qd}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,f=r-1;for(;s!==r&&i[s]<e;)++s;for(;f!==-1&&i[f]>t;)--f;if(++f,s!==0||f!==r){s>=f&&(f=Math.max(f,1),s=f-1);const o=this.getValueSize();this.times=Sr(i,s,f),this.values=Sr(this.values,s*o,f*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let f=null;for(let o=0;o!==s;o++){const a=i[o];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;break}if(f!==null&&f>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,f),e=!1;break}f=a}if(r!==void 0&&QT(r))for(let o=0,a=r.length;o!==a;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=Sr(this.times),t=Sr(this.values),i=this.getValueSize(),r=this.getInterpolation()===Qd,s=e.length-1;let f=1;for(let o=1;o<s;++o){let a=!1;const c=e[o],d=e[o+1];if(c!==d&&(o!==1||c!==e[0]))if(r)a=!0;else{const l=o*i,u=l-i,h=l+i;for(let g=0;g!==i;++g){const m=t[l+g];if(m!==t[u+g]||m!==t[h+g]){a=!0;break}}}if(a){if(o!==f){e[f]=e[o];const l=o*i,u=f*i;for(let h=0;h!==i;++h)t[u+h]=t[l+h]}++f}}if(s>0){e[f]=e[s];for(let o=s*i,a=f*i,c=0;c!==i;++c)t[a+c]=t[o+c];++f}return f!==e.length?(this.times=Sr(e,0,f),this.values=Sr(t,0,f*i)):(this.times=e,this.values=t),this}clone(){const e=Sr(this.times,0),t=Sr(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Wi.prototype.TimeBufferType=Float32Array;Wi.prototype.ValueBufferType=Float32Array;Wi.prototype.DefaultInterpolation=Mo;class Xo extends Wi{}Xo.prototype.ValueTypeName="bool";Xo.prototype.ValueBufferType=Array;Xo.prototype.DefaultInterpolation=bc;Xo.prototype.InterpolantFactoryMethodLinear=void 0;Xo.prototype.InterpolantFactoryMethodSmooth=void 0;class t2 extends Wi{}t2.prototype.ValueTypeName="color";class Tc extends Wi{}Tc.prototype.ValueTypeName="number";class BY extends Zc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,f=this.sampleValues,o=this.valueSize,a=(i-t)/(r-t);let c=e*o;for(let d=c+o;c!==d;c+=4)Gi.slerpFlat(s,0,f,c-o,f,c,a);return s}}class $s extends Wi{InterpolantFactoryMethodLinear(e){return new BY(this.times,this.values,this.getValueSize(),e)}}$s.prototype.ValueTypeName="quaternion";$s.prototype.DefaultInterpolation=Mo;$s.prototype.InterpolantFactoryMethodSmooth=void 0;class Yo extends Wi{}Yo.prototype.ValueTypeName="string";Yo.prototype.ValueBufferType=Array;Yo.prototype.DefaultInterpolation=bc;Yo.prototype.InterpolantFactoryMethodLinear=void 0;Yo.prototype.InterpolantFactoryMethodSmooth=void 0;class Ec extends Wi{}Ec.prototype.ValueTypeName="vector";class zY{constructor(e,t=-1,i,r=rH){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ti(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let f=0,o=i.length;f!==o;++f)t.push(UY(i[f]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,f=i.length;s!==f;++s)t.push(Wi.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,f=[];for(let o=0;o<s;o++){let a=[],c=[];a.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const d=IY(a);a=$x(a,1,d),c=$x(c,1,d),!r&&a[0]===0&&(a.push(s),c.push(c[0])),f.push(new Tc(".morphTargetInfluences["+t[o].name+"]",a,c).scale(1/i))}return new this(e,-1,f)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,a=e.length;o<a;o++){const c=e[o],d=c.name.match(s);if(d&&d.length>1){const l=d[1];let u=r[l];u||(r[l]=u=[]),u.push(c)}}const f=[];for(const o in r)f.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return f}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(l,u,h,g,m){if(h.length!==0){const p=[],v=[];e2(h,p,v,g),p.length!==0&&m.push(new l(u,p,v))}},r=[],s=e.name||"default",f=e.fps||30,o=e.blendMode;let a=e.length||-1;const c=e.hierarchy||[];for(let l=0;l<c.length;l++){const u=c[l].keys;if(!(!u||u.length===0))if(u[0].morphTargets){const h={};let g;for(g=0;g<u.length;g++)if(u[g].morphTargets)for(let m=0;m<u[g].morphTargets.length;m++)h[u[g].morphTargets[m]]=-1;for(const m in h){const p=[],v=[];for(let y=0;y!==u[g].morphTargets.length;++y){const _=u[g];p.push(_.time),v.push(_.morphTarget===m?1:0)}r.push(new Tc(".morphTargetInfluence["+m+"]",p,v))}a=h.length*f}else{const h=".bones["+t[l].name+"]";i(Ec,h+".position",u,"pos",r),i($s,h+".quaternion",u,"rot",r),i(Ec,h+".scale",u,"scl",r)}}return r.length===0?null:new this(s,a,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function jY(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tc;case"vector":case"vector2":case"vector3":case"vector4":return Ec;case"color":return t2;case"quaternion":return $s;case"bool":case"boolean":return Xo;case"string":return Yo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function UY(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=jY(n.type);if(n.times===void 0){const t=[],i=[];e2(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Oo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $Y{constructor(e,t,i){const r=this;let s=!1,f=0,o=0,a;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){o++,s===!1&&r.onStart!==void 0&&r.onStart(d,f,o),s=!0},this.itemEnd=function(d){f++,r.onProgress!==void 0&&r.onProgress(d,f,o),f===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return a?a(d):d},this.setURLModifier=function(d){return a=d,this},this.addHandler=function(d,l){return c.push(d,l),this},this.removeHandler=function(d){const l=c.indexOf(d);return l!==-1&&c.splice(l,2),this},this.getHandler=function(d){for(let l=0,u=c.length;l<u;l+=2){const h=c[l],g=c[l+1];if(h.global&&(h.lastIndex=0),h.test(d))return g}return null}}}const HY=new $Y;class qs{constructor(e){this.manager=e!==void 0?e:HY,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const er={};class VY extends Error{constructor(e,t){super(e),this.response=t}}class Mc extends qs{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Oo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(er[e]!==void 0){er[e].push({onLoad:t,onProgress:i,onError:r});return}er[e]=[],er[e].push({onLoad:t,onProgress:i,onError:r});const f=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(f).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=er[e],l=c.body.getReader(),u=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),h=u?parseInt(u):0,g=h!==0;let m=0;const p=new ReadableStream({start(v){y();function y(){l.read().then(({done:_,value:x})=>{if(_)v.close();else{m+=x.byteLength;const b=new ProgressEvent("progress",{lengthComputable:g,loaded:m,total:h});for(let w=0,T=d.length;w<T;w++){const S=d[w];S.onProgress&&S.onProgress(b)}v.enqueue(x),y()}})}}});return new Response(p)}else throw new VY(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(a){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return c.json();default:if(o===void 0)return c.text();{const l=/charset="?([^;"\s]*)"?/i.exec(o),u=l&&l[1]?l[1].toLowerCase():void 0,h=new TextDecoder(u);return c.arrayBuffer().then(g=>h.decode(g))}}}).then(c=>{Oo.add(e,c);const d=er[e];delete er[e];for(let l=0,u=d.length;l<u;l++){const h=d[l];h.onLoad&&h.onLoad(c)}}).catch(c=>{const d=er[e];if(d===void 0)throw this.manager.itemError(e),c;delete er[e];for(let l=0,u=d.length;l<u;l++){const h=d[l];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class GY extends qs{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,f=Oo.get(e);if(f!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(f),s.manager.itemEnd(e)},0),f;const o=Cc("img");function a(){d(),Oo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(l){d(),r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){o.removeEventListener("load",a,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class WY extends qs{constructor(e){super(e)}load(e,t,i,r){const s=new Yt,f=new GY(this.manager);return f.setCrossOrigin(this.crossOrigin),f.setPath(this.path),f.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Kf extends Ot{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new He(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const Ep=new Ze,Hx=new Q,Vx=new Q;class u0{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ue(512,512),this.map=null,this.mapPass=null,this.matrix=new Ze,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new n0,this._frameExtents=new Ue(1,1),this._viewportCount=1,this._viewports=[new mt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Hx.setFromMatrixPosition(e.matrixWorld),t.position.copy(Hx),Vx.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Vx),t.updateMatrixWorld(),Ep.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ep),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Ep)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XY extends u0{constructor(){super(new gn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Sc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class YY extends Kf{constructor(e,t,i=0,r=Math.PI/3,s=0,f=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.target=new Ot,this.distance=i,this.angle=r,this.penumbra=s,this.decay=f,this.map=null,this.shadow=new XY}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Gx=new Ze,wl=new Q,Mp=new Q;class KY extends u0{constructor(){super(new gn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ue(4,2),this._viewportCount=6,this._viewports=[new mt(2,1,1,1),new mt(0,1,1,1),new mt(3,1,1,1),new mt(1,1,1,1),new mt(3,0,1,1),new mt(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),wl.setFromMatrixPosition(e.matrixWorld),i.position.copy(wl),Mp.copy(i.position),Mp.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Mp),i.updateMatrixWorld(),r.makeTranslation(-wl.x,-wl.y,-wl.z),Gx.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gx)}}class n2 extends Kf{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new KY}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qY extends u0{constructor(){super(new r0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ZY extends Kf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ot.DefaultUp),this.updateMatrix(),this.target=new Ot,this.shadow=new qY}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class JY extends Kf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ls{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class QY extends qs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,f=Oo.get(e);if(f!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(f),s.manager.itemEnd(e)},0),f;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(a){Oo.add(e,a),t&&t(a),s.manager.itemEnd(e)}).catch(function(a){r&&r(a),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}const h0="\\[\\]\\.:\\/",eK=new RegExp("["+h0+"]","g"),f0="[^"+h0+"]",tK="[^"+h0.replace("\\.","")+"]",nK=/((?:WC+[\/:])*)/.source.replace("WC",f0),iK=/(WCOD+)?/.source.replace("WCOD",tK),rK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",f0),sK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",f0),aK=new RegExp("^"+nK+iK+rK+sK+"$"),oK=["material","materials","bones","map"];class lK{constructor(e,t,i){const r=i||ft.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ft{constructor(e,t,i){this.path=t,this.parsedPath=i||ft.parseTrackName(t),this.node=ft.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ft.Composite(e,t,i):new ft(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(eK,"")}static parseTrackName(e){const t=aK.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);oK.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let f=0;f<s.length;f++){const o=s[f];if(o.name===t||o.uuid===t)return o;const a=i(o.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=ft.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const f=e[r];if(f===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}a=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=s}else f.fromArray!==void 0&&f.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(a=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ft.Composite=lK;ft.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ft.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ft.prototype.GetterByBindingType=[ft.prototype._getValue_direct,ft.prototype._getValue_array,ft.prototype._getValue_arrayElement,ft.prototype._getValue_toArray];ft.prototype.SetterByBindingTypeAndVersioning=[[ft.prototype._setValue_direct,ft.prototype._setValue_direct_setNeedsUpdate,ft.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ft.prototype._setValue_array,ft.prototype._setValue_array_setNeedsUpdate,ft.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ft.prototype._setValue_arrayElement,ft.prototype._setValue_arrayElement_setNeedsUpdate,ft.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ft.prototype._setValue_fromArray,ft.prototype._setValue_fromArray_setNeedsUpdate,ft.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Wx{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(an(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Zv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Zv);const Xx={type:"change"},Ap={type:"start"},Yx={type:"end"};class cK extends Ys{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Q,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ra.ROTATE,MIDDLE:ra.DOLLY,RIGHT:ra.PAN},this.touches={ONE:sa.ROTATE,TWO:sa.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function($){$.addEventListener("keydown",Me),this._domElementKeyEvents=$},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Xx),i.update(),s=r.NONE},this.update=function(){const $=new Q,te=new Gi().setFromUnitVectors(e.up,new Q(0,1,0)),Te=te.clone().invert(),Ce=new Q,Ae=new Gi,Re=2*Math.PI;return function(){const Ve=i.object.position;$.copy(Ve).sub(i.target),$.applyQuaternion(te),o.setFromVector3($),i.autoRotate&&s===r.NONE&&O(T()),i.enableDamping?(o.theta+=a.theta*i.dampingFactor,o.phi+=a.phi*i.dampingFactor):(o.theta+=a.theta,o.phi+=a.phi);let Xe=i.minAzimuthAngle,lt=i.maxAzimuthAngle;return isFinite(Xe)&&isFinite(lt)&&(Xe<-Math.PI?Xe+=Re:Xe>Math.PI&&(Xe-=Re),lt<-Math.PI?lt+=Re:lt>Math.PI&&(lt-=Re),Xe<=lt?o.theta=Math.max(Xe,Math.min(lt,o.theta)):o.theta=o.theta>(Xe+lt)/2?Math.max(Xe,o.theta):Math.min(lt,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=c,o.radius=Math.max(i.minDistance,Math.min(i.maxDistance,o.radius)),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),$.setFromSpherical(o),$.applyQuaternion(Te),Ve.copy(i.target).add($),i.object.lookAt(i.target),i.enableDamping===!0?(a.theta*=1-i.dampingFactor,a.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(a.set(0,0,0),d.set(0,0,0)),c=1,l||Ce.distanceToSquared(i.object.position)>f||8*(1-Ae.dot(i.object.quaternion))>f?(i.dispatchEvent(Xx),Ce.copy(i.object.position),Ae.copy(i.object.quaternion),l=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ie),i.domElement.removeEventListener("pointerdown",K),i.domElement.removeEventListener("pointercancel",ae),i.domElement.removeEventListener("wheel",Ie),i.domElement.removeEventListener("pointermove",ce),i.domElement.removeEventListener("pointerup",ue),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Me)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const f=1e-6,o=new Wx,a=new Wx;let c=1;const d=new Q;let l=!1;const u=new Ue,h=new Ue,g=new Ue,m=new Ue,p=new Ue,v=new Ue,y=new Ue,_=new Ue,x=new Ue,b=[],w={};function T(){return 2*Math.PI/60/60*i.autoRotateSpeed}function S(){return Math.pow(.95,i.zoomSpeed)}function O($){a.theta-=$}function N($){a.phi-=$}const V=function(){const $=new Q;return function(Te,Ce){$.setFromMatrixColumn(Ce,0),$.multiplyScalar(-Te),d.add($)}}(),Z=function(){const $=new Q;return function(Te,Ce){i.screenSpacePanning===!0?$.setFromMatrixColumn(Ce,1):($.setFromMatrixColumn(Ce,0),$.crossVectors(i.object.up,$)),$.multiplyScalar(Te),d.add($)}}(),j=function(){const $=new Q;return function(Te,Ce){const Ae=i.domElement;if(i.object.isPerspectiveCamera){const Re=i.object.position;$.copy(Re).sub(i.target);let De=$.length();De*=Math.tan(i.object.fov/2*Math.PI/180),V(2*Te*De/Ae.clientHeight,i.object.matrix),Z(2*Ce*De/Ae.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(V(Te*(i.object.right-i.object.left)/i.object.zoom/Ae.clientWidth,i.object.matrix),Z(Ce*(i.object.top-i.object.bottom)/i.object.zoom/Ae.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function z($){i.object.isPerspectiveCamera?c/=$:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*$)),i.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G($){i.object.isPerspectiveCamera?c*=$:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/$)),i.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ne($){u.set($.clientX,$.clientY)}function re($){y.set($.clientX,$.clientY)}function U($){m.set($.clientX,$.clientY)}function M($){h.set($.clientX,$.clientY),g.subVectors(h,u).multiplyScalar(i.rotateSpeed);const te=i.domElement;O(2*Math.PI*g.x/te.clientHeight),N(2*Math.PI*g.y/te.clientHeight),u.copy(h),i.update()}function D($){_.set($.clientX,$.clientY),x.subVectors(_,y),x.y>0?z(S()):x.y<0&&G(S()),y.copy(_),i.update()}function P($){p.set($.clientX,$.clientY),v.subVectors(p,m).multiplyScalar(i.panSpeed),j(v.x,v.y),m.copy(p),i.update()}function L($){$.deltaY<0?G(S()):$.deltaY>0&&z(S()),i.update()}function H($){let te=!1;switch($.code){case i.keys.UP:$.ctrlKey||$.metaKey||$.shiftKey?N(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(0,i.keyPanSpeed),te=!0;break;case i.keys.BOTTOM:$.ctrlKey||$.metaKey||$.shiftKey?N(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(0,-i.keyPanSpeed),te=!0;break;case i.keys.LEFT:$.ctrlKey||$.metaKey||$.shiftKey?O(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(i.keyPanSpeed,0),te=!0;break;case i.keys.RIGHT:$.ctrlKey||$.metaKey||$.shiftKey?O(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(-i.keyPanSpeed,0),te=!0;break}te&&($.preventDefault(),i.update())}function k(){if(b.length===1)u.set(b[0].pageX,b[0].pageY);else{const $=.5*(b[0].pageX+b[1].pageX),te=.5*(b[0].pageY+b[1].pageY);u.set($,te)}}function A(){if(b.length===1)m.set(b[0].pageX,b[0].pageY);else{const $=.5*(b[0].pageX+b[1].pageX),te=.5*(b[0].pageY+b[1].pageY);m.set($,te)}}function F(){const $=b[0].pageX-b[1].pageX,te=b[0].pageY-b[1].pageY,Te=Math.sqrt($*$+te*te);y.set(0,Te)}function W(){i.enableZoom&&F(),i.enablePan&&A()}function Y(){i.enableZoom&&F(),i.enableRotate&&k()}function X($){if(b.length==1)h.set($.pageX,$.pageY);else{const Te=Pe($),Ce=.5*($.pageX+Te.x),Ae=.5*($.pageY+Te.y);h.set(Ce,Ae)}g.subVectors(h,u).multiplyScalar(i.rotateSpeed);const te=i.domElement;O(2*Math.PI*g.x/te.clientHeight),N(2*Math.PI*g.y/te.clientHeight),u.copy(h)}function ee($){if(b.length===1)p.set($.pageX,$.pageY);else{const te=Pe($),Te=.5*($.pageX+te.x),Ce=.5*($.pageY+te.y);p.set(Te,Ce)}v.subVectors(p,m).multiplyScalar(i.panSpeed),j(v.x,v.y),m.copy(p)}function he($){const te=Pe($),Te=$.pageX-te.x,Ce=$.pageY-te.y,Ae=Math.sqrt(Te*Te+Ce*Ce);_.set(0,Ae),x.set(0,Math.pow(_.y/y.y,i.zoomSpeed)),z(x.y),y.copy(_)}function ge($){i.enableZoom&&he($),i.enablePan&&ee($)}function J($){i.enableZoom&&he($),i.enableRotate&&X($)}function K($){i.enabled!==!1&&(b.length===0&&(i.domElement.setPointerCapture($.pointerId),i.domElement.addEventListener("pointermove",ce),i.domElement.addEventListener("pointerup",ue)),pe($),$.pointerType==="touch"?R($):le($))}function ce($){i.enabled!==!1&&($.pointerType==="touch"?I($):ve($))}function ue($){_e($),b.length===0&&(i.domElement.releasePointerCapture($.pointerId),i.domElement.removeEventListener("pointermove",ce),i.domElement.removeEventListener("pointerup",ue)),i.dispatchEvent(Yx),s=r.NONE}function ae($){_e($)}function le($){let te;switch($.button){case 0:te=i.mouseButtons.LEFT;break;case 1:te=i.mouseButtons.MIDDLE;break;case 2:te=i.mouseButtons.RIGHT;break;default:te=-1}switch(te){case ra.DOLLY:if(i.enableZoom===!1)return;re($),s=r.DOLLY;break;case ra.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enablePan===!1)return;U($),s=r.PAN}else{if(i.enableRotate===!1)return;ne($),s=r.ROTATE}break;case ra.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enableRotate===!1)return;ne($),s=r.ROTATE}else{if(i.enablePan===!1)return;U($),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Ap)}function ve($){switch(s){case r.ROTATE:if(i.enableRotate===!1)return;M($);break;case r.DOLLY:if(i.enableZoom===!1)return;D($);break;case r.PAN:if(i.enablePan===!1)return;P($);break}}function Ie($){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||($.preventDefault(),i.dispatchEvent(Ap),L($),i.dispatchEvent(Yx))}function Me($){i.enabled===!1||i.enablePan===!1||H($)}function R($){switch(xe($),b.length){case 1:switch(i.touches.ONE){case sa.ROTATE:if(i.enableRotate===!1)return;k(),s=r.TOUCH_ROTATE;break;case sa.PAN:if(i.enablePan===!1)return;A(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case sa.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;W(),s=r.TOUCH_DOLLY_PAN;break;case sa.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Y(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Ap)}function I($){switch(xe($),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;X($),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;ee($),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ge($),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;J($),i.update();break;default:s=r.NONE}}function ie($){i.enabled!==!1&&$.preventDefault()}function pe($){b.push($)}function _e($){delete w[$.pointerId];for(let te=0;te<b.length;te++)if(b[te].pointerId==$.pointerId){b.splice(te,1);return}}function xe($){let te=w[$.pointerId];te===void 0&&(te=new Ue,w[$.pointerId]=te),te.set($.pageX,$.pageY)}function Pe($){const te=$.pointerId===b[0].pointerId?b[1]:b[0];return w[te.pointerId]}i.domElement.addEventListener("contextmenu",ie),i.domElement.addEventListener("pointerdown",K),i.domElement.addEventListener("pointercancel",ae),i.domElement.addEventListener("wheel",Ie,{passive:!1}),this.update()}}var ms=(n=>(n[n.CREATED=0]="CREATED",n[n.MOUNTED=1]="MOUNTED",n[n.BEFORE_UPDATE=2]="BEFORE_UPDATE",n[n.UPDATED=3]="UPDATED",n[n.BEFORE_DESTROY=4]="BEFORE_DESTROY",n[n.DESTROYED=5]="DESTROYED",n))(ms||{}),qf=(n=>(n[n.RENDER=0]="RENDER",n[n.ADD=1]="ADD",n))(qf||{});class uK{constructor(e){Be(this,"el");Be(this,"renderer");Be(this,"state");Be(this,"listeners");Be(this,"scene",new SY);Be(this,"lights");Be(this,"camera");Be(this,"meshes");Be(this,"textures");Be(this,"canvases");Be(this,"loaders");Be(this,"plugins");Be(this,"controls");Be(this,"emit",(e,...t)=>{e===qf.RENDER&&this.render()});Be(this,"lifeCycleCallbacks",new Map);this.init(e)}init(e){this.initState(e),this.initLights(),this.initCamera()}initState(e){this.state=new Proxy(e,{})}initLights(){const e=new n2(16777215);e.position.set(400,200,300),this.scene.add(e);let t=new JY(10066329);this.scene.add(t)}initCamera(){this.camera=new gn(45,1,1,2e4),this.camera.position.set(0,0,200),this.camera.lookAt(this.scene.position)}addLoaders(e){return this.loaders=e.map(t=>new t(this.state,this.emit).init()),this}addPlugins(){return this}addControls(){return this}onCreated(e){return this.lifeCycleCallbacks.set(ms.CREATED,e),this}onMounted(e){return this.lifeCycleCallbacks.set(ms.MOUNTED,e),this}onBeforeUpdate(e){return this.lifeCycleCallbacks.set(ms.BEFORE_UPDATE,e),this}onUpdated(e){return this.lifeCycleCallbacks.set(ms.UPDATED,e),this}onBeforeDestroy(e){return this.lifeCycleCallbacks.set(ms.BEFORE_DESTROY,e),this}onDestroyed(e){return this.lifeCycleCallbacks.set(ms.DESTROYED,e),this}async load(e,t){const i=this.loaders.find(f=>f.format===e.format),{meshes:r,meshTextures:s}=await i.load(e,this.scene,t);return this.render(),{meshes:r,meshTextures:s}}mount(e,{width:t,height:i}){typeof e=="string"?this.el=document.getElementById(e):this.el=e,this.renderer=new ZT({canvas:this.el,antialias:!0}),this.renderer.setSize(t,i),this.renderer.setClearColor("#f6f6f6",1),new cK(this.camera,this.renderer.domElement).addEventListener("change",this.render.bind(this)),this.render()}render(){this.renderer.render(this.scene,this.camera)}destroy(){}}const Op=new WeakMap;class hK extends qs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Mc(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,f=>{this.decodeDracoFile(f,t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){const i=JSON.stringify(t);if(Op.has(e)){const a=Op.get(e);if(a.key===i)return a.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,f=e.byteLength,o=this._getWorker(s,f).then(a=>(r=a,new Promise((c,d)=>{r._callbacks[s]={resolve:c,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Op.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new Xn;e.index&&t.setIndex(new Jt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,f=r.array,o=r.itemSize;t.setAttribute(s,new Jt(f,o))}return t}_loadLibrary(e,t){const i=new Mc(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=fK.toString(),f=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([f]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const f=s.data;switch(f.type){case"decode":r._callbacks[f.id].resolve(f);break;case"error":r._callbacks[f.id].reject(f);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+f.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function fK(){let n,e;onmessage=function(f){const o=f.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(l){d({draco:l})},DracoDecoderModule(n)});break;case"decode":const a=o.buffer,c=o.taskConfig;e.then(d=>{const l=d.draco,u=new l.Decoder,h=new l.DecoderBuffer;h.Init(new Int8Array(a),a.byteLength);try{const g=t(l,u,h,c),m=g.attributes.map(p=>p.array.buffer);g.index&&m.push(g.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:g},m)}catch(g){console.error(g),self.postMessage({type:"error",id:o.id,error:g.message})}finally{l.destroy(h),l.destroy(u)}});break}};function t(f,o,a,c){const d=c.attributeIDs,l=c.attributeTypes;let u,h;const g=o.GetEncodedGeometryType(a);if(g===f.TRIANGULAR_MESH)u=new f.Mesh,h=o.DecodeBufferToMesh(a,u);else if(g===f.POINT_CLOUD)u=new f.PointCloud,h=o.DecodeBufferToPointCloud(a,u);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!h.ok()||u.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const m={index:null,attributes:[]};for(const p in d){const v=self[l[p]];let y,_;if(c.useUniqueIDs)_=d[p],y=o.GetAttributeByUniqueId(u,_);else{if(_=o.GetAttributeId(u,f[d[p]]),_===-1)continue;y=o.GetAttribute(u,_)}m.attributes.push(r(f,o,u,p,v,y))}return g===f.TRIANGULAR_MESH&&(m.index=i(f,o,u)),f.destroy(u),m}function i(f,o,a){const d=a.num_faces()*3,l=d*4,u=f._malloc(l);o.GetTrianglesUInt32Array(a,l,u);const h=new Uint32Array(f.HEAPF32.buffer,u,d).slice();return f._free(u),{array:h,itemSize:1}}function r(f,o,a,c,d,l){const u=l.num_components(),g=a.num_points()*u,m=g*d.BYTES_PER_ELEMENT,p=s(f,d),v=f._malloc(m);o.GetAttributeDataArrayForAllPoints(a,l,p,m,v);const y=new d(f.HEAPF32.buffer,v,g).slice();return f._free(v),{name:c,array:y,itemSize:u}}function s(f,o){switch(o){case Float32Array:return f.DT_FLOAT32;case Int8Array:return f.DT_INT8;case Int16Array:return f.DT_INT16;case Int32Array:return f.DT_INT32;case Uint8Array:return f.DT_UINT8;case Uint16Array:return f.DT_UINT16;case Uint32Array:return f.DT_UINT32}}}class dK extends qs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new yK(t)}),this.register(function(t){return new TK(t)}),this.register(function(t){return new EK(t)}),this.register(function(t){return new xK(t)}),this.register(function(t){return new bK(t)}),this.register(function(t){return new wK(t)}),this.register(function(t){return new SK(t)}),this.register(function(t){return new vK(t)}),this.register(function(t){return new CK(t)}),this.register(function(t){return new _K(t)}),this.register(function(t){return new gK(t)}),this.register(function(t){return new MK(t)}),this.register(function(t){return new AK(t)})}load(e,t,i,r){const s=this;let f;this.resourcePath!==""?f=this.resourcePath:this.path!==""?f=this.path:f=Ls.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},a=new Mc(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{s.parse(c,f,function(d){t(d),s.manager.itemEnd(e)},o)}catch(d){o(d)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const f={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ls.decodeText(new Uint8Array(e,0,4))===i2){try{f[at.KHR_BINARY_GLTF]=new OK(e)}catch(d){r&&r(d);return}s=JSON.parse(f[at.KHR_BINARY_GLTF].content)}else s=JSON.parse(Ls.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const a=new $K(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](a);o[d.name]=d,f[d.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const d=s.extensionsUsed[c],l=s.extensionsRequired||[];switch(d){case at.KHR_MATERIALS_UNLIT:f[d]=new mK;break;case at.KHR_DRACO_MESH_COMPRESSION:f[d]=new PK(s,this.dracoLoader);break;case at.KHR_TEXTURE_TRANSFORM:f[d]=new LK;break;case at.KHR_MESH_QUANTIZATION:f[d]=new RK;break;default:l.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}a.setExtensions(f),a.setPlugins(o),a.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function pK(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const at={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gK{constructor(e){this.parser=e,this.name=at.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new He(16777215);a.color!==void 0&&d.fromArray(a.color);const l=a.range!==void 0?a.range:0;switch(a.type){case"directional":c=new ZY(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new n2(d),c.distance=l;break;case"spot":c=new YY(d),c.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,c.angle=a.spot.outerConeAngle,c.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return c.position.set(0,0,0),c.decay=2,Ar(c,a),a.intensity!==void 0&&(c.intensity=a.intensity),c.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(a){return i._getNodeRef(t.cache,o,a)})}}class mK{constructor(){this.name=at.KHR_MATERIALS_UNLIT}getMaterialType(){return Cs}extendParams(e,t,i){const r=[];e.color=new He(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const f=s.baseColorFactor;e.color.fromArray(f),e.opacity=f[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,ht))}return Promise.all(r)}}class vK{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class yK{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],f=r.extensions[this.name];if(f.clearcoatFactor!==void 0&&(t.clearcoat=f.clearcoatFactor),f.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",f.clearcoatTexture)),f.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=f.clearcoatRoughnessFactor),f.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",f.clearcoatRoughnessTexture)),f.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",f.clearcoatNormalTexture)),f.clearcoatNormalTexture.scale!==void 0)){const o=f.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ue(o,o)}return Promise.all(s)}}class _K{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],f=r.extensions[this.name];return f.iridescenceFactor!==void 0&&(t.iridescence=f.iridescenceFactor),f.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",f.iridescenceTexture)),f.iridescenceIor!==void 0&&(t.iridescenceIOR=f.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),f.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=f.iridescenceThicknessMinimum),f.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=f.iridescenceThicknessMaximum),f.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",f.iridescenceThicknessTexture)),Promise.all(s)}}class xK{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new He(0,0,0),t.sheenRoughness=0,t.sheen=1;const f=r.extensions[this.name];return f.sheenColorFactor!==void 0&&t.sheenColor.fromArray(f.sheenColorFactor),f.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=f.sheenRoughnessFactor),f.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",f.sheenColorTexture,ht)),f.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",f.sheenRoughnessTexture)),Promise.all(s)}}class bK{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],f=r.extensions[this.name];return f.transmissionFactor!==void 0&&(t.transmission=f.transmissionFactor),f.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",f.transmissionTexture)),Promise.all(s)}}class wK{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],f=r.extensions[this.name];t.thickness=f.thicknessFactor!==void 0?f.thicknessFactor:0,f.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",f.thicknessTexture)),t.attenuationDistance=f.attenuationDistance||1/0;const o=f.attenuationColor||[1,1,1];return t.attenuationColor=new He(o[0],o[1],o[2]),Promise.all(s)}}class SK{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class CK{constructor(e){this.parser=e,this.name=at.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ks}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],f=r.extensions[this.name];t.specularIntensity=f.specularFactor!==void 0?f.specularFactor:1,f.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",f.specularTexture));const o=f.specularColorFactor||[1,1,1];return t.specularColor=new He(o[0],o[1],o[2]),f.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",f.specularColorTexture,ht)),Promise.all(s)}}class TK{constructor(e){this.parser=e,this.name=at.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],f=t.options.ktx2Loader;if(!f){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,f)}}class EK{constructor(e){this.parser=e,this.name=at.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const f=s.extensions[t],o=r.images[f.source];let a=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(a=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,f.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class MK{constructor(e){this.name=at.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),f=this.parser.options.meshoptDecoder;if(!f||!f.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const a=r.byteOffset||0,c=r.byteLength||0,d=r.count,l=r.byteStride,u=new Uint8Array(o,a,c);return f.decodeGltfBufferAsync?f.decodeGltfBufferAsync(d,l,u,r.mode,r.filter).then(function(h){return h.buffer}):f.ready.then(function(){const h=new ArrayBuffer(d*l);return f.decodeGltfBuffer(new Uint8Array(h),d,l,u,r.mode,r.filter),h})})}else return null}}class AK{constructor(e){this.name=at.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==ti.TRIANGLES&&c.mode!==ti.TRIANGLE_STRIP&&c.mode!==ti.TRIANGLE_FAN&&c.mode!==void 0)return null;const f=i.extensions[this.name].attributes,o=[],a={};for(const c in f)o.push(this.parser.getDependency("accessor",f[c]).then(d=>(a[c]=d,a[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const d=c.pop(),l=d.isGroup?d.children:[d],u=c[0].count,h=[];for(const g of l){const m=new Ze,p=new Q,v=new Gi,y=new Q(1,1,1),_=new PY(g.geometry,g.material,u);for(let x=0;x<u;x++)a.TRANSLATION&&p.fromBufferAttribute(a.TRANSLATION,x),a.ROTATION&&v.fromBufferAttribute(a.ROTATION,x),a.SCALE&&y.fromBufferAttribute(a.SCALE,x),_.setMatrixAt(x,m.compose(p,v,y));for(const x in a)x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&g.geometry.setAttribute(x,a[x]);Ot.prototype.copy.call(_,g),_.frustumCulled=!1,this.parser.assignFinalMaterial(_),h.push(_)}return d.isGroup?(d.clear(),d.add(...h),d):h[0]}))}}const i2="glTF",Sl=12,Kx={JSON:1313821514,BIN:5130562};class OK{constructor(e){this.name=at.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Sl);if(this.header={magic:Ls.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==i2)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Sl,r=new DataView(e,Sl);let s=0;for(;s<i;){const f=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===Kx.JSON){const a=new Uint8Array(e,Sl+s,f);this.content=Ls.decodeText(a)}else if(o===Kx.BIN){const a=Sl+s;this.body=e.slice(a,a+f)}s+=f}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class PK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=at.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,f=e.extensions[this.name].attributes,o={},a={},c={};for(const d in f){const l=sm[d]||d.toLowerCase();o[l]=f[d]}for(const d in e.attributes){const l=sm[d]||d.toLowerCase();if(f[d]!==void 0){const u=i.accessors[e.attributes[d]],h=co[u.componentType];c[l]=h.name,a[l]=u.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(l){r.decodeDracoFile(d,function(u){for(const h in u.attributes){const g=u.attributes[h],m=a[h];m!==void 0&&(g.normalized=m)}l(u)},o,c)})})}}class LK{constructor(){this.name=at.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class RK{constructor(){this.name=at.KHR_MESH_QUANTIZATION}}class r2 extends Zc{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let f=0;f!==r;f++)t[f]=i[s+f];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,f=this.sampleValues,o=this.valueSize,a=o*2,c=o*3,d=r-t,l=(i-t)/d,u=l*l,h=u*l,g=e*c,m=g-c,p=-2*h+3*u,v=h-u,y=1-p,_=v-u+l;for(let x=0;x!==o;x++){const b=f[m+x+o],w=f[m+x+a]*d,T=f[g+x+o],S=f[g+x]*d;s[x]=y*b+_*w+p*T+v*S}return s}}const DK=new Gi;class IK extends r2{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return DK.fromArray(s).normalize().toArray(s),s}}const ti={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},co={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},qx={9728:Wt,9729:Sn,9984:Jg,9985:LT,9986:vh,9987:Ns},Zx={33071:ri,33648:Jh,10497:To},Pp={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},sm={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Cr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},kK={CUBICSPLINE:void 0,LINEAR:Mo,STEP:bc},Lp={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function FK(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new c0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yr})),n.DefaultMaterial}function Cl(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ar(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function NK(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const l=e[c];if(l.POSITION!==void 0&&(i=!0),l.NORMAL!==void 0&&(r=!0),l.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const f=[],o=[],a=[];for(let c=0,d=e.length;c<d;c++){const l=e[c];if(i){const u=l.POSITION!==void 0?t.getDependency("accessor",l.POSITION):n.attributes.position;f.push(u)}if(r){const u=l.NORMAL!==void 0?t.getDependency("accessor",l.NORMAL):n.attributes.normal;o.push(u)}if(s){const u=l.COLOR_0!==void 0?t.getDependency("accessor",l.COLOR_0):n.attributes.color;a.push(u)}}return Promise.all([Promise.all(f),Promise.all(o),Promise.all(a)]).then(function(c){const d=c[0],l=c[1],u=c[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=l),s&&(n.morphAttributes.color=u),n.morphTargetsRelative=!0,n})}function BK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function zK(n){const e=n.extensions&&n.extensions[at.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+Jx(e.attributes):t=n.indices+":"+Jx(n.attributes)+":"+n.mode,t}function Jx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function am(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function jK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const UK=new Ze;class $K{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new pK,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new WY(this.options.manager):this.textureLoader=new QY(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(f){return f._markDefs&&f._markDefs()}),Promise.all(this._invokeAll(function(f){return f.beforeRoot&&f.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(f){const o={scene:f[0][r.scene||0],scenes:f[0],animations:f[1],cameras:f[2],asset:r.asset,parser:i,userData:{}};Cl(s,o,r),Ar(o,r),Promise.all(i._invokeAll(function(a){return a.afterRoot&&a.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const f=t[r].joints;for(let o=0,a=f.length;o<a;o++)e[f[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const f=e[r];f.mesh!==void 0&&(this._addNodeRef(this.meshCache,f.mesh),f.skin!==void 0&&(i[f.mesh].isSkinnedMesh=!0)),f.camera!==void 0&&this._addNodeRef(this.cameraCache,f.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(f,o)=>{const a=this.associations.get(f);a!=null&&this.associations.set(o,a);for(const[c,d]of f.children.entries())s(d,o.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,f){return i.getDependency(e,f)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[at.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,f){i.load(Ls.resolveURL(t.uri,r.path),s,void 0,function(){f(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const f=Pp[r.type],o=co[r.componentType],a=r.normalized===!0,c=new o(r.count*f);return Promise.resolve(new Jt(c,f,a))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(f){const o=f[0],a=Pp[r.type],c=co[r.componentType],d=c.BYTES_PER_ELEMENT,l=d*a,u=r.byteOffset||0,h=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let m,p;if(h&&h!==l){const v=Math.floor(u/h),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let _=t.cache.get(y);_||(m=new c(o,v*h,r.count*h/d),_=new CY(m,h/d),t.cache.add(y,_)),p=new a0(_,a,u%h/d,g)}else o===null?m=new c(r.count*a):m=new c(o,u,r.count*a),p=new Jt(m,a,g);if(r.sparse!==void 0){const v=Pp.SCALAR,y=co[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,b=new y(f[1],_,r.sparse.count*v),w=new c(f[2],x,r.sparse.count*a);o!==null&&(p=new Jt(p.array.slice(),p.itemSize,p.normalized));for(let T=0,S=b.length;T<S;T++){const O=b[T];if(p.setX(O,w[T*a]),a>=2&&p.setY(O,w[T*a+1]),a>=3&&p.setZ(O,w[T*a+2]),a>=4&&p.setW(O,w[T*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,f=t.images[s];let o=this.textureLoader;if(f.uri){const a=i.manager.getHandler(f.uri);a!==null&&(o=a)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,f=s.textures[e],o=s.images[t],a=(o.uri||o.bufferView)+":"+f.sampler;if(this.textureCache[a])return this.textureCache[a];const c=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=f.name||o.name||"";const u=(s.samplers||{})[f.sampler]||{};return d.magFilter=qx[u.magFilter]||Sn,d.minFilter=qx[u.minFilter]||Ns,d.wrapS=Zx[u.wrapS]||To,d.wrapT=Zx[u.wrapT]||To,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[a]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(l=>l.clone());const f=r.images[e],o=self.URL||self.webkitURL;let a=f.uri||"",c=!1;if(f.bufferView!==void 0)a=i.getDependency("bufferView",f.bufferView).then(function(l){c=!0;const u=new Blob([l],{type:f.mimeType});return a=o.createObjectURL(u),a});else if(f.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(a).then(function(l){return new Promise(function(u,h){let g=u;t.isImageBitmapLoader===!0&&(g=function(m){const p=new Yt(m);p.needsUpdate=!0,u(p)}),t.load(Ls.resolveURL(l,s.path),g,void 0,h)})}).then(function(l){return c===!0&&o.revokeObjectURL(a),l.userData.mimeType=f.mimeType||jK(f.uri),l}).catch(function(l){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),l});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(f){if(!f)return null;if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[at.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[at.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=s.associations.get(f);f=s.extensions[at.KHR_TEXTURE_TRANSFORM].extendTexture(f,o),s.associations.set(f,a)}}return r!==void 0&&(f.encoding=r),e[t]=f,f})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,f=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let a=this.cache.get(o);a||(a=new Ja,Gn.prototype.copy.call(a,i),a.color.copy(i.color),a.map=i.map,a.sizeAttenuation=!1,this.cache.add(o,a)),i=a}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let a=this.cache.get(o);a||(a=new Zl,Gn.prototype.copy.call(a,i),a.color.copy(i.color),this.cache.add(o,a)),i=a}if(r||s||f){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),f&&(o+="flat-shading:");let a=this.cache.get(o);a||(a=i.clone(),s&&(a.vertexColors=!0),f&&(a.flatShading=!0),r&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(o,a),this.associations.set(a,this.associations.get(i))),i=a}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return c0}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let f;const o={},a=s.extensions||{},c=[];if(a[at.KHR_MATERIALS_UNLIT]){const l=r[at.KHR_MATERIALS_UNLIT];f=l.getMaterialType(),c.push(l.extendParams(o,s,t))}else{const l=s.pbrMetallicRoughness||{};if(o.color=new He(1,1,1),o.opacity=1,Array.isArray(l.baseColorFactor)){const u=l.baseColorFactor;o.color.fromArray(u),o.opacity=u[3]}l.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",l.baseColorTexture,ht)),o.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,o.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",l.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",l.metallicRoughnessTexture))),f=this._invokeOne(function(u){return u.getMaterialType&&u.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(u){return u.extendMaterialParams&&u.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=Wf);const d=s.alphaMode||Lp.OPAQUE;if(d===Lp.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,d===Lp.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&f!==Cs&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Ue(1,1),s.normalTexture.scale!==void 0)){const l=s.normalTexture.scale;o.normalScale.set(l,l)}return s.occlusionTexture!==void 0&&f!==Cs&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&f!==Cs&&(o.emissive=new He().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&f!==Cs&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,ht)),Promise.all(c).then(function(){const l=new f(o);return s.name&&(l.name=s.name),Ar(l,s),t.associations.set(l,{materials:e}),s.extensions&&Cl(r,l,s),l})}createUniqueName(e){const t=ft.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[at.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(a){return Qx(a,o,t)})}const f=[];for(let o=0,a=e.length;o<a;o++){const c=e[o],d=zK(c),l=r[d];if(l)f.push(l.promise);else{let u;c.extensions&&c.extensions[at.KHR_DRACO_MESH_COMPRESSION]?u=s(c):u=Qx(new Xn,c,t),r[d]={primitive:c,promise:u},f.push(u)}}return Promise.all(f)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],f=s.primitives,o=[];for(let a=0,c=f.length;a<c;a++){const d=f[a].material===void 0?FK(this.cache):this.getDependency("material",f[a].material);o.push(d)}return o.push(t.loadGeometries(f)),Promise.all(o).then(function(a){const c=a.slice(0,a.length-1),d=a[a.length-1],l=[];for(let h=0,g=d.length;h<g;h++){const m=d[h],p=f[h];let v;const y=c[h];if(p.mode===ti.TRIANGLES||p.mode===ti.TRIANGLE_STRIP||p.mode===ti.TRIANGLE_FAN||p.mode===void 0)v=s.isSkinnedMesh===!0?new EY(m,y):new Tn(m,y),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),p.mode===ti.TRIANGLE_STRIP?v.geometry=eb(v.geometry,sH):p.mode===ti.TRIANGLE_FAN&&(v.geometry=eb(v.geometry,DT));else if(p.mode===ti.LINES)v=new im(m,y);else if(p.mode===ti.LINE_STRIP)v=new l0(m,y);else if(p.mode===ti.LINE_LOOP)v=new LY(m,y);else if(p.mode===ti.POINTS)v=new xh(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(v.geometry.morphAttributes).length>0&&BK(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),Ar(v,s),p.extensions&&Cl(r,v,p),t.assignFinalMaterial(v),l.push(v)}for(let h=0,g=l.length;h<g;h++)t.associations.set(l[h],{meshes:e,primitives:h});if(l.length===1)return l[0];const u=new Ir;t.associations.set(u,{meshes:e});for(let h=0,g=l.length;h<g;h++)u.add(l[h]);return u})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new gn(SH.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new r0(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ar(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this.getDependency("node",t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),f=r,o=[],a=[];for(let c=0,d=f.length;c<d;c++){const l=f[c];if(l){o.push(l);const u=new Ze;s!==null&&u.fromArray(s.array,c*16),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new o0(o,a)})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],f=[],o=[],a=[];for(let c=0,d=i.channels.length;c<d;c++){const l=i.channels[c],u=i.samplers[l.sampler],h=l.target,g=h.node,m=i.parameters!==void 0?i.parameters[u.input]:u.input,p=i.parameters!==void 0?i.parameters[u.output]:u.output;r.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",m)),f.push(this.getDependency("accessor",p)),o.push(u),a.push(h)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(f),Promise.all(o),Promise.all(a)]).then(function(c){const d=c[0],l=c[1],u=c[2],h=c[3],g=c[4],m=[];for(let v=0,y=d.length;v<y;v++){const _=d[v],x=l[v],b=u[v],w=h[v],T=g[v];if(_===void 0)continue;_.updateMatrix();let S;switch(Cr[T.path]){case Cr.weights:S=Tc;break;case Cr.rotation:S=$s;break;case Cr.position:case Cr.scale:default:S=Ec;break}const O=_.name?_.name:_.uuid,N=w.interpolation!==void 0?kK[w.interpolation]:Mo,V=[];Cr[T.path]===Cr.weights?_.traverse(function(j){j.morphTargetInfluences&&V.push(j.name?j.name:j.uuid)}):V.push(O);let Z=b.array;if(b.normalized){const j=am(Z.constructor),z=new Float32Array(Z.length);for(let G=0,ne=Z.length;G<ne;G++)z[G]=Z[G]*j;Z=z}for(let j=0,z=V.length;j<z;j++){const G=new S(V[j]+"."+Cr[T.path],x.array,Z,N);w.interpolation==="CUBICSPLINE"&&(G.createInterpolant=function(re){const U=this instanceof $s?IK:r2;return new U(this.times,this.values,this.getValueSize()/3,re)},G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(G)}}const p=i.name?i.name:"animation_"+e;return new zY(p,void 0,m)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const f=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&f.traverse(function(o){if(o.isMesh)for(let a=0,c=r.weights.length;a<c;a++)o.morphTargetInfluences[a]=r.weights[a]}),f})}loadNode(e){const t=this.json,i=this.extensions,r=this,s=t.nodes[e],f=s.name?r.createUniqueName(s.name):"";return function(){const o=[],a=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});a&&o.push(a),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){o.push(u)});const c=[],d=s.children||[];for(let u=0,h=d.length;u<h;u++)c.push(r.getDependency("node",d[u]));const l=s.skin===void 0?Promise.resolve(null):r.getDependency("skin",s.skin);return Promise.all([Promise.all(o),Promise.all(c),l])}().then(function(o){const a=o[0],c=o[1],d=o[2];let l;if(s.isBone===!0?l=new JT:a.length>1?l=new Ir:a.length===1?l=a[0]:l=new Ot,l!==a[0])for(let u=0,h=a.length;u<h;u++)l.add(a[u]);if(s.name&&(l.userData.name=s.name,l.name=f),Ar(l,s),s.extensions&&Cl(i,l,s),s.matrix!==void 0){const u=new Ze;u.fromArray(s.matrix),l.applyMatrix4(u)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,d!==null&&l.traverse(function(u){u.isSkinnedMesh&&u.bind(d,UK)});for(let u=0,h=c.length;u<h;u++)l.add(c[u]);return l})}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Ir;i.name&&(s.name=r.createUniqueName(i.name)),Ar(s,i),i.extensions&&Cl(t,s,i);const f=i.nodes||[],o=[];for(let a=0,c=f.length;a<c;a++)o.push(r.getDependency("node",f[a]));return Promise.all(o).then(function(a){for(let d=0,l=a.length;d<l;d++)s.add(a[d]);const c=d=>{const l=new Map;for(const[u,h]of r.associations)(u instanceof Gn||u instanceof Yt)&&l.set(u,h);return d.traverse(u=>{const h=r.associations.get(u);h!=null&&l.set(u,h)}),l};return r.associations=c(s),s})}}function HK(n,e,t){const i=e.attributes,r=new Vo;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],a=o.min,c=o.max;if(a!==void 0&&c!==void 0){if(r.set(new Q(a[0],a[1],a[2]),new Q(c[0],c[1],c[2])),o.normalized){const d=am(co[o.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new Q,a=new Q;for(let c=0,d=s.length;c<d;c++){const l=s[c];if(l.POSITION!==void 0){const u=t.json.accessors[l.POSITION],h=u.min,g=u.max;if(h!==void 0&&g!==void 0){if(a.setX(Math.max(Math.abs(h[0]),Math.abs(g[0]))),a.setY(Math.max(Math.abs(h[1]),Math.abs(g[1]))),a.setZ(Math.max(Math.abs(h[2]),Math.abs(g[2]))),u.normalized){const m=am(co[u.componentType]);a.multiplyScalar(m)}o.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const f=new Go;r.getCenter(f.center),f.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=f}function Qx(n,e,t){const i=e.attributes,r=[];function s(f,o){return t.getDependency("accessor",f).then(function(a){n.setAttribute(o,a)})}for(const f in i){const o=sm[f]||f.toLowerCase();o in n.attributes||r.push(s(i[f],o))}if(e.indices!==void 0&&!n.index){const f=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(f)}return Ar(n,e),HK(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?NK(n,e.targets,t):n})}function eb(n,e){let t=n.getIndex();if(t===null){const f=[],o=n.getAttribute("position");if(o!==void 0){for(let a=0;a<o.count;a++)f.push(a);n.setIndex(f),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===DT)for(let f=1;f<=i;f++)r.push(t.getX(0)),r.push(t.getX(f)),r.push(t.getX(f+1));else for(let f=0;f<i;f++)f%2===0?(r.push(t.getX(f)),r.push(t.getX(f+1)),r.push(t.getX(f+2))):(r.push(t.getX(f+2)),r.push(t.getX(f+1)),r.push(t.getX(f)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const VK=/^[og]\s*(.+)?/,GK=/^mtllib /,WK=/^usemtl /,XK=/^usemap /,tb=/\s+/,nb=new Q,Rp=new Q,ib=new Q,rb=new Q,ei=new Q,qu=new He;function YK(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const f=this._finalize(!1);f&&(f.inherited||f.groupCount<=0)&&this.materials.splice(f.index,1);const o={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:f!==void 0?f.smooth:this.smooth,groupStart:f!==void 0?f.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(a){const c={index:typeof a=="number"?a:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let f=this.materials.length-1;f>=0;f--)this.materials[f].groupCount<=0&&this.materials.splice(f,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;nb.fromArray(r,e),Rp.fromArray(r,t),ib.fromArray(r,i),ei.subVectors(ib,Rp),rb.subVectors(nb,Rp),ei.cross(rb),ei.normalize(),s.push(ei.x,ei.y,ei.z),s.push(ei.x,ei.y,ei.z),s.push(ei.x,ei.y,ei.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,f,o,a,c){const d=this.vertices.length;let l=this.parseVertexIndex(e,d),u=this.parseVertexIndex(t,d),h=this.parseVertexIndex(i,d);if(this.addVertex(l,u,h),this.addColor(l,u,h),o!==void 0&&o!==""){const g=this.normals.length;l=this.parseNormalIndex(o,g),u=this.parseNormalIndex(a,g),h=this.parseNormalIndex(c,g),this.addNormal(l,u,h)}else this.addFaceNormal(l,u,h);if(r!==void 0&&r!==""){const g=this.uvs.length;l=this.parseUVIndex(r,g),u=this.parseUVIndex(s,g),h=this.parseUVIndex(f,g),this.addUV(l,u,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,f=e.length;s<f;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,f=t.length;s<f;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class KK extends qs{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,f=new Mc(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(o){try{t(s.parse(o))}catch(a){r?r(a):console.error(a),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new YK;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let o=0,a=i.length;o<a;o++){const c=i[o].trimStart();if(c.length===0)continue;const d=c.charAt(0);if(d!=="#")if(d==="v"){const l=c.split(tb);switch(l[0]){case"v":t.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),l.length>=7?(qu.setRGB(parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6])).convertSRGBToLinear(),t.colors.push(qu.r,qu.g,qu.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":t.uvs.push(parseFloat(l[1]),parseFloat(l[2]));break}}else if(d==="f"){const u=c.slice(1).trim().split(tb),h=[];for(let m=0,p=u.length;m<p;m++){const v=u[m];if(v.length>0){const y=v.split("/");h.push(y)}}const g=h[0];for(let m=1,p=h.length-1;m<p;m++){const v=h[m],y=h[m+1];t.addFace(g[0],v[0],y[0],g[1],v[1],y[1],g[2],v[2],y[2])}}else if(d==="l"){const l=c.substring(1).trim().split(" ");let u=[];const h=[];if(c.indexOf("/")===-1)u=l;else for(let g=0,m=l.length;g<m;g++){const p=l[g].split("/");p[0]!==""&&u.push(p[0]),p[1]!==""&&h.push(p[1])}t.addLineGeometry(u,h)}else if(d==="p"){const u=c.slice(1).trim().split(" ");t.addPointGeometry(u)}else if((r=VK.exec(c))!==null){const l=(" "+r[0].slice(1).trim()).slice(1);t.startObject(l)}else if(WK.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(GK.test(c))t.materialLibraries.push(c.substring(7).trim());else if(XK.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(d==="s"){if(r=c.split(" "),r.length>1){const u=r[1].trim().toLowerCase();t.object.smooth=u!=="0"&&u!=="off"}else t.object.smooth=!0;const l=t.object.currentMaterial();l&&(l.smooth=t.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new Ir;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let o=0,a=t.objects.length;o<a;o++){const c=t.objects[o],d=c.geometry,l=c.materials,u=d.type==="Line",h=d.type==="Points";let g=!1;if(d.vertices.length===0)continue;const m=new Xn;m.setAttribute("position",new pn(d.vertices,3)),d.normals.length>0&&m.setAttribute("normal",new pn(d.normals,3)),d.colors.length>0&&(g=!0,m.setAttribute("color",new pn(d.colors,3))),d.hasUVIndices===!0&&m.setAttribute("uv",new pn(d.uvs,2));const p=[];for(let y=0,_=l.length;y<_;y++){const x=l[y],b=x.name+"_"+x.smooth+"_"+g;let w=t.materials[b];if(this.materials!==null){if(w=this.materials.create(x.name),u&&w&&!(w instanceof Zl)){const T=new Zl;Gn.prototype.copy.call(T,w),T.color.copy(w.color),w=T}else if(h&&w&&!(w instanceof Ja)){const T=new Ja({size:10,sizeAttenuation:!1});Gn.prototype.copy.call(T,w),T.color.copy(w.color),T.map=w.map,w=T}}w===void 0&&(u?w=new Zl:h?w=new Ja({size:1,sizeAttenuation:!1}):w=new DY,w.name=x.name,w.flatShading=!x.smooth,w.vertexColors=g,t.materials[b]=w),p.push(w)}let v;if(p.length>1){for(let y=0,_=l.length;y<_;y++){const x=l[y];m.addGroup(x.groupStart,x.groupCount,y)}u?v=new im(m,p):h?v=new xh(m,p):v=new Tn(m,p)}else u?v=new im(m,p[0]):h?v=new xh(m,p[0]):v=new Tn(m,p[0]);v.name=c.name,s.add(v)}else if(t.vertices.length>0){const o=new Ja({size:1,sizeAttenuation:!1}),a=new Xn;a.setAttribute("position",new pn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(a.setAttribute("color",new pn(t.colors,3)),o.vertexColors=!0);const c=new xh(a,o);s.add(c)}return s}}class qK{constructor({mesh:e,textures:t,emit:i}){Be(this,"id");Be(this,"mesh");Be(this,"textures");Be(this,"emit");this.mesh=e,this.id=e.uuid,this.emit=i,this.textures=t,this.textures.forEach(r=>r.bindMesh(this.id))}async setMeshTextures(){if(Array.isArray(this.mesh.material)){const e=await Promise.all(this.textures.map((t,i)=>t.getTexture()));this.mesh.material.forEach((t,i)=>{this.textures[Math.min(i,this.textures.length-1)].bindMaterial(i),t.map=e[Math.min(i,this.textures.length-1)]})}else this.mesh.material.map=await this.textures[0].getTexture(),this.textures[0].bindMaterial(0)}}var Zf={};const ZK={},JK=Object.freeze(Object.defineProperty({__proto__:null,default:ZK},Symbol.toStringTag,{value:"Module"})),Dp=K2(JK);(function(n){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(n.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var t=Dp,i=new t.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Dp.implForWrapper,e.nodeCanvas=Dp.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function o(h,g){if(this.__eventListeners[h]){var m=this.__eventListeners[h];g?m[m.indexOf(g)]=!1:e.util.array.fill(m,!1)}}function a(h,g){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in h)this.on(m,h[m]);else this.__eventListeners[h]||(this.__eventListeners[h]=[]),this.__eventListeners[h].push(g);return this}function c(h,g){var m=function(){g.apply(this,arguments),this.off(h,m)}.bind(this);this.on(h,m)}function d(h,g){if(arguments.length===1)for(var m in h)c.call(this,m,h[m]);else c.call(this,h,g);return this}function l(h,g){if(!this.__eventListeners)return this;if(arguments.length===0)for(h in this.__eventListeners)o.call(this,h);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in h)o.call(this,m,h[m]);else o.call(this,h,g);return this}function u(h,g){if(!this.__eventListeners)return this;var m=this.__eventListeners[h];if(!m)return this;for(var p=0,v=m.length;p<v;p++)m[p]&&m[p].call(this,g||{});return this.__eventListeners[h]=m.filter(function(y){return y!==!1}),this}e.Observable={fire:u,on:a,once:d,off:l}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var o=0,a=arguments.length;o<a;o++)this._onObjectAdded(arguments[o]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(o,a,c){var d=this._objects;return c?d[a]=o:d.splice(a,0,o),this._onObjectAdded&&this._onObjectAdded(o),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var o=this._objects,a,c=!1,d=0,l=arguments.length;d<l;d++)a=o.indexOf(arguments[d]),a!==-1&&(c=!0,o.splice(a,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(o,a){for(var c=this.getObjects(),d=0,l=c.length;d<l;d++)o.call(a,c[d],d,c);return this},getObjects:function(o){return typeof o>"u"?this._objects.concat():this._objects.filter(function(a){return a.type===o})},item:function(o){return this._objects[o]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(o,a){return this._objects.indexOf(o)>-1?!0:a?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(o,!0)}):!1},complexity:function(){return this._objects.reduce(function(o,a){return o+=a.complexity?a.complexity():0,o},0)}},e.CommonMethods={_setOptions:function(o){for(var a in o)this.set(a,o[a])},_initGradient:function(o,a){o&&o.colorStops&&!(o instanceof e.Gradient)&&this.set(a,new e.Gradient(o))},_initPattern:function(o,a,c){o&&o.source&&!(o instanceof e.Pattern)?this.set(a,new e.Pattern(o,c)):c&&c()},_setObject:function(o){for(var a in o)this._set(a,o[a])},set:function(o,a){return typeof o=="object"?this._setObject(o):this._set(o,a),this},_set:function(o,a){this[o]=a},toggle:function(o){var a=this.get(o);return typeof a=="boolean"&&this.set(o,!a),this},get:function(o){return this[o]}},function(o){var a=Math.sqrt,c=Math.atan2,d=Math.pow,l=Math.PI/180,u=Math.PI/2;e.util={cos:function(h){if(h===0)return 1;h<0&&(h=-h);var g=h/u;switch(g){case 1:case 3:return 0;case 2:return-1}return Math.cos(h)},sin:function(h){if(h===0)return 0;var g=h/u,m=1;switch(h<0&&(m=-1),g){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(h)},removeFromArray:function(h,g){var m=h.indexOf(g);return m!==-1&&h.splice(m,1),h},getRandomInt:function(h,g){return Math.floor(Math.random()*(g-h+1))+h},degreesToRadians:function(h){return h*l},radiansToDegrees:function(h){return h/l},rotatePoint:function(h,g,m){var p=new e.Point(h.x-g.x,h.y-g.y),v=e.util.rotateVector(p,m);return new e.Point(v.x,v.y).addEquals(g)},rotateVector:function(h,g){var m=e.util.sin(g),p=e.util.cos(g),v=h.x*p-h.y*m,y=h.x*m+h.y*p;return{x:v,y}},createVector:function(h,g){return new e.Point(g.x-h.x,g.y-h.y)},calcAngleBetweenVectors:function(h,g){return Math.acos((h.x*g.x+h.y*g.y)/(Math.hypot(h.x,h.y)*Math.hypot(g.x,g.y)))},getHatVector:function(h){return new e.Point(h.x,h.y).multiply(1/Math.hypot(h.x,h.y))},getBisector:function(h,g,m){var p=e.util.createVector(h,g),v=e.util.createVector(h,m),y=e.util.calcAngleBetweenVectors(p,v),_=e.util.calcAngleBetweenVectors(e.util.rotateVector(p,y),v),x=y*(_===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(p,x)),angle:y}},projectStrokeOnPoints:function(h,g,m){var p=[],v=g.strokeWidth/2,y=g.strokeUniform?new e.Point(1/g.scaleX,1/g.scaleY):new e.Point(1,1),_=function(x){var b=v/Math.hypot(x.x,x.y);return new e.Point(x.x*b*y.x,x.y*b*y.y)};return h.length<=1||h.forEach(function(x,b){var w=new e.Point(x.x,x.y),T,S;b===0?(S=h[b+1],T=m?_(e.util.createVector(S,w)).addEquals(w):h[h.length-1]):b===h.length-1?(T=h[b-1],S=m?_(e.util.createVector(T,w)).addEquals(w):h[0]):(T=h[b-1],S=h[b+1]);var O=e.util.getBisector(w,T,S),N=O.vector,V=O.angle,Z,j;if(g.strokeLineJoin==="miter"&&(Z=-v/Math.sin(V/2),j=new e.Point(N.x*Z*y.x,N.y*Z*y.y),Math.hypot(j.x,j.y)/v<=g.strokeMiterLimit)){p.push(w.add(j)),p.push(w.subtract(j));return}Z=-v*Math.SQRT2,j=new e.Point(N.x*Z*y.x,N.y*Z*y.y),p.push(w.add(j)),p.push(w.subtract(j))}),p},transformPoint:function(h,g,m){return m?new e.Point(g[0]*h.x+g[2]*h.y,g[1]*h.x+g[3]*h.y):new e.Point(g[0]*h.x+g[2]*h.y+g[4],g[1]*h.x+g[3]*h.y+g[5])},makeBoundingBoxFromPoints:function(h,g){if(g)for(var m=0;m<h.length;m++)h[m]=e.util.transformPoint(h[m],g);var p=[h[0].x,h[1].x,h[2].x,h[3].x],v=e.util.array.min(p),y=e.util.array.max(p),_=y-v,x=[h[0].y,h[1].y,h[2].y,h[3].y],b=e.util.array.min(x),w=e.util.array.max(x),T=w-b;return{left:v,top:b,width:_,height:T}},invertTransform:function(h){var g=1/(h[0]*h[3]-h[1]*h[2]),m=[g*h[3],-g*h[1],-g*h[2],g*h[0]],p=e.util.transformPoint({x:h[4],y:h[5]},m,!0);return m[4]=-p.x,m[5]=-p.y,m},toFixed:function(h,g){return parseFloat(Number(h).toFixed(g))},parseUnit:function(h,g){var m=/\D{0,2}$/.exec(h),p=parseFloat(h);switch(g||(g=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return p*e.DPI/25.4;case"cm":return p*e.DPI/2.54;case"in":return p*e.DPI;case"pt":return p*e.DPI/72;case"pc":return p*e.DPI/72*12;case"em":return p*g;default:return p}},falseFunction:function(){return!1},getKlass:function(h,g){return h=e.util.string.camelize(h.charAt(0).toUpperCase()+h.slice(1)),e.util.resolveNamespace(g)[h]},getSvgAttributes:function(h){var g=["instantiated_by_use","style","id","class"];switch(h){case"linearGradient":g=g.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":g=g.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":g=g.concat(["offset","stop-color","stop-opacity"]);break}return g},resolveNamespace:function(h){if(!h)return e;var g=h.split("."),m=g.length,p,v=o||e.window;for(p=0;p<m;++p)v=v[g[p]];return v},loadImage:function(h,g,m,p){if(!h){g&&g.call(m,h);return}var v=e.util.createImage(),y=function(){g&&g.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=y,v.onerror=function(){e.log("Error loading "+v.src),g&&g.call(m,null,!0),v=v.onload=v.onerror=null},h.indexOf("data")!==0&&p!==void 0&&p!==null&&(v.crossOrigin=p),h.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,y)),v.src=h},loadImageInDom:function(h,g){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(h),e.document.querySelector("body").appendChild(m),h.onload=function(){g(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(h,g,m,p){h=h||[];var v=[],y=0,_=h.length;function x(){++y===_&&g&&g(v.filter(function(b){return b}))}if(!_){g&&g(v);return}h.forEach(function(b,w){if(!b||!b.type){x();return}var T=e.util.getKlass(b.type,m);T.fromObject(b,function(S,O){O||(v[w]=S),p&&p(b,S,O),x()})})},enlivenObjectEnlivables:function(h,g,m){var p=e.Object.ENLIVEN_PROPS.filter(function(v){return!!h[v]});e.util.enlivenObjects(p.map(function(v){return h[v]}),function(v){var y={};p.forEach(function(_,x){y[_]=v[x],g&&(g[_]=v[x])}),m&&m(y)})},enlivenPatterns:function(h,g){h=h||[];function m(){++v===y&&g&&g(p)}var p=[],v=0,y=h.length;if(!y){g&&g(p);return}h.forEach(function(_,x){_&&_.source?new e.Pattern(_,function(b){p[x]=b,m()}):(p[x]=_,m())})},groupSVGElements:function(h,g,m){var p;return h&&h.length===1?(typeof m<"u"&&(h[0].sourcePath=m),h[0]):(g&&(g.width&&g.height?g.centerPoint={x:g.width/2,y:g.height/2}:(delete g.width,delete g.height)),p=new e.Group(h,g),typeof m<"u"&&(p.sourcePath=m),p)},populateWithProperties:function(h,g,m){if(m&&Array.isArray(m))for(var p=0,v=m.length;p<v;p++)m[p]in h&&(g[m[p]]=h[m[p]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(h){var g=e.util.createCanvasElement();return g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0),g},toDataURL:function(h,g,m){return h.toDataURL("image/"+g,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(h,g,m){return[h[0]*g[0]+h[2]*g[1],h[1]*g[0]+h[3]*g[1],h[0]*g[2]+h[2]*g[3],h[1]*g[2]+h[3]*g[3],m?0:h[0]*g[4]+h[2]*g[5]+h[4],m?0:h[1]*g[4]+h[3]*g[5]+h[5]]},qrDecompose:function(h){var g=c(h[1],h[0]),m=d(h[0],2)+d(h[1],2),p=a(m),v=(h[0]*h[3]-h[2]*h[1])/p,y=c(h[0]*h[2]+h[1]*h[3],m);return{angle:g/l,scaleX:p,scaleY:v,skewX:y/l,skewY:0,translateX:h[4],translateY:h[5]}},calcRotateMatrix:function(h){if(!h.angle)return e.iMatrix.concat();var g=e.util.degreesToRadians(h.angle),m=e.util.cos(g),p=e.util.sin(g);return[m,p,-p,m,0,0]},calcDimensionsMatrix:function(h){var g=typeof h.scaleX>"u"?1:h.scaleX,m=typeof h.scaleY>"u"?1:h.scaleY,p=[h.flipX?-g:g,0,0,h.flipY?-m:m,0,0],v=e.util.multiplyTransformMatrices,y=e.util.degreesToRadians;return h.skewX&&(p=v(p,[1,0,Math.tan(y(h.skewX)),1],!0)),h.skewY&&(p=v(p,[1,Math.tan(y(h.skewY)),0,1],!0)),p},composeMatrix:function(h){var g=[1,0,0,1,h.translateX||0,h.translateY||0],m=e.util.multiplyTransformMatrices;return h.angle&&(g=m(g,e.util.calcRotateMatrix(h))),(h.scaleX!==1||h.scaleY!==1||h.skewX||h.skewY||h.flipX||h.flipY)&&(g=m(g,e.util.calcDimensionsMatrix(h))),g},resetObjectTransform:function(h){h.scaleX=1,h.scaleY=1,h.skewX=0,h.skewY=0,h.flipX=!1,h.flipY=!1,h.rotate(0)},saveObjectTransform:function(h){return{scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,angle:h.angle,left:h.left,flipX:h.flipX,flipY:h.flipY,top:h.top}},isTransparent:function(h,g,m,p){p>0&&(g>p?g-=p:g=0,m>p?m-=p:m=0);var v=!0,y,_,x=h.getImageData(g,m,p*2||1,p*2||1),b=x.data.length;for(y=3;y<b&&(_=x.data[y],v=_<=0,v!==!1);y+=4);return x=null,v},parsePreserveAspectRatioAttribute:function(h){var g="meet",m="Mid",p="Mid",v=h.split(" "),y;return v&&v.length&&(g=v.pop(),g!=="meet"&&g!=="slice"?(y=g,g="meet"):v.length&&(y=v.pop())),m=y!=="none"?y.slice(1,4):"none",p=y!=="none"?y.slice(5,8):"none",{meetOrSlice:g,alignX:m,alignY:p}},clearFabricFontCache:function(h){h=(h||"").toLowerCase(),h?e.charWidthsCache[h]&&delete e.charWidthsCache[h]:e.charWidthsCache={}},limitDimsByArea:function(h,g){var m=Math.sqrt(g*h),p=Math.floor(g/m);return{x:Math.floor(m),y:p}},capValue:function(h,g,m){return Math.max(h,Math.min(g,m))},findScaleToFit:function(h,g){return Math.min(g.width/h.width,g.height/h.height)},findScaleToCover:function(h,g){return Math.max(g.width/h.width,g.height/h.height)},matrixToSVG:function(h){return"matrix("+h.map(function(g){return e.util.toFixed(g,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(h,g){var m=e.util.invertTransform(g),p=e.util.multiplyTransformMatrices(m,h.calcOwnMatrix());e.util.applyTransformToObject(h,p)},addTransformToObject:function(h,g){e.util.applyTransformToObject(h,e.util.multiplyTransformMatrices(g,h.calcOwnMatrix()))},applyTransformToObject:function(h,g){var m=e.util.qrDecompose(g),p=new e.Point(m.translateX,m.translateY);h.flipX=!1,h.flipY=!1,h.set("scaleX",m.scaleX),h.set("scaleY",m.scaleY),h.skewX=m.skewX,h.skewY=m.skewY,h.angle=m.angle,h.setPositionByOrigin(p,"center","center")},sizeAfterTransform:function(h,g,m){var p=h/2,v=g/2,y=[{x:-p,y:-v},{x:p,y:-v},{x:-p,y:v},{x:p,y:v}],_=e.util.calcDimensionsMatrix(m),x=e.util.makeBoundingBoxFromPoints(y,_);return{x:x.width,y:x.height}},mergeClipPaths:function(h,g){var m=h,p=g;m.inverted&&!p.inverted&&(m=g,p=h),e.util.applyTransformToObject(p,e.util.multiplyTransformMatrices(e.util.invertTransform(m.calcTransformMatrix()),p.calcTransformMatrix()));var v=m.inverted&&p.inverted;return v&&(m.inverted=p.inverted=!1),new e.Group([m],{clipPath:p,inverted:v})},hasStyleChanged:function(h,g,m){return m=m||!1,h.fill!==g.fill||h.stroke!==g.stroke||h.strokeWidth!==g.strokeWidth||h.fontSize!==g.fontSize||h.fontFamily!==g.fontFamily||h.fontWeight!==g.fontWeight||h.fontStyle!==g.fontStyle||h.textBackgroundColor!==g.textBackgroundColor||h.deltaY!==g.deltaY||m&&(h.overline!==g.overline||h.underline!==g.underline||h.linethrough!==g.linethrough)},stylesToArray:function(m,g){for(var m=e.util.object.clone(m,!0),p=g.split(`
`),v=-1,y={},_=[],x=0;x<p.length;x++){if(!m[x]){v+=p[x].length;continue}for(var b=0;b<p[x].length;b++){v++;var w=m[x][b];if(w&&Object.keys(w).length>0){var T=e.util.hasStyleChanged(y,w,!0);T?_.push({start:v,end:v+1,style:w}):_[_.length-1].end++}y=w||{}}}return _},stylesFromArray:function(h,g){if(!Array.isArray(h))return h;for(var m=g.split(`
`),p=-1,v=0,y={},_=0;_<m.length;_++)for(var x=0;x<m[_].length;x++)p++,h[v]&&h[v].start<=p&&p<h[v].end&&(y[_]=y[_]||{},y[_][x]=Object.assign({},h[v].style),p===h[v].end-1&&v++);return y}}}(n),function(){var o=Array.prototype.join,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function d(M,D,P,L,H,k,A,F,W,Y,X){var ee=e.util.cos(M),he=e.util.sin(M),ge=e.util.cos(D),J=e.util.sin(D),K=P*H*ge-L*k*J+A,ce=L*H*ge+P*k*J+F,ue=Y+W*(-P*H*he-L*k*ee),ae=X+W*(-L*H*he+P*k*ee),le=K+W*(P*H*J+L*k*ge),ve=ce+W*(L*H*J-P*k*ge);return["C",ue,ae,le,ve,K,ce]}function l(M,D,P,L,H,k,A){var F=Math.PI,W=A*F/180,Y=e.util.sin(W),X=e.util.cos(W),ee=0,he=0;P=Math.abs(P),L=Math.abs(L);var ge=-X*M*.5-Y*D*.5,J=-X*D*.5+Y*M*.5,K=P*P,ce=L*L,ue=J*J,ae=ge*ge,le=K*ce-K*ue-ce*ae,ve=0;if(le<0){var Ie=Math.sqrt(1-le/(K*ce));P*=Ie,L*=Ie}else ve=(H===k?-1:1)*Math.sqrt(le/(K*ue+ce*ae));var Me=ve*P*J/L,R=-ve*L*ge/P,I=X*Me-Y*R+M*.5,ie=Y*Me+X*R+D*.5,pe=u(1,0,(ge-Me)/P,(J-R)/L),_e=u((ge-Me)/P,(J-R)/L,(-ge-Me)/P,(-J-R)/L);k===0&&_e>0?_e-=2*F:k===1&&_e<0&&(_e+=2*F);for(var xe=Math.ceil(Math.abs(_e/F*2)),Pe=[],$=_e/xe,te=8/3*Math.sin($/4)*Math.sin($/4)/Math.sin($/2),Te=pe+$,Ce=0;Ce<xe;Ce++)Pe[Ce]=d(pe,Te,X,Y,P,L,I,ie,te,ee,he),ee=Pe[Ce][5],he=Pe[Ce][6],pe=Te,Te+=$;return Pe}function u(M,D,P,L){var H=Math.atan2(D,M),k=Math.atan2(L,P);return k>=H?k-H:2*Math.PI-(H-k)}function h(M,D,P,L,H,k,A,F){var W;if(e.cachesBoundsOfCurve&&(W=o.call(arguments),e.boundsOfCurveCache[W]))return e.boundsOfCurveCache[W];var Y=Math.sqrt,X=Math.min,ee=Math.max,he=Math.abs,ge=[],J=[[],[]],K,ce,ue,ae,le,ve,Ie,Me;ce=6*M-12*P+6*H,K=-3*M+9*P-9*H+3*A,ue=3*P-3*M;for(var R=0;R<2;++R){if(R>0&&(ce=6*D-12*L+6*k,K=-3*D+9*L-9*k+3*F,ue=3*L-3*D),he(K)<1e-12){if(he(ce)<1e-12)continue;ae=-ue/ce,0<ae&&ae<1&&ge.push(ae);continue}Ie=ce*ce-4*ue*K,!(Ie<0)&&(Me=Y(Ie),le=(-ce+Me)/(2*K),0<le&&le<1&&ge.push(le),ve=(-ce-Me)/(2*K),0<ve&&ve<1&&ge.push(ve))}for(var I,ie,pe=ge.length,_e=pe,xe;pe--;)ae=ge[pe],xe=1-ae,I=xe*xe*xe*M+3*xe*xe*ae*P+3*xe*ae*ae*H+ae*ae*ae*A,J[0][pe]=I,ie=xe*xe*xe*D+3*xe*xe*ae*L+3*xe*ae*ae*k+ae*ae*ae*F,J[1][pe]=ie;J[0][_e]=M,J[1][_e]=D,J[0][_e+1]=A,J[1][_e+1]=F;var Pe=[{x:X.apply(null,J[0]),y:X.apply(null,J[1])},{x:ee.apply(null,J[0]),y:ee.apply(null,J[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[W]=Pe),Pe}function g(M,D,P){for(var L=P[1],H=P[2],k=P[3],A=P[4],F=P[5],W=P[6],Y=P[7],X=l(W-M,Y-D,L,H,A,F,k),ee=0,he=X.length;ee<he;ee++)X[ee][1]+=M,X[ee][2]+=D,X[ee][3]+=M,X[ee][4]+=D,X[ee][5]+=M,X[ee][6]+=D;return X}function m(M){var D=0,P=0,L=M.length,H=0,k=0,A,F,W,Y=[],X,ee,he;for(F=0;F<L;++F){switch(W=!1,A=M[F].slice(0),A[0]){case"l":A[0]="L",A[1]+=D,A[2]+=P;case"L":D=A[1],P=A[2];break;case"h":A[1]+=D;case"H":A[0]="L",A[2]=P,D=A[1];break;case"v":A[1]+=P;case"V":A[0]="L",P=A[1],A[1]=D,A[2]=P;break;case"m":A[0]="M",A[1]+=D,A[2]+=P;case"M":D=A[1],P=A[2],H=A[1],k=A[2];break;case"c":A[0]="C",A[1]+=D,A[2]+=P,A[3]+=D,A[4]+=P,A[5]+=D,A[6]+=P;case"C":ee=A[3],he=A[4],D=A[5],P=A[6];break;case"s":A[0]="S",A[1]+=D,A[2]+=P,A[3]+=D,A[4]+=P;case"S":X==="C"?(ee=2*D-ee,he=2*P-he):(ee=D,he=P),D=A[3],P=A[4],A[0]="C",A[5]=A[3],A[6]=A[4],A[3]=A[1],A[4]=A[2],A[1]=ee,A[2]=he,ee=A[3],he=A[4];break;case"q":A[0]="Q",A[1]+=D,A[2]+=P,A[3]+=D,A[4]+=P;case"Q":ee=A[1],he=A[2],D=A[3],P=A[4];break;case"t":A[0]="T",A[1]+=D,A[2]+=P;case"T":X==="Q"?(ee=2*D-ee,he=2*P-he):(ee=D,he=P),A[0]="Q",D=A[1],P=A[2],A[1]=ee,A[2]=he,A[3]=D,A[4]=P;break;case"a":A[0]="A",A[6]+=D,A[7]+=P;case"A":W=!0,Y=Y.concat(g(D,P,A)),D=A[6],P=A[7];break;case"z":case"Z":D=H,P=k;break}W||Y.push(A),X=A[0]}return Y}function p(M,D,P,L){return Math.sqrt((P-M)*(P-M)+(L-D)*(L-D))}function v(M){return M*M*M}function y(M){return 3*M*M*(1-M)}function _(M){return 3*M*(1-M)*(1-M)}function x(M){return(1-M)*(1-M)*(1-M)}function b(M,D,P,L,H,k,A,F){return function(W){var Y=v(W),X=y(W),ee=_(W),he=x(W);return{x:A*Y+H*X+P*ee+M*he,y:F*Y+k*X+L*ee+D*he}}}function w(M,D,P,L,H,k,A,F){return function(W){var Y=1-W,X=3*Y*Y*(P-M)+6*Y*W*(H-P)+3*W*W*(A-H),ee=3*Y*Y*(L-D)+6*Y*W*(k-L)+3*W*W*(F-k);return Math.atan2(ee,X)}}function T(M){return M*M}function S(M){return 2*M*(1-M)}function O(M){return(1-M)*(1-M)}function N(M,D,P,L,H,k){return function(A){var F=T(A),W=S(A),Y=O(A);return{x:H*F+P*W+M*Y,y:k*F+L*W+D*Y}}}function V(M,D,P,L,H,k){return function(A){var F=1-A,W=2*F*(P-M)+2*A*(H-P),Y=2*F*(L-D)+2*A*(k-L);return Math.atan2(Y,W)}}function Z(M,D,P){var L={x:D,y:P},H,k=0,A;for(A=1;A<=100;A+=1)H=M(A/100),k+=p(L.x,L.y,H.x,H.y),L=H;return k}function j(M,D){for(var P=0,L=0,H=M.iterator,k={x:M.x,y:M.y},A,F,W=.01,Y=M.angleFinder,X;L<D&&W>1e-4;)A=H(P),X=P,F=p(k.x,k.y,A.x,A.y),F+L>D?(P-=W,W/=2):(k=A,P+=W,L+=F);return A.angle=Y(X),A}function z(M){for(var D=0,P=M.length,L,H=0,k=0,A=0,F=0,W=[],Y,X,ee,he=0;he<P;he++){switch(L=M[he],X={x:H,y:k,command:L[0]},L[0]){case"M":X.length=0,A=H=L[1],F=k=L[2];break;case"L":X.length=p(H,k,L[1],L[2]),H=L[1],k=L[2];break;case"C":Y=b(H,k,L[1],L[2],L[3],L[4],L[5],L[6]),ee=w(H,k,L[1],L[2],L[3],L[4],L[5],L[6]),X.iterator=Y,X.angleFinder=ee,X.length=Z(Y,H,k),H=L[5],k=L[6];break;case"Q":Y=N(H,k,L[1],L[2],L[3],L[4]),ee=V(H,k,L[1],L[2],L[3],L[4]),X.iterator=Y,X.angleFinder=ee,X.length=Z(Y,H,k),H=L[3],k=L[4];break;case"Z":case"z":X.destX=A,X.destY=F,X.length=p(H,k,A,F),H=A,k=F;break}D+=X.length,W.push(X)}return W.push({length:D,x:H,y:k}),W}function G(M,D,P){P||(P=z(M));for(var L=0;D-P[L].length>0&&L<P.length-2;)D-=P[L].length,L++;var H=P[L],k=D/H.length,A=H.command,F=M[L],W;switch(A){case"M":return{x:H.x,y:H.y,angle:0};case"Z":case"z":return W=new e.Point(H.x,H.y).lerp(new e.Point(H.destX,H.destY),k),W.angle=Math.atan2(H.destY-H.y,H.destX-H.x),W;case"L":return W=new e.Point(H.x,H.y).lerp(new e.Point(F[1],F[2]),k),W.angle=Math.atan2(F[2]-H.y,F[1]-H.x),W;case"C":return j(H,D);case"Q":return j(H,D)}}function ne(M){var D=[],P=[],L,H,k=e.rePathCommand,A="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",F="("+A+")"+e.commaWsp,W="([01])"+e.commaWsp+"?",Y=F+"?"+F+"?"+F+W+W+F+"?("+A+")",X=new RegExp(Y,"g"),ee,he,ge;if(!M||!M.match)return D;ge=M.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var J=0,K,ce=ge.length;J<ce;J++){L=ge[J],he=L.slice(1).trim(),P.length=0;var ue=L.charAt(0);if(K=[ue],ue.toLowerCase()==="a")for(var ae;ae=X.exec(he);)for(var le=1;le<ae.length;le++)P.push(ae[le]);else for(;ee=k.exec(he);)P.push(ee[0]);for(var le=0,ve=P.length;le<ve;le++)H=parseFloat(P[le]),isNaN(H)||K.push(H);var Ie=a[ue.toLowerCase()],Me=c[ue]||ue;if(K.length-1>Ie)for(var R=1,I=K.length;R<I;R+=Ie)D.push([ue].concat(K.slice(R,R+Ie))),ue=Me;else D.push(K)}return D}function re(M,D){var P=[],L,H=new e.Point(M[0].x,M[0].y),k=new e.Point(M[1].x,M[1].y),A=M.length,F=1,W=0,Y=A>2;for(D=D||0,Y&&(F=M[2].x<k.x?-1:M[2].x===k.x?0:1,W=M[2].y<k.y?-1:M[2].y===k.y?0:1),P.push(["M",H.x-F*D,H.y-W*D]),L=1;L<A;L++){if(!H.eq(k)){var X=H.midPointFrom(k);P.push(["Q",H.x,H.y,X.x,X.y])}H=M[L],L+1<M.length&&(k=M[L+1])}return Y&&(F=H.x>M[L-2].x?1:H.x===M[L-2].x?0:-1,W=H.y>M[L-2].y?1:H.y===M[L-2].y?0:-1),P.push(["L",H.x+F*D,H.y+W*D]),P}function U(M,D,P){return P&&(D=e.util.multiplyTransformMatrices(D,[1,0,0,1,-P.x,-P.y])),M.map(function(L){for(var H=L.slice(0),k={},A=1;A<L.length-1;A+=2)k.x=L[A],k.y=L[A+1],k=e.util.transformPoint(k,D),H[A]=k.x,H[A+1]=k.y;return H})}e.util.joinPath=function(M){return M.map(function(D){return D.join(" ")}).join(" ")},e.util.parsePath=ne,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=re,e.util.getPathSegmentsInfo=z,e.util.getBoundsOfCurve=h,e.util.getPointOnPath=G,e.util.transformPath=U}(),function(){var o=Array.prototype.slice;function a(h,g){for(var m=o.call(arguments,2),p=[],v=0,y=h.length;v<y;v++)p[v]=m.length?h[v][g].apply(h[v],m):h[v][g].call(h[v]);return p}function c(h,g){return u(h,g,function(m,p){return m>=p})}function d(h,g){return u(h,g,function(m,p){return m<p})}function l(h,g){for(var m=h.length;m--;)h[m]=g;return h}function u(h,g,m){if(!(!h||h.length===0)){var p=h.length-1,v=g?h[p][g]:h[p];if(g)for(;p--;)m(h[p][g],v)&&(v=h[p][g]);else for(;p--;)m(h[p],v)&&(v=h[p]);return v}}e.util.array={fill:l,invoke:a,min:d,max:c}}(),function(){function o(c,d,l){if(l)if(!e.isLikelyNode&&d instanceof Element)c=d;else if(d instanceof Array){c=[];for(var u=0,h=d.length;u<h;u++)c[u]=o({},d[u],l)}else if(d&&typeof d=="object")for(var g in d)g==="canvas"||g==="group"?c[g]=null:d.hasOwnProperty(g)&&(c[g]=o({},d[g],l));else c=d;else for(var g in d)c[g]=d[g];return c}function a(c,d){return o({},c,d)}e.util.object={extend:o,clone:a},e.util.object.extend(e.util,e.Observable)}(),function(){function o(u){return u.replace(/-+(.)?/g,function(h,g){return g?g.toUpperCase():""})}function a(u,h){return u.charAt(0).toUpperCase()+(h?u.slice(1):u.slice(1).toLowerCase())}function c(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(u){var h=0,g,m=[];for(h=0,g;h<u.length;h++)(g=l(u,h))!==!1&&m.push(g);return m}function l(u,h){var g=u.charCodeAt(h);if(isNaN(g))return"";if(g<55296||g>57343)return u.charAt(h);if(55296<=g&&g<=56319){if(u.length<=h+1)throw"High surrogate without following low surrogate";var m=u.charCodeAt(h+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return u.charAt(h)+u.charAt(h+1)}if(h===0)throw"Low surrogate without preceding high surrogate";var p=u.charCodeAt(h-1);if(55296>p||p>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:o,capitalize:a,escapeXml:c,graphemeSplit:d}}(),function(){var o=Array.prototype.slice,a=function(){},c=function(){for(var g in{toString:1})if(g==="toString")return!1;return!0}(),d=function(g,m,p){for(var v in m)v in g.prototype&&typeof g.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?g.prototype[v]=function(y){return function(){var _=this.constructor.superclass;this.constructor.superclass=p;var x=m[y].apply(this,arguments);if(this.constructor.superclass=_,y!=="initialize")return x}}(v):g.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(g.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(g.prototype.valueOf=m.valueOf))};function l(){}function u(g){for(var m=null,p=this;p.constructor.superclass;){var v=p.constructor.superclass.prototype[g];if(p[g]!==v){m=v;break}p=p.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,o.call(arguments,1)):m.call(this):console.log("tried to callSuper "+g+", method not found in prototype chain",this)}function h(){var g=null,m=o.call(arguments,0);typeof m[0]=="function"&&(g=m.shift());function p(){this.initialize.apply(this,arguments)}p.superclass=g,p.subclasses=[],g&&(l.prototype=g.prototype,p.prototype=new l,g.subclasses.push(p));for(var v=0,y=m.length;v<y;v++)d(p,m[v],g);return p.prototype.initialize||(p.prototype.initialize=a),p.prototype.constructor=p,p.prototype.callSuper=u,p}e.util.createClass=h}(),function(){var o=!!e.document.createElement("div").attachEvent,a=["touchstart","touchmove","touchend"];e.util.addListener=function(d,l,u,h){d&&d.addEventListener(l,u,o?!1:h)},e.util.removeListener=function(d,l,u,h){d&&d.removeEventListener(l,u,o?!1:h)};function c(d){var l=d.changedTouches;return l&&l[0]?l[0]:d}e.util.getPointer=function(d){var l=d.target,u=e.util.getScrollLeftTop(l),h=c(d);return{x:h.clientX+u.left,y:h.clientY+u.top}},e.util.isTouchEvent=function(d){return a.indexOf(d.type)>-1||d.pointerType==="touch"}}(),function(){function o(h,g){var m=h.style;if(!m)return h;if(typeof g=="string")return h.style.cssText+=";"+g,g.indexOf("opacity")>-1?u(h,g.match(/opacity:\s*(\d?\.?\d*)/)[1]):h;for(var p in g)if(p==="opacity")u(h,g[p]);else{var v=p==="float"||p==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":p;m.setProperty(v,g[p])}return h}var a=e.document.createElement("div"),c=typeof a.style.opacity=="string",d=typeof a.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(h){return h};c?u=function(h,g){return h.style.opacity=g,h}:d&&(u=function(h,g){var m=h.style;return h.currentStyle&&!h.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(g=g>=.9999?"":"alpha(opacity="+g*100+")",m.filter=m.filter.replace(l,g)):m.filter+=" alpha(opacity="+g*100+")",h}),e.util.setStyle=o}(),function(){var o=Array.prototype.slice;function a(x){return typeof x=="string"?e.document.getElementById(x):x}var c,d=function(x){return o.call(x,0)};try{c=d(e.document.childNodes)instanceof Array}catch{}c||(d=function(x){for(var b=new Array(x.length),w=x.length;w--;)b[w]=x[w];return b});function l(x,b){var w=e.document.createElement(x);for(var T in b)T==="class"?w.className=b[T]:T==="for"?w.htmlFor=b[T]:w.setAttribute(T,b[T]);return w}function u(x,b){x&&(" "+x.className+" ").indexOf(" "+b+" ")===-1&&(x.className+=(x.className?" ":"")+b)}function h(x,b,w){return typeof b=="string"&&(b=l(b,w)),x.parentNode&&x.parentNode.replaceChild(b,x),b.appendChild(x),b}function g(x){for(var b=0,w=0,T=e.document.documentElement,S=e.document.body||{scrollLeft:0,scrollTop:0};x&&(x.parentNode||x.host)&&(x=x.parentNode||x.host,x===e.document?(b=S.scrollLeft||T.scrollLeft||0,w=S.scrollTop||T.scrollTop||0):(b+=x.scrollLeft||0,w+=x.scrollTop||0),!(x.nodeType===1&&x.style.position==="fixed")););return{left:b,top:w}}function m(x){var b,w=x&&x.ownerDocument,T={left:0,top:0},S={left:0,top:0},O,N={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!w)return S;for(var V in N)S[N[V]]+=parseInt(p(x,V),10)||0;return b=w.documentElement,typeof x.getBoundingClientRect<"u"&&(T=x.getBoundingClientRect()),O=g(x),{left:T.left+O.left-(b.clientLeft||0)+S.left,top:T.top+O.top-(b.clientTop||0)+S.top}}var p;e.document.defaultView&&e.document.defaultView.getComputedStyle?p=function(x,b){var w=e.document.defaultView.getComputedStyle(x,null);return w?w[b]:void 0}:p=function(x,b){var w=x.style[b];return!w&&x.currentStyle&&(w=x.currentStyle[b]),w},function(){var x=e.document.documentElement.style,b="userSelect"in x?"userSelect":"MozUserSelect"in x?"MozUserSelect":"WebkitUserSelect"in x?"WebkitUserSelect":"KhtmlUserSelect"in x?"KhtmlUserSelect":"";function w(S){return typeof S.onselectstart<"u"&&(S.onselectstart=e.util.falseFunction),b?S.style[b]="none":typeof S.unselectable=="string"&&(S.unselectable="on"),S}function T(S){return typeof S.onselectstart<"u"&&(S.onselectstart=null),b?S.style[b]="":typeof S.unselectable=="string"&&(S.unselectable=""),S}e.util.makeElementUnselectable=w,e.util.makeElementSelectable=T}();function v(x){var b=e.jsdomImplForWrapper(x);return b._canvas||b._image}function y(x){if(e.isLikelyNode){var b=e.jsdomImplForWrapper(x);b&&(b._image=null,b._canvas=null,b._currentSrc=null,b._attributes=null,b._classList=null)}}function _(x,b){x.imageSmoothingEnabled=x.imageSmoothingEnabled||x.webkitImageSmoothingEnabled||x.mozImageSmoothingEnabled||x.msImageSmoothingEnabled||x.oImageSmoothingEnabled,x.imageSmoothingEnabled=b}e.util.setImageSmoothing=_,e.util.getById=a,e.util.toArray=d,e.util.addClass=u,e.util.makeElement=l,e.util.wrapElement=h,e.util.getScrollLeftTop=g,e.util.getElementOffset=m,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=y}(),function(){function o(d,l){return d+(/\?/.test(d)?"&":"?")+l}function a(){}function c(d,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",h=l.onComplete||function(){},g=new e.window.XMLHttpRequest,m=l.body||l.parameters;return g.onreadystatechange=function(){g.readyState===4&&(h(g),g.onreadystatechange=a)},u==="GET"&&(m=null,typeof l.parameters=="string"&&(d=o(d,l.parameters))),g.open(u,d,!0),(u==="POST"||u==="PUT")&&g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(m),g}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var o=e.util.object.extend,a=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(y){y.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var y=this.filter(function(_){return typeof _.target=="object"&&_.target.canvas===v});return y.forEach(function(_){_.cancel()}),y},cancelByTarget:function(v){var y=this.findAnimationsByTarget(v);return y.forEach(function(_){_.cancel()}),y},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(y){return y.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(y){return y.target===v}):[]}});function d(){return!1}function l(v,y,_,x){return-_*Math.cos(v/x*(Math.PI/2))+_+y}function u(v){v||(v={});var y=!1,_,x=function(){var b=e.runningAnimations.indexOf(_);return b>-1&&e.runningAnimations.splice(b,1)[0]};return _=o(a(v),{cancel:function(){return y=!0,x()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(_),m(function(b){var w=b||+new Date,T=v.duration||500,S=w+T,O,N=v.onChange||d,V=v.abort||d,Z=v.onComplete||d,j=v.easing||l,z="startValue"in v?v.startValue.length>0:!1,G="startValue"in v?v.startValue:0,ne="endValue"in v?v.endValue:100,re=v.byValue||(z?G.map(function(U,M){return ne[M]-G[M]}):ne-G);v.onStart&&v.onStart(),function U(M){O=M||+new Date;var D=O>S?T:O-w,P=D/T,L=z?G.map(function(k,A){return j(D,G[A],re[A],T)}):j(D,G,re,T),H=Math.abs(z?(L[0]-G[0])/re[0]:(L-G)/re);if(_.currentValue=z?L.slice():L,_.completionRate=H,_.durationRate=P,!y){if(V(L,H,P)){x();return}if(O>S){_.currentValue=z?ne.slice():ne,_.completionRate=1,_.durationRate=1,N(z?ne.slice():ne,1,1),Z(ne,1,1),x();return}else N(L,H,P),m(U)}}(w)}),_.cancel}var h=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},g=e.window.cancelAnimationFrame||e.window.clearTimeout;function m(){return h.apply(e.window,arguments)}function p(){return g.apply(e.window,arguments)}e.util.animate=u,e.util.requestAnimFrame=m,e.util.cancelAnimFrame=p,e.runningAnimations=c}(),function(){function o(c,d,l){var u="rgba("+parseInt(c[0]+l*(d[0]-c[0]),10)+","+parseInt(c[1]+l*(d[1]-c[1]),10)+","+parseInt(c[2]+l*(d[2]-c[2]),10);return u+=","+(c&&d?parseFloat(c[3]+l*(d[3]-c[3])):1),u+=")",u}function a(c,d,l,u){var h=new e.Color(c).getSource(),g=new e.Color(d).getSource(),m=u.onComplete,p=u.onChange;return u=u||{},e.util.animate(e.util.object.extend(u,{duration:l||500,startValue:h,endValue:g,byValue:g,easing:function(v,y,_,x){var b=u.colorEasing?u.colorEasing(v,x):1-Math.cos(v/x*(Math.PI/2));return o(y,_,b)},onComplete:function(v,y,_){if(m)return m(o(g,g,0),y,_)},onChange:function(v,y,_){if(p){if(Array.isArray(v))return p(o(v,v,0),y,_);p(v,y,_)}}}))}e.util.animateColor=a}(),function(){function o(M,D,P,L){return M<Math.abs(D)?(M=D,L=P/4):D===0&&M===0?L=P/(2*Math.PI)*Math.asin(1):L=P/(2*Math.PI)*Math.asin(D/M),{a:M,c:D,p:P,s:L}}function a(M,D,P){return M.a*Math.pow(2,10*(D-=1))*Math.sin((D*P-M.s)*(2*Math.PI)/M.p)}function c(M,D,P,L){return P*((M=M/L-1)*M*M+1)+D}function d(M,D,P,L){return M/=L/2,M<1?P/2*M*M*M+D:P/2*((M-=2)*M*M+2)+D}function l(M,D,P,L){return P*(M/=L)*M*M*M+D}function u(M,D,P,L){return-P*((M=M/L-1)*M*M*M-1)+D}function h(M,D,P,L){return M/=L/2,M<1?P/2*M*M*M*M+D:-P/2*((M-=2)*M*M*M-2)+D}function g(M,D,P,L){return P*(M/=L)*M*M*M*M+D}function m(M,D,P,L){return P*((M=M/L-1)*M*M*M*M+1)+D}function p(M,D,P,L){return M/=L/2,M<1?P/2*M*M*M*M*M+D:P/2*((M-=2)*M*M*M*M+2)+D}function v(M,D,P,L){return-P*Math.cos(M/L*(Math.PI/2))+P+D}function y(M,D,P,L){return P*Math.sin(M/L*(Math.PI/2))+D}function _(M,D,P,L){return-P/2*(Math.cos(Math.PI*M/L)-1)+D}function x(M,D,P,L){return M===0?D:P*Math.pow(2,10*(M/L-1))+D}function b(M,D,P,L){return M===L?D+P:P*(-Math.pow(2,-10*M/L)+1)+D}function w(M,D,P,L){return M===0?D:M===L?D+P:(M/=L/2,M<1?P/2*Math.pow(2,10*(M-1))+D:P/2*(-Math.pow(2,-10*--M)+2)+D)}function T(M,D,P,L){return-P*(Math.sqrt(1-(M/=L)*M)-1)+D}function S(M,D,P,L){return P*Math.sqrt(1-(M=M/L-1)*M)+D}function O(M,D,P,L){return M/=L/2,M<1?-P/2*(Math.sqrt(1-M*M)-1)+D:P/2*(Math.sqrt(1-(M-=2)*M)+1)+D}function N(M,D,P,L){var H=1.70158,k=0,A=P;if(M===0)return D;if(M/=L,M===1)return D+P;k||(k=L*.3);var F=o(A,P,k,H);return-a(F,M,L)+D}function V(M,D,P,L){var H=1.70158,k=0,A=P;if(M===0)return D;if(M/=L,M===1)return D+P;k||(k=L*.3);var F=o(A,P,k,H);return F.a*Math.pow(2,-10*M)*Math.sin((M*L-F.s)*(2*Math.PI)/F.p)+F.c+D}function Z(M,D,P,L){var H=1.70158,k=0,A=P;if(M===0)return D;if(M/=L/2,M===2)return D+P;k||(k=L*(.3*1.5));var F=o(A,P,k,H);return M<1?-.5*a(F,M,L)+D:F.a*Math.pow(2,-10*(M-=1))*Math.sin((M*L-F.s)*(2*Math.PI)/F.p)*.5+F.c+D}function j(M,D,P,L,H){return H===void 0&&(H=1.70158),P*(M/=L)*M*((H+1)*M-H)+D}function z(M,D,P,L,H){return H===void 0&&(H=1.70158),P*((M=M/L-1)*M*((H+1)*M+H)+1)+D}function G(M,D,P,L,H){return H===void 0&&(H=1.70158),M/=L/2,M<1?P/2*(M*M*(((H*=1.525)+1)*M-H))+D:P/2*((M-=2)*M*(((H*=1.525)+1)*M+H)+2)+D}function ne(M,D,P,L){return P-re(L-M,0,P,L)+D}function re(M,D,P,L){return(M/=L)<1/2.75?P*(7.5625*M*M)+D:M<2/2.75?P*(7.5625*(M-=1.5/2.75)*M+.75)+D:M<2.5/2.75?P*(7.5625*(M-=2.25/2.75)*M+.9375)+D:P*(7.5625*(M-=2.625/2.75)*M+.984375)+D}function U(M,D,P,L){return M<L/2?ne(M*2,0,P,L)*.5+D:re(M*2-L,0,P,L)*.5+P*.5+D}e.util.ease={easeInQuad:function(M,D,P,L){return P*(M/=L)*M+D},easeOutQuad:function(M,D,P,L){return-P*(M/=L)*(M-2)+D},easeInOutQuad:function(M,D,P,L){return M/=L/2,M<1?P/2*M*M+D:-P/2*(--M*(M-2)-1)+D},easeInCubic:function(M,D,P,L){return P*(M/=L)*M*M+D},easeOutCubic:c,easeInOutCubic:d,easeInQuart:l,easeOutQuart:u,easeInOutQuart:h,easeInQuint:g,easeOutQuint:m,easeInOutQuint:p,easeInSine:v,easeOutSine:y,easeInOutSine:_,easeInExpo:x,easeOutExpo:b,easeInOutExpo:w,easeInCirc:T,easeOutCirc:S,easeInOutCirc:O,easeInElastic:N,easeOutElastic:V,easeInOutElastic:Z,easeInBack:j,easeOutBack:z,easeInOutBack:G,easeInBounce:ne,easeOutBounce:re,easeInOutBounce:U}}(),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend,d=a.util.object.clone,l=a.util.toFixed,u=a.util.parseUnit,h=a.util.multiplyTransformMatrices,g=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],p=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",b="clip-path";a.svgValidTagNamesRegEx=S(g),a.svgViewBoxElementsRegEx=S(m),a.svgInvalidAncestorsRegEx=S(p),a.svgValidParentsRegEx=S(v),a.cssRules={},a.gradientDefs={},a.clipPaths={};function w(k){return k in y?y[k]:k}function T(k,A,F,W){var Y=Array.isArray(A),X;if((k==="fill"||k==="stroke")&&A==="none")A="";else{if(k==="strokeUniform")return A==="non-scaling-stroke";if(k==="strokeDashArray")A==="none"?A=null:A=A.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(k==="transformMatrix")F&&F.transformMatrix?A=h(F.transformMatrix,a.parseTransformAttribute(A)):A=a.parseTransformAttribute(A);else if(k==="visible")A=A!=="none"&&A!=="hidden",F&&F.visible===!1&&(A=!1);else if(k==="opacity")A=parseFloat(A),F&&typeof F.opacity<"u"&&(A*=F.opacity);else if(k==="textAnchor")A=A==="start"?"left":A==="end"?"right":"center";else if(k==="charSpacing")X=u(A,W)/W*1e3;else if(k==="paintFirst"){var ee=A.indexOf("fill"),he=A.indexOf("stroke"),A="fill";(ee>-1&&he>-1&&he<ee||ee===-1&&he>-1)&&(A="stroke")}else{if(k==="href"||k==="xlink:href"||k==="font")return A;if(k==="imageSmoothing")return A==="optimizeQuality";X=Y?A.map(u):u(A,W)}}return!Y&&isNaN(X)?A:X}function S(k){return new RegExp("^("+k.join("|")+")\\b","i")}function O(k){for(var A in _)if(!(typeof k[_[A]]>"u"||k[A]==="")){if(typeof k[A]>"u"){if(!a.Object.prototype[A])continue;k[A]=a.Object.prototype[A]}if(k[A].indexOf("url(")!==0){var F=new a.Color(k[A]);k[A]=F.setAlpha(l(F.getAlpha()*k[_[A]],2)).toRgba()}}return k}function N(k,A){var F,W=[],Y,X,ee;for(X=0,ee=A.length;X<ee;X++)F=A[X],Y=k.getElementsByTagName(F),W=W.concat(Array.prototype.slice.call(Y));return W}a.parseTransformAttribute=function(){function k(R,I){var ie=a.util.cos(I[0]),pe=a.util.sin(I[0]),_e=0,xe=0;I.length===3&&(_e=I[1],xe=I[2]),R[0]=ie,R[1]=pe,R[2]=-pe,R[3]=ie,R[4]=_e-(ie*_e-pe*xe),R[5]=xe-(pe*_e+ie*xe)}function A(R,I){var ie=I[0],pe=I.length===2?I[1]:I[0];R[0]=ie,R[3]=pe}function F(R,I,ie){R[ie]=Math.tan(a.util.degreesToRadians(I[0]))}function W(R,I){R[4]=I[0],I.length===2&&(R[5]=I[1])}var Y=a.iMatrix,X=a.reNum,ee=a.commaWsp,he="(?:(skewX)\\s*\\(\\s*("+X+")\\s*\\))",ge="(?:(skewY)\\s*\\(\\s*("+X+")\\s*\\))",J="(?:(rotate)\\s*\\(\\s*("+X+")(?:"+ee+"("+X+")"+ee+"("+X+"))?\\s*\\))",K="(?:(scale)\\s*\\(\\s*("+X+")(?:"+ee+"("+X+"))?\\s*\\))",ce="(?:(translate)\\s*\\(\\s*("+X+")(?:"+ee+"("+X+"))?\\s*\\))",ue="(?:(matrix)\\s*\\(\\s*("+X+")"+ee+"("+X+")"+ee+"("+X+")"+ee+"("+X+")"+ee+"("+X+")"+ee+"("+X+")\\s*\\))",ae="(?:"+ue+"|"+ce+"|"+K+"|"+J+"|"+he+"|"+ge+")",le="(?:"+ae+"(?:"+ee+"*"+ae+")*)",ve="^\\s*(?:"+le+"?)\\s*$",Ie=new RegExp(ve),Me=new RegExp(ae,"g");return function(R){var I=Y.concat(),ie=[];if(!R||R&&!Ie.test(R))return I;R.replace(Me,function(_e){var xe=new RegExp(ae).exec(_e).filter(function(te){return!!te}),Pe=xe[1],$=xe.slice(2).map(parseFloat);switch(Pe){case"translate":W(I,$);break;case"rotate":$[0]=a.util.degreesToRadians($[0]),k(I,$);break;case"scale":A(I,$);break;case"skewX":F(I,$,2);break;case"skewY":F(I,$,1);break;case"matrix":I=$;break}ie.push(I.concat()),I=Y.concat()});for(var pe=ie[0];ie.length>1;)ie.shift(),pe=a.util.multiplyTransformMatrices(pe,ie[0]);return pe}}();function V(k,A){var F,W;k.replace(/;\s*$/,"").split(";").forEach(function(Y){var X=Y.split(":");F=X[0].trim().toLowerCase(),W=X[1].trim(),A[F]=W})}function Z(k,A){var F,W;for(var Y in k)typeof k[Y]>"u"||(F=Y.toLowerCase(),W=k[Y],A[F]=W)}function j(k,A){var F={};for(var W in a.cssRules[A])if(z(k,W.split(" ")))for(var Y in a.cssRules[A][W])F[Y]=a.cssRules[A][W][Y];return F}function z(k,A){var F,W=!0;return F=ne(k,A.pop()),F&&A.length&&(W=G(k,A)),F&&W&&A.length===0}function G(k,A){for(var F,W=!0;k.parentNode&&k.parentNode.nodeType===1&&A.length;)W&&(F=A.pop()),k=k.parentNode,W=ne(k,F);return A.length===0}function ne(k,A){var F=k.nodeName,W=k.getAttribute("class"),Y=k.getAttribute("id"),X,ee;if(X=new RegExp("^"+F,"i"),A=A.replace(X,""),Y&&A.length&&(X=new RegExp("#"+Y+"(?![a-zA-Z\\-]+)","i"),A=A.replace(X,"")),W&&A.length)for(W=W.split(" "),ee=W.length;ee--;)X=new RegExp("\\."+W[ee]+"(?![a-zA-Z\\-]+)","i"),A=A.replace(X,"");return A.length===0}function re(k,A){var F;if(k.getElementById&&(F=k.getElementById(A)),F)return F;var W,Y,X,ee=k.getElementsByTagName("*");for(Y=0,X=ee.length;Y<X;Y++)if(W=ee[Y],A===W.getAttribute("id"))return W}function U(k){for(var A=N(k,["use","svg:use"]),F=0;A.length&&F<A.length;){var W=A[F],Y=W.getAttribute("xlink:href")||W.getAttribute("href");if(Y===null)return;var X=Y.slice(1),ee=W.getAttribute("x")||0,he=W.getAttribute("y")||0,ge=re(k,X).cloneNode(!0),J=(ge.getAttribute("transform")||"")+" translate("+ee+", "+he+")",K,ce=A.length,ue,ae,le,ve,Ie=a.svgNS;if(D(ge),/^svg$/i.test(ge.nodeName)){var Me=ge.ownerDocument.createElementNS(Ie,"g");for(ae=0,le=ge.attributes,ve=le.length;ae<ve;ae++)ue=le.item(ae),Me.setAttributeNS(Ie,ue.nodeName,ue.nodeValue);for(;ge.firstChild;)Me.appendChild(ge.firstChild);ge=Me}for(ae=0,le=W.attributes,ve=le.length;ae<ve;ae++)ue=le.item(ae),!(ue.nodeName==="x"||ue.nodeName==="y"||ue.nodeName==="xlink:href"||ue.nodeName==="href")&&(ue.nodeName==="transform"?J=ue.nodeValue+" "+J:ge.setAttribute(ue.nodeName,ue.nodeValue));ge.setAttribute("transform",J),ge.setAttribute("instantiated_by_use","1"),ge.removeAttribute("id"),K=W.parentNode,K.replaceChild(ge,W),A.length===ce&&F++}}var M=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");function D(k){if(!a.svgViewBoxElementsRegEx.test(k.nodeName))return{};var A=k.getAttribute("viewBox"),F=1,W=1,Y=0,X=0,ee,he,ge,J,K=k.getAttribute("width"),ce=k.getAttribute("height"),ue=k.getAttribute("x")||0,ae=k.getAttribute("y")||0,le=k.getAttribute("preserveAspectRatio")||"",ve=!A||!(A=A.match(M)),Ie=!K||!ce||K==="100%"||ce==="100%",Me=ve&&Ie,R={},I="",ie=0,pe=0;if(R.width=0,R.height=0,R.toBeParsed=Me,ve&&(ue||ae)&&k.parentNode&&k.parentNode.nodeName!=="#document"&&(I=" translate("+u(ue)+" "+u(ae)+") ",ge=(k.getAttribute("transform")||"")+I,k.setAttribute("transform",ge),k.removeAttribute("x"),k.removeAttribute("y")),Me)return R;if(ve)return R.width=u(K),R.height=u(ce),R;if(Y=-parseFloat(A[1]),X=-parseFloat(A[2]),ee=parseFloat(A[3]),he=parseFloat(A[4]),R.minX=Y,R.minY=X,R.viewBoxWidth=ee,R.viewBoxHeight=he,Ie?(R.width=ee,R.height=he):(R.width=u(K),R.height=u(ce),F=R.width/ee,W=R.height/he),le=a.util.parsePreserveAspectRatioAttribute(le),le.alignX!=="none"&&(le.meetOrSlice==="meet"&&(W=F=F>W?W:F),le.meetOrSlice==="slice"&&(W=F=F>W?F:W),ie=R.width-ee*F,pe=R.height-he*F,le.alignX==="Mid"&&(ie/=2),le.alignY==="Mid"&&(pe/=2),le.alignX==="Min"&&(ie=0),le.alignY==="Min"&&(pe=0)),F===1&&W===1&&Y===0&&X===0&&ue===0&&ae===0)return R;if((ue||ae)&&k.parentNode.nodeName!=="#document"&&(I=" translate("+u(ue)+" "+u(ae)+") "),ge=I+" matrix("+F+" 0 0 "+W+" "+(Y*F+ie)+" "+(X*W+pe)+") ",k.nodeName==="svg"){for(J=k.ownerDocument.createElementNS(a.svgNS,"g");k.firstChild;)J.appendChild(k.firstChild);k.appendChild(J)}else J=k,J.removeAttribute("x"),J.removeAttribute("y"),ge=J.getAttribute("transform")+ge;return J.setAttribute("transform",ge),R}function P(k,A){for(;k&&(k=k.parentNode);)if(k.nodeName&&A.test(k.nodeName.replace("svg:",""))&&!k.getAttribute("instantiated_by_use"))return!0;return!1}a.parseSVGDocument=function(k,A,F,W){if(k){U(k);var Y=a.Object.__uid++,X,ee,he=D(k),ge=a.util.toArray(k.getElementsByTagName("*"));if(he.crossOrigin=W&&W.crossOrigin,he.svgUid=Y,ge.length===0&&a.isLikelyNode){ge=k.selectNodes('//*[name(.)!="svg"]');var J=[];for(X=0,ee=ge.length;X<ee;X++)J[X]=ge[X];ge=J}var K=ge.filter(function(ue){return D(ue),a.svgValidTagNamesRegEx.test(ue.nodeName.replace("svg:",""))&&!P(ue,a.svgInvalidAncestorsRegEx)});if(!K||K&&!K.length){A&&A([],{});return}var ce={};ge.filter(function(ue){return ue.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ue){var ae=ue.getAttribute("id");ce[ae]=a.util.toArray(ue.getElementsByTagName("*")).filter(function(le){return a.svgValidTagNamesRegEx.test(le.nodeName.replace("svg:",""))})}),a.gradientDefs[Y]=a.getGradientDefs(k),a.cssRules[Y]=a.getCSSRules(k),a.clipPaths[Y]=ce,a.parseElements(K,function(ue,ae){A&&(A(ue,he,ae,ge),delete a.gradientDefs[Y],delete a.cssRules[Y],delete a.clipPaths[Y])},d(he),F,W)}};function L(k,A){var F=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],W="xlink:href",Y=A.getAttribute(W).slice(1),X=re(k,Y);if(X&&X.getAttribute(W)&&L(k,X),F.forEach(function(he){X&&!A.hasAttribute(he)&&X.hasAttribute(he)&&A.setAttribute(he,X.getAttribute(he))}),!A.children.length)for(var ee=X.cloneNode(!0);ee.firstChild;)A.appendChild(ee.firstChild);A.removeAttribute(W)}var H=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");c(a,{parseFontDeclaration:function(k,A){var F=k.match(H);if(F){var W=F[1],Y=F[3],X=F[4],ee=F[5],he=F[6];W&&(A.fontStyle=W),Y&&(A.fontWeight=isNaN(parseFloat(Y))?Y:parseFloat(Y)),X&&(A.fontSize=u(X)),he&&(A.fontFamily=he),ee&&(A.lineHeight=ee==="normal"?1:ee)}},getGradientDefs:function(k){var A=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],F=N(k,A),W,Y=0,X={};for(Y=F.length;Y--;)W=F[Y],W.getAttribute("xlink:href")&&L(k,W),X[W.getAttribute("id")]=W;return X},parseAttributes:function(k,A,F){if(k){var W,Y={},X,ee;typeof F>"u"&&(F=k.getAttribute("svgUid")),k.parentNode&&a.svgValidParentsRegEx.test(k.parentNode.nodeName)&&(Y=a.parseAttributes(k.parentNode,A,F));var he=A.reduce(function(le,ve){return W=k.getAttribute(ve),W&&(le[ve]=W),le},{}),ge=c(j(k,F),a.parseStyleAttribute(k));he=c(he,ge),ge[b]&&k.setAttribute(b,ge[b]),X=ee=Y.fontSize||a.Text.DEFAULT_SVG_FONT_SIZE,he[x]&&(he[x]=X=u(he[x],ee));var J,K,ce={};for(var ue in he)J=w(ue),K=T(J,he[ue],Y,X),ce[J]=K;ce&&ce.font&&a.parseFontDeclaration(ce.font,ce);var ae=c(Y,ce);return a.svgValidParentsRegEx.test(k.nodeName)?ae:O(ae)}},parseElements:function(k,A,F,W,Y){new a.ElementsParser(k,A,F,W,Y).parse()},parseStyleAttribute:function(k){var A={},F=k.getAttribute("style");return F&&(typeof F=="string"?V(F,A):Z(F,A)),A},parsePointsAttribute:function(k){if(!k)return null;k=k.replace(/,/g," ").trim(),k=k.split(/\s+/);var A=[],F,W;for(F=0,W=k.length;F<W;F+=2)A.push({x:parseFloat(k[F]),y:parseFloat(k[F+1])});return A},getCSSRules:function(k){var A=k.getElementsByTagName("style"),F,W,Y={},X;for(F=0,W=A.length;F<W;F++){var ee=A[F].textContent;ee=ee.replace(/\/\*[\s\S]*?\*\//g,""),ee.trim()!==""&&(X=ee.split("}"),X=X.filter(function(he){return he.trim()}),X.forEach(function(he){var ge=he.split("{"),J={},K=ge[1].trim(),ce=K.split(";").filter(function(ve){return ve.trim()});for(F=0,W=ce.length;F<W;F++){var ue=ce[F].split(":"),ae=ue[0].trim(),le=ue[1].trim();J[ae]=le}he=ge[0].trim(),he.split(",").forEach(function(ve){ve=ve.replace(/^svg/i,"").trim(),ve!==""&&(Y[ve]?a.util.object.extend(Y[ve],J):Y[ve]=a.util.object.clone(J))})}))}return Y},loadSVGFromURL:function(k,A,F,W){k=k.replace(/^\n\s*/,"").trim(),new a.util.request(k,{method:"get",onComplete:Y});function Y(X){var ee=X.responseXML;if(!ee||!ee.documentElement)return A&&A(null),!1;a.parseSVGDocument(ee.documentElement,function(he,ge,J,K){A&&A(he,ge,J,K)},F,W)}},loadSVGFromString:function(k,A,F,W){var Y=new a.window.DOMParser,X=Y.parseFromString(k.trim(),"text/xml");a.parseSVGDocument(X.documentElement,function(ee,he,ge,J){A(ee,he,ge,J)},F,W)}})}(n),e.ElementsParser=function(o,a,c,d,l,u){this.elements=o,this.callback=a,this.options=c,this.reviver=d,this.svgUid=c&&c.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(o){o.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},o.createObjects=function(){var a=this;this.elements.forEach(function(c,d){c.setAttribute("svgUid",a.svgUid),a.createObject(c,d)})},o.findTag=function(a){return e[e.util.string.capitalize(a.tagName.replace("svg:",""))]},o.createObject=function(a,c){var d=this.findTag(a);if(d&&d.fromElement)try{d.fromElement(a,this.createCallback(c,a),this.options)}catch(l){e.log(l)}else this.checkIfDone()},o.createCallback=function(a,c){var d=this;return function(l){var u;d.resolveGradient(l,c,"fill"),d.resolveGradient(l,c,"stroke"),l instanceof e.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(c)),l._removeTransformMatrix(u),d.resolveClipPath(l,c),d.reviver&&d.reviver(c,l),d.instances[a]=l,d.checkIfDone()}},o.extractPropertyDefinition=function(a,c,d){var l=a[c],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var h=u.exec(l)[1];return u.lastIndex=0,e[d][this.svgUid][h]}},o.resolveGradient=function(a,c,d){var l=this.extractPropertyDefinition(a,d,"gradientDefs");if(l){var u=c.getAttribute(d+"-opacity"),h=e.Gradient.fromElement(l,a,u,this.options);a.set(d,h)}},o.createClipPathCallback=function(a,c){return function(d){d._removeTransformMatrix(),d.fillRule=d.clipRule,c.push(d)}},o.resolveClipPath=function(a,c){var d=this.extractPropertyDefinition(a,"clipPath","clipPaths"),l,u,h,g,m,p;if(d){g=[],h=e.util.invertTransform(a.calcTransformMatrix());for(var v=d[0].parentNode,y=c;y.parentNode&&y.getAttribute("clip-path")!==a.clipPath;)y=y.parentNode;y.parentNode.appendChild(v);for(var _=0;_<d.length;_++)l=d[_],u=this.findTag(l),u.fromElement(l,this.createClipPathCallback(a,g),this.options);g.length===1?d=g[0]:d=new e.Group(g),m=e.util.multiplyTransformMatrices(h,d.calcTransformMatrix()),d.clipPath&&this.resolveClipPath(d,y);var p=e.util.qrDecompose(m);d.flipX=!1,d.flipY=!1,d.set("scaleX",p.scaleX),d.set("scaleY",p.scaleY),d.angle=p.angle,d.skewX=p.skewX,d.skewY=0,d.setPositionByOrigin({x:p.translateX,y:p.translateY},"center","center"),a.clipPath=d}else delete a.clipPath},o.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(a){return a!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(o){var a=o.fabric||(o.fabric={});if(a.Point){a.warn("fabric.Point is already defined");return}a.Point=c;function c(d,l){this.x=d,this.y=l}c.prototype={type:"point",constructor:c,add:function(d){return new c(this.x+d.x,this.y+d.y)},addEquals:function(d){return this.x+=d.x,this.y+=d.y,this},scalarAdd:function(d){return new c(this.x+d,this.y+d)},scalarAddEquals:function(d){return this.x+=d,this.y+=d,this},subtract:function(d){return new c(this.x-d.x,this.y-d.y)},subtractEquals:function(d){return this.x-=d.x,this.y-=d.y,this},scalarSubtract:function(d){return new c(this.x-d,this.y-d)},scalarSubtractEquals:function(d){return this.x-=d,this.y-=d,this},multiply:function(d){return new c(this.x*d,this.y*d)},multiplyEquals:function(d){return this.x*=d,this.y*=d,this},divide:function(d){return new c(this.x/d,this.y/d)},divideEquals:function(d){return this.x/=d,this.y/=d,this},eq:function(d){return this.x===d.x&&this.y===d.y},lt:function(d){return this.x<d.x&&this.y<d.y},lte:function(d){return this.x<=d.x&&this.y<=d.y},gt:function(d){return this.x>d.x&&this.y>d.y},gte:function(d){return this.x>=d.x&&this.y>=d.y},lerp:function(d,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new c(this.x+(d.x-this.x)*l,this.y+(d.y-this.y)*l)},distanceFrom:function(d){var l=this.x-d.x,u=this.y-d.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(d){return this.lerp(d)},min:function(d){return new c(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new c(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,l){return this.x=d,this.y=l,this},setX:function(d){return this.x=d,this},setY:function(d){return this.y=d,this},setFromPoint:function(d){return this.x=d.x,this.y=d.y,this},swap:function(d){var l=this.x,u=this.y;this.x=d.x,this.y=d.y,d.x=l,d.y=u},clone:function(){return new c(this.x,this.y)}}}(n),function(o){var a=o.fabric||(o.fabric={});if(a.Intersection){a.warn("fabric.Intersection is already defined");return}function c(d){this.status=d,this.points=[]}a.Intersection=c,a.Intersection.prototype={constructor:c,appendPoint:function(d){return this.points.push(d),this},appendPoints:function(d){return this.points=this.points.concat(d),this}},a.Intersection.intersectLineLine=function(d,l,u,h){var g,m=(h.x-u.x)*(d.y-u.y)-(h.y-u.y)*(d.x-u.x),p=(l.x-d.x)*(d.y-u.y)-(l.y-d.y)*(d.x-u.x),v=(h.y-u.y)*(l.x-d.x)-(h.x-u.x)*(l.y-d.y);if(v!==0){var y=m/v,_=p/v;0<=y&&y<=1&&0<=_&&_<=1?(g=new c("Intersection"),g.appendPoint(new a.Point(d.x+y*(l.x-d.x),d.y+y*(l.y-d.y)))):g=new c}else m===0||p===0?g=new c("Coincident"):g=new c("Parallel");return g},a.Intersection.intersectLinePolygon=function(d,l,u){var h=new c,g=u.length,m,p,v,y;for(y=0;y<g;y++)m=u[y],p=u[(y+1)%g],v=c.intersectLineLine(d,l,m,p),h.appendPoints(v.points);return h.points.length>0&&(h.status="Intersection"),h},a.Intersection.intersectPolygonPolygon=function(d,l){var u=new c,h=d.length,g;for(g=0;g<h;g++){var m=d[g],p=d[(g+1)%h],v=c.intersectLinePolygon(m,p,l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},a.Intersection.intersectPolygonRectangle=function(d,l,u){var h=l.min(u),g=l.max(u),m=new a.Point(g.x,h.y),p=new a.Point(h.x,g.y),v=c.intersectLinePolygon(h,m,d),y=c.intersectLinePolygon(m,g,d),_=c.intersectLinePolygon(g,p,d),x=c.intersectLinePolygon(p,h,d),b=new c;return b.appendPoints(v.points),b.appendPoints(y.points),b.appendPoints(_.points),b.appendPoints(x.points),b.points.length>0&&(b.status="Intersection"),b}}(n),function(o){var a=o.fabric||(o.fabric={});if(a.Color){a.warn("fabric.Color is already defined.");return}function c(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}a.Color=c,a.Color.prototype={_tryParsingColor:function(l){var u;l in c.colorNameMap&&(l=c.colorNameMap[l]),l==="transparent"&&(u=[255,255,255,0]),u||(u=c.sourceFromHex(l)),u||(u=c.sourceFromRgb(l)),u||(u=c.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,h){l/=255,u/=255,h/=255;var g,m,p,v=a.util.array.max([l,u,h]),y=a.util.array.min([l,u,h]);if(p=(v+y)/2,v===y)g=m=0;else{var _=v-y;switch(m=p>.5?_/(2-v-y):_/(v+y),v){case l:g=(u-h)/_+(u<h?6:0);break;case u:g=(h-l)/_+2;break;case h:g=(l-u)/_+4;break}g/=6}return[Math.round(g*360),Math.round(m*100),Math.round(p*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),u,h,g;return u=l[0].toString(16),u=u.length===1?"0"+u:u,h=l[1].toString(16),h=h.length===1?"0"+h:h,g=l[2].toString(16),g=g.length===1?"0"+g:g,u.toUpperCase()+h.toUpperCase()+g.toUpperCase()},toHexa:function(){var l=this.getSource(),u;return u=Math.round(l[3]*255),u=u.toString(16),u=u.length===1?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),h=l[3];return this.setSource([u,u,u,h]),this},toBlackWhite:function(l){var u=this.getSource(),h=(u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),g=u[3];return l=l||127,h=Number(h)<Number(l)?0:255,this.setSource([h,h,h,g]),this},overlayWith:function(l){l instanceof c||(l=new c(l));var u=[],h=this.getAlpha(),g=.5,m=this.getSource(),p=l.getSource(),v;for(v=0;v<3;v++)u.push(Math.round(m[v]*(1-g)+p[v]*g));return u[3]=h,this.setSource(u),this}},a.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,a.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,a.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,a.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function d(l,u,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?l+(u-l)*6*h:h<1/2?u:h<2/3?l+(u-l)*(2/3-h)*6:l}a.Color.fromRgb=function(l){return c.fromSource(c.sourceFromRgb(l))},a.Color.sourceFromRgb=function(l){var u=l.match(c.reRGBa);if(u){var h=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),g=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),m=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(h,10),parseInt(g,10),parseInt(m,10),u[4]?parseFloat(u[4]):1]}},a.Color.fromRgba=c.fromRgb,a.Color.fromHsl=function(l){return c.fromSource(c.sourceFromHsl(l))},a.Color.sourceFromHsl=function(l){var u=l.match(c.reHSLa);if(u){var h=(parseFloat(u[1])%360+360)%360/360,g=parseFloat(u[2])/(/%$/.test(u[2])?100:1),m=parseFloat(u[3])/(/%$/.test(u[3])?100:1),p,v,y;if(g===0)p=v=y=m;else{var _=m<=.5?m*(g+1):m+g-m*g,x=m*2-_;p=d(x,_,h+1/3),v=d(x,_,h),y=d(x,_,h-1/3)}return[Math.round(p*255),Math.round(v*255),Math.round(y*255),u[4]?parseFloat(u[4]):1]}},a.Color.fromHsla=c.fromHsl,a.Color.fromHex=function(l){return c.fromSource(c.sourceFromHex(l))},a.Color.sourceFromHex=function(l){if(l.match(c.reHex)){var u=l.slice(l.indexOf("#")+1),h=u.length===3||u.length===4,g=u.length===8||u.length===4,m=h?u.charAt(0)+u.charAt(0):u.substring(0,2),p=h?u.charAt(1)+u.charAt(1):u.substring(2,4),v=h?u.charAt(2)+u.charAt(2):u.substring(4,6),y=g?h?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(m,16),parseInt(p,16),parseInt(v,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},a.Color.fromSource=function(l){var u=new c;return u.setSource(l),u}}(n),function(o){var a=o.fabric||(o.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],d=["ns","nesw","ew","nwse"],l={},u="left",h="top",g="right",m="bottom",p="center",v={top:m,bottom:h,left:g,right:u,center:p},y=a.util.radiansToDegrees,_=Math.sign||function(J){return(J>0)-(J<0)||+J};function x(J,K){var ce=J.angle+y(Math.atan2(K.y,K.x))+360;return Math.round(ce%360/45)}function b(J,K){var ce=K.transform.target,ue=ce.canvas,ae=a.util.object.clone(K);ae.target=ce,ue&&ue.fire("object:"+J,ae),ce.fire(J,K)}function w(J,K){var ce=K.canvas,ue=ce.uniScaleKey,ae=J[ue];return ce.uniformScaling&&!ae||!ce.uniformScaling&&ae}function T(J){return J.originX===p&&J.originY===p}function S(J,K,ce){var ue=J.lockScalingX,ae=J.lockScalingY;return!!(ue&&ae||!K&&(ue||ae)&&ce||ue&&K==="x"||ae&&K==="y")}function O(J,K,ce){var ue="not-allowed",ae=w(J,ce),le="";if(K.x!==0&&K.y===0?le="x":K.x===0&&K.y!==0&&(le="y"),S(ce,le,ae))return ue;var ve=x(ce,K);return c[ve]+"-resize"}function N(J,K,ce){var ue="not-allowed";if(K.x!==0&&ce.lockSkewingY||K.y!==0&&ce.lockSkewingX)return ue;var ae=x(ce,K)%4;return d[ae]+"-resize"}function V(J,K,ce){return J[ce.canvas.altActionKey]?l.skewCursorStyleHandler(J,K,ce):l.scaleCursorStyleHandler(J,K,ce)}function Z(J,K,ce){var ue=J[ce.canvas.altActionKey];if(K.x===0)return ue?"skewX":"scaleY";if(K.y===0)return ue?"skewY":"scaleX"}function j(J,K,ce){return ce.lockRotation?"not-allowed":K.cursorStyle}function z(J,K,ce,ue){return{e:J,transform:K,pointer:{x:ce,y:ue}}}function G(J){return function(K,ce,ue,ae){var le=ce.target,ve=le.getCenterPoint(),Ie=le.translateToOriginPoint(ve,ce.originX,ce.originY),Me=J(K,ce,ue,ae);return le.setPositionByOrigin(Ie,ce.originX,ce.originY),Me}}function ne(J,K){return function(ce,ue,ae,le){var ve=K(ce,ue,ae,le);return ve&&b(J,z(ce,ue,ae,le)),ve}}function re(J,K,ce,ue,ae){var le=J.target,ve=le.controls[J.corner],Ie=le.canvas.getZoom(),Me=le.padding/Ie,R=le.toLocalPoint(new a.Point(ue,ae),K,ce);return R.x>=Me&&(R.x-=Me),R.x<=-Me&&(R.x+=Me),R.y>=Me&&(R.y-=Me),R.y<=Me&&(R.y+=Me),R.x-=ve.offsetX,R.y-=ve.offsetY,R}function U(J){return J.flipX!==J.flipY}function M(J,K,ce,ue,ae){if(J[K]!==0){var le=J._getTransformedDimensions()[ue],ve=ae/le*J[ce];J.set(ce,ve)}}function D(J,K,ce,ue){var ae=K.target,le=ae._getTransformedDimensions(0,ae.skewY),ve=re(K,K.originX,K.originY,ce,ue),Ie=Math.abs(ve.x*2)-le.x,Me=ae.skewX,R;Ie<2?R=0:(R=y(Math.atan2(Ie/ae.scaleX,le.y/ae.scaleY)),K.originX===u&&K.originY===m&&(R=-R),K.originX===g&&K.originY===h&&(R=-R),U(ae)&&(R=-R));var I=Me!==R;if(I){var ie=ae._getTransformedDimensions().y;ae.set("skewX",R),M(ae,"skewY","scaleY","y",ie)}return I}function P(J,K,ce,ue){var ae=K.target,le=ae._getTransformedDimensions(ae.skewX,0),ve=re(K,K.originX,K.originY,ce,ue),Ie=Math.abs(ve.y*2)-le.y,Me=ae.skewY,R;Ie<2?R=0:(R=y(Math.atan2(Ie/ae.scaleY,le.x/ae.scaleX)),K.originX===u&&K.originY===m&&(R=-R),K.originX===g&&K.originY===h&&(R=-R),U(ae)&&(R=-R));var I=Me!==R;if(I){var ie=ae._getTransformedDimensions().x;ae.set("skewY",R),M(ae,"skewX","scaleX","x",ie)}return I}function L(J,K,ce,ue){var ae=K.target,le=ae.skewX,ve,Ie=K.originY;if(ae.lockSkewingX)return!1;if(le===0){var Me=re(K,p,p,ce,ue);Me.x>0?ve=u:ve=g}else le>0&&(ve=Ie===h?u:g),le<0&&(ve=Ie===h?g:u),U(ae)&&(ve=ve===u?g:u);K.originX=ve;var R=ne("skewing",G(D));return R(J,K,ce,ue)}function H(J,K,ce,ue){var ae=K.target,le=ae.skewY,ve,Ie=K.originX;if(ae.lockSkewingY)return!1;if(le===0){var Me=re(K,p,p,ce,ue);Me.y>0?ve=h:ve=m}else le>0&&(ve=Ie===u?h:m),le<0&&(ve=Ie===u?m:h),U(ae)&&(ve=ve===h?m:h);K.originY=ve;var R=ne("skewing",G(P));return R(J,K,ce,ue)}function k(J,K,ce,ue){var ae=K,le=ae.target,ve=le.translateToOriginPoint(le.getCenterPoint(),ae.originX,ae.originY);if(le.lockRotation)return!1;var Ie=Math.atan2(ae.ey-ve.y,ae.ex-ve.x),Me=Math.atan2(ue-ve.y,ce-ve.x),R=y(Me-Ie+ae.theta),I=!0;if(le.snapAngle>0){var ie=le.snapAngle,pe=le.snapThreshold||ie,_e=Math.ceil(R/ie)*ie,xe=Math.floor(R/ie)*ie;Math.abs(R-xe)<pe?R=xe:Math.abs(R-_e)<pe&&(R=_e)}return R<0&&(R=360+R),R%=360,I=le.angle!==R,le.angle=R,I}function A(J,K,ce,ue,ae){ae=ae||{};var le=K.target,ve=le.lockScalingX,Ie=le.lockScalingY,Me=ae.by,R,I,ie,pe,_e=w(J,le),xe=S(le,Me,_e),Pe,$,te=K.gestureScale;if(xe)return!1;if(te)I=K.scaleX*te,ie=K.scaleY*te;else{if(R=re(K,K.originX,K.originY,ce,ue),Pe=Me!=="y"?_(R.x):1,$=Me!=="x"?_(R.y):1,K.signX||(K.signX=Pe),K.signY||(K.signY=$),le.lockScalingFlip&&(K.signX!==Pe||K.signY!==$))return!1;if(pe=le._getTransformedDimensions(),_e&&!Me){var Te=Math.abs(R.x)+Math.abs(R.y),Ce=K.original,Ae=Math.abs(pe.x*Ce.scaleX/le.scaleX)+Math.abs(pe.y*Ce.scaleY/le.scaleY),Re=Te/Ae;I=Ce.scaleX*Re,ie=Ce.scaleY*Re}else I=Math.abs(R.x*le.scaleX/pe.x),ie=Math.abs(R.y*le.scaleY/pe.y);T(K)&&(I*=2,ie*=2),K.signX!==Pe&&Me!=="y"&&(K.originX=v[K.originX],I*=-1,K.signX=Pe),K.signY!==$&&Me!=="x"&&(K.originY=v[K.originY],ie*=-1,K.signY=$)}var De=le.scaleX,Ve=le.scaleY;return Me?(Me==="x"&&le.set("scaleX",I),Me==="y"&&le.set("scaleY",ie)):(!ve&&le.set("scaleX",I),!Ie&&le.set("scaleY",ie)),De!==le.scaleX||Ve!==le.scaleY}function F(J,K,ce,ue){return A(J,K,ce,ue)}function W(J,K,ce,ue){return A(J,K,ce,ue,{by:"x"})}function Y(J,K,ce,ue){return A(J,K,ce,ue,{by:"y"})}function X(J,K,ce,ue){return J[K.target.canvas.altActionKey]?l.skewHandlerX(J,K,ce,ue):l.scalingY(J,K,ce,ue)}function ee(J,K,ce,ue){return J[K.target.canvas.altActionKey]?l.skewHandlerY(J,K,ce,ue):l.scalingX(J,K,ce,ue)}function he(J,K,ce,ue){var ae=K.target,le=re(K,K.originX,K.originY,ce,ue),ve=ae.strokeWidth/(ae.strokeUniform?ae.scaleX:1),Ie=T(K)?2:1,Me=ae.width,R=Math.abs(le.x*Ie/ae.scaleX)-ve;return ae.set("width",Math.max(R,0)),Me!==R}function ge(J,K,ce,ue){var ae=K.target,le=ce-K.offsetX,ve=ue-K.offsetY,Ie=!ae.get("lockMovementX")&&ae.left!==le,Me=!ae.get("lockMovementY")&&ae.top!==ve;return Ie&&ae.set("left",le),Me&&ae.set("top",ve),(Ie||Me)&&b("moving",z(J,K,ce,ue)),Ie||Me}l.scaleCursorStyleHandler=O,l.skewCursorStyleHandler=N,l.scaleSkewCursorStyleHandler=V,l.rotationWithSnapping=ne("rotating",G(k)),l.scalingEqually=ne("scaling",G(F)),l.scalingX=ne("scaling",G(W)),l.scalingY=ne("scaling",G(Y)),l.scalingYOrSkewingX=X,l.scalingXOrSkewingY=ee,l.changeWidth=ne("resizing",G(he)),l.skewHandlerX=L,l.skewHandlerY=H,l.dragHandler=ge,l.scaleOrSkewActionName=Z,l.rotationStyleHandler=j,l.fireEvent=b,l.wrapWithFixedAnchor=G,l.wrapWithFireEvent=ne,l.getLocalPoint=re,a.controlsUtils=l}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.degreesToRadians,d=a.controlsUtils;function l(h,g,m,p,v){p=p||{};var y=this.sizeX||p.cornerSize||v.cornerSize,_=this.sizeY||p.cornerSize||v.cornerSize,x=typeof p.transparentCorners<"u"?p.transparentCorners:v.transparentCorners,b=x?"stroke":"fill",w=!x&&(p.cornerStrokeColor||v.cornerStrokeColor),T=g,S=m,O;h.save(),h.fillStyle=p.cornerColor||v.cornerColor,h.strokeStyle=p.cornerStrokeColor||v.cornerStrokeColor,y>_?(O=y,h.scale(1,_/y),S=m*y/_):_>y?(O=_,h.scale(y/_,1),T=g*_/y):O=y,h.lineWidth=1,h.beginPath(),h.arc(T,S,O/2,0,2*Math.PI,!1),h[b](),w&&h.stroke(),h.restore()}function u(h,g,m,p,v){p=p||{};var y=this.sizeX||p.cornerSize||v.cornerSize,_=this.sizeY||p.cornerSize||v.cornerSize,x=typeof p.transparentCorners<"u"?p.transparentCorners:v.transparentCorners,b=x?"stroke":"fill",w=!x&&(p.cornerStrokeColor||v.cornerStrokeColor),T=y/2,S=_/2;h.save(),h.fillStyle=p.cornerColor||v.cornerColor,h.strokeStyle=p.cornerStrokeColor||v.cornerStrokeColor,h.lineWidth=1,h.translate(g,m),h.rotate(c(v.angle)),h[b+"Rect"](-T,-S,y,_),w&&h.strokeRect(-T,-S,y,_),h.restore()}d.renderCircleControl=l,d.renderSquareControl=u}(n),function(o){var a=o.fabric||(o.fabric={});function c(d){for(var l in d)this[l]=d[l]}a.Control=c,a.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(d,l){return l.cursorStyle},getActionName:function(d,l){return l.actionName},getVisibility:function(d,l){var u=d._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(d){this.visible=d},positionHandler:function(d,l){var u=a.util.transformPoint({x:this.x*d.x+this.offsetX,y:this.y*d.y+this.offsetY},l);return u},calcCornerCoords:function(d,l,u,h,g){var m,p,v,y,_=g?this.touchSizeX:this.sizeX,x=g?this.touchSizeY:this.sizeY;if(_&&x&&_!==x){var b=Math.atan2(x,_),w=Math.sqrt(_*_+x*x)/2,T=b-a.util.degreesToRadians(d),S=Math.PI/2-b-a.util.degreesToRadians(d);m=w*a.util.cos(T),p=w*a.util.sin(T),v=w*a.util.cos(S),y=w*a.util.sin(S)}else{var O=_&&x?_:l;w=O*.7071067812;var T=a.util.degreesToRadians(45-d);m=v=w*a.util.cos(T),p=y=w*a.util.sin(T)}return{tl:{x:u-y,y:h-v},tr:{x:u+m,y:h-p},bl:{x:u-m,y:h+p},br:{x:u+y,y:h+v}}},render:function(d,l,u,h,g){switch(h=h||{},h.cornerStyle||g.cornerStyle){case"circle":a.controlsUtils.renderCircleControl.call(this,d,l,u,h,g);break;default:a.controlsUtils.renderSquareControl.call(this,d,l,u,h,g)}}}}(n),function(){function o(u,h){var g=u.getAttribute("style"),m=u.getAttribute("offset")||0,p,v,y,_;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,g){var x=g.split(/\s*;\s*/);for(x[x.length-1]===""&&x.pop(),_=x.length;_--;){var b=x[_].split(/\s*:\s*/),w=b[0].trim(),T=b[1].trim();w==="stop-color"?p=T:w==="stop-opacity"&&(y=T)}}return p||(p=u.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=u.getAttribute("stop-opacity")),p=new e.Color(p),v=p.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=v*h,{offset:m,color:p.toRgb(),opacity:y}}function a(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}function c(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}var d=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var h,g=this;Object.keys(u).forEach(function(m){g[m]=u[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,h={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(h.r1=u.coords.r1||0,h.r2=u.coords.r2||0),this.coords=h,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var h in u){var g=new e.Color(u[h]);this.colorStops.push({offset:parseFloat(h),color:g.toRgb(),opacity:g.getAlpha()})}return this},toObject:function(u){var h={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,h,u),h},toSVG:function(u,v){var g=d(this.coords,!0),m,p,v=v||{},y,_,x=d(this.colorStops,!0),b=g.r1>g.r2,w=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),T=-this.offsetX,S=-this.offsetY,O=!!v.additionalTransform,N=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(x.sort(function(G,ne){return G.offset-ne.offset}),N==="objectBoundingBox"?(T/=u.width,S/=u.height):(T+=u.width/2,S+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(T-=u.pathOffset.x,S-=u.pathOffset.y),w[4]-=T,w[5]-=S,_='id="SVGID_'+this.id+'" gradientUnits="'+N+'"',_+=' gradientTransform="'+(O?v.additionalTransform+" ":"")+e.util.matrixToSVG(w)+'" ',this.type==="linear"?y=["<linearGradient ",_,' x1="',g.x1,'" y1="',g.y1,'" x2="',g.x2,'" y2="',g.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",_,' cx="',b?g.x1:g.x2,'" cy="',b?g.y1:g.y2,'" r="',b?g.r1:g.r2,'" fx="',b?g.x2:g.x1,'" fy="',b?g.y2:g.y1,`">
`]),this.type==="radial"){if(b)for(x=x.concat(),x.reverse(),m=0,p=x.length;m<p;m++)x[m].offset=1-x[m].offset;var V=Math.min(g.r1,g.r2);if(V>0){var Z=Math.max(g.r1,g.r2),j=V/Z;for(m=0,p=x.length;m<p;m++)x[m].offset+=j*(1-x[m].offset)}}for(m=0,p=x.length;m<p;m++){var z=x[m];y.push("<stop ",'offset="',z.offset*100+"%",'" style="stop-color:',z.color,typeof z.opacity<"u"?";stop-opacity: "+z.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(u){var h,g=e.util.object.clone(this.coords),m,p;if(this.type){for(this.type==="linear"?h=u.createLinearGradient(g.x1,g.y1,g.x2,g.y2):this.type==="radial"&&(h=u.createRadialGradient(g.x1,g.y1,g.r1,g.x2,g.y2,g.r2)),m=0,p=this.colorStops.length;m<p;m++){var v=this.colorStops[m].color,y=this.colorStops[m].opacity,_=this.colorStops[m].offset;typeof y<"u"&&(v=new e.Color(v).setAlpha(y).toRgba()),h.addColorStop(_,v)}return h}}}),e.util.object.extend(e.Gradient,{fromElement:function(u,h,g,m){var p=parseFloat(g)/(/%$/.test(g)?100:1);p=p<0?0:p>1?1:p,isNaN(p)&&(p=1);var v=u.getElementsByTagName("stop"),y,_=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",x=u.getAttribute("gradientTransform")||"",b=[],w,T,S=0,O=0,N;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(y="linear",w=a(u)):(y="radial",w=c(u)),T=v.length;T--;)b.push(o(v[T],p));N=e.parseTransformAttribute(x),l(h,w,m,_),_==="pixels"&&(S=-h.left,O=-h.top);var V=new e.Gradient({id:u.getAttribute("id"),type:y,coords:w,colorStops:b,gradientUnits:_,gradientTransform:N,offsetX:S,offsetY:O});return V}});function l(u,h,g,m){var p,v;Object.keys(h).forEach(function(y){p=h[y],p==="Infinity"?v=1:p==="-Infinity"?v=0:(v=parseFloat(h[y],10),typeof p=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(p)&&(v*=.01,m==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(v*=g.viewBoxWidth||g.width),(y==="y1"||y==="y2")&&(v*=g.viewBoxHeight||g.height)))),h[y]=v})}}(),function(){var o=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(a,c){if(a||(a={}),this.id=e.Object.__uid++,this.setOptions(a),!a.source||a.source&&typeof a.source!="string"){c&&c(this);return}else{var d=this;this.source=e.util.createImage(),e.util.loadImage(a.source,function(l,u){d.source=l,c&&c(d,u)},null,this.crossOrigin)}},toObject:function(a){var c=e.Object.NUM_FRACTION_DIGITS,d,l;return typeof this.source.src=="string"?d=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(d=this.source.toDataURL()),l={type:"pattern",source:d,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:o(this.offsetX,c),offsetY:o(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,l,a),l},toSVG:function(a){var c=typeof this.source=="function"?this.source():this.source,d=c.width/a.width,l=c.height/a.height,u=this.offsetX/a.width,h=this.offsetY/a.height,g="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,h&&(l+=Math.abs(h))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(d=1,u&&(d+=Math.abs(u))),c.src?g=c.src:c.toDataURL&&(g=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+h+'" width="'+d+'" height="'+l+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+g+`"></image>
</pattern>
`},setOptions:function(a){for(var c in a)this[c]=a[c]},toLive:function(a){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":a.createPattern(c,this.repeat)}})}(),function(o){var a=o.fabric||(o.fabric={}),c=a.util.toFixed;if(a.Shadow){a.warn("fabric.Shadow is already defined.");return}a.Shadow=a.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(d){typeof d=="string"&&(d=this._parseShadow(d));for(var l in d)this[l]=d[l];this.id=a.Object.__uid++},_parseShadow:function(d){var l=d.trim(),u=a.Shadow.reOffsetsAndBlur.exec(l)||[],h=l.replace(a.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:h.trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(d){var l=40,u=40,h=a.Object.NUM_FRACTION_DIGITS,g=a.util.rotateVector({x:this.offsetX,y:this.offsetY},a.util.degreesToRadians(-d.angle)),m=20,p=new a.Color(this.color);return d.width&&d.height&&(l=c((Math.abs(g.x)+this.blur)/d.width,h)*100+m,u=c((Math.abs(g.y)+this.blur)/d.height,h)*100+m),d.flipX&&(g.x*=-1),d.flipY&&(g.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,h)+`"></feGaussianBlur>
	<feOffset dx="`+c(g.x,h)+'" dy="'+c(g.y,h)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+p.toRgb()+'" flood-opacity="'+p.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var d={},l=a.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(d[u]=this[u])},this),d}}),a.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(n),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var o=e.util.object.extend,a=e.util.getElementOffset,c=e.util.removeFromArray,d=e.util.toFixed,l=e.util.transformPoint,u=e.util.invertTransform,h=e.util.getNodeCanvas,g=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(p,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(p,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(p,v){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(p),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,y),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,y),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,y),v.overlayColor&&this.setOverlayColor(v.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var p=e.devicePixelRatio;this.__initRetinaScaling(p,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(p,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(p,v,y){v.setAttribute("width",this.width*p),v.setAttribute("height",this.height*p),y.scale(p,p)},calcOffset:function(){return this._offset=a(this.lowerCanvasEl),this},setOverlayImage:function(p,v,y){return this.__setBgOverlayImage("overlayImage",p,v,y)},setBackgroundImage:function(p,v,y){return this.__setBgOverlayImage("backgroundImage",p,v,y)},setOverlayColor:function(p,v){return this.__setBgOverlayColor("overlayColor",p,v)},setBackgroundColor:function(p,v){return this.__setBgOverlayColor("backgroundColor",p,v)},__setBgOverlayImage:function(p,v,y,_){return typeof v=="string"?e.util.loadImage(v,function(x,b){if(x){var w=new e.Image(x,_);this[p]=w,w.canvas=this}y&&y(x,b)},this,_&&_.crossOrigin):(_&&v.setOptions(_),this[p]=v,v&&(v.canvas=this),y&&y(v,!1)),this},__setBgOverlayColor:function(p,v,y){return this[p]=v,this._initGradient(v,p),this._initPattern(v,p,y),this},_createCanvasElement:function(){var p=g();if(!p||(p.style||(p.style={}),typeof p.getContext>"u"))throw m;return p},_initOptions:function(p){var v=this.lowerCanvasEl;this._setOptions(p),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(p){p&&p.getContext?this.lowerCanvasEl=p:this.lowerCanvasEl=e.util.getById(p)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(p,v){return this.setDimensions({width:p},v)},setHeight:function(p,v){return this.setDimensions({height:p},v)},setDimensions:function(p,v){var y;v=v||{};for(var _ in p)y=p[_],v.cssOnly||(this._setBackstoreDimension(_,p[_]),y+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(_,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(p,v){return this.lowerCanvasEl[p]=v,this.upperCanvasEl&&(this.upperCanvasEl[p]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[p]=v),this[p]=v,this},_setCssDimension:function(p,v){return this.lowerCanvasEl.style[p]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[p]=v),this.wrapperEl&&(this.wrapperEl.style[p]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(p){var v=this._activeObject,y=this.backgroundImage,_=this.overlayImage,x,b,w;for(this.viewportTransform=p,b=0,w=this._objects.length;b<w;b++)x=this._objects[b],x.group||x.setCoords(!0);return v&&v.setCoords(),y&&y.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(p,v){var y=p,_=this.viewportTransform.slice(0);p=l(p,u(this.viewportTransform)),_[0]=v,_[3]=v;var x=l(p,_);return _[4]+=y.x-x.x,_[5]+=y.y-x.y,this.setViewportTransform(_)},setZoom:function(p){return this.zoomToPoint(new e.Point(0,0),p),this},absolutePan:function(p){var v=this.viewportTransform.slice(0);return v[4]=-p.x,v[5]=-p.y,this.setViewportTransform(v)},relativePan:function(p){return this.absolutePan(new e.Point(-p.x-this.viewportTransform[4],-p.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(p){this.stateful&&p.setupState(),p._set("canvas",this),p.setCoords(),this.fire("object:added",{target:p}),p.fire("added")},_onObjectRemoved:function(p){this.fire("object:removed",{target:p}),p.fire("removed"),delete p.canvas},clearContext:function(p){return p.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var p=this.contextContainer;return this.renderCanvas(p,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var p={},v=this.width,y=this.height,_=u(this.viewportTransform);return p.tl=l({x:0,y:0},_),p.br=l({x:v,y},_),p.tr=new e.Point(p.br.x,p.tl.y),p.bl=new e.Point(p.tl.x,p.br.y),this.vptCoords=p,p},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(p,v){var y=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(p),e.util.setImageSmoothing(p,this.imageSmoothingEnabled),this.fire("before:render",{ctx:p}),this._renderBackground(p),p.save(),p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(p,v),p.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(p)),this._renderOverlay(p),this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),this.fire("after:render",{ctx:p})},drawClipPathOnCanvas:function(p){var v=this.viewportTransform,y=this.clipPath;p.save(),p.transform(v[0],v[1],v[2],v[3],v[4],v[5]),p.globalCompositeOperation="destination-in",y.transform(p),p.scale(1/y.zoomX,1/y.zoomY),p.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),p.restore()},_renderObjects:function(p,v){var y,_;for(y=0,_=v.length;y<_;++y)v[y]&&v[y].render(p)},_renderBackgroundOrOverlay:function(p,v){var y=this[v+"Color"],_=this[v+"Image"],x=this.viewportTransform,b=this[v+"Vpt"];if(!(!y&&!_)){if(y){p.save(),p.beginPath(),p.moveTo(0,0),p.lineTo(this.width,0),p.lineTo(this.width,this.height),p.lineTo(0,this.height),p.closePath(),p.fillStyle=y.toLive?y.toLive(p,this):y,b&&p.transform(x[0],x[1],x[2],x[3],x[4],x[5]),p.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var w=y.gradientTransform||y.patternTransform;w&&p.transform(w[0],w[1],w[2],w[3],w[4],w[5]),p.fill(),p.restore()}_&&(p.save(),b&&p.transform(x[0],x[1],x[2],x[3],x[4],x[5]),_.render(p),p.restore())}},_renderBackground:function(p){this._renderBackgroundOrOverlay(p,"background")},_renderOverlay:function(p){this._renderBackgroundOrOverlay(p,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(p){return this._centerObject(p,new e.Point(this.getCenterPoint().x,p.getCenterPoint().y))},centerObjectV:function(p){return this._centerObject(p,new e.Point(p.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(p){var v=this.getCenterPoint();return this._centerObject(p,v)},viewportCenterObject:function(p){var v=this.getVpCenter();return this._centerObject(p,v)},viewportCenterObjectH:function(p){var v=this.getVpCenter();return this._centerObject(p,new e.Point(v.x,p.getCenterPoint().y)),this},viewportCenterObjectV:function(p){var v=this.getVpCenter();return this._centerObject(p,new e.Point(p.getCenterPoint().x,v.y))},getVpCenter:function(){var p=this.getCenterPoint(),v=u(this.viewportTransform);return l(p,v)},_centerObject:function(p,v){return p.setPositionByOrigin(v,"center","center"),p.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(p){return this.toDatalessObject(p)},toObject:function(p){return this._toObjectMethod("toObject",p)},toDatalessObject:function(p){return this._toObjectMethod("toDatalessObject",p)},_toObjectMethod:function(p,v){var y=this.clipPath,_={version:e.version,objects:this._toObjects(p,v)};return y&&!y.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,p,v)),o(_,this.__serializeBgOverlay(p,v)),e.util.populateWithProperties(this,_,v),_},_toObjects:function(p,v){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,p,v)},this)},_toObject:function(p,v,y){var _;this.includeDefaultValues||(_=p.includeDefaultValues,p.includeDefaultValues=!1);var x=p[v](y);return this.includeDefaultValues||(p.includeDefaultValues=_),x},__serializeBgOverlay:function(p,v){var y={},_=this.backgroundImage,x=this.overlayImage,b=this.backgroundColor,w=this.overlayColor;return b&&b.toObject?b.excludeFromExport||(y.background=b.toObject(v)):b&&(y.background=b),w&&w.toObject?w.excludeFromExport||(y.overlay=w.toObject(v)):w&&(y.overlay=w),_&&!_.excludeFromExport&&(y.backgroundImage=this._toObject(_,p,v)),x&&!x.excludeFromExport&&(y.overlayImage=this._toObject(x,p,v)),y},svgViewportTransformation:!0,toSVG:function(p,v){p||(p={}),p.reviver=v;var y=[];return this._setSVGPreamble(y,p),this._setSVGHeader(y,p),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",v),this._setSVGObjects(y,v),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",v),y.push("</svg>"),y.join("")},_setSVGPreamble:function(p,v){v.suppressPreamble||p.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(p,v){var y=v.width||this.width,_=v.height||this.height,x,b='viewBox="0 0 '+this.width+" "+this.height+'" ',w=e.Object.NUM_FRACTION_DIGITS;v.viewBox?b='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(x=this.viewportTransform,b='viewBox="'+d(-x[4]/x[0],w)+" "+d(-x[5]/x[3],w)+" "+d(this.width/x[0],w)+" "+d(this.height/x[3],w)+'" '),p.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',_,'" ',b,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(p){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(p.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var p=this,v=["background","overlay"].map(function(y){var _=p[y+"Color"];if(_&&_.toLive){var x=p[y+"Vpt"],b=p.viewportTransform,w={width:p.width/(x?b[0]:1),height:p.height/(x?b[3]:1)};return _.toSVG(w,{additionalTransform:x?e.util.matrixToSVG(b):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var p="",v={},y,_,x,b,w,T,S,O,N,V=e.fontPaths,Z=[];for(this._objects.forEach(function z(G){Z.push(G),G._objects&&G._objects.forEach(z)}),O=0,N=Z.length;O<N;O++)if(y=Z[O],_=y.fontFamily,!(y.type.indexOf("text")===-1||v[_]||!V[_])&&(v[_]=!0,!!y.styles)){x=y.styles;for(w in x){b=x[w];for(S in b)T=b[S],_=T.fontFamily,!v[_]&&V[_]&&(v[_]=!0)}}for(var j in v)p+=[`		@font-face {
`,"			font-family: '",j,`';
`,"			src: url('",V[j],`');
`,`		}
`].join("");return p&&(p=['	<style type="text/css">',`<![CDATA[
`,p,"]]>",`</style>
`].join("")),p},_setSVGObjects:function(p,v){var y,_,x,b=this._objects;for(_=0,x=b.length;_<x;_++)y=b[_],!y.excludeFromExport&&this._setSVGObject(p,y,v)},_setSVGObject:function(p,v,y){p.push(v.toSVG(y))},_setSVGBgOverlayImage:function(p,v,y){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&p.push(this[v].toSVG(y))},_setSVGBgOverlayColor:function(p,v){var y=this[v+"Color"],_=this.viewportTransform,x=this.width,b=this.height;if(y)if(y.toLive){var w=y.repeat,T=e.util.invertTransform(_),S=this[v+"Vpt"],O=S?e.util.matrixToSVG(T):"";p.push('<rect transform="'+O+" translate(",x/2,",",b/2,')"',' x="',y.offsetX-x/2,'" y="',y.offsetY-b/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?y.source.width:x,'" height="',w==="repeat-x"||w==="no-repeat"?y.source.height:b,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else p.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(p){if(!p)return this;var v=this._activeObject,y,_,x;if(p===v&&p.type==="activeSelection")for(x=v._objects,y=x.length;y--;)_=x[y],c(this._objects,_),this._objects.unshift(_);else c(this._objects,p),this._objects.unshift(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(p){if(!p)return this;var v=this._activeObject,y,_,x;if(p===v&&p.type==="activeSelection")for(x=v._objects,y=0;y<x.length;y++)_=x[y],c(this._objects,_),this._objects.push(_);else c(this._objects,p),this._objects.push(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(p,v){if(!p)return this;var y=this._activeObject,_,x,b,w,T,S=0;if(p===y&&p.type==="activeSelection")for(T=y._objects,_=0;_<T.length;_++)x=T[_],b=this._objects.indexOf(x),b>0+S&&(w=b-1,c(this._objects,x),this._objects.splice(w,0,x)),S++;else b=this._objects.indexOf(p),b!==0&&(w=this._findNewLowerIndex(p,b,v),c(this._objects,p),this._objects.splice(w,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(p,v,y){var _,x;if(y)for(_=v,x=v-1;x>=0;--x){var b=p.intersectsWithObject(this._objects[x])||p.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(p);if(b){_=x;break}}else _=v-1;return _},bringForward:function(p,v){if(!p)return this;var y=this._activeObject,_,x,b,w,T,S=0;if(p===y&&p.type==="activeSelection")for(T=y._objects,_=T.length;_--;)x=T[_],b=this._objects.indexOf(x),b<this._objects.length-1-S&&(w=b+1,c(this._objects,x),this._objects.splice(w,0,x)),S++;else b=this._objects.indexOf(p),b!==this._objects.length-1&&(w=this._findNewUpperIndex(p,b,v),c(this._objects,p),this._objects.splice(w,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(p,v,y){var _,x,b;if(y)for(_=v,x=v+1,b=this._objects.length;x<b;++x){var w=p.intersectsWithObject(this._objects[x])||p.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(p);if(w){_=x;break}}else _=v+1;return _},moveTo:function(p,v){return c(this._objects,p),this._objects.splice(v,0,p),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(p){p.dispose&&p.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),o(e.StaticCanvas.prototype,e.Observable),o(e.StaticCanvas.prototype,e.Collection),o(e.StaticCanvas.prototype,e.DataURLExporter),o(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(p){var v=g();if(!v||!v.getContext)return null;var y=v.getContext("2d");if(!y)return null;switch(p){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var p=h(this.lowerCanvasEl);return p&&p.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(p){var v=h(this.lowerCanvasEl);return v&&v.createJPEGStream(p)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(o){o.strokeStyle=this.color,o.lineWidth=this.width,o.lineCap=this.strokeLineCap,o.miterLimit=this.strokeMiterLimit,o.lineJoin=this.strokeLineJoin,o.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(o){var a=this.canvas.viewportTransform;o.save(),o.transform(a[0],a[1],a[2],a[3],a[4],a[5])},_setShadow:function(){if(this.shadow){var o=this.canvas,a=this.shadow,c=o.contextTop,d=o.getZoom();o&&o._isRetinaScaling()&&(d*=e.devicePixelRatio),c.shadowColor=a.color,c.shadowBlur=a.blur*d,c.shadowOffsetX=a.offsetX*d,c.shadowOffsetY=a.offsetY*d}},needsFullRender:function(){var o=new e.Color(this.color);return o.getAlpha()<1||!!this.shadow},_resetShadow:function(){var o=this.canvas.contextTop;o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0},_isOutSideCanvas:function(o){return o.x<0||o.x>this.canvas.getWidth()||o.y<0||o.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(o){this.canvas=o,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(o,a,c){var d=a.midPointFrom(c);return o.quadraticCurveTo(a.x,a.y,d.x,d.y),d},onMouseDown:function(o,a){this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],this._prepareForDrawing(o),this._captureDrawingPath(o),this._render())},onMouseMove:function(o,a){if(this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o))&&this._captureDrawingPath(o)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,d=c.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,c[d-2],c[d-1],!0),l.stroke(),l.restore()}},onMouseUp:function(o){return this.canvas._isMainEvent(o.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(o){var a=new e.Point(o.x,o.y);this._reset(),this._addPoint(a),this.canvas.contextTop.moveTo(a.x,a.y)},_addPoint:function(o){return this._points.length>1&&o.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(o),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(o){var a=new e.Point(o.x,o.y);return this._addPoint(a)},_render:function(o){var a,c,d=this._points[0],l=this._points[1];if(o=o||this.canvas.contextTop,this._saveAndTransform(o),o.beginPath(),this._points.length===2&&d.x===l.x&&d.y===l.y){var u=this.width/1e3;d=new e.Point(d.x,d.y),l=new e.Point(l.x,l.y),d.x-=u,l.x+=u}for(o.moveTo(d.x,d.y),a=1,c=this._points.length;a<c;a++)this._drawSegment(o,d,l),d=this._points[a],l=this._points[a+1];o.lineTo(d.x,d.y),o.stroke(),o.restore()},convertPointsToSVGPath:function(o){var a=this.width/1e3;return e.util.getSmoothPathFromPoints(o,a)},_isEmptySVGPath:function(o){var a=e.util.joinPath(o);return a==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(o){var a=new e.Path(o,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,a.shadow=new e.Shadow(this.shadow)),a},decimatePoints:function(o,a){if(o.length<=2)return o;var c=this.canvas.getZoom(),d=Math.pow(a/c,2),l,u=o.length-1,h=o[0],g=[h],m;for(l=1;l<u-1;l++)m=Math.pow(h.x-o[l].x,2)+Math.pow(h.y-o[l].y,2),m>=d&&(h=o[l],g.push(h));return g.push(o[u]),g},_finalizeAndAddPath:function(){var o=this.canvas.contextTop;o.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var a=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(a)){this.canvas.requestRenderAll();return}var c=this.createPath(a);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(o){this.canvas=o,this.points=[]},drawDot:function(o){var a=this.addPoint(o),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,a),c.restore()},dot:function(o,a){o.fillStyle=a.fill,o.beginPath(),o.arc(a.x,a.y,a.radius,0,Math.PI*2,!1),o.closePath(),o.fill()},onMouseDown:function(o){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(o)},_render:function(){var o=this.canvas.contextTop,a,c,d=this.points;for(this._saveAndTransform(o),a=0,c=d.length;a<c;a++)this.dot(o,d[a]);o.restore()},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(o),this._render()):this.drawDot(o))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove,a,c;this.canvas.renderOnAddRemove=!1;var d=[];for(a=0,c=this.points.length;a<c;a++){var l=this.points[a],u=new e.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new e.Shadow(this.shadow)),d.push(u)}var h=new e.Group(d);h.canvas=this.canvas,this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},addPoint:function(o){var a=new e.Point(o.x,o.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return a.radius=c,a.fill=d,this.points.push(a),a}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(o){this.canvas=o,this.sprayChunks=[]},onMouseDown:function(o){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(o),this.render(this.sprayChunkPoints)},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.addSprayChunk(o),this.render(this.sprayChunkPoints))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var a=[],c=0,d=this.sprayChunks.length;c<d;c++)for(var l=this.sprayChunks[c],u=0,h=l.length;u<h;u++){var g=new e.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});a.push(g)}this.optimizeOverlapping&&(a=this._getOptimizedRects(a));var m=new e.Group(a);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},_getOptimizedRects:function(o){var a={},c,d,l;for(d=0,l=o.length;d<l;d++)c=o[d].left+""+o[d].top,a[c]||(a[c]=o[d]);var u=[];for(c in a)u.push(a[c]);return u},render:function(o){var a=this.canvas.contextTop,c,d;for(a.fillStyle=this.color,this._saveAndTransform(a),c=0,d=o.length;c<d;c++){var l=o[c];typeof l.opacity<"u"&&(a.globalAlpha=l.opacity),a.fillRect(l.x,l.y,l.width,l.width)}a.restore()},_render:function(){var o=this.canvas.contextTop,a,c;for(o.fillStyle=this.color,this._saveAndTransform(o),a=0,c=this.sprayChunks.length;a<c;a++)this.render(this.sprayChunks[a]);o.restore()},addSprayChunk:function(o){this.sprayChunkPoints=[];var a,c,d,l=this.width/2,u;for(u=0;u<this.density;u++){a=e.util.getRandomInt(o.x-l,o.x+l),c=e.util.getRandomInt(o.y-l,o.y+l),this.dotWidthVariance?d=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):d=this.dotWidth;var h=new e.Point(a,c);h.width=d,this.randomOpacity&&(h.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(h)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var o=20,a=5,c=e.util.createCanvasElement(),d=c.getContext("2d");return c.width=c.height=o+a,d.fillStyle=this.color,d.beginPath(),d.arc(o/2,o/2,o/2,0,Math.PI*2,!1),d.closePath(),d.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(o){return o.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(o){this.callSuper("_setBrushStyles",o),o.strokeStyle=this.getPattern(o)},createPath:function(o){var a=this.callSuper("createPath",o),c=a._getLeftTopCoords().scalarAdd(a.strokeWidth/2);return a.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),a}}),function(){var o=e.util.getPointer,a=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),u,h,g;if(l.length>0&&!this.preserveObjectStacking){h=[],g=[];for(var m=0,p=this._objects.length;m<p;m++)u=this._objects[m],l.indexOf(u)===-1?h.push(u):g.push(u);l.length>1&&(this._activeObject._objects=g),h.push.apply(h,g)}else h=this._objects;return h},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var h=l.calcTransformMatrix(),g=e.util.invertTransform(h),m=this.restorePointerVpt(u);return e.util.transformPoint(m,g)},isTargetTransparent:function(l,u,h){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var g=this._normalizePointer(l,{x:u,y:h}),m=Math.max(l.cacheTranslationX+g.x*l.zoomX,0),p=Math.max(l.cacheTranslationY+g.y*l.zoomY,0),x=e.util.isTransparent(l._cacheContext,Math.round(m),Math.round(p),this.targetFindTolerance);return x}var v=this.contextCache,y=l.selectionBackgroundColor,_=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(_[0],_[1],_[2],_[3],_[4],_[5]),l.render(v),v.restore(),l.selectionBackgroundColor=y;var x=e.util.isTransparent(v,u,h,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(l){var u=!1;return Array.isArray(this.selectionKey)?u=!!this.selectionKey.find(function(h){return l[h]===!0}):u=l[this.selectionKey],u},_shouldClearSelection:function(l,u){var h=this.getActiveObjects(),g=this._activeObject;return!u||u&&g&&h.length>1&&h.indexOf(u)===-1&&g!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&g&&g!==u},_shouldCenterTransform:function(l,u,h){if(l){var g;return u==="scale"||u==="scaleX"||u==="scaleY"||u==="resizing"?g=this.centeredScaling||l.centeredScaling:u==="rotate"&&(g=this.centeredRotation||l.centeredRotation),g?!h:h}},_getOriginFromCorner:function(l,u){var h={x:l.originX,y:l.originY};return u==="ml"||u==="tl"||u==="bl"?h.x="right":(u==="mr"||u==="tr"||u==="br")&&(h.x="left"),u==="tl"||u==="mt"||u==="tr"?h.y="bottom":(u==="bl"||u==="mb"||u==="br")&&(h.y="top"),h},_getActionFromCorner:function(l,u,h,g){if(!u||!l)return"drag";var m=g.controls[u];return m.getActionName(h,m,g)},_setupCurrentTransform:function(l,u,h){if(u){var g=this.getPointer(l),m=u.__corner,p=u.controls[m],v=h&&m?p.getActionHandler(l,u,p):e.controlsUtils.dragHandler,y=this._getActionFromCorner(h,m,l,u),_=this._getOriginFromCorner(u,m),x=l[this.centeredKey],b={target:u,action:y,actionHandler:v,corner:m,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:g.x-u.left,offsetY:g.y-u.top,originX:_.x,originY:_.y,ex:g.x,ey:g.y,lastX:g.x,lastY:g.y,theta:a(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:x,original:e.util.saveObjectTransform(u)};this._shouldCenterTransform(u,y,x)&&(b.originX="center",b.originY="center"),b.original.originX=_.x,b.original.originY=_.y,this._currentTransform=b,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,h=new e.Point(u.ex,u.ey),g=e.util.transformPoint(h,this.viewportTransform),m=new e.Point(u.ex+u.left,u.ey+u.top),p=e.util.transformPoint(m,this.viewportTransform),v=Math.min(g.x,p.x),y=Math.min(g.y,p.y),_=Math.max(g.x,p.x),x=Math.max(g.y,p.y),b=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,y,_-v,x-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=b,y+=b,_-=b,x-=b,e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,y,_-v,x-y))},findTarget:function(l,u){if(!this.skipTargetFind){var h=!0,g=this.getPointer(l,h),m=this._activeObject,p=this.getActiveObjects(),v,y,_=c(l),x=p.length>1&&!u||p.length===1;if(this.targets=[],x&&m._findTargetCorner(g,_)||p.length>1&&!u&&m===this._searchPossibleTargets([m],g))return m;if(p.length===1&&m===this._searchPossibleTargets([m],g))if(this.preserveObjectStacking)v=m,y=this.targets,this.targets=[];else return m;var b=this._searchPossibleTargets(this._objects,g);return l[this.altSelectionKey]&&b&&v&&b!==v&&(b=v,this.targets=y),b}},_checkTarget:function(l,u,h){if(u&&u.visible&&u.evented&&u.containsPoint(l))if((this.perPixelTargetFind||u.perPixelTargetFind)&&!u.isEditing){var g=this.isTargetTransparent(u,h.x,h.y);if(!g)return!0}else return!0},_searchPossibleTargets:function(l,u){for(var h,g=l.length,m;g--;){var p=l[g],v=p.group?this._normalizePointer(p.group,u):u;if(this._checkTarget(v,p,u)){h=l[g],h.subTargetCheck&&h instanceof e.Group&&(m=this._searchPossibleTargets(h._objects,u),m&&this.targets.push(m));break}}return h},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var h=o(l),g=this.upperCanvasEl,m=g.getBoundingClientRect(),p=m.width||0,v=m.height||0,y;(!p||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(p=Math.abs(m.right-m.left))),this.calcOffset(),h.x=h.x-this._offset.left,h.y=h.y-this._offset.top,u||(h=this.restorePointerVpt(h));var _=this.getRetinaScaling();return _!==1&&(h.x/=_,h.y/=_),p===0||v===0?y={width:1,height:1}:y={width:g.width/p,height:g.height/v},{x:h.x*y.width,y:h.y*y.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,h=this.upperCanvasEl;h?h.className="":(h=this._createCanvasElement(),this.upperCanvasEl=h),e.util.addClass(h,"upper-canvas "+l),this.wrapperEl.appendChild(h),this._copyCanvasStyle(u,h),this._applyCanvasStyle(h),this.contextTop=h.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,h=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:u+"px",height:h+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=h,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var h=!1,g=this.getActiveObjects(),m=[],p=[];l.forEach(function(v){g.indexOf(v)===-1&&(h=!0,v.fire("deselected",{e:u,target:v}),p.push(v))}),g.forEach(function(v){l.indexOf(v)===-1&&(h=!0,v.fire("selected",{e:u,target:v}),m.push(v))}),l.length>0&&g.length>0?h&&this.fire("selection:updated",{e:u,selected:m,deselected:p}):g.length>0?this.fire("selection:created",{e:u,selected:m}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:p})},setActiveObject:function(l,u){var h=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(h,u),this},_setActiveObject:function(l,u){return this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,u){var h=this._activeObject;if(h){if(h.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),h=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:h,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,h){var g=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,u,h);return this._unwindGroupTransformOnObject(l,g),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var u=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],h={};return u.forEach(function(g){h[g]=l[g]}),e.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),h}else return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,h){var g=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,h),this._unwindGroupTransformOnObject(u,g)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var d in e.StaticCanvas)d!=="prototype"&&(e.Canvas[d]=e.StaticCanvas[d])}(),function(){var o=e.util.addListener,a=e.util.removeListener,c=3,d=2,l=1,u={passive:!1};function h(g,m){return g.button&&g.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(o,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(g,m){var p=this.upperCanvasEl,v=this._getEventPrefix();g(e.window,"resize",this._onResize),g(p,v+"down",this._onMouseDown),g(p,v+"move",this._onMouseMove,u),g(p,v+"out",this._onMouseOut),g(p,v+"enter",this._onMouseEnter),g(p,"wheel",this._onMouseWheel),g(p,"contextmenu",this._onContextMenu),g(p,"dblclick",this._onDoubleClick),g(p,"dragover",this._onDragOver),g(p,"dragenter",this._onDragEnter),g(p,"dragleave",this._onDragLeave),g(p,"drop",this._onDrop),this.enablePointerEvents||g(p,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](p,"gesture",this._onGesture),eventjs[m](p,"drag",this._onDrag),eventjs[m](p,"orientation",this._onOrientationChange),eventjs[m](p,"shake",this._onShake),eventjs[m](p,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(a,"remove");var g=this._getEventPrefix();a(e.document,g+"up",this._onMouseUp),a(e.document,"touchend",this._onTouchEnd,u),a(e.document,g+"move",this._onMouseMove,u),a(e.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(g,m){this.__onTransformGesture&&this.__onTransformGesture(g,m)},_onDrag:function(g,m){this.__onDrag&&this.__onDrag(g,m)},_onMouseWheel:function(g){this.__onMouseWheel(g)},_onMouseOut:function(g){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:g}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:g});var p=this;this._hoveredTargets.forEach(function(v){p.fire("mouse:out",{target:m,e:g}),v&&m.fire("mouseout",{e:g})}),this._hoveredTargets=[]},_onMouseEnter:function(g){!this._currentTransform&&!this.findTarget(g)&&(this.fire("mouse:over",{target:null,e:g}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(g,m){this.__onOrientationChange&&this.__onOrientationChange(g,m)},_onShake:function(g,m){this.__onShake&&this.__onShake(g,m)},_onLongPress:function(g,m){this.__onLongPress&&this.__onLongPress(g,m)},_onDragOver:function(g){g.preventDefault();var m=this._simpleEventHandler("dragover",g);this._fireEnterLeaveEvents(m,g)},_onDrop:function(g){return this._simpleEventHandler("drop:before",g),this._simpleEventHandler("drop",g)},_onContextMenu:function(g){return this.stopContextMenu&&(g.stopPropagation(),g.preventDefault()),!1},_onDoubleClick:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"dblclick"),this._resetTransformEventData(g)},getPointerId:function(g){var m=g.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?g.pointerId:-1},_isMainEvent:function(g){return g.isPrimary===!0?!0:g.isPrimary===!1?!1:g.type==="touchend"&&g.touches.length===0?!0:g.changedTouches?g.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(g){g.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(g)),this.__onMouseDown(g),this._resetTransformEventData();var m=this.upperCanvasEl,p=this._getEventPrefix();o(e.document,"touchend",this._onTouchEnd,u),o(e.document,"touchmove",this._onMouseMove,u),a(m,p+"down",this._onMouseDown)},_onMouseDown:function(g){this.__onMouseDown(g),this._resetTransformEventData();var m=this.upperCanvasEl,p=this._getEventPrefix();a(m,p+"move",this._onMouseMove,u),o(e.document,p+"up",this._onMouseUp),o(e.document,p+"move",this._onMouseMove,u)},_onTouchEnd:function(g){if(!(g.touches.length>0)){this.__onMouseUp(g),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();a(e.document,"touchend",this._onTouchEnd,u),a(e.document,"touchmove",this._onMouseMove,u);var p=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){o(p.upperCanvasEl,m+"down",p._onMouseDown),p._willAddMouseDown=0},400)}},_onMouseUp:function(g){this.__onMouseUp(g),this._resetTransformEventData();var m=this.upperCanvasEl,p=this._getEventPrefix();this._isMainEvent(g)&&(a(e.document,p+"up",this._onMouseUp),a(e.document,p+"move",this._onMouseMove,u),o(m,p+"move",this._onMouseMove,u))},_onMouseMove:function(g){!this.allowTouchScrolling&&g.preventDefault&&g.preventDefault(),this.__onMouseMove(g)},_onResize:function(){this.calcOffset()},_shouldRender:function(g){var m=this._activeObject;return!!m!=!!g||m&&g&&m!==g?!0:(m&&m.isEditing,!1)},__onMouseUp:function(g){var m,p=this._currentTransform,v=this._groupSelector,y=!1,_=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(g),m=this._target,this._handleEvent(g,"up:before"),h(g,c)){this.fireRightClick&&this._handleEvent(g,"up",c,_);return}if(h(g,d)){this.fireMiddleClick&&this._handleEvent(g,"up",d,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(g);return}if(this._isMainEvent(g)){if(p&&(this._finalizeCurrentTransform(g),y=p.actionPerformed),!_){var x=m===this._activeObject;this._maybeGroupObjects(g),y||(y=this._shouldRender(m)||!x&&m===this._activeObject)}var b,w;if(m){if(b=m._findTargetCorner(this.getPointer(g,!0),e.util.isTouchEvent(g)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,g),y=!0;else{var T=m.controls[b],S=T&&T.getMouseUpHandler(g,m,T);S&&(w=this.getPointer(g),S(g,p,w.x,w.y))}m.isMoving=!1}if(p&&(p.target!==m||p.corner!==b)){var O=p.target&&p.target.controls[p.corner],N=O&&O.getMouseUpHandler(g,m,T);w=w||this.getPointer(g),N&&N(g,p,w.x,w.y)}this._setCursorFromEvent(g,m),this._handleEvent(g,"up",l,_),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),y?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(g,m){var p=this.findTarget(m),v=this.targets,y={e:m,target:p,subTargets:v};if(this.fire(g,y),p&&p.fire(g,y),!v)return p;for(var _=0;_<v.length;_++)v[_].fire(g,y);return p},_handleEvent:function(g,m,p,v){var y=this._target,_=this.targets||[],x={e:g,target:y,subTargets:_,button:p||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(x.currentTarget=this.findTarget(g),x.currentSubTargets=this.targets),this.fire("mouse:"+m,x),y&&y.fire("mouse"+m,x);for(var b=0;b<_.length;b++)_[b].fire("mouse"+m,x)},_finalizeCurrentTransform:function(g){var m=this._currentTransform,p=m.target,v={e:g,target:p,transform:m,action:m.action};p._scaling&&(p._scaling=!1),p.setCoords(),(m.actionPerformed||this.stateful&&p.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(g){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(g).requestRenderAll();var m=this.getPointer(g);this.freeDrawingBrush.onMouseDown(m,{e:g,pointer:m}),this._handleEvent(g,"down")},_onMouseMoveInDrawingMode:function(g){if(this._isCurrentlyDrawing){var m=this.getPointer(g);this.freeDrawingBrush.onMouseMove(m,{e:g,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(g,"move")},_onMouseUpInDrawingMode:function(g){var m=this.getPointer(g);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:g,pointer:m}),this._handleEvent(g,"up")},__onMouseDown:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"down:before");var m=this._target;if(h(g,c)){this.fireRightClick&&this._handleEvent(g,"down",c);return}if(h(g,d)){this.fireMiddleClick&&this._handleEvent(g,"down",d);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(g);return}if(this._isMainEvent(g)&&!this._currentTransform){var p=this._pointer;this._previousPointer=p;var v=this._shouldRender(m),y=this._shouldGroup(g,m);if(this._shouldClearSelection(g,m)?this.discardActiveObject(g):y&&(this._handleGrouping(g,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var _=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,g);var x=m._findTargetCorner(this.getPointer(g,!0),e.util.isTouchEvent(g));if(m.__corner=x,m===this._activeObject&&(x||!y)){this._setupCurrentTransform(g,m,_);var b=m.controls[x],p=this.getPointer(g),w=b&&b.getMouseDownHandler(g,m,b);w&&w(g,this._currentTransform,p.x,p.y)}}this._handleEvent(g,"down"),(v||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(g){this._resetTransformEventData(),this._pointer=this.getPointer(g,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(g)||null},_beforeTransform:function(g){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:g,transform:m})},__onMouseMove:function(g){this._handleEvent(g,"move:before"),this._cacheTransformEventData(g);var m,p;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(g);return}if(this._isMainEvent(g)){var v=this._groupSelector;v?(p=this._absolutePointer,v.left=p.x-v.ex,v.top=p.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(g):(m=this.findTarget(g)||null,this._setCursorFromEvent(g,m),this._fireOverOutEvents(m,g)),this._handleEvent(g,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(g,m){var p=this._hoveredTarget,v=this._hoveredTargets,y=this.targets,_=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(g,m,{oldTarget:p,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var x=0;x<_;x++)this.fireSyntheticInOutEvents(y[x],m,{oldTarget:v[x],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=g,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(g,m){var p=this._draggedoverTarget,v=this._hoveredTargets,y=this.targets,_=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(g,m,{oldTarget:p,evtOut:"dragleave",evtIn:"dragenter"});for(var x=0;x<_;x++)this.fireSyntheticInOutEvents(y[x],m,{oldTarget:v[x],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=g},fireSyntheticInOutEvents:function(g,m,p){var v,y,_=p.oldTarget,x,b,w=_!==g,T=p.canvasEvtIn,S=p.canvasEvtOut;w&&(v={e:m,target:g,previousTarget:_},y={e:m,target:_,nextTarget:g}),b=g&&w,x=_&&w,x&&(S&&this.fire(S,y),_.fire(p.evtOut,y)),b&&(T&&this.fire(T,v),g.fire(p.evtIn,v))},__onMouseWheel:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"wheel"),this._resetTransformEventData()},_transformObject:function(g){var m=this.getPointer(g),p=this._currentTransform;p.reset=!1,p.shiftKey=g.shiftKey,p.altKey=g[this.centeredKey],this._performTransformAction(g,p,m),p.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(g,m,p){var v=p.x,y=p.y,_=m.action,x=!1,b=m.actionHandler;b&&(x=b(g,m,v,y)),_==="drag"&&x&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||x},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(g,m){if(!m)return this.setCursor(this.defaultCursor),!1;var p=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(g,!0));y?this.setCursor(this.getCornerCursor(y,m,g)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(_){p=_.hoverCursor||p}),this.setCursor(p))},getCornerCursor:function(g,m,p){var v=m.controls[g];return v.cursorStyleHandler(p,v,m)}})}(),function(){var o=Math.min,a=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,d){var l=this._activeObject;return l&&this._isSelectionKeyPressed(c)&&d&&d.selectable&&this.selection&&(l!==d||l.type==="activeSelection")&&!d.onSelect({e:c})},_handleGrouping:function(c,d){var l=this._activeObject;l.__corner||d===l&&(d=this.findTarget(c,!0),!d||!d.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(d,c):this._createActiveSelection(d,c))},_updateActiveSelection:function(c,d){var l=this._activeObject,u=l._objects.slice(0);l.contains(c)?(l.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),d)):(l.addWithUpdate(c),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,d)},_createActiveSelection:function(c,d){var l=this.getActiveObjects(),u=this._createGroup(c);this._hoveredTarget=u,this._setActiveObject(u,d),this._fireSelectionEvents(l,d)},_createGroup:function(c){var d=this._objects,l=d.indexOf(this._activeObject)<d.indexOf(c),u=l?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(c){var d=this._collectObjects(c),l;d.length===1?this.setActiveObject(d[0],c):d.length>1&&(l=new e.ActiveSelection(d.reverse(),{canvas:this}),this.setActiveObject(l,c))},_collectObjects:function(c){for(var d=[],l,u=this._groupSelector.ex,h=this._groupSelector.ey,g=u+this._groupSelector.left,m=h+this._groupSelector.top,p=new e.Point(o(u,g),o(h,m)),v=new e.Point(a(u,g),a(h,m)),y=!this.selectionFullyContained,_=u===g&&h===m,x=this._objects.length;x--&&(l=this._objects[x],!(!(!l||!l.selectable||!l.visible)&&(y&&l.intersectsWithRect(p,v,!0)||l.isContainedWithinRect(p,v,!0)||y&&l.containsPoint(p,null,!0)||y&&l.containsPoint(v,null,!0))&&(d.push(l),_))););return d.length>1&&(d=d.filter(function(b){return!b.onSelect({e:c})})),d},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(o){o||(o={});var a=o.format||"png",c=o.quality||1,d=(o.multiplier||1)*(o.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(d,o);return e.util.toDataURL(l,a,c)},toCanvasElement:function(o,a){o=o||1,a=a||{};var c=(a.width||this.width)*o,d=(a.height||this.height)*o,l=this.getZoom(),u=this.width,h=this.height,g=l*o,m=this.viewportTransform,p=(m[4]-(a.left||0))*o,v=(m[5]-(a.top||0))*o,y=this.interactive,_=[g,0,0,g,p,v],x=this.enableRetinaScaling,b=e.util.createCanvasElement(),w=this.contextTop;return b.width=c,b.height=d,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=c,this.height=d,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),this._objects),this.viewportTransform=m,this.width=u,this.height=h,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=x,this.contextTop=w,b}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(o,a,c){if(o){var d=typeof o=="string"?JSON.parse(o):e.util.object.clone(o),l=this,u=d.clipPath,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete d.clipPath,this._enlivenObjects(d.objects,function(g){l.clear(),l._setBgOverlay(d,function(){u?l._enlivenObjects([u],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,d,g,h,a)}):l.__setupCanvas.call(l,d,g,h,a)})},c),this}},__setupCanvas:function(o,a,c,d){var l=this;a.forEach(function(u,h){l.insertAt(u,h)}),this.renderOnAddRemove=c,delete o.objects,delete o.backgroundImage,delete o.overlayImage,delete o.background,delete o.overlay,this._setOptions(o),this.renderAll(),d&&d()},_setBgOverlay:function(o,a){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!o.backgroundImage&&!o.overlayImage&&!o.background&&!o.overlay){a&&a();return}var d=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&a&&a()};this.__setBgOverlay("backgroundImage",o.backgroundImage,c,d),this.__setBgOverlay("overlayImage",o.overlayImage,c,d),this.__setBgOverlay("backgroundColor",o.background,c,d),this.__setBgOverlay("overlayColor",o.overlay,c,d)},__setBgOverlay:function(o,a,c,d){var l=this;if(!a){c[o]=!0,d&&d();return}o==="backgroundImage"||o==="overlayImage"?e.util.enlivenObjects([a],function(u){l[o]=u[0],c[o]=!0,d&&d()}):this["set"+e.util.string.capitalize(o,!0)](a,function(){c[o]=!0,d&&d()})},_enlivenObjects:function(o,a,c){if(!o||o.length===0){a&&a([]);return}e.util.enlivenObjects(o,function(d){a&&a(d)},null,c)},_toDataURL:function(o,a){this.clone(function(c){a(c.toDataURL(o))})},_toDataURLWithMultiplier:function(o,a,c){this.clone(function(d){c(d.toDataURLWithMultiplier(o,a))})},clone:function(o,a){var c=JSON.stringify(this.toJSON(a));this.cloneWithoutData(function(d){d.loadFromJSON(c,function(){o&&o(d)})})},cloneWithoutData:function(o){var a=e.util.createCanvasElement();a.width=this.width,a.height=this.height;var c=new e.Canvas(a);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),o&&o(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):o&&o(c)}}),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend,d=a.util.object.clone,l=a.util.toFixed,u=a.util.string.capitalize,h=a.util.degreesToRadians,g=!a.isLikelyNode,m=2;a.Object||(a.Object=a.util.createClass(a.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:g,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(p){p&&this.setOptions(p)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=a.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(p){var v=a.perfLimitSizeTotal,y=p.width,_=p.height,x=a.maxCacheSideLimit,b=a.minCacheSideLimit;if(y<=x&&_<=x&&y*_<=v)return y<b&&(p.width=b),_<b&&(p.height=b),p;var w=y/_,T=a.util.limitDimsByArea(w,v),S=a.util.capValue,O=S(b,T.x,x),N=S(b,T.y,x);return y>O&&(p.zoomX/=y/O,p.width=O,p.capped=!0),_>N&&(p.zoomY/=_/N,p.height=N,p.capped=!0),p},_getCacheCanvasDimensions:function(){var p=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),y=v.x*p.scaleX/this.scaleX,_=v.y*p.scaleY/this.scaleY;return{width:y+m,height:_+m,zoomX:p.scaleX,zoomY:p.scaleY,x:y,y:_}},_updateCacheCanvas:function(){var p=this.canvas;if(this.noScaleCache&&p&&p._currentTransform){var v=p._currentTransform.target,y=p._currentTransform.action;if(this===v&&y.slice&&y.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,x=this._limitCacheSize(this._getCacheCanvasDimensions()),b=a.minCacheSideLimit,w=x.width,T=x.height,S,O,N=x.zoomX,V=x.zoomY,Z=w!==this.cacheWidth||T!==this.cacheHeight,j=this.zoomX!==N||this.zoomY!==V,z=Z||j,G=0,ne=0,re=!1;if(Z){var U=this._cacheCanvas.width,M=this._cacheCanvas.height,D=w>U||T>M,P=(w<U*.9||T<M*.9)&&U>b&&M>b;re=D||P,D&&!x.capped&&(w>b||T>b)&&(G=w*.1,ne=T*.1)}return this instanceof a.Text&&this.path&&(z=!0,re=!0,G+=this.getHeightOfLine(0)*this.zoomX,ne+=this.getHeightOfLine(0)*this.zoomY),z?(re?(_.width=Math.ceil(w+G),_.height=Math.ceil(T+ne)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),S=x.x/2,O=x.y/2,this.cacheTranslationX=Math.round(_.width/2-S)+S,this.cacheTranslationY=Math.round(_.height/2-O)+O,this.cacheWidth=w,this.cacheHeight=T,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(N,V),this.zoomX=N,this.zoomY=V,!0):!1},setOptions:function(p){this._setOptions(p),this._initGradient(p.fill,"fill"),this._initGradient(p.stroke,"stroke"),this._initPattern(p.fill,"fill"),this._initPattern(p.stroke,"stroke")},transform:function(p){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&p===this.canvas.contextTop,y=this.calcTransformMatrix(!v);p.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(p){var v=a.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:a.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(p),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),a.util.populateWithProperties(this,y,p),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(p){return this.toObject(p)},_removeDefaultValues:function(p){var v=a.util.getKlass(p.type).prototype,y=v.stateProperties;return y.forEach(function(_){_==="left"||_==="top"||(p[_]===v[_]&&delete p[_],Array.isArray(p[_])&&Array.isArray(v[_])&&p[_].length===0&&v[_].length===0&&delete p[_])}),p},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var p=a.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(p.scaleX),scaleY:Math.abs(p.scaleY)}},getTotalObjectScaling:function(){var p=this.getObjectScaling(),v=p.scaleX,y=p.scaleY;if(this.canvas){var _=this.canvas.getZoom(),x=this.canvas.getRetinaScaling();v*=_*x,y*=_*x}return{scaleX:v,scaleY:y}},getObjectOpacity:function(){var p=this.opacity;return this.group&&(p*=this.group.getObjectOpacity()),p},_set:function(p,v){var y=p==="scaleX"||p==="scaleY",_=this[p]!==v,x=!1;return y&&(v=this._constrainScale(v)),p==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):p==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):p==="shadow"&&v&&!(v instanceof a.Shadow)?v=new a.Shadow(v):p==="dirty"&&this.group&&this.group.set("dirty",v),this[p]=v,_&&(x=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(p)>-1?(this.dirty=!0,x&&this.group.set("dirty",!0)):x&&this.stateProperties.indexOf(p)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:a.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(p){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(p.save(),this._setupCompositeOperation(p),this.drawSelectionBackground(p),this.transform(p),this._setOpacity(p),this._setShadow(p,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(p)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(p),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),p.restore())},renderCache:function(p){p=p||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,p.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(p,v){if(p.save(),v.inverted?p.globalCompositeOperation="destination-out":p.globalCompositeOperation="destination-in",v.absolutePositioned){var y=a.util.invertTransform(this.calcTransformMatrix());p.transform(y[0],y[1],y[2],y[3],y[4],y[5])}v.transform(p),p.scale(1/v.zoomX,1/v.zoomY),p.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),p.restore()},drawObject:function(p,v){var y=this.fill,_=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(p)):this._renderBackground(p),this._render(p),this._drawClipPath(p,this.clipPath),this.fill=y,this.stroke=_},_drawClipPath:function(p,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(p,v))},drawCacheOnCanvas:function(p){p.scale(1/this.zoomX,1/this.zoomY),p.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(p){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!p&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!p){var v=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-y/2,v,y)}return!0}return!1},_renderBackground:function(p){if(this.backgroundColor){var v=this._getNonTransformedDimensions();p.fillStyle=this.backgroundColor,p.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(p)}},_setOpacity:function(p){this.group&&!this.group._transformDone?p.globalAlpha=this.getObjectOpacity():p.globalAlpha*=this.opacity},_setStrokeStyles:function(p,v){var y=v.stroke;y&&(p.lineWidth=v.strokeWidth,p.lineCap=v.strokeLineCap,p.lineDashOffset=v.strokeDashOffset,p.lineJoin=v.strokeLineJoin,p.miterLimit=v.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(p,y):(p.strokeStyle=y.toLive(p,this),this._applyPatternGradientTransform(p,y)):p.strokeStyle=v.stroke)},_setFillStyles:function(p,v){var y=v.fill;y&&(y.toLive?(p.fillStyle=y.toLive(p,this),this._applyPatternGradientTransform(p,v.fill)):p.fillStyle=y)},_setClippingProperties:function(p){p.globalAlpha=1,p.strokeStyle="transparent",p.fillStyle="#000000"},_setLineDash:function(p,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),p.setLineDash(v))},_renderControls:function(p,v){var y=this.getViewportTransform(),_=this.calcTransformMatrix(),x,b,w;v=v||{},b=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,w=typeof v.hasControls<"u"?v.hasControls:this.hasControls,_=a.util.multiplyTransformMatrices(y,_),x=a.util.qrDecompose(_),p.save(),p.translate(x.translateX,x.translateY),p.lineWidth=1*this.borderScaleFactor,this.group||(p.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(x.angle-=180),p.rotate(h(this.group?x.angle:this.angle)),v.forActiveSelection||this.group?b&&this.drawBordersInGroup(p,x,v):b&&this.drawBorders(p,v),w&&this.drawControls(p,v),p.restore()},_setShadow:function(p){if(this.shadow){var v=this.shadow,y=this.canvas,_,x=y&&y.viewportTransform[0]||1,b=y&&y.viewportTransform[3]||1;v.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),y&&y._isRetinaScaling()&&(x*=a.devicePixelRatio,b*=a.devicePixelRatio),p.shadowColor=v.color,p.shadowBlur=v.blur*a.browserShadowBlurConstant*(x+b)*(_.scaleX+_.scaleY)/4,p.shadowOffsetX=v.offsetX*x*_.scaleX,p.shadowOffsetY=v.offsetY*b*_.scaleY}},_removeShadow:function(p){this.shadow&&(p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0)},_applyPatternGradientTransform:function(p,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var y=v.gradientTransform||v.patternTransform,_=-this.width/2+v.offsetX||0,x=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?p.transform(this.width,0,0,this.height,_,x):p.transform(1,0,0,1,_,x),y&&p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:_,offsetY:x}},_renderPaintInOrder:function(p){this.paintFirst==="stroke"?(this._renderStroke(p),this._renderFill(p)):(this._renderFill(p),this._renderStroke(p))},_render:function(){},_renderFill:function(p){this.fill&&(p.save(),this._setFillStyles(p,this),this.fillRule==="evenodd"?p.fill("evenodd"):p.fill(),p.restore())},_renderStroke:function(p){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(p),p.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();p.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&p.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(p,this.strokeDashArray),this._setStrokeStyles(p,this),p.stroke(),p.restore()}},_applyPatternForTransformedGradient:function(p,v){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),_=a.util.createCanvasElement(),x,b=this.canvas.getRetinaScaling(),w=y.x/this.scaleX/b,T=y.y/this.scaleY/b;_.width=w,_.height=T,x=_.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(w,0),x.lineTo(w,T),x.lineTo(0,T),x.closePath(),x.translate(w/2,T/2),x.scale(y.zoomX/this.scaleX/b,y.zoomY/this.scaleY/b),this._applyPatternGradientTransform(x,v),x.fillStyle=v.toLive(p),x.fill(),p.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),p.scale(b*this.scaleX/y.zoomX,b*this.scaleY/y.zoomY),p.strokeStyle=x.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var p=a.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",p.scaleX),this.set("scaleY",p.scaleY),this.angle=p.angle,this.skewX=p.skewX,this.skewY=0}},_removeTransformMatrix:function(p){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=a.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,p&&(this.scaleX*=p.scaleX,this.scaleY*=p.scaleY,this.cropX=p.cropX,this.cropY=p.cropY,v.x+=p.offsetLeft,v.y+=p.offsetTop,this.width=p.width,this.height=p.height),this.setPositionByOrigin(v,"center","center")},clone:function(p,v){var y=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(y,p):a.Object._fromObject("Object",y,p)},cloneAsImage:function(p,v){var y=this.toCanvasElement(v);return p&&p(new a.Image(y)),this},toCanvasElement:function(p){p||(p={});var v=a.util,y=v.saveObjectTransform(this),_=this.group,x=this.shadow,b=Math.abs,w=(p.multiplier||1)*(p.enableRetinaScaling?a.devicePixelRatio:1);delete this.group,p.withoutTransform&&v.resetObjectTransform(this),p.withoutShadow&&(this.shadow=null);var T=a.util.createCanvasElement(),S=this.getBoundingRect(!0,!0),O=this.shadow,N,V={x:0,y:0},Z,j,z;O&&(Z=O.blur,O.nonScaling?N={scaleX:1,scaleY:1}:N=this.getObjectScaling(),V.x=2*Math.round(b(O.offsetX)+Z)*b(N.scaleX),V.y=2*Math.round(b(O.offsetY)+Z)*b(N.scaleY)),j=S.width+V.x,z=S.height+V.y,T.width=Math.ceil(j),T.height=Math.ceil(z);var G=new a.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});p.format==="jpeg"&&(G.backgroundColor="#fff"),this.setPositionByOrigin(new a.Point(G.width/2,G.height/2),"center","center");var ne=this.canvas;G.add(this);var re=G.toCanvasElement(w||1,p);return this.shadow=x,this.set("canvas",ne),_&&(this.group=_),this.set(y).setCoords(),G._objects=[],G.dispose(),G=null,re},toDataURL:function(p){return p||(p={}),a.util.toDataURL(this.toCanvasElement(p),p.format||"png",p.quality||1)},isType:function(p){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===p},complexity:function(){return 1},toJSON:function(p){return this.toObject(p)},rotate:function(p){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",p),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(p,v){v=v||this.canvas.getPointer(p);var y=new a.Point(v.x,v.y),_=this._getLeftTopCoords();return this.angle&&(y=a.util.rotatePoint(y,_,h(-this.angle))),{x:y.x-_.x,y:y.y-_.y}},_setupCompositeOperation:function(p){this.globalCompositeOperation&&(p.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){a.runningAnimations&&a.runningAnimations.cancelByTarget(this)}}),a.util.createAccessors&&a.util.createAccessors(a.Object),c(a.Object.prototype,a.Observable),a.Object.NUM_FRACTION_DIGITS=2,a.Object.ENLIVEN_PROPS=["clipPath"],a.Object._fromObject=function(p,v,y,_){var x=a[p];v=d(v,!0),a.util.enlivenPatterns([v.fill,v.stroke],function(b){typeof b[0]<"u"&&(v.fill=b[0]),typeof b[1]<"u"&&(v.stroke=b[1]),a.util.enlivenObjectEnlivables(v,v,function(){var w=_?new x(v[_],v):new x(v);y&&y(w)})})},a.Object.__uid=0)}(n),function(){var o=e.util.degreesToRadians,a={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(d,l,u,h,g){var m=d.x,p=d.y,v,y,_;return typeof l=="string"?l=a[l]:l-=.5,typeof h=="string"?h=a[h]:h-=.5,v=h-l,typeof u=="string"?u=c[u]:u-=.5,typeof g=="string"?g=c[g]:g-=.5,y=g-u,(v||y)&&(_=this._getTransformedDimensions(),m=d.x+v*_.x,p=d.y+y*_.y),new e.Point(m,p)},translateToCenterPoint:function(d,l,u){var h=this.translateToGivenOrigin(d,l,u,"center","center");return this.angle?e.util.rotatePoint(h,d,o(this.angle)):h},translateToOriginPoint:function(d,l,u){var h=this.translateToGivenOrigin(d,"center","center",l,u);return this.angle?e.util.rotatePoint(h,d,o(this.angle)):h},getCenterPoint:function(){var d=new e.Point(this.left,this.top);return this.translateToCenterPoint(d,this.originX,this.originY)},getPointByOrigin:function(d,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,d,l)},toLocalPoint:function(d,l,u){var h=this.getCenterPoint(),g,m;return typeof l<"u"&&typeof u<"u"?g=this.translateToGivenOrigin(h,"center","center",l,u):g=new e.Point(this.left,this.top),m=new e.Point(d.x,d.y),this.angle&&(m=e.util.rotatePoint(m,h,-o(this.angle))),m.subtractEquals(g)},setPositionByOrigin:function(d,l,u){var h=this.translateToCenterPoint(d,l,u),g=this.translateToOriginPoint(h,this.originX,this.originY);this.set("left",g.x),this.set("top",g.y)},adjustPosition:function(d){var l=o(this.angle),u=this.getScaledWidth(),h=e.util.cos(l)*u,g=e.util.sin(l)*u,m,p;typeof this.originX=="string"?m=a[this.originX]:m=this.originX-.5,typeof d=="string"?p=a[d]:p=d-.5,this.left+=h*(p-m),this.top+=g*(p-m),this.setCoords(),this.originX=d},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var d=this.getCenterPoint();this.originX="center",this.originY="center",this.left=d.x,this.top=d.y},_resetOrigin:function(){var d=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=d.x,this.top=d.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function o(u){return[new e.Point(u.tl.x,u.tl.y),new e.Point(u.tr.x,u.tr.y),new e.Point(u.br.x,u.br.y),new e.Point(u.bl.x,u.bl.y)]}var a=e.util,c=a.degreesToRadians,d=a.multiplyTransformMatrices,l=a.transformPoint;a.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,h){return h?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,h){return o(this._getCoords(u,h))},intersectsWithRect:function(u,h,g,m){var p=this.getCoords(g,m),v=e.Intersection.intersectPolygonRectangle(p,u,h);return v.status==="Intersection"},intersectsWithObject:function(u,h,g){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(h,g),u.getCoords(h,g));return m.status==="Intersection"||u.isContainedWithinObject(this,h,g)||this.isContainedWithinObject(u,h,g)},isContainedWithinObject:function(u,h,g){for(var m=this.getCoords(h,g),p=h?u.aCoords:u.lineCoords,v=0,y=u._getImageLines(p);v<4;v++)if(!u.containsPoint(m[v],y))return!1;return!0},isContainedWithinRect:function(u,h,g,m){var p=this.getBoundingRect(g,m);return p.left>=u.x&&p.left+p.width<=h.x&&p.top>=u.y&&p.top+p.height<=h.y},containsPoint:function(u,v,g,m){var p=this._getCoords(g,m),v=v||this._getImageLines(p),y=this._findCrossPoints(u,v);return y!==0&&y%2===1},isOnScreen:function(u){if(!this.canvas)return!1;var h=this.canvas.vptCoords.tl,g=this.canvas.vptCoords.br,m=this.getCoords(!0,u);return m.some(function(p){return p.x<=g.x&&p.x>=h.x&&p.y<=g.y&&p.y>=h.y})||this.intersectsWithRect(h,g,!0,u)?!0:this._containsCenterOfCanvas(h,g,u)},_containsCenterOfCanvas:function(u,h,g){var m={x:(u.x+h.x)/2,y:(u.y+h.y)/2};return!!this.containsPoint(m,null,!0,g)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var h=this.canvas.vptCoords.tl,g=this.canvas.vptCoords.br;if(this.intersectsWithRect(h,g,!0,u))return!0;var m=this.getCoords(!0,u).every(function(p){return(p.x>=g.x||p.x<=h.x)&&(p.y>=g.y||p.y<=h.y)});return m&&this._containsCenterOfCanvas(h,g,u)},_getImageLines:function(u){var h={topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}};return h},_findCrossPoints:function(u,h){var g,m,p,v,y,_=0,x;for(var b in h)if(x=h[b],!(x.o.y<u.y&&x.d.y<u.y)&&!(x.o.y>=u.y&&x.d.y>=u.y)&&(x.o.x===x.d.x&&x.o.x>=u.x?y=x.o.x:(g=0,m=(x.d.y-x.o.y)/(x.d.x-x.o.x),p=u.y-g*u.x,v=x.o.y-m*x.o.x,y=-(p-v)/(g-m)),y>=u.x&&(_+=1),_===2))break;return _},getBoundingRect:function(u,h){var g=this.getCoords(u,h);return a.makeBoundingBoxFromPoints(g)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:u===0?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,h){var g=this.getBoundingRect(h).width/this.getScaledWidth();return this.scale(u/this.width/g)},scaleToHeight:function(u,h){var g=this.getBoundingRect(h).height/this.getScaledHeight();return this.scale(u/this.height/g)},calcLineCoords:function(){var u=this.getViewportTransform(),h=this.padding,g=c(this.angle),m=a.cos(g),p=a.sin(g),v=m*h,y=p*h,_=v+y,x=v-y,b=this.calcACoords(),w={tl:l(b.tl,u),tr:l(b.tr,u),bl:l(b.bl,u),br:l(b.br,u)};return h&&(w.tl.x-=x,w.tl.y-=_,w.tr.x+=_,w.tr.y-=x,w.bl.x-=_,w.bl.y+=x,w.br.x+=x,w.br.y+=_),w},calcOCoords:function(){var u=this._calcRotateMatrix(),h=this._calcTranslateMatrix(),g=this.getViewportTransform(),m=d(g,h),p=d(m,u),p=d(p,[1/g[0],0,0,1/g[3],0,0]),v=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(_,x,b){y[x]=_.positionHandler(v,p,b)}),y},calcACoords:function(){var u=this._calcRotateMatrix(),h=this._calcTranslateMatrix(),g=d(h,u),m=this._getTransformedDimensions(),p=m.x/2,v=m.y/2;return{tl:l({x:-p,y:-v},g),tr:l({x:p,y:-v},g),bl:l({x:-p,y:v},g),br:l({x:p,y:v},g)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return a.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var h="_",g="";return!u&&this.group&&(g=this.group.transformMatrixKey(u)+h),g+this.top+h+this.left+h+this.scaleX+h+this.scaleY+h+this.skewX+h+this.skewY+h+this.angle+h+this.originX+h+this.originY+h+this.width+h+this.height+h+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var h=this.calcOwnMatrix();if(u||!this.group)return h;var g=this.transformMatrixKey(u),m=this.matrixCache||(this.matrixCache={});return m.key===g?m.value:(this.group&&(h=d(this.group.calcTransformMatrix(!1),h)),m.key=g,m.value=h,h)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),h=this.ownMatrixCache||(this.ownMatrixCache={});if(h.key===u)return h.value;var g=this._calcTranslateMatrix(),m={angle:this.angle,translateX:g[4],translateY:g[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return h.key=u,h.value=a.composeMatrix(m),h.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth,h=this.width+u,g=this.height+u;return{x:h,y:g}},_getTransformedDimensions:function(u,h){typeof u>"u"&&(u=this.skewX),typeof h>"u"&&(h=this.skewY);var g,m,p,v=u===0&&h===0;if(this.strokeUniform?(m=this.width,p=this.height):(g=this._getNonTransformedDimensions(),m=g.x,p=g.y),v)return this._finalizeDimensions(m*this.scaleX,p*this.scaleY);var y=a.sizeAfterTransform(m,p,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:h});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(u,h){return this.strokeUniform?{x:u+this.strokeWidth,y:h+this.strokeWidth}:{x:u,y:h}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),h=this._getTransformedDimensions(),g=l(h,u,!0);return g.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(o){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,o):this.canvas&&this.canvas.sendBackwards(this,o),this},bringForward:function(o){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,o):this.canvas&&this.canvas.bringForward(this,o),this},moveTo:function(o){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,o):this.canvas&&this.canvas.moveTo(this,o),this}}),function(){function o(c,d){if(d){if(d.toLive)return c+": url(#SVGID_"+d.id+"); ";var l=new e.Color(d),u=c+": "+l.toRgb()+"; ",h=l.getAlpha();return h!==1&&(u+=c+"-opacity: "+h.toString()+"; "),u}else return c+": none; "}var a=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var d=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",h=this.strokeDashOffset?this.strokeDashOffset:"0",g=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",p=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",_=c?"":this.getSvgFilter(),x=o("fill",this.fill),b=o("stroke",this.stroke);return[b,"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",g,"; ","stroke-dashoffset: ",h,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",p,"; ",x,"fill-rule: ",d,"; ","opacity: ",v,";",_,y].join("")},getSvgSpanStyles:function(c,d){var l="; ",h=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+l:"",u=c.strokeWidth?"stroke-width: "+c.strokeWidth+l:"",h=h,g=c.fontSize?"font-size: "+c.fontSize+"px"+l:"",m=c.fontStyle?"font-style: "+c.fontStyle+l:"",p=c.fontWeight?"font-weight: "+c.fontWeight+l:"",v=c.fill?o("fill",c.fill):"",y=c.stroke?o("stroke",c.stroke):"",_=this.getSvgTextDecoration(c),x=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return _&&(_="text-decoration: "+_+l),[y,u,h,g,m,p,_,v,x,d?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(d){return c[d.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,d){var l=c?this.calcTransformMatrix():this.calcOwnMatrix(),u='transform="'+e.util.matrixToSVG(l);return u+(d||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var d=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(-this.width/2,d),'" y="',a(-this.height/2,d),'" width="',a(this.width,d),'" height="',a(this.height,d),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,d){d=d||{};var l=d.reviver,u=d.additionalTransform||"",h=[this.getSvgTransform(!0,u),this.getSvgCommons()].join(""),g=c.indexOf("COMMON_PARTS");return c[g]=h,l?l(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,d){d=d||{};var l=d.noStyle,u=d.reviver,h=l?"":'style="'+this.getSvgStyles()+'" ',g=d.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,p=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,y=this.stroke,_=this.fill,x=this.shadow,b,w=[],T,S=c.indexOf("COMMON_PARTS"),O=d.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,T='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(u)+`</clipPath>
`),v&&w.push("<g ",g,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),v?"":g+this.getSvgCommons(),` >
`),b=[h,p,l?"":this.addPaintOrder()," ",O?'transform="'+O+'" ':""].join(""),c[S]=b,_&&_.toLive&&w.push(_.toSVG(this)),y&&y.toLive&&w.push(y.toSVG(this)),x&&w.push(x.toSVG(this)),m&&w.push(T),w.push(c.join("")),w.push(`</g>
`),v&&w.push(`</g>
`),u?u(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var o=e.util.object.extend,a="stateProperties";function c(l,u,h){var g={},m=!0;h.forEach(function(p){g[p]=l[p]}),o(l[u],g,m)}function d(l,u,h){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var g=0,m=l.length;g<m;g++)if(!d(l[g],u[g]))return!1;return!0}else if(l&&typeof l=="object"){var p=Object.keys(l),v;if(!u||typeof u!="object"||!h&&p.length!==Object.keys(u).length)return!1;for(var g=0,m=p.length;g<m;g++)if(v=p[g],!(v==="canvas"||v==="group")&&!d(l[v],u[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(l){l=l||a;var u="_"+l;return Object.keys(this[u]).length<this[l].length?!0:!d(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||a,h="_"+u;return this[h]?(c(this,h,this[u]),l&&l.stateProperties&&c(this,h,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var u=l.propertySet||a;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var o=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(a,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var d=a.x,l=a.y,u,h,g=Object.keys(this.oCoords),m=g.length-1,p;for(this.__corner=0;m>=0;m--)if(p=g[m],!!this.isControlVisible(p)&&(h=this._getImageLines(c?this.oCoords[p].touchCorner:this.oCoords[p].corner),u=this._findCrossPoints({x:d,y:l},h),u!==0&&u%2===1))return this.__corner=p,p;return!1},forEachControl:function(a){for(var c in this.controls)a(this.controls[c],c,this)},_setCornerCoords:function(){var a=this.oCoords;for(var c in a){var d=this.controls[c];a[c].corner=d.calcCornerCoords(this.angle,this.cornerSize,a[c].x,a[c].y,!1),a[c].touchCorner=d.calcCornerCoords(this.angle,this.touchCornerSize,a[c].x,a[c].y,!0)}},drawSelectionBackground:function(a){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;a.save();var c=this.getCenterPoint(),d=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return a.translate(c.x,c.y),a.scale(1/l[0],1/l[3]),a.rotate(o(this.angle)),a.fillStyle=this.selectionBackgroundColor,a.fillRect(-d.x/2,-d.y/2,d.x,d.y),a.restore(),this},drawBorders:function(a,c){c=c||{};var d=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=d.x+l,h=d.y+l,g=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return a.save(),a.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(a,c.borderDashArray||this.borderDashArray),a.strokeRect(-u/2,-h/2,u,h),g&&(a.beginPath(),this.forEachControl(function(p,v,y){p.withConnection&&p.getVisibility(y,v)&&(m=!0,a.moveTo(p.x*u,p.y*h),a.lineTo(p.x*u+p.offsetX,p.y*h+p.offsetY))}),m&&a.stroke()),a.restore(),this},drawBordersInGroup:function(a,c,d){d=d||{};var l=e.util.sizeAfterTransform(this.width,this.height,c),u=this.strokeWidth,h=this.strokeUniform,g=this.borderScaleFactor,m=l.x+u*(h?this.canvas.getZoom():c.scaleX)+g,p=l.y+u*(h?this.canvas.getZoom():c.scaleY)+g;return a.save(),this._setLineDash(a,d.borderDashArray||this.borderDashArray),a.strokeStyle=d.borderColor||this.borderColor,a.strokeRect(-m/2,-p/2,m,p),a.restore(),this},drawControls:function(a,c){c=c||{},a.save();var d=this.canvas.getRetinaScaling(),l,u;return a.setTransform(d,0,0,d,0,0),a.strokeStyle=a.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(a.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(a,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(h,g,m){u=m.oCoords[g],h.getVisibility(m,g)&&(l&&(u=e.util.transformPoint(u,l)),h.render(a,u.x,u.y,c,m))}),a.restore(),this},isControlVisible:function(a){return this.controls[a]&&this.controls[a].getVisibility(this,a)},setControlVisible:function(a,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[a]=c,this},setControlsVisibility:function(a){a||(a={});for(var c in a)this.setControlVisible(c,a[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(o,a){a=a||{};var c=function(){},d=a.onComplete||c,l=a.onChange||c,u=this;return e.util.animate({target:this,startValue:o.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(h){o.set("left",h),u.requestRenderAll(),l()},onComplete:function(){o.setCoords(),d()}})},fxCenterObjectV:function(o,a){a=a||{};var c=function(){},d=a.onComplete||c,l=a.onChange||c,u=this;return e.util.animate({target:this,startValue:o.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(h){o.set("top",h),u.requestRenderAll(),l()},onComplete:function(){o.setCoords(),d()}})},fxRemove:function(o,a){a=a||{};var c=function(){},d=a.onComplete||c,l=a.onChange||c,u=this;return e.util.animate({target:this,startValue:o.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(h){o.set("opacity",h),u.requestRenderAll(),l()},onComplete:function(){u.remove(o),d()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var o=[],a,c,d=[];for(a in arguments[0])o.push(a);for(var l=0,u=o.length;l<u;l++)a=o[l],c=l!==u-1,d.push(this._animate(a,arguments[0][a],arguments[1],c));return d}else return this._animate.apply(this,arguments)},_animate:function(o,a,c,d){var l=this,u;a=a.toString(),c?c=e.util.object.clone(c):c={},~o.indexOf(".")&&(u=o.split("."));var h=l.colorProperties.indexOf(o)>-1||u&&l.colorProperties.indexOf(u[1])>-1,g=u?this.get(u[0])[u[1]]:this.get(o);"from"in c||(c.from=g),h||(~a.indexOf("=")?a=g+parseFloat(a.replace("=","")):a=parseFloat(a));var m={target:this,startValue:c.from,endValue:a,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(p,v,y){return c.abort.call(l,p,v,y)},onChange:function(p,v,y){u?l[u[0]][u[1]]=p:l.set(o,p),!d&&c.onChange&&c.onChange(p,v,y)},onComplete:function(p,v,y){d||(l.setCoords(),c.onComplete&&c.onComplete(p,v,y))}};return h?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend,d=a.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(a.Line){a.warn("fabric.Line is already defined");return}a.Line=a.util.createClass(a.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(h,g){h||(h=[0,0,0,0]),this.callSuper("initialize",g),this.set("x1",h[0]),this.set("y1",h[1]),this.set("x2",h[2]),this.set("y2",h[3]),this._setWidthHeight(g)},_setWidthHeight:function(h){h||(h={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in h?h.left:this._getLeftToOriginX(),this.top="top"in h?h.top:this._getTopToOriginY()},_set:function(h,g){return this.callSuper("_set",h,g),typeof l[h]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(h){h.beginPath();var g=this.calcLinePoints();h.moveTo(g.x1,g.y1),h.lineTo(g.x2,g.y2),h.lineWidth=this.strokeWidth;var m=h.strokeStyle;h.strokeStyle=this.stroke||h.fillStyle,this.stroke&&this._renderStroke(h),h.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(h){return c(this.callSuper("toObject",h),this.calcLinePoints())},_getNonTransformedDimensions:function(){var h=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(h.y-=this.strokeWidth),this.height===0&&(h.x-=this.strokeWidth)),h},calcLinePoints:function(){var h=this.x1<=this.x2?-1:1,g=this.y1<=this.y2?-1:1,m=h*this.width*.5,p=g*this.height*.5,v=h*this.width*-.5,y=g*this.height*-.5;return{x1:m,x2:v,y1:p,y2:y}},_toSVG:function(){var h=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,`" />
`]}}),a.Line.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),a.Line.fromElement=function(h,g,m){m=m||{};var p=a.parseAttributes(h,a.Line.ATTRIBUTE_NAMES),v=[p.x1||0,p.y1||0,p.x2||0,p.y2||0];g(new a.Line(v,c(p,m)))},a.Line.fromObject=function(h,g){function m(v){delete v.points,g&&g(v)}var p=d(h,!0);p.points=[h.x1,h.y1,h.x2,h.y2],a.Object._fromObject("Line",p,m,"points")};function u(h,g){var m=h.origin,p=h.axis1,v=h.axis2,y=h.dimension,_=g.nearest,x=g.center,b=g.farthest;return function(){switch(this.get(m)){case _:return Math.min(this.get(p),this.get(v));case x:return Math.min(this.get(p),this.get(v))+.5*this.get(y);case b:return Math.max(this.get(p),this.get(v))}}}}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.degreesToRadians;if(a.Circle){a.warn("fabric.Circle is already defined.");return}a.Circle=a.util.createClass(a.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:a.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),l==="radius"&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,u=0,h=0,g=(this.endAngle-this.startAngle)%360;if(g===0)l=["<circle ","COMMON_PARTS",'cx="'+u+'" cy="'+h+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),p=c(this.endAngle),v=this.radius,y=a.util.cos(m)*v,_=a.util.sin(m)*v,x=a.util.cos(p)*v,b=a.util.sin(p)*v,w=g>180?"1":"0";l=['<path d="M '+y+" "+_," A "+v+" "+v," 0 ",+w+" 1"," "+x+" "+b,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),a.Circle.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),a.Circle.fromElement=function(l,u){var h=a.parseAttributes(l,a.Circle.ATTRIBUTE_NAMES);if(!d(h))throw new Error("value of `r` attribute is required and can not be negative");h.left=(h.left||0)-h.radius,h.top=(h.top||0)-h.radius,u(new a.Circle(h))};function d(l){return"radius"in l&&l.radius>=0}a.Circle.fromObject=function(l,u){a.Object._fromObject("Circle",l,u)}}(n),function(o){var a=o.fabric||(o.fabric={});if(a.Triangle){a.warn("fabric.Triangle is already defined");return}a.Triangle=a.util.createClass(a.Object,{type:"triangle",width:100,height:100,_render:function(c){var d=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-d,l),c.lineTo(0,-l),c.lineTo(d,l),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,d=this.height/2,l=[-c+" "+d,"0 "+-d,c+" "+d].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),a.Triangle.fromObject=function(c,d){return a.Object._fromObject("Triangle",c,d)}}(n),function(o){var a=o.fabric||(o.fabric={}),c=Math.PI*2;if(a.Ellipse){a.warn("fabric.Ellipse is already defined.");return}a.Ellipse=a.util.createClass(a.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this.set("rx",d&&d.rx||0),this.set("ry",d&&d.ry||0)},_set:function(d,l){switch(this.callSuper("_set",d,l),d){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(d){d.beginPath(),d.save(),d.transform(1,0,0,this.ry/this.rx,0,0),d.arc(0,0,this.rx,0,c,!1),d.restore(),this._renderPaintInOrder(d)}}),a.Ellipse.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),a.Ellipse.fromElement=function(d,l){var u=a.parseAttributes(d,a.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new a.Ellipse(u))},a.Ellipse.fromObject=function(d,l){a.Object._fromObject("Ellipse",d,l)}}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend;if(a.Rect){a.warn("fabric.Rect is already defined");return}a.Rect=a.util.createClass(a.Object,{stateProperties:a.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(d){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,h=this.width,g=this.height,m=-this.width/2,p=-this.height/2,v=l!==0||u!==0,y=1-.5522847498;d.beginPath(),d.moveTo(m+l,p),d.lineTo(m+h-l,p),v&&d.bezierCurveTo(m+h-y*l,p,m+h,p+y*u,m+h,p+u),d.lineTo(m+h,p+g-u),v&&d.bezierCurveTo(m+h,p+g-y*u,m+h-y*l,p+g,m+h-l,p+g),d.lineTo(m+l,p+g),v&&d.bezierCurveTo(m+y*l,p+g,m,p+g-y*u,m,p+g-u),d.lineTo(m,p+u),v&&d.bezierCurveTo(m,p+y*u,m+y*l,p,m+l,p),d.closePath(),this._renderPaintInOrder(d)},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){var d=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',d,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),a.Rect.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),a.Rect.fromElement=function(d,l,u){if(!d)return l(null);u=u||{};var h=a.parseAttributes(d,a.Rect.ATTRIBUTE_NAMES);h.left=h.left||0,h.top=h.top||0,h.height=h.height||0,h.width=h.width||0;var g=new a.Rect(c(u?a.util.object.clone(u):{},h));g.visible=g.visible&&g.width>0&&g.height>0,l(g)},a.Rect.fromObject=function(d,l){return a.Object._fromObject("Rect",d,l)}}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend,d=a.util.array.min,l=a.util.array.max,u=a.util.toFixed,h=a.util.projectStrokeOnPoints;if(a.Polyline){a.warn("fabric.Polyline is already defined");return}a.Polyline=a.util.createClass(a.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:a.Object.prototype.cacheProperties.concat("points"),initialize:function(g,m){m=m||{},this.points=g||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return h(this.points,this,!0)},_setPositionDimensions:function(g){var m=this._calcDimensions(g),p,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,g.fromSVG||(p=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof g.left>"u"&&(this.left=g.fromSVG?m.left:p.x),typeof g.top>"u"&&(this.top=g.fromSVG?m.top:p.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var g=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=d(g,"x")||0,p=d(g,"y")||0,v=l(g,"x")||0,y=l(g,"y")||0,_=v-m,x=y-p;return{left:m,top:p,width:_,height:x}},toObject:function(g){return c(this.callSuper("toObject",g),{points:this.points.concat()})},_toSVG:function(){for(var g=[],m=this.pathOffset.x,p=this.pathOffset.y,v=a.Object.NUM_FRACTION_DIGITS,y=0,_=this.points.length;y<_;y++)g.push(u(this.points[y].x-m,v),",",u(this.points[y].y-p,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',g.join(""),`" />
`]},commonRender:function(g){var m,p=this.points.length,v=this.pathOffset.x,y=this.pathOffset.y;if(!p||isNaN(this.points[p-1].y))return!1;g.beginPath(),g.moveTo(this.points[0].x-v,this.points[0].y-y);for(var _=0;_<p;_++)m=this.points[_],g.lineTo(m.x-v,m.y-y);return!0},_render:function(g){this.commonRender(g)&&this._renderPaintInOrder(g)},complexity:function(){return this.get("points").length}}),a.Polyline.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polyline.fromElementGenerator=function(g){return function(m,p,v){if(!m)return p(null);v||(v={});var y=a.parsePointsAttribute(m.getAttribute("points")),_=a.parseAttributes(m,a[g].ATTRIBUTE_NAMES);_.fromSVG=!0,p(new a[g](y,c(_,v)))}},a.Polyline.fromElement=a.Polyline.fromElementGenerator("Polyline"),a.Polyline.fromObject=function(g,m){return a.Object._fromObject("Polyline",g,m,"points")}}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.projectStrokeOnPoints;if(a.Polygon){a.warn("fabric.Polygon is already defined");return}a.Polygon=a.util.createClass(a.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),a.Polygon.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polygon.fromElement=a.Polyline.fromElementGenerator("Polygon"),a.Polygon.fromObject=function(d,l){a.Object._fromObject("Polygon",d,l,"points")}}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.array.min,d=a.util.array.max,l=a.util.object.extend,u=a.util.object.clone,h=a.util.toFixed;if(a.Path){a.warn("fabric.Path is already defined");return}a.Path=a.util.createClass(a.Object,{type:"path",path:null,cacheProperties:a.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:a.Object.prototype.stateProperties.concat("path"),initialize:function(g,m){m=u(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(g||[],m)},_setPath:function(g,m){this.path=a.util.makePathSimpler(Array.isArray(g)?g:a.util.parsePath(g)),a.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(g){var m,p=0,v=0,y=0,_=0,x=0,b=0,w=-this.pathOffset.x,T=-this.pathOffset.y;g.beginPath();for(var S=0,O=this.path.length;S<O;++S)switch(m=this.path[S],m[0]){case"L":y=m[1],_=m[2],g.lineTo(y+w,_+T);break;case"M":y=m[1],_=m[2],p=y,v=_,g.moveTo(y+w,_+T);break;case"C":y=m[5],_=m[6],x=m[3],b=m[4],g.bezierCurveTo(m[1]+w,m[2]+T,x+w,b+T,y+w,_+T);break;case"Q":g.quadraticCurveTo(m[1]+w,m[2]+T,m[3]+w,m[4]+T),y=m[3],_=m[4],x=m[1],b=m[2];break;case"z":case"Z":y=p,_=v,g.closePath();break}},_render:function(g){this._renderPathCommands(g),this._renderPaintInOrder(g)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(g){return l(this.callSuper("toObject",g),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(g){var m=this.toObject(["sourcePath"].concat(g));return m.sourcePath&&delete m.path,m},_toSVG:function(){var g=a.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',g,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var g=a.Object.NUM_FRACTION_DIGITS;return" translate("+h(-this.pathOffset.x,g)+", "+h(-this.pathOffset.y,g)+")"},toClipPathSVG:function(g){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:g,additionalTransform:m})},toSVG:function(g){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:g,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var g=[],m=[],p,v=0,y=0,_=0,x=0,b,w=0,T=this.path.length;w<T;++w){switch(p=this.path[w],p[0]){case"L":_=p[1],x=p[2],b=[];break;case"M":_=p[1],x=p[2],v=_,y=x,b=[];break;case"C":b=a.util.getBoundsOfCurve(_,x,p[1],p[2],p[3],p[4],p[5],p[6]),_=p[5],x=p[6];break;case"Q":b=a.util.getBoundsOfCurve(_,x,p[1],p[2],p[1],p[2],p[3],p[4]),_=p[3],x=p[4];break;case"z":case"Z":_=v,x=y;break}b.forEach(function(z){g.push(z.x),m.push(z.y)}),g.push(_),m.push(x)}var S=c(g)||0,O=c(m)||0,N=d(g)||0,V=d(m)||0,Z=N-S,j=V-O;return{left:S,top:O,width:Z,height:j}}}),a.Path.fromObject=function(g,m){if(typeof g.sourcePath=="string"){var p=g.sourcePath;a.loadSVGFromURL(p,function(v){var y=v[0];y.setOptions(g),g.clipPath?a.util.enlivenObjects([g.clipPath],function(_){y.clipPath=_[0],m&&m(y)}):m&&m(y)})}else a.Object._fromObject("Path",g,m,"path")},a.Path.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(["d"]),a.Path.fromElement=function(g,m,p){var v=a.parseAttributes(g,a.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new a.Path(v.d,l(v,p)))}}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.array.min,d=a.util.array.max;a.Group||(a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,h){u=u||{},this._objects=[],h&&this.callSuper("initialize",u),this._objects=l||[];for(var g=this._objects.length;g--;)this._objects[g].group=this;if(h)this._updateObjectsACoords();else{var m=u&&u.centerPoint;u.originX!==void 0&&(this.originX=u.originX),u.originY!==void 0&&(this.originY=u.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,u=this._objects.length;u--;)this._objects[u].setCoords(l)},_updateObjectsCoords:function(u){for(var u=u||this.getCenterPoint(),h=this._objects.length;h--;)this._updateObjectCoords(this._objects[h],u)},_updateObjectCoords:function(l,u){var h=l.left,g=l.top,m=!0;l.set({left:h-u.x,top:g-u.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),a.util.resetObjectTransform(this),l&&(u&&a.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var h=this._objects.length;if(this.useSetOnGroup)for(;h--;)this._objects[h].setOnGroup(l,u);if(l==="canvas")for(;h--;)this._objects[h]._set(l,u);a.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,h=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var p=m.includeDefaultValues;m.includeDefaultValues=u;var v=m.toObject(l);return m.includeDefaultValues=p,v}),g=a.Object.prototype.toObject.call(this,l);return g.objects=h,g},toDatalessObject:function(l){var u,h=this.sourcePath;if(h)u=h;else{var g=this.includeDefaultValues;u=this._objects.map(function(p){var v=p.includeDefaultValues;p.includeDefaultValues=g;var y=p.toDatalessObject(l);return p.includeDefaultValues=v,y})}var m=a.Object.prototype.toDatalessObject.call(this,l);return m.objects=u,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=a.Object.prototype.shouldCache.call(this);if(l){for(var u=0,h=this._objects.length;u<h;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(a.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,h=this._objects.length;u<h;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,h=this._objects.length;u<h;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var g=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-m/2,g,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){a.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var h=this.toObject();delete h.objects;var g=new a.ActiveSelection([]);return g.set(h),g.type="activeSelection",u.remove(this),l.forEach(function(m){m.group=g,m.dirty=!0,u.add(m)}),g.canvas=u,g._objects=l,u._activeObject=g,g.setCoords(),g}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(u){u.setCoords(l)}),this},_calcBounds:function(l){for(var u=[],h=[],g,m,p,v=["tr","br","bl","tl"],y=0,_=this._objects.length,x,b=v.length;y<_;++y){for(g=this._objects[y],p=g.calcACoords(),x=0;x<b;x++)m=v[x],u.push(p[m].x),h.push(p[m].y);g.aCoords=p}this._getBounds(u,h,l)},_getBounds:function(l,u,h){var g=new a.Point(c(l),c(u)),m=new a.Point(d(l),d(u)),p=g.y||0,v=g.x||0,y=m.x-g.x||0,_=m.y-g.y||0;this.width=y,this.height=_,h||this.setPositionByOrigin({x:v,y:p},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS",` >
`],h=0,g=this._objects.length;h<g;h++)u.push("		",this._objects[h].toSVG(l));return u.push(`</g>
`),u},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",u=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],h=0,g=this._objects.length;h<g;h++)u.push("	",this._objects[h].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),a.Group.fromObject=function(l,u){var h=l.objects,g=a.util.object.clone(l,!0);if(delete g.objects,typeof h=="string"){a.loadSVGFromURL(h,function(m){var p=a.util.groupSVGElements(m,l,h),v=g.clipPath;delete g.clipPath,p.set(g),v?a.util.enlivenObjects([v],function(y){p.clipPath=y[0],u&&u(p)}):u&&u(p)});return}a.util.enlivenObjects(h,function(m){a.util.enlivenObjectEnlivables(l,g,function(){u&&u(new a.Group(m,g,!0))})})})}(n),function(o){var a=o.fabric||(o.fabric={});a.ActiveSelection||(a.ActiveSelection=a.util.createClass(a.Group,{type:"activeSelection",initialize:function(c,d){d=d||{},this._objects=c||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;d.originX&&(this.originX=d.originX),d.originY&&(this.originY=d.originY),this._calcBounds(),this._updateObjectsCoords(),a.Object.prototype.initialize.call(this,d),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var d=a.Object.prototype.toObject.call(this),l=new a.Group([]);if(delete d.type,l.set(d),c.forEach(function(h){h.canvas.remove(h),h.group=l}),l._objects=c,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,d,l){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,d),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,h=this._objects.length;u<h;u++)this._objects[u]._renderControls(c,l);c.restore()}}),a.ActiveSelection.fromObject=function(c,d){a.util.enlivenObjects(c.objects,function(l){delete c.objects,d&&d(new a.ActiveSelection(l,c,!0))})})}(n),function(o){var a=e.util.object.extend;if(o.fabric||(o.fabric={}),o.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,d){d||(d={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",d),this._initElement(c,d)},getElement:function(){return this._element||{}},setElement:function(c,d){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(d),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var d=e.filterBackend;d&&d.evictCachesForKey&&d.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var d=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-d,-l),c.lineTo(d,-l),c.lineTo(d,l),c.lineTo(-d,l),c.lineTo(-d,-l),c.closePath()}},toObject:function(c){var d=[];this.filters.forEach(function(u){u&&d.push(u.toObject())});var l=a(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:d});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],d=[],l,u=this._element,h=-this.width/2,g=-this.height/2,m="",p="";if(!u)return[];if(this.hasCrop()){var v=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+h+'" y="'+g+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(p='" image-rendering="optimizeSpeed'),d.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',h-this.cropX,'" y="',g-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,p,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,l=["	<rect ",'x="',h,'" y="',g,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?c=c.concat(l,d):c=c.concat(d,l),c},getSrc:function(c){var d=c?this._element:this._originalElement;return d?d.toDataURL?d.toDataURL():this.srcFromAttribute?d.getAttribute("src"):d.src:this.src||""},setSrc:function(c,d,l){return e.util.loadImage(c,function(u,h){this.setElement(u,l),this._setWidthHeight(),d&&d(this,h)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,d=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,h=l.scaleY,g=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||u>d&&h>d){this._element=g,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,this._lastScaleY=h;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),p=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=g.width,y=g.height;m.width=v,m.height=y,this._element=m,this._lastScaleX=c.scaleX=u,this._lastScaleY=c.scaleY=h,e.filterBackend.applyFilters([c],g,v,y,this._element,p),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(g){return g&&!g.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var d=this._originalElement,l=d.naturalWidth||d.width,u=d.naturalHeight||d.height;if(this._element===this._originalElement){var h=e.util.createCanvasElement();h.width=l,h.height=u,this._element=h,this._filteredEl=h}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var d=this._element;if(d){var l=this._filterScalingX,u=this._filterScalingY,h=this.width,g=this.height,m=Math.min,p=Math.max,v=p(this.cropX,0),y=p(this.cropY,0),_=d.naturalWidth||d.width,x=d.naturalHeight||d.height,b=v*l,w=y*u,T=m(h*l,_-b),S=m(g*u,x-w),O=-h/2,N=-g/2,V=m(h,_/l-v),Z=m(g,x/u-y);d&&c.drawImage(d,b,w,T,S,O,N,V,Z)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,d){this.setElement(e.util.getById(c),d),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,d){c&&c.length?e.util.enlivenObjects(c,function(l){d&&d(l)},"fabric.Image.filters"):d&&d()},_setWidthHeight:function(c){c||(c={});var d=this.getElement();this.width=c.width||d.naturalWidth||d.width||0,this.height=c.height||d.naturalHeight||d.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),d=this._element.width,l=this._element.height,u=1,h=1,g=0,m=0,p=0,v=0,y,_=this.width,x=this.height,b={width:_,height:x};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(u=h=e.util.findScaleToFit(this._element,b),y=(_-d*u)/2,c.alignX==="Min"&&(g=-y),c.alignX==="Max"&&(g=y),y=(x-l*h)/2,c.alignY==="Min"&&(m=-y),c.alignY==="Max"&&(m=y)),c.meetOrSlice==="slice"&&(u=h=e.util.findScaleToCover(this._element,b),y=d-_/u,c.alignX==="Mid"&&(p=y/2),c.alignX==="Max"&&(p=y),y=l-x/h,c.alignY==="Mid"&&(v=y/2),c.alignY==="Max"&&(v=y),d=_/u,l=x/h)):(u=_/d,h=x/l),{width:d,height:l,scaleX:u,scaleY:h,offsetLeft:g,offsetTop:m,cropX:p,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,d){var l=e.util.object.clone(c);e.util.loadImage(l.src,function(u,h){if(h){d&&d(null,!0);return}e.Image.prototype._initFilters.call(l,l.filters,function(g){l.filters=g||[],e.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],e.util.enlivenObjectEnlivables(l,l,function(){var p=new e.Image(u,l);d(p,!1)})})})},null,l.crossOrigin)},e.Image.fromURL=function(c,d,l){e.util.loadImage(c,function(u,h){d&&d(new e.Image(u,l),h)},null,l&&l.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,d,l){var u=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(u["xlink:href"],d,a(l?e.util.object.clone(l):{},u))}}(n),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var o=this.angle%360;return o>0?Math.round((o-1)/90)*90:Math.round(o/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(o){o=o||{};var a=function(){},c=o.onComplete||a,d=o.onChange||a,l=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),d()},onComplete:function(){l.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(o){return o.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(o){return o.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function o(c,d){var l="precision "+d+` float;
void main(){}`,u=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(u,l),c.compileShader(u),!!c.getShaderParameter(u,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var d=document.createElement("canvas"),l=d.getContext("webgl")||d.getContext("experimental-webgl"),u=!1;if(l){e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=e.maxTextureSize>=c;for(var h=["highp","mediump","lowp"],g=0;g<3;g++)if(o(l,h[g])){e.webGlPrecision=h[g];break}}return this.isSupported=u,u},e.WebglFilterBackend=a;function a(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}a.prototype={tileSize:2048,resources:{},setupGLContext:function(c,d){this.dispose(),this.createWebGLCanvas(c,d),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,d)},chooseFastestCopyGLTo2DMethod:function(c,d){var l=typeof window.performance<"u",u;try{new ImageData(1,1),u=!0}catch{u=!1}var h=typeof ArrayBuffer<"u",g=typeof Uint8ClampedArray<"u";if(l&&u&&h&&g){var m=e.util.createCanvasElement(),p=new ArrayBuffer(c*d*4);if(e.forceGLPutImageData){this.imageBuffer=p,this.copyGLTo2D=f;return}var v={imageBuffer:p,destinationWidth:c,destinationHeight:d,targetCanvas:m},y,_,x;m.width=c,m.height=d,y=window.performance.now(),s.call(v,this.gl,v),_=window.performance.now()-y,y=window.performance.now(),f.call(v,this.gl,v),x=window.performance.now()-y,_>x?(this.imageBuffer=p,this.copyGLTo2D=f):this.copyGLTo2D=s}},createWebGLCanvas:function(c,d){var l=e.util.createCanvasElement();l.width=c,l.height=d;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},h=l.getContext("webgl",u);h||(h=l.getContext("experimental-webgl",u)),h&&(h.clearColor(0,0,0,0),this.canvas=l,this.gl=h)},applyFilters:function(c,d,l,u,h,g){var m=this.gl,p;g&&(p=this.getCachedTexture(g,d));var v={originalWidth:d.width||d.originalWidth,originalHeight:d.height||d.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:m,sourceTexture:this.createTexture(m,l,u,!p&&d),targetTexture:this.createTexture(m,l,u),originalTexture:p||this.createTexture(m,l,u,!p&&d),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:h},y=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,y),c.forEach(function(_){_&&_.applyTo(v)}),r(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(y),h.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,d,l,u,h){var g=c.createTexture();return c.bindTexture(c.TEXTURE_2D,g),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,h||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,h||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),u?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,u):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,d,l,0,c.RGBA,c.UNSIGNED_BYTE,null),g},getCachedTexture:function(c,d){if(this.textureCache[c])return this.textureCache[c];var l=this.createTexture(this.gl,d.width,d.height,d);return this.textureCache[c]=l,l},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,d={renderer:"",vendor:""};if(!c)return d;var l=c.getExtension("WEBGL_debug_renderer_info");if(l){var u=c.getParameter(l.UNMASKED_RENDERER_WEBGL),h=c.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(d.renderer=u.toLowerCase()),h&&(d.vendor=h.toLowerCase())}return this.gpuInfo=d,d}}}();function r(o){var a=o.targetCanvas,c=a.width,d=a.height,l=o.destinationWidth,u=o.destinationHeight;(c!==l||d!==u)&&(a.width=l,a.height=u)}function s(o,a){var c=o.canvas,d=a.targetCanvas,l=d.getContext("2d");l.translate(0,d.height),l.scale(1,-1);var u=c.height-d.height;l.drawImage(c,0,u,d.width,d.height,0,0,d.width,d.height)}function f(o,a){var c=a.targetCanvas,d=c.getContext("2d"),l=a.destinationWidth,u=a.destinationHeight,h=l*u*4,g=new Uint8Array(this.imageBuffer,0,h),m=new Uint8ClampedArray(this.imageBuffer,0,h);o.readPixels(0,0,l,u,o.RGBA,o.UNSIGNED_BYTE,g);var p=new ImageData(m,l,u);d.putImageData(p,0,0)}(function(){var o=function(){};e.Canvas2dFilterBackend=a;function a(){}a.prototype={evictCachesForKey:o,dispose:o,clearWebGLCaches:o,resources:{},applyFilters:function(c,d,l,u,h){var g=h.getContext("2d");g.drawImage(d,0,0,l,u);var m=g.getImageData(0,0,l,u),p=g.getImageData(0,0,l,u),v={sourceWidth:l,sourceHeight:u,imageData:m,originalEl:d,originalImageData:p,canvasEl:h,ctx:g,filterBackend:this};return c.forEach(function(y){y.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(h.width=v.imageData.width,h.height=v.imageData.height),g.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(o){o&&this.setOptions(o)},setOptions:function(o){for(var a in o)this[a]=o[a]},createProgram:function(o,a,c){a=a||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(a=a.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var d=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(d,c),o.compileShader(d),!o.getShaderParameter(d,o.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+o.getShaderInfoLog(d));var l=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(l,a),o.compileShader(l),!o.getShaderParameter(l,o.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+o.getShaderInfoLog(l));var u=o.createProgram();if(o.attachShader(u,d),o.attachShader(u,l),o.linkProgram(u),!o.getProgramParameter(u,o.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+o.getProgramInfoLog(u));var h=this.getAttributeLocations(o,u),g=this.getUniformLocations(o,u)||{};return g.uStepW=o.getUniformLocation(u,"uStepW"),g.uStepH=o.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:h,uniformLocations:g}},getAttributeLocations:function(o,a){return{aPosition:o.getAttribLocation(a,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(o,a,c){var d=a.aPosition,l=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,l),o.enableVertexAttribArray(d),o.vertexAttribPointer(d,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,c,o.STATIC_DRAW)},_setupFrameBuffer:function(o){var a=o.context,c,d;o.passes>1?(c=o.destinationWidth,d=o.destinationHeight,(o.sourceWidth!==c||o.sourceHeight!==d)&&(a.deleteTexture(o.targetTexture),o.targetTexture=o.filterBackend.createTexture(a,c,d)),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,o.targetTexture,0)):(a.bindFramebuffer(a.FRAMEBUFFER,null),a.finish())},_swapTextures:function(o){o.passes--,o.pass++;var a=o.targetTexture;o.targetTexture=o.sourceTexture,o.sourceTexture=a},isNeutralState:function(){var o=this.mainParameter,a=e.Image.filters[this.type].prototype;if(o)if(Array.isArray(a[o])){for(var c=a[o].length;c--;)if(this[o][c]!==a[o][c])return!1;return!0}else return a[o]===this[o];else return!1},applyTo:function(o){o.webgl?(this._setupFrameBuffer(o),this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},retrieveShader:function(o){return o.programCache.hasOwnProperty(this.type)||(o.programCache[this.type]=this.createProgram(o.context)),o.programCache[this.type]},applyToWebGL:function(o){var a=o.context,c=this.retrieveShader(o);o.pass===0&&o.originalTexture?a.bindTexture(a.TEXTURE_2D,o.originalTexture):a.bindTexture(a.TEXTURE_2D,o.sourceTexture),a.useProgram(c.program),this.sendAttributeData(a,c.attributeLocations,o.aPosition),a.uniform1f(c.uniformLocations.uStepW,1/o.sourceWidth),a.uniform1f(c.uniformLocations.uStepH,1/o.sourceHeight),this.sendUniformData(a,c.uniformLocations),a.viewport(0,0,o.destinationWidth,o.destinationHeight),a.drawArrays(a.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(o,a,c){o.activeTexture(c),o.bindTexture(o.TEXTURE_2D,a),o.activeTexture(o.TEXTURE0)},unbindAdditionalTexture:function(o,a){o.activeTexture(a),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(o){this[this.mainParameter]=o},sendUniformData:function(){},createHelpLayer:function(o){if(!o.helpLayer){var a=document.createElement("canvas");a.width=o.sourceWidth,a.height=o.sourceHeight,o.helpLayer=a}},toObject:function(){var o={type:this.type},a=this.mainParameter;return a&&(o[a]=this[a]),o},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(o,a){var c=new e.Image.filters[o.type](o);return a&&a(c),c},function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.ColorMatrix=d(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var u=l.imageData,h=u.data,g=h.length,m=this.matrix,p,v,y,_,x,b=this.colorsOnly;for(x=0;x<g;x+=4)p=h[x],v=h[x+1],y=h[x+2],b?(h[x]=p*m[0]+v*m[1]+y*m[2]+m[4]*255,h[x+1]=p*m[5]+v*m[6]+y*m[7]+m[9]*255,h[x+2]=p*m[10]+v*m[11]+y*m[12]+m[14]*255):(_=h[x+3],h[x]=p*m[0]+v*m[1]+y*m[2]+_*m[3]+m[4]*255,h[x+1]=p*m[5]+v*m[6]+y*m[7]+_*m[8]+m[9]*255,h[x+2]=p*m[10]+v*m[11]+y*m[12]+_*m[13]+m[14]*255,h[x+3]=p*m[15]+v*m[16]+y*m[17]+_*m[18]+m[19]*255)},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var h=this.matrix,g=[h[0],h[1],h[2],h[3],h[5],h[6],h[7],h[8],h[10],h[11],h[12],h[13],h[15],h[16],h[17],h[18]],m=[h[4],h[9],h[14],h[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,g),l.uniform4fv(u.uConstants,m)}}),a.Image.filters.ColorMatrix.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Brightness=d(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var u=l.imageData,h=u.data,g,m=h.length,p=Math.round(this.brightness*255);for(g=0;g<m;g+=4)h[g]=h[g]+p,h[g+1]=h[g+1]+p,h[g+2]=h[g+2]+p}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),a.Image.filters.Brightness.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend,d=a.Image.filters,l=a.util.createClass;d.Convolute=l(d.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(u){var h=Math.sqrt(this.matrix.length),g=this.type+"_"+h+"_"+(this.opaque?1:0),m=this.fragmentSource[g];return u.programCache.hasOwnProperty(g)||(u.programCache[g]=this.createProgram(u.context,m)),u.programCache[g]},applyTo2d:function(u){var h=u.imageData,g=h.data,m=this.matrix,p=Math.round(Math.sqrt(m.length)),v=Math.floor(p/2),y=h.width,_=h.height,x=u.ctx.createImageData(y,_),b=x.data,w=this.opaque?1:0,T,S,O,N,V,Z,j,z,G,ne,re,U,M;for(re=0;re<_;re++)for(ne=0;ne<y;ne++){for(V=(re*y+ne)*4,T=0,S=0,O=0,N=0,M=0;M<p;M++)for(U=0;U<p;U++)j=re+M-v,Z=ne+U-v,!(j<0||j>=_||Z<0||Z>=y)&&(z=(j*y+Z)*4,G=m[M*p+U],T+=g[z]*G,S+=g[z+1]*G,O+=g[z+2]*G,w||(N+=g[z+3]*G));b[V]=T,b[V+1]=S,b[V+2]=O,w?b[V+3]=g[V+3]:b[V+3]=N}u.imageData=x},getUniformLocations:function(u,h){return{uMatrix:u.getUniformLocation(h,"uMatrix"),uOpaque:u.getUniformLocation(h,"uOpaque"),uHalfSize:u.getUniformLocation(h,"uHalfSize"),uSize:u.getUniformLocation(h,"uSize")}},sendUniformData:function(u,h){u.uniform1fv(h.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),a.Image.filters.Convolute.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Grayscale=d(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var u=l.imageData,h=u.data,g,m=h.length,p,v=this.mode;for(g=0;g<m;g+=4)v==="average"?p=(h[g]+h[g+1]+h[g+2])/3:v==="lightness"?p=(Math.min(h[g],h[g+1],h[g+2])+Math.max(h[g],h[g+1],h[g+2]))/2:v==="luminosity"&&(p=.21*h[g]+.72*h[g+1]+.07*h[g+2]),h[g]=p,h[g+1]=p,h[g+2]=p},retrieveShader:function(l){var u=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(u)){var h=this.fragmentSource[this.mode];l.programCache[u]=this.createProgram(l.context,h)}return l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){var h=1;l.uniform1i(u.uMode,h)},isNeutralState:function(){return!1}}),a.Image.filters.Grayscale.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Invert=d(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var u=l.imageData,h=u.data,g,m=h.length;for(g=0;g<m;g+=4)h[g]=255-h[g],h[g+1]=255-h[g+1],h[g+2]=255-h[g+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),a.Image.filters.Invert.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend,d=a.Image.filters,l=a.util.createClass;d.Noise=l(d.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(u){if(this.noise!==0){var h=u.imageData,g=h.data,m,p=g.length,v=this.noise,y;for(m=0,p=g.length;m<p;m+=4)y=(.5-Math.random())*v,g[m]+=y,g[m+1]+=y,g[m+2]+=y}},getUniformLocations:function(u,h){return{uNoise:u.getUniformLocation(h,"uNoise"),uSeed:u.getUniformLocation(h,"uSeed")}},sendUniformData:function(u,h){u.uniform1f(h.uNoise,this.noise/255),u.uniform1f(h.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),a.Image.filters.Noise.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Pixelate=d(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var u=l.imageData,h=u.data,g=u.height,m=u.width,p,v,y,_,x,b,w,T,S,O,N;for(v=0;v<g;v+=this.blocksize)for(y=0;y<m;y+=this.blocksize)for(p=v*4*m+y*4,_=h[p],x=h[p+1],b=h[p+2],w=h[p+3],O=Math.min(v+this.blocksize,g),N=Math.min(y+this.blocksize,m),T=v;T<O;T++)for(S=y;S<N;S++)p=T*4*m+S*4,h[p]=_,h[p+1]=x,h[p+2]=b,h[p+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),a.Image.filters.Pixelate.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.extend,d=a.Image.filters,l=a.util.createClass;d.RemoveColor=l(d.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(u){var h=u.imageData,g=h.data,m,p=this.distance*255,v,y,_,x=new a.Color(this.color).getSource(),b=[x[0]-p,x[1]-p,x[2]-p],w=[x[0]+p,x[1]+p,x[2]+p];for(m=0;m<g.length;m+=4)v=g[m],y=g[m+1],_=g[m+2],v>b[0]&&y>b[1]&&_>b[2]&&v<w[0]&&y<w[1]&&_<w[2]&&(g[m+3]=0)},getUniformLocations:function(u,h){return{uLow:u.getUniformLocation(h,"uLow"),uHigh:u.getUniformLocation(h,"uHigh")}},sendUniformData:function(u,h){var g=new a.Color(this.color).getSource(),m=parseFloat(this.distance),p=[0+g[0]/255-m,0+g[1]/255-m,0+g[2]/255-m,1],v=[g[0]/255+m,g[1]/255+m,g[2]/255+m,1];u.uniform4fv(h.uLow,p),u.uniform4fv(h.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),a.Image.filters.RemoveColor.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)c[u]=d(c.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),a.Image.filters[u].fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric,c=a.Image.filters,d=a.util.createClass;c.BlendColor=d(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,h;return l.programCache.hasOwnProperty(u)||(h=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,h)),l.programCache[u]},applyTo2d:function(l){var u=l.imageData,h=u.data,g=h.length,m,p,v,y,_,x,b,w=1-this.alpha;b=new a.Color(this.color).getSource(),m=b[0]*this.alpha,p=b[1]*this.alpha,v=b[2]*this.alpha;for(var T=0;T<g;T+=4)switch(y=h[T],_=h[T+1],x=h[T+2],this.mode){case"multiply":h[T]=y*m/255,h[T+1]=_*p/255,h[T+2]=x*v/255;break;case"screen":h[T]=255-(255-y)*(255-m)/255,h[T+1]=255-(255-_)*(255-p)/255,h[T+2]=255-(255-x)*(255-v)/255;break;case"add":h[T]=y+m,h[T+1]=_+p,h[T+2]=x+v;break;case"diff":case"difference":h[T]=Math.abs(y-m),h[T+1]=Math.abs(_-p),h[T+2]=Math.abs(x-v);break;case"subtract":h[T]=y-m,h[T+1]=_-p,h[T+2]=x-v;break;case"darken":h[T]=Math.min(y,m),h[T+1]=Math.min(_,p),h[T+2]=Math.min(x,v);break;case"lighten":h[T]=Math.max(y,m),h[T+1]=Math.max(_,p),h[T+2]=Math.max(x,v);break;case"overlay":h[T]=m<128?2*y*m/255:255-2*(255-y)*(255-m)/255,h[T+1]=p<128?2*_*p/255:255-2*(255-_)*(255-p)/255,h[T+2]=v<128?2*x*v/255:255-2*(255-x)*(255-v)/255;break;case"exclusion":h[T]=m+y-2*m*y/255,h[T+1]=p+_-2*p*_/255,h[T+2]=v+x-2*v*x/255;break;case"tint":h[T]=m+y*w,h[T+1]=p+_*w,h[T+2]=v+x*w}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var h=new a.Color(this.color).getSource();h[0]=this.alpha*h[0]/255,h[1]=this.alpha*h[1]/255,h[2]=this.alpha*h[2]/255,h[3]=this.alpha,l.uniform4fv(u.uColor,h)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendColor.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric,c=a.Image.filters,d=a.util.createClass;c.BlendImage=d(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,h=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,h)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,h=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,h,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image,u=l._element.width,h=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/u,-l.top/h,1]},applyTo2d:function(l){var u=l.imageData,h=l.filterBackend.resources,g=u.data,m=g.length,p=u.width,v=u.height,y,_,x,b,w,T,S,O,N,V,Z=this.image,j;h.blendImage||(h.blendImage=a.util.createCanvasElement()),N=h.blendImage,V=N.getContext("2d"),N.width!==p||N.height!==v?(N.width=p,N.height=v):V.clearRect(0,0,p,v),V.setTransform(Z.scaleX,0,0,Z.scaleY,Z.left,Z.top),V.drawImage(Z._element,0,0,p,v),j=V.getImageData(0,0,p,v).data;for(var z=0;z<m;z+=4)switch(w=g[z],T=g[z+1],S=g[z+2],O=g[z+3],y=j[z],_=j[z+1],x=j[z+2],b=j[z+3],this.mode){case"multiply":g[z]=w*y/255,g[z+1]=T*_/255,g[z+2]=S*x/255,g[z+3]=O*b/255;break;case"mask":g[z+3]=b;break}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var h=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,h)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendImage.fromObject=function(l,u){a.Image.fromObject(l.image,function(h){var g=a.util.object.clone(l);g.image=h,u(new a.Image.filters.BlendImage(g))})}}(n),function(o){var a=o.fabric||(o.fabric={}),c=Math.pow,d=Math.floor,l=Math.sqrt,u=Math.abs,h=Math.round,g=Math.sin,m=Math.ceil,p=a.Image.filters,v=a.util.createClass;p.Resize=v(p.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,_){return{uDelta:y.getUniformLocation(_,"uDelta"),uTaps:y.getUniformLocation(_,"uTaps")}},sendUniformData:function(y,_){y.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(y){var _=this.getFilterWindow(),x=this.type+"_"+_;if(!y.programCache.hasOwnProperty(x)){var b=this.generateShader(_);y.programCache[x]=this.createProgram(y.context,b)}return y.programCache[x]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,x=this.getFilterWindow(),b=new Array(x),w=1;w<=x;w++)b[w-1]=y(w*_);return b},generateShader:function(b){for(var _=new Array(b),x=this.fragmentSourceTOP,b,w=1;w<=b;w++)_[w-1]=w+".0 * uDelta";return x+="uniform float uTaps["+b+`];
`,x+=`void main() {
`,x+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,x+=`  float sum = 1.0;
`,_.forEach(function(T,S){x+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+S+`];
`,x+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+S+`];
`,x+="  sum += 2.0 * uTaps["+S+`];
`}),x+=`  gl_FragColor = color / sum;
`,x+="}",x},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(_){if(_>=y||_<=-y)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var x=_/y;return g(_)/_*g(x)/x}},applyTo2d:function(y){var _=y.imageData,x=this.scaleX,b=this.scaleY;this.rcpScaleX=1/x,this.rcpScaleY=1/b;var w=_.width,T=_.height,S=h(w*x),O=h(T*b),N;this.resizeType==="sliceHack"?N=this.sliceByTwo(y,w,T,S,O):this.resizeType==="hermite"?N=this.hermiteFastResize(y,w,T,S,O):this.resizeType==="bilinear"?N=this.bilinearFiltering(y,w,T,S,O):this.resizeType==="lanczos"&&(N=this.lanczosResize(y,w,T,S,O)),y.imageData=N},sliceByTwo:function(y,_,x,b,w){var T=y.imageData,S=.5,O=!1,N=!1,V=_*S,Z=x*S,j=a.filterBackend.resources,z,G,ne=0,re=0,U=_,M=0;for(j.sliceByTwo||(j.sliceByTwo=document.createElement("canvas")),z=j.sliceByTwo,(z.width<_*1.5||z.height<x)&&(z.width=_*1.5,z.height=x),G=z.getContext("2d"),G.clearRect(0,0,_*1.5,x),G.putImageData(T,0,0),b=d(b),w=d(w);!O||!N;)_=V,x=Z,b<d(V*S)?V=d(V*S):(V=b,O=!0),w<d(Z*S)?Z=d(Z*S):(Z=w,N=!0),G.drawImage(z,ne,re,_,x,U,M,V,Z),ne=U,re=M,M+=Z;return G.getImageData(ne,re,b,w)},lanczosResize:function(y,_,x,b,w){function T(P){var L,H,k,A,F,W,Y,X,ee,he,ge;for(M.x=(P+.5)*Z,D.x=d(M.x),L=0;L<w;L++){for(M.y=(L+.5)*j,D.y=d(M.y),F=0,W=0,Y=0,X=0,ee=0,H=D.x-ne;H<=D.x+ne;H++)if(!(H<0||H>=_)){he=d(1e3*u(H-M.x)),U[he]||(U[he]={});for(var J=D.y-re;J<=D.y+re;J++)J<0||J>=x||(ge=d(1e3*u(J-M.y)),U[he][ge]||(U[he][ge]=V(l(c(he*z,2)+c(ge*G,2))/1e3)),k=U[he][ge],k>0&&(A=(J*_+H)*4,F+=k,W+=k*S[A],Y+=k*S[A+1],X+=k*S[A+2],ee+=k*S[A+3]))}A=(L*b+P)*4,N[A]=W/F,N[A+1]=Y/F,N[A+2]=X/F,N[A+3]=ee/F}return++P<b?T(P):O}var S=y.imageData.data,O=y.ctx.createImageData(b,w),N=O.data,V=this.lanczosCreate(this.lanczosLobes),Z=this.rcpScaleX,j=this.rcpScaleY,z=2/this.rcpScaleX,G=2/this.rcpScaleY,ne=m(Z*this.lanczosLobes/2),re=m(j*this.lanczosLobes/2),U={},M={},D={};return T(0)},bilinearFiltering:function(y,_,x,b,w){var T,S,O,N,V,Z,j,z,G,ne,re,U,M=0,D,P=this.rcpScaleX,L=this.rcpScaleY,H=4*(_-1),k=y.imageData,A=k.data,F=y.ctx.createImageData(b,w),W=F.data;for(j=0;j<w;j++)for(z=0;z<b;z++)for(V=d(P*z),Z=d(L*j),G=P*z-V,ne=L*j-Z,D=4*(Z*_+V),re=0;re<4;re++)T=A[D+re],S=A[D+4+re],O=A[D+H+re],N=A[D+H+4+re],U=T*(1-G)*(1-ne)+S*G*(1-ne)+O*ne*(1-G)+N*G*ne,W[M++]=U;return F},hermiteFastResize:function(y,_,x,b,w){for(var T=this.rcpScaleX,S=this.rcpScaleY,O=m(T/2),N=m(S/2),V=y.imageData,Z=V.data,j=y.ctx.createImageData(b,w),z=j.data,G=0;G<w;G++)for(var ne=0;ne<b;ne++){for(var re=(ne+G*b)*4,U=0,M=0,D=0,P=0,L=0,H=0,k=0,A=(G+.5)*S,F=d(G*S);F<(G+1)*S;F++)for(var W=u(A-(F+.5))/N,Y=(ne+.5)*T,X=W*W,ee=d(ne*T);ee<(ne+1)*T;ee++){var he=u(Y-(ee+.5))/O,ge=l(X+he*he);ge>1&&ge<-1||(U=2*ge*ge*ge-3*ge*ge+1,U>0&&(he=4*(ee+F*_),k+=U*Z[he+3],D+=U,Z[he+3]<255&&(U=U*Z[he+3]/250),P+=U*Z[he],L+=U*Z[he+1],H+=U*Z[he+2],M+=U))}z[re]=P/M,z[re+1]=L/M,z[re+2]=H/M,z[re+3]=k/D}return j},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),a.Image.filters.Resize.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Contrast=d(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var u=l.imageData,h,m,g=u.data,m=g.length,p=Math.floor(this.contrast*255),v=259*(p+255)/(255*(259-p));for(h=0;h<m;h+=4)g[h]=v*(g[h]-128)+128,g[h+1]=v*(g[h+1]-128)+128,g[h+2]=v*(g[h+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),a.Image.filters.Contrast.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Saturation=d(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var u=l.imageData,h=u.data,g=h.length,m=-this.saturation,p,v;for(p=0;p<g;p+=4)v=Math.max(h[p],h[p+1],h[p+2]),h[p]+=v!==h[p]?(v-h[p])*m:0,h[p+1]+=v!==h[p+1]?(v-h[p+1])*m:0,h[p+2]+=v!==h[p+2]?(v-h[p+2])*m:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),a.Image.filters.Saturation.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Vibrance=d(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var u=l.imageData,h=u.data,g=h.length,m=-this.vibrance,p,v,y,_;for(p=0;p<g;p+=4)v=Math.max(h[p],h[p+1],h[p+2]),y=(h[p]+h[p+1]+h[p+2])/3,_=Math.abs(v-y)*2/255*m,h[p]+=v!==h[p]?(v-h[p])*_:0,h[p+1]+=v!==h[p+1]?(v-h[p+1])*_:0,h[p+2]+=v!==h[p+2]?(v-h[p+2])*_:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),a.Image.filters.Vibrance.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Blur=d(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var u=l.filterBackend.resources,h,g,m=l.imageData.width,p=l.imageData.height;u.blurLayer1||(u.blurLayer1=a.util.createCanvasElement(),u.blurLayer2=a.util.createCanvasElement()),h=u.blurLayer1,g=u.blurLayer2,(h.width!==m||h.height!==p)&&(g.width=h.width=m,g.height=h.height=p);var v=h.getContext("2d"),y=g.getContext("2d"),_=15,x,b,w,T,S=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),y.clearRect(0,0,m,p),T=-_;T<=_;T++)x=(Math.random()-.5)/4,b=T/_,w=S*b*m+x,y.globalAlpha=1-Math.abs(b),y.drawImage(h,w,x),v.drawImage(g,0,0),y.globalAlpha=1,y.clearRect(0,0,g.width,g.height);for(T=-_;T<=_;T++)x=(Math.random()-.5)/4,b=T/_,w=S*b*p+x,y.globalAlpha=1-Math.abs(b),y.drawImage(h,x,w),v.drawImage(g,0,0),y.globalAlpha=1,y.clearRect(0,0,g.width,g.height);l.ctx.drawImage(h,0,0);var O=l.ctx.getImageData(0,0,h.width,h.height);return v.globalAlpha=1,v.clearRect(0,0,h.width,h.height),O},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var h=this.chooseRightDelta();l.uniform2fv(u.delta,h)},chooseRightDelta:function(){var l=1,u=[0,0],h;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),h=l*this.blur*.12,this.horizontal?u[0]=h:u[1]=h,u}}),c.Blur.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Gamma=d(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var u=l.imageData,h=u.data,g=this.gamma,m=h.length,p=1/g[0],v=1/g[1],y=1/g[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,m=256;_<m;_++)this.rVals[_]=Math.pow(_/255,p)*255,this.gVals[_]=Math.pow(_/255,v)*255,this.bVals[_]=Math.pow(_/255,y)*255;for(_=0,m=h.length;_<m;_+=4)h[_]=this.rVals[h[_]],h[_+1]=this.gVals[h[_+1]],h[_+2]=this.bVals[h[_+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),a.Image.filters.Gamma.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.Composed=d(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return a.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),a.Image.filters.Composed.fromObject=function(l,u){var h=l.subFilters||[],g=h.map(function(p){return new a.Image.filters[p.type](p)}),m=new a.Image.filters.Composed({subFilters:g});return u&&u(m),m}}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.Image.filters,d=a.util.createClass;c.HueRotation=d(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=a.util.cos(l),h=a.util.sin(l),g=1/3,m=Math.sqrt(g)*h,p=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+p/3,this.matrix[1]=g*p-m,this.matrix[2]=g*p+m,this.matrix[5]=g*p+m,this.matrix[6]=u+g*p,this.matrix[7]=g*p-m,this.matrix[10]=g*p-m,this.matrix[11]=g*p+m,this.matrix[12]=u+g*p},isNeutralState:function(l){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,l)}}),a.Image.filters.HueRotation.fromObject=a.Image.filters.BaseFilter.fromObject}(n),function(o){var a=o.fabric||(o.fabric={}),c=a.util.object.clone;if(a.Text){a.warn("fabric.Text is already defined");return}var d="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");a.Text=a.util.createClass(a.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:a.Object.prototype.stateProperties.concat(d),cacheProperties:a.Object.prototype.cacheProperties.concat(d),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u?u.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=a.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return a._measuringContext||(a._measuringContext=this.canvas&&this.canvas.contextCache||a.util.createCanvasElement().getContext("2d")),a._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,h,g,m,p,v,y=0,_=this._textLines.length;y<_;y++)if(!(this.textAlign!=="justify"&&(y===_-1||this.isEndOfWrapping(y)))&&(g=0,m=this._textLines[y],u=this.getLineWidth(y),u<this.width&&(v=this.textLines[y].match(this._reSpacesAndTabs)))){h=v.length,l=(this.width-u)/h;for(var x=0,b=m.length;x<=b;x++)p=this.__charBounds[y][x],this._reSpaceAndTab.test(m[x])?(p.width+=l,p.kernedWidth+=l,p.left+=g,g+=l):p.left+=g}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,h){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(u,h)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,h=this._textLines.length;u<h;u++){var g=this.getLineWidth(u);g>l&&(l=g)}return l},_renderTextLine:function(l,u,h,g,m,p){this._renderChars(l,u,h,g,m,p)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var u,h,g=l.fillStyle,m,p,v=this._getLeftOffset(),y=this._getTopOffset(),_=0,x=0,b,w,T=this.path,S,O=0,N=this._textLines.length;O<N;O++){if(u=this.getHeightOfLine(O),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",O)){y+=u;continue}m=this._textLines[O],h=this._getLineLeftOffset(O),x=0,_=0,p=this.getValueOfPropertyAt(O,0,"textBackgroundColor");for(var V=0,Z=m.length;V<Z;V++)b=this.__charBounds[O][V],w=this.getValueOfPropertyAt(O,V,"textBackgroundColor"),T?(l.save(),l.translate(b.renderLeft,b.renderTop),l.rotate(b.angle),l.fillStyle=w,w&&l.fillRect(-b.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),b.width,u/this.lineHeight),l.restore()):w!==p?(S=v+h+_,this.direction==="rtl"&&(S=this.width-S-x),l.fillStyle=p,p&&l.fillRect(S,y,x,u/this.lineHeight),_=b.left,x=b.width,p=w):x+=b.kernedWidth;w&&!T&&(S=v+h+_,this.direction==="rtl"&&(S=this.width-S-x),l.fillStyle=w,l.fillRect(S,y,x,u/this.lineHeight)),y+=u}l.fillStyle=g,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();a.charWidthsCache[u]||(a.charWidthsCache[u]={});var h=a.charWidthsCache[u],g=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return h[g]||(h[g]={}),h[g]},_measureChar:function(l,u,h,g){var m=this.getFontCache(u),p=this._getFontDeclaration(u),v=this._getFontDeclaration(g),y=h+l,_=p===v,x,b,w,T=u.fontSize/this.CACHE_FONT_SIZE,S;if(h&&m[h]!==void 0&&(w=m[h]),m[l]!==void 0&&(S=x=m[l]),_&&m[y]!==void 0&&(b=m[y],S=b-w),x===void 0||w===void 0||b===void 0){var O=this.getMeasuringContext();this._setTextStyles(O,u,!0)}return x===void 0&&(S=x=O.measureText(l).width,m[l]=x),w===void 0&&_&&h&&(w=O.measureText(h).width,m[h]=w),_&&b===void 0&&(b=O.measureText(y).width,m[y]=b,S=b-w),{width:x*T,kernedWidth:S*T}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return this.charSpacing!==0&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var u=0,h,g,m=this._textLines[l],p,v,y=0,_=new Array(m.length),x=0,b,w,T=this.path,S=this.pathSide==="right";for(this.__charBounds[l]=_,h=0;h<m.length;h++)g=m[h],v=this._getGraphemeBox(g,l,h,p),_[h]=v,u+=v.kernedWidth,p=g;if(_[h]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(w=T.segmentsInfo[T.segmentsInfo.length-1].length,b=a.util.getPointOnPath(T.path,0,T.segmentsInfo),b.x+=T.pathOffset.x,b.y+=T.pathOffset.y,this.textAlign){case"left":x=S?w-u:0;break;case"center":x=(w-u)/2;break;case"right":x=S?0:w-u;break}for(x+=this.pathStartOffset*(S?-1:1),h=S?m.length-1:0;S?h>=0:h<m.length;S?h--:h++)v=_[h],x>w?x%=w:x<0&&(x+=w),this._setGraphemeOnPath(x,v,b),x+=v.kernedWidth}return{width:u,numOfSpaces:y}},_setGraphemeOnPath:function(l,u,h){var g=l+u.kernedWidth/2,m=this.path,p=a.util.getPointOnPath(m.path,g,m.segmentsInfo);u.renderLeft=p.x-h.x,u.renderTop=p.y-h.y,u.angle=p.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,u,h,g,m){var p=this.getCompleteStyleDeclaration(u,h),v=g?this.getCompleteStyleDeclaration(u,h-1):{},y=this._measureChar(l,p,g,v),_=y.kernedWidth,x=y.width,b;this.charSpacing!==0&&(b=this._getWidthOfCharSpacing(),x+=b,_+=b);var w={width:x,left:0,height:p.fontSize,kernedWidth:_,deltaY:p.deltaY};if(h>0&&!m){var T=this.__charBounds[u][h-1];w.left=T.left+T.width+y.kernedWidth-y.width}return w},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],h=this.getHeightOfChar(l,0),g=1,m=u.length;g<m;g++)h=Math.max(this.getHeightOfChar(l,g),h);return this.__lineHeights[l]=h*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,h=0,g=this._textLines.length;h<g;h++)l=this.getHeightOfLine(h),u+=h===g-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var h=0,g=this._getLeftOffset(),m=this._getTopOffset(),p=0,v=this._textLines.length;p<v;p++){var y=this.getHeightOfLine(p),_=y/this.lineHeight,x=this._getLineLeftOffset(p);this._renderTextLine(u,l,this._textLines[p],g+x,m+h+_,p),h+=y}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,h,g,m,p){var v=this.getHeightOfLine(p),y=this.textAlign.indexOf("justify")!==-1,_,x,b="",w,T=0,S,O=this.path,N=!y&&this.charSpacing===0&&this.isEmptyStyles(p)&&!O,V=this.direction==="ltr",Z=this.direction==="ltr"?1:-1,j,z=u.canvas.getAttribute("dir");if(u.save(),z!==this.direction&&(u.canvas.setAttribute("dir",V?"ltr":"rtl"),u.direction=V?"ltr":"rtl",u.textAlign=V?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,N){this._renderChar(l,u,p,0,h.join(""),g,m,v),u.restore();return}for(var G=0,ne=h.length-1;G<=ne;G++)S=G===ne||this.charSpacing||O,b+=h[G],w=this.__charBounds[p][G],T===0?(g+=Z*(w.kernedWidth-w.width),T+=w.width):T+=w.kernedWidth,y&&!S&&this._reSpaceAndTab.test(h[G])&&(S=!0),S||(_=_||this.getCompleteStyleDeclaration(p,G),x=this.getCompleteStyleDeclaration(p,G+1),S=a.util.hasStyleChanged(_,x,!1)),S&&(O?(u.save(),u.translate(w.renderLeft,w.renderTop),u.rotate(w.angle),this._renderChar(l,u,p,G,b,-T/2,0,v),u.restore()):(j=g,this._renderChar(l,u,p,G,b,j,m,v)),b="",_=x,g+=Z*T,T=0);u.restore()},_applyPatternGradientTransformText:function(l){var u=a.util.createCanvasElement(),h,g=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return u.width=g,u.height=m,h=u.getContext("2d"),h.beginPath(),h.moveTo(0,0),h.lineTo(g,0),h.lineTo(g,m),h.lineTo(0,m),h.closePath(),h.translate(g/2,m/2),h.fillStyle=l.toLive(h),this._applyPatternGradientTransform(h,l),h.fill(),h.createPattern(u,"no-repeat")},handleFiller:function(l,u,h){var g,m;return h.toLive?h.gradientUnits==="percentage"||h.gradientTransform||h.patternTransform?(g=-this.width/2,m=-this.height/2,l.translate(g,m),l[u]=this._applyPatternGradientTransformText(h),{offsetX:g,offsetY:m}):(l[u]=h.toLive(l,this),this._applyPatternGradientTransform(l,h)):(l[u]=h,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,h,g,m,p,v){var y=this._getStyleDeclaration(h,g),_=this.getCompleteStyleDeclaration(h,g),x=l==="fillText"&&_.fill,b=l==="strokeText"&&_.stroke&&_.strokeWidth,w,T;!b&&!x||(u.save(),x&&(w=this._setFillStyles(u,_)),b&&(T=this._setStrokeStyles(u,_)),u.font=this._getFontDeclaration(_),y&&y.textBackgroundColor&&this._removeShadow(u),y&&y.deltaY&&(v+=y.deltaY),x&&u.fillText(m,p-w.offsetX,v-w.offsetY),b&&u.strokeText(m,p-T.offsetX,v-T.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,h){var g=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(g.lineIndex,g.charIndex,"fontSize"),p=this.getValueOfPropertyAt(g.lineIndex,g.charIndex,"deltaY"),v={fontSize:m*h.size,deltaY:p+m*h.baseline};return this.setSelectionStyles(v,l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),h=this.width-u,g=this.textAlign,m=this.direction,v,p=0,v=this.isEndOfWrapping(l);return g==="justify"||g==="justify-center"&&!v||g==="justify-right"&&!v||g==="justify-left"&&!v?0:(g==="center"&&(p=h/2),g==="right"&&(p=h),g==="justify-center"&&(p=h/2),g==="justify-right"&&(p=h),m==="rtl"&&(p-=h),p)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var u=this.measureLine(l),h=u.width;return this.__lineWidths[l]=h,h},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,h){var g=this._getStyleDeclaration(l,u);return g&&typeof g[h]<"u"?g[h]:this[h]},_renderTextDecoration:function(l,u){if(!(!this[u]&&!this.styleHas(u))){for(var h,g,m,p,v,y,_,x,b=this._getLeftOffset(),w=this._getTopOffset(),T,S,O,N,V,Z,j,z,G=this.path,ne=this._getWidthOfCharSpacing(),re=this.offsets[u],U=0,M=this._textLines.length;U<M;U++){if(h=this.getHeightOfLine(U),!this[u]&&!this.styleHas(u,U)){w+=h;continue}_=this._textLines[U],Z=h/this.lineHeight,p=this._getLineLeftOffset(U),S=0,O=0,x=this.getValueOfPropertyAt(U,0,u),z=this.getValueOfPropertyAt(U,0,"fill"),T=w+Z*(1-this._fontSizeFraction),g=this.getHeightOfChar(U,0),v=this.getValueOfPropertyAt(U,0,"deltaY");for(var D=0,P=_.length;D<P;D++)if(N=this.__charBounds[U][D],V=this.getValueOfPropertyAt(U,D,u),j=this.getValueOfPropertyAt(U,D,"fill"),m=this.getHeightOfChar(U,D),y=this.getValueOfPropertyAt(U,D,"deltaY"),G&&V&&j)l.save(),l.fillStyle=z,l.translate(N.renderLeft,N.renderTop),l.rotate(N.angle),l.fillRect(-N.kernedWidth/2,re*m+y,N.kernedWidth,this.fontSize/15),l.restore();else if((V!==x||j!==z||m!==g||y!==v)&&O>0){var L=b+p+S;this.direction==="rtl"&&(L=this.width-L-O),x&&z&&(l.fillStyle=z,l.fillRect(L,T+re*g+v,O,this.fontSize/15)),S=N.left,O=N.width,x=V,z=j,g=m,v=y}else O+=N.kernedWidth;var L=b+p+S;this.direction==="rtl"&&(L=this.width-L-O),l.fillStyle=j,V&&j&&l.fillRect(L,T+re*g+v,O-ne,this.fontSize/15),w+=h}this._removeShadow(l)}},_getFontDeclaration:function(l,u){var h=l||this,g=this.fontFamily,m=a.Text.genericFonts.indexOf(g.toLowerCase())>-1,p=g===void 0||g.indexOf("'")>-1||g.indexOf(",")>-1||g.indexOf('"')>-1||m?h.fontFamily:'"'+h.fontFamily+'"';return[a.isLikelyNode?h.fontWeight:h.fontStyle,a.isLikelyNode?h.fontStyle:h.fontWeight,u?this.CACHE_FONT_SIZE+"px":h.fontSize+"px",p].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),h=new Array(u.length),g=[`
`],m=[],p=0;p<u.length;p++)h[p]=a.util.string.graphemeSplit(u[p]),m=m.concat(h[p],g);return m.pop(),{_unwrappedLines:h,lines:u,graphemeText:m,graphemeLines:h}},toObject:function(l){var u=d.concat(l),h=this.callSuper("toObject",u);return h.styles=a.util.stylesToArray(this.styles,this.text),h.path&&(h.path=this.path.toObject()),h},set:function(l,u){this.callSuper("set",l,u);var h=!1,g=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),h=h||this._dimensionAffectingProps.indexOf(m)!==-1,g=g||m==="path";else h=this._dimensionAffectingProps.indexOf(l)!==-1,g=l==="path";return g&&this.setPathInfo(),h&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),a.Text.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),a.Text.DEFAULT_SVG_FONT_SIZE=16,a.Text.fromElement=function(l,u,h){if(!l)return u(null);var g=a.parseAttributes(l,a.Text.ATTRIBUTE_NAMES),m=g.textAnchor||"left";if(h=a.util.object.extend(h?c(h):{},g),h.top=h.top||0,h.left=h.left||0,g.textDecoration){var p=g.textDecoration;p.indexOf("underline")!==-1&&(h.underline=!0),p.indexOf("overline")!==-1&&(h.overline=!0),p.indexOf("line-through")!==-1&&(h.linethrough=!0),delete h.textDecoration}"dx"in g&&(h.left+=g.dx),"dy"in g&&(h.top+=g.dy),"fontSize"in h||(h.fontSize=a.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=h.strokeWidth;h.strokeWidth=0;var _=new a.Text(v,h),x=_.getScaledHeight()/_.height,b=(_.height+_.strokeWidth)*_.lineHeight-_.height,w=b*x,T=_.getScaledHeight()+w,S=0;m==="center"&&(S=_.getScaledWidth()/2),m==="right"&&(S=_.getScaledWidth()),_.set({left:_.left-S,top:_.top-(T-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof y<"u"?y:1}),u(_)},a.Text.fromObject=function(l,u){var h=c(l),g=l.path;return delete h.path,a.Object._fromObject("Text",h,function(m){m.styles=a.util.stylesFromArray(l.styles,l.text),g?a.Object._fromObject("Path",g,function(p){m.set("path",p),u(m)},"path"):u(m)},"text")},a.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],a.util.createAccessors&&a.util.createAccessors(a.Text)}(n),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(o){if(!this.styles||typeof o<"u"&&!this.styles[o])return!0;var a=typeof o>"u"?this.styles:{line:this.styles[o]};for(var c in a)for(var d in a[c])for(var l in a[c][d])return!1;return!0},styleHas:function(o,a){if(!this.styles||!o||o===""||typeof a<"u"&&!this.styles[a])return!1;var c=typeof a>"u"?this.styles:{0:this.styles[a]};for(var d in c)for(var l in c[d])if(typeof c[d][l][o]<"u")return!0;return!1},cleanStyle:function(o){if(!this.styles||!o||o==="")return!1;var a=this.styles,c=0,d,l,u=!0,h=0,g;for(var m in a){d=0;for(var p in a[m]){var g=a[m][p],v=g.hasOwnProperty(o);c++,v?(l?g[o]!==l&&(u=!1):l=g[o],g[o]===this[o]&&delete g[o]):u=!1,Object.keys(g).length!==0?d++:delete a[m][p]}d===0&&delete a[m]}for(var y=0;y<this._textLines.length;y++)h+=this._textLines[y].length;u&&c===h&&(this[o]=l,this.removeStyle(o))},removeStyle:function(o){if(!(!this.styles||!o||o==="")){var a=this.styles,c,d,l;for(d in a){c=a[d];for(l in c)delete c[l][o],Object.keys(c[l]).length===0&&delete c[l];Object.keys(c).length===0&&delete a[d]}}},_extendStyles:function(o,a){var c=this.get2DCursorLocation(o);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),a)},get2DCursorLocation:function(o,a){typeof o>"u"&&(o=this.selectionStart);for(var c=a?this._unwrappedTextLines:this._textLines,d=c.length,l=0;l<d;l++){if(o<=c[l].length)return{lineIndex:l,charIndex:o};o-=c[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:c[l-1].length<o?c[l-1].length:o}},getSelectionStyles:function(o,a,c){typeof o>"u"&&(o=this.selectionStart||0),typeof a>"u"&&(a=this.selectionEnd||o);for(var d=[],l=o;l<a;l++)d.push(this.getStyleAtPosition(l,c));return d},getStyleAtPosition:function(o,a){var c=this.get2DCursorLocation(o),d=a?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return d||{}},setSelectionStyles:function(o,a,c){typeof a>"u"&&(a=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||a);for(var d=a;d<c;d++)this._extendStyles(d,o);return this._forceClearCache=!0,this},_getStyleDeclaration:function(o,a){var c=this.styles&&this.styles[o];return c?c[a]:null},getCompleteStyleDeclaration:function(o,a){for(var c=this._getStyleDeclaration(o,a)||{},d={},l,u=0;u<this._styleProperties.length;u++)l=this._styleProperties[u],d[l]=typeof c[l]>"u"?this[l]:c[l];return d},_setStyleDeclaration:function(o,a,c){this.styles[o][a]=c},_deleteStyleDeclaration:function(o,a){delete this.styles[o][a]},_getLineStyle:function(o){return!!this.styles[o]},_setLineStyle:function(o){this.styles[o]={}},_deleteLineStyle:function(o){delete this.styles[o]}})}(),function(){function o(a){a.textDecoration&&(a.textDecoration.indexOf("underline")>-1&&(a.underline=!0),a.textDecoration.indexOf("line-through")>-1&&(a.linethrough=!0),a.textDecoration.indexOf("overline")>-1&&(a.overline=!0),delete a.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(a,c){this.callSuper("initialize",a,c),this.initBehavior()},setSelectionStart:function(a){a=Math.max(a,0),this._updateAndFire("selectionStart",a)},setSelectionEnd:function(a){a=Math.min(a,this.text.length),this._updateAndFire("selectionEnd",a)},_updateAndFire:function(a,c){this[a]!==c&&(this._fireSelectionChanged(),this[a]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(a){this.clearContextTop(),this.callSuper("render",a),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(a){this.callSuper("_render",a)},clearContextTop:function(a){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,d=this.canvas.viewportTransform;c.save(),c.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this.transform(c),this._clearTextArea(c),a||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(a,c):this.renderSelection(a,c),c.restore()}},_clearTextArea:function(a){var c=this.width+4,d=this.height+4;a.clearRect(-c/2,-d/2,c,d)},_getCursorBoundaries:function(a){typeof a>"u"&&(a=this.selectionStart);var c=this._getLeftOffset(),d=this._getTopOffset(),l=this._getCursorBoundariesOffsets(a);return{left:c,top:d,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(a){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,d,l,u=0,h=0,g,m=this.get2DCursorLocation(a);l=m.charIndex,d=m.lineIndex;for(var p=0;p<d;p++)u+=this.getHeightOfLine(p);c=this._getLineLeftOffset(d);var v=this.__charBounds[d][l];return v&&(h=v.left),this.charSpacing!==0&&l===this._textLines[d].length&&(h-=this._getWidthOfCharSpacing()),g={top:u,left:c+(h>0?h:0)},this.direction==="rtl"&&(g.left*=-1),this.cursorOffsetCache=g,this.cursorOffsetCache},renderCursor:function(a,c){var d=this.get2DCursorLocation(),l=d.lineIndex,u=d.charIndex>0?d.charIndex-1:0,h=this.getValueOfPropertyAt(l,u,"fontSize"),g=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/g,p=a.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");p+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-h*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(a,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(a.left+a.leftOffset-m/2,p+a.top+v,m,h)},renderSelection:function(a,c){for(var d=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=this.textAlign.indexOf("justify")!==-1,h=this.get2DCursorLocation(d),g=this.get2DCursorLocation(l),m=h.lineIndex,p=g.lineIndex,v=h.charIndex<0?0:h.charIndex,y=g.charIndex<0?0:g.charIndex,_=m;_<=p;_++){var x=this._getLineLeftOffset(_)||0,b=this.getHeightOfLine(_),w=0,T=0,S=0;if(_===m&&(T=this.__charBounds[m][v].left),_>=m&&_<p)S=u&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===p)if(y===0)S=this.__charBounds[p][y].left;else{var O=this._getWidthOfCharSpacing();S=this.__charBounds[p][y-1].left+this.__charBounds[p][y-1].width-O}w=b,(this.lineHeight<1||_===p&&this.lineHeight>1)&&(b/=this.lineHeight);var N=a.left+x+T,V=S-T,Z=b,j=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",Z=1,j=b):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(N=this.width-N-V),c.fillRect(N,a.top+a.topOffset+j,V,Z),a.topOffset+=w}},getCurrentCharFontSize:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fontSize")},getCurrentCharColor:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fill")},_getCurrentCharIndex:function(){var a=this.get2DCursorLocation(this.selectionStart,!0),c=a.charIndex>0?a.charIndex-1:0;return{l:a.lineIndex,c}}}),e.IText.fromObject=function(a,c){var d=e.util.stylesFromArray(a.styles,a.text),l=Object.assign({},a,{styles:d});if(o(l),l.styles)for(var u in l.styles)for(var h in l.styles[u])o(l.styles[u][h]);e.Object._fromObject("IText",l,c,"text")}}(),function(){var o=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var a=this;this.on("added",function(){var c=a.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,a._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(a))})},initRemovedHandler:function(){var a=this;this.on("removed",function(){var c=a.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,a),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,a._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(a){a._mouseUpITextHandler=function(){a._iTextInstances&&a._iTextInstances.forEach(function(c){c.__isMousedown=!1})},a.on("mouse:up",a._mouseUpITextHandler)},_removeCanvasHandlers:function(a){a.off("mouse:up",a._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(a,c,d,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},a.animate("_currentCursorOpacity",c,{duration:d,onComplete:function(){u.isAborted||a[l]()},onChange:function(){a.canvas&&a.selectionStart===a.selectionEnd&&a.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var a=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){a._currentTickCompleteState=a._animateCursor(a,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(a){var c=this,d=a?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},d)},abortCursorAnimation:function(){var a=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,a&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(a){var c=0,d=a-1;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)c++,d--;for(;/\S/.test(this._text[d])&&d>-1;)c++,d--;return a-c},findWordBoundaryRight:function(a){var c=0,d=a;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)c++,d++;for(;/\S/.test(this._text[d])&&d<this._text.length;)c++,d++;return a+c},findLineBoundaryLeft:function(a){for(var c=0,d=a-1;!/\n/.test(this._text[d])&&d>-1;)c++,d--;return a-c},findLineBoundaryRight:function(a){for(var c=0,d=a;!/\n/.test(this._text[d])&&d<this._text.length;)c++,d++;return a+c},searchWordBoundary:function(a,c){for(var d=this._text,l=this._reSpace.test(d[a])?a-1:a,u=d[l],h=e.reNonWord;!h.test(u)&&l>0&&l<d.length;)l+=c,u=d[l];return h.test(u)&&(l+=c===1?0:1),l},selectWord:function(a){a=a||this.selectionStart;var c=this.searchWordBoundary(a,-1),d=this.searchWordBoundary(a,1);this.selectionStart=c,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(a){a=a||this.selectionStart;var c=this.findLineBoundaryLeft(a),d=this.findLineBoundaryRight(a);return this.selectionStart=c,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(a){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(a),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(a){a._iTextInstances&&a._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(a){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(a.e),d=this.selectionStart,l=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||d===l)&&(d===c||l===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==d||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(a,c,d){var l=d.slice(0,a),u=e.util.string.graphemeSplit(l).length;if(a===c)return{selectionStart:u,selectionEnd:u};var h=d.slice(a,c),g=e.util.string.graphemeSplit(h).length;return{selectionStart:u,selectionEnd:u+g}},fromGraphemeToStringSelection:function(a,c,d){var l=d.slice(0,a),u=l.join("").length;if(a===c)return{selectionStart:u,selectionEnd:u};var h=d.slice(a,c),g=h.join("").length;return{selectionStart:u,selectionEnd:u+g}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var a=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=a.selectionStart,this.hiddenTextarea.selectionEnd=a.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var a=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=a.selectionEnd,this.inCompositionMode||(this.selectionStart=a.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var a=this._calcTextareaPosition();this.hiddenTextarea.style.left=a.left,this.hiddenTextarea.style.top=a.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var a=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(a),d=this.get2DCursorLocation(a),l=d.lineIndex,u=d.charIndex,h=this.getValueOfPropertyAt(l,u,"fontSize")*this.lineHeight,g=c.leftOffset,m=this.calcTransformMatrix(),p={x:c.left+g,y:c.top+c.topOffset+h},v=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,_=y.width/v,x=y.height/v,b=_-h,w=x-h,T=y.clientWidth/_,S=y.clientHeight/x;return p=e.util.transformPoint(p,m),p=e.util.transformPoint(p,this.canvas.viewportTransform),p.x*=T,p.y*=S,p.x<0&&(p.x=0),p.x>b&&(p.x=b),p.y<0&&(p.y=0),p.y>w&&(p.y=w),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:p.x+"px",top:p.y+"px",fontSize:h+"px",charHeight:h}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var a=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),a&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),a&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var a in this.styles)this._textLines[a]||delete this.styles[a]},removeStyleFromTo:function(a,c){var d=this.get2DCursorLocation(a,!0),l=this.get2DCursorLocation(c,!0),u=d.lineIndex,h=d.charIndex,g=l.lineIndex,m=l.charIndex,p,v;if(u!==g){if(this.styles[u])for(p=h;p<this._unwrappedTextLines[u].length;p++)delete this.styles[u][p];if(this.styles[g])for(p=m;p<this._unwrappedTextLines[g].length;p++)v=this.styles[g][p],v&&(this.styles[u]||(this.styles[u]={}),this.styles[u][h+p-m]=v);for(p=u+1;p<=g;p++)delete this.styles[p];this.shiftLineStyles(g,u-g)}else if(this.styles[u]){v=this.styles[u];var y=m-h,_,x;for(p=h;p<m;p++)delete v[p];for(x in this.styles[u])_=parseInt(x,10),_>=m&&(v[_-y]=v[x],delete v[x])}},shiftLineStyles:function(a,c){var d=o(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>a&&(this.styles[u+c]=d[u],d[u-c]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(a,c,d,l){var u,h={},g=!1,m=this._unwrappedTextLines[a].length===c;d||(d=1),this.shiftLineStyles(a,d),this.styles[a]&&(u=this.styles[a][c===0?c:c-1]);for(var p in this.styles[a]){var v=parseInt(p,10);v>=c&&(g=!0,h[v-c]=this.styles[a][p],m&&c===0||delete this.styles[a][p])}var y=!1;for(g&&!m&&(this.styles[a+d]=h,y=!0),y&&d--;d>0;)l&&l[d-1]?this.styles[a+d]={0:o(l[d-1])}:u?this.styles[a+d]={0:o(u)}:delete this.styles[a+d],d--;this._forceClearCache=!0},insertCharStyleObject:function(a,c,d,l){this.styles||(this.styles={});var u=this.styles[a],h=u?o(u):{};d||(d=1);for(var g in h){var m=parseInt(g,10);m>=c&&(u[m+d]=h[m],h[m-d]||delete u[m])}if(this._forceClearCache=!0,l){for(;d--;)Object.keys(l[d]).length&&(this.styles[a]||(this.styles[a]={}),this.styles[a][c+d]=o(l[d]));return}if(u)for(var p=u[c?c-1:1];p&&d--;)this.styles[a][c+d]=o(p)},insertNewStyleBlock:function(a,c,d){for(var l=this.get2DCursorLocation(c,!0),u=[0],h=0,g=0;g<a.length;g++)a[g]===`
`?(h++,u[h]=0):u[h]++;u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],d),d=d&&d.slice(u[0]+1)),h&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],h);for(var g=1;g<h;g++)u[g]>0?this.insertCharStyleObject(l.lineIndex+g,0,u[g],d):d&&this.styles[l.lineIndex+g]&&d[0]&&(this.styles[l.lineIndex+g][0]=d[0]),d=d&&d.slice(u[g]+1);u[g]>0&&this.insertCharStyleObject(l.lineIndex+g,0,u[g],d)},setSelectionStartEndWithShift:function(a,c,d){d<=a?(c===a?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=a),this.selectionStart=d):d>a&&d<c?this._selectionDirection==="right"?this.selectionEnd=d:this.selectionStart=d:(c===a?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=d)},setSelectionInBoundaries:function(){var a=this.text.length;this.selectionStart>a?this.selectionStart=a:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>a?this.selectionEnd=a:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(o){if(this.canvas){this.__newClickTime=+new Date;var a=o.pointer;this.isTripleClick(a)&&(this.fire("tripleclick",o),this._stopEvent(o.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=a,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(o){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===o.x&&this.__lastPointer.y===o.y},_stopEvent:function(o){o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(o){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(o.e))},tripleClickHandler:function(o){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(o.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(o.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(o){if(this.__isMousedown=!1,!(!this.editable||this.group||o.transform&&o.transform.actionPerformed||o.e.button&&o.e.button!==1)){if(this.canvas){var a=this.canvas._activeObject;if(a&&a!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(o.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(o){var a=this.getSelectionStartFromPointer(o),c=this.selectionStart,d=this.selectionEnd;o.shiftKey?this.setSelectionStartEndWithShift(c,d,a):(this.selectionStart=a,this.selectionEnd=a),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(o){for(var a=this.getLocalPointer(o),c=0,d=0,l=0,u=0,h=0,g,m,p=0,v=this._textLines.length;p<v&&l<=a.y;p++)l+=this.getHeightOfLine(p)*this.scaleY,h=p,p>0&&(u+=this._textLines[p-1].length+this.missingNewlineOffset(p-1));g=this._getLineLeftOffset(h),d=g*this.scaleX,m=this._textLines[h],this.direction==="rtl"&&(a.x=this.width*this.scaleX-a.x+d);for(var y=0,_=m.length;y<_&&(c=d,d+=this.__charBounds[h][y].kernedWidth*this.scaleX,d<=a.x);y++)u++;return this._getNewSelectionStartFromOffset(a,c,d,u,_)},_getNewSelectionStartFromOffset:function(o,a,c,d,l){var u=o.x-a,h=c-o.x,g=h>u||h<0?0:1,m=d+g;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var o=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+o.top+"; left: "+o.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+o.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(o){if(this.isEditing){var a=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(o.keyCode in a)this[a[o.keyCode]](o);else if(o.keyCode in this.ctrlKeysMapDown&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapDown[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),o.keyCode>=33&&o.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(o){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(o.keyCode in this.ctrlKeysMapUp&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapUp[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(o){var a=this.fromPaste;if(this.fromPaste=!1,o&&o.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,d=this._text.length,l=c.length,u,h,g=l-d,m=this.selectionStart,p=this.selectionEnd,v=m!==p,y,_,x;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var b=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=m>b.selectionStart;v?(u=this._text.slice(m,p),g+=p-m):l<d&&(w?u=this._text.slice(p+g,p):u=this._text.slice(m,m-g)),h=c.slice(b.selectionEnd-g,b.selectionEnd),u&&u.length&&(h.length&&(y=this.getSelectionStyles(m,m+1,!1),y=h.map(function(){return y[0]})),v?(_=m,x=p):w?(_=p-u.length,x=p):(_=p,x=p+u.length),this.removeStyleFromTo(_,x)),h.length&&(a&&h.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(y=e.copiedTextStyle),this.insertNewStyleBlock(h,m,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(o){this.compositionStart=o.target.selectionStart,this.compositionEnd=o.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(o){return o&&o.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(o,a){var c=this._getLineLeftOffset(o),d;return a>0&&(d=this.__charBounds[o][a-1],c+=d.left+d.width),c},getDownCursorOffset:function(o,a){var c=this._getSelectionForOffset(o,a),d=this.get2DCursorLocation(c),l=d.lineIndex;if(l===this._textLines.length-1||o.metaKey||o.keyCode===34)return this._text.length-c;var u=d.charIndex,h=this._getWidthBeforeCursor(l,u),g=this._getIndexOnLine(l+1,h),m=this._textLines[l].slice(u);return m.length+g+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(o,a){return o.shiftKey&&this.selectionStart!==this.selectionEnd&&a?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(o,a){var c=this._getSelectionForOffset(o,a),d=this.get2DCursorLocation(c),l=d.lineIndex;if(l===0||o.metaKey||o.keyCode===33)return-c;var u=d.charIndex,h=this._getWidthBeforeCursor(l,u),g=this._getIndexOnLine(l-1,h),m=this._textLines[l].slice(0,u),p=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+g-m.length+(1-p)},_getIndexOnLine:function(o,a){for(var c=this._textLines[o],d=this._getLineLeftOffset(o),l=d,u=0,h,g,m=0,p=c.length;m<p;m++)if(h=this.__charBounds[o][m].width,l+=h,l>a){g=!0;var v=l-h,y=l,_=Math.abs(v-a),x=Math.abs(y-a);u=x<_?m:m-1;break}return g||(u=c.length-1),u},moveCursorDown:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",o)},moveCursorUp:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",o)},_moveCursorUpOrDown:function(o,a){var c="get"+o+"CursorOffset",d=this[c](a,this._selectionDirection==="right");a.shiftKey?this.moveCursorWithShift(d):this.moveCursorWithoutShift(d),d!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(o){var a=this._selectionDirection==="left"?this.selectionStart+o:this.selectionEnd+o;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,a),o!==0},moveCursorWithoutShift:function(o){return o<0?(this.selectionStart+=o,this.selectionEnd=this.selectionStart):(this.selectionEnd+=o,this.selectionStart=this.selectionEnd),o!==0},moveCursorLeft:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",o)},_move:function(o,a,c){var d;if(o.altKey)d=this["findWordBoundary"+c](this[a]);else if(o.metaKey||o.keyCode===35||o.keyCode===36)d=this["findLineBoundary"+c](this[a]);else return this[a]+=c==="Left"?-1:1,!0;if(typeof d<"u"&&this[a]!==d)return this[a]=d,!0},_moveLeft:function(o,a){return this._move(o,a,"Left")},_moveRight:function(o,a){return this._move(o,a,"Right")},moveCursorLeftWithoutShift:function(o){var a=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(a=this._moveLeft(o,"selectionStart")),this.selectionEnd=this.selectionStart,a},moveCursorLeftWithShift:function(o){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(o,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(o,"selectionStart")},moveCursorRight:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",o)},_moveCursorLeftOrRight:function(o,a){var c="moveCursor"+o+"With";this._currentCursorOpacity=1,a.shiftKey?c+="Shift":c+="outShift",this[c](a)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(o){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(o,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(o,"selectionEnd")},moveCursorRightWithoutShift:function(o){var a=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(a=this._moveRight(o,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,a},removeChars:function(o,a){typeof a>"u"&&(a=o+1),this.removeStyleFromTo(o,a),this._text.splice(o,a-o),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(o,a,c,d){typeof d>"u"&&(d=c),d>c&&this.removeStyleFromTo(c,d);var l=e.util.string.graphemeSplit(o);this.insertNewStyleBlock(l,c,a),this._text=[].concat(this._text.slice(0,c),l,this._text.slice(d)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var o=e.util.toFixed,a=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),d=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(d)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var d=!0,l=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(d),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,d){var l=[],u=[],h=c,g;this._setSVGBg(u);for(var m=0,p=this._textLines.length;m<p;m++)g=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(u,m,d+g,h),this._setSVGTextLineText(l,m,d+g,h),h+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(c,d,l,u){var h=c!==c.trim()||c.match(a),g=this.getSvgSpanStyles(d,h),m=g?'style="'+g+'"':"",p=d.deltaY,v="",y=e.Object.NUM_FRACTION_DIGITS;return p&&(v=' dy="'+o(p,y)+'" '),['<tspan x="',o(l,y),'" y="',o(u,y),'" ',v,m,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,d,l,u){var h=this.getHeightOfLine(d),g=this.textAlign.indexOf("justify")!==-1,m,p,v="",y,_,x=0,b=this._textLines[d],w;u+=h*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,S=b.length-1;T<=S;T++)w=T===S||this.charSpacing,v+=b[T],y=this.__charBounds[d][T],x===0?(l+=y.kernedWidth-y.width,x+=y.width):x+=y.kernedWidth,g&&!w&&this._reSpaceAndTab.test(b[T])&&(w=!0),w||(m=m||this.getCompleteStyleDeclaration(d,T),p=this.getCompleteStyleDeclaration(d,T+1),w=e.util.hasStyleChanged(m,p,!0)),w&&(_=this._getStyleDeclaration(d,T)||{},c.push(this._createTextCharSpan(v,_,l,u)),v="",m=p,l+=x,x=0)},_pushTextBgRect:function(c,d,l,u,h,g){var m=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(d),' x="',o(l,m),'" y="',o(u,m),'" width="',o(h,m),'" height="',o(g,m),`"></rect>
`)},_setSVGTextLineBg:function(c,d,l,u){for(var h=this._textLines[d],g=this.getHeightOfLine(d)/this.lineHeight,m=0,p=0,v,y,_=this.getValueOfPropertyAt(d,0,"textBackgroundColor"),x=0,b=h.length;x<b;x++)v=this.__charBounds[d][x],y=this.getValueOfPropertyAt(d,x,"textBackgroundColor"),y!==_?(_&&this._pushTextBgRect(c,_,l+p,u,m,g),p=v.left,m=v.width,_=y):m+=v.kernedWidth;y&&this._pushTextBgRect(c,y,l+p,u,m,g)},_getFillAttributes:function(c){var d=c&&typeof c=="string"?new e.Color(c):"";return!d||!d.getSource()||d.getAlpha()===1?'fill="'+c+'"':'opacity="'+d.getAlpha()+'" fill="'+d.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var d=0,l=0,u=0;u<c;u++)d+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:d,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var d=e.Object.prototype.getSvgStyles.call(this,c);return d+" white-space: pre;"}})}(),function(o){var a=o.fabric||(o.fabric={});a.Textbox=a.util.createClass(a.IText,a.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:a.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var d=0,l=0,u=0,h={},g=0;g<c.graphemeLines.length;g++)c.graphemeText[u]===`
`&&g>0?(l=0,u++,d++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[u])&&g>0&&(l++,u++),h[g]={line:d,offset:l},u+=c.graphemeLines[g].length,l+=c.graphemeLines[g].length;return h},styleHas:function(c,d){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[d];l&&(d=l.line)}return a.Text.prototype.styleHas.call(this,c,d)},isEmptyStyles:function(c){if(!this.styles)return!0;var d=0,l=c+1,u,h,g=!1,m=this._styleMap[c],p=this._styleMap[c+1];m&&(c=m.line,d=m.offset),p&&(l=p.line,g=l===c,u=p.offset),h=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in h)for(var y in h[v])if(y>=d&&(!g||y<u))for(var _ in h[v][y])return!1;return!0},_getStyleDeclaration:function(c,d){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[c];if(!l)return null;c=l.line,d=l.offset+d}return this.callSuper("_getStyleDeclaration",c,d)},_setStyleDeclaration:function(c,d,l){var u=this._styleMap[c];c=u.line,d=u.offset+d,this.styles[c][d]=l},_deleteStyleDeclaration:function(c,d){var l=this._styleMap[c];c=l.line,d=l.offset+d,delete this.styles[c][d]},_getLineStyle:function(c){var d=this._styleMap[c];return!!this.styles[d.line]},_setLineStyle:function(c){var d=this._styleMap[c];this.styles[d.line]={}},_wrapText:function(c,d){var l=[],u;for(this.isWrapping=!0,u=0;u<c.length;u++)l=l.concat(this._wrapLine(c[u],u,d));return this.isWrapping=!1,l},_measureWord:function(c,d,l){var u=0,h,g=!0;l=l||0;for(var m=0,p=c.length;m<p;m++){var v=this._getGraphemeBox(c[m],d,m+l,h,g);u+=v.kernedWidth,h=c[m]}return u},_wrapLine:function(c,d,l,N){var h=0,g=this.splitByGrapheme,m=[],p=[],v=g?a.util.string.graphemeSplit(c):c.split(this._wordJoiners),y="",_=0,x=g?"":" ",b=0,w=0,T=0,S=!0,O=this._getWidthOfCharSpacing(),N=N||0;v.length===0&&v.push([]),l-=N;for(var V=0;V<v.length;V++)y=g?v[V]:a.util.string.graphemeSplit(v[V]),b=this._measureWord(y,d,_),_+=y.length,h+=w+b-O,h>l&&!S?(m.push(p),p=[],h=b,S=!0):h+=O,!S&&!g&&p.push(x),p=p.concat(y),w=g?0:this._measureWord([x],d,_),_++,S=!1,b>T&&(T=b);return V&&m.push(p),T+N>this.dynamicMinWidth&&(this.dynamicMinWidth=T-O+N),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var d=a.Text.prototype._splitTextIntoLines.call(this,c),l=this._wrapText(d.lines,this.width),u=new Array(l.length),h=0;h<l.length;h++)u[h]=l[h].join("");return d.lines=u,d.graphemeLines=l,d},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var d in this._styleMap)this._textLines[d]&&(c[this._styleMap[d].line]=1);for(var d in this.styles)c[d]||delete this.styles[d]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),a.Textbox.fromObject=function(c,d){var l=a.util.stylesFromArray(c.styles,c.text),u=Object.assign({},c,{styles:l});return a.Object._fromObject("Textbox",u,d,"text")}}(n),function(){var o=e.controlsUtils,a=o.scaleSkewCursorStyleHandler,c=o.scaleCursorStyleHandler,d=o.scalingEqually,l=o.scalingYOrSkewingX,u=o.scalingXOrSkewingY,h=o.scaleOrSkewActionName,g=e.Object.prototype.controls;if(g.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:a,actionHandler:u,getActionName:h}),g.mr=new e.Control({x:.5,y:0,cursorStyleHandler:a,actionHandler:u,getActionName:h}),g.mb=new e.Control({x:0,y:.5,cursorStyleHandler:a,actionHandler:l,getActionName:h}),g.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:a,actionHandler:l,getActionName:h}),g.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:d}),g.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:d}),g.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:d}),g.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:d}),g.mtr=new e.Control({x:0,y:-.5,actionHandler:o.rotationWithSnapping,cursorStyleHandler:o.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=g.mtr,m.tr=g.tr,m.br=g.br,m.tl=g.tl,m.bl=g.bl,m.mt=g.mt,m.mb=g.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:a,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:a,actionName:"resizing"})}}()})(Zf);class QK{constructor(e,t={},i,r){Be(this,"repeatTarget");Be(this,"group");Be(this,"rowGap",20);Be(this,"columnGap",20);Be(this,"rowNumber",5);Be(this,"columnNumber",5);Be(this,"elementScale",1);Be(this,"updateCanvas");Be(this,"pasteElement");this.repeatTarget=e,this.updateCanvas=i,this.pasteElement=r,Object.keys(t).forEach(s=>{this[s]=t[s]})}async initGroup(){const e=[];for(let t=0;t<this.rowNumber;t++)for(let i=0;i<this.columnNumber;i++)e.push(await this.pasteElement(this.repeatTarget,{x:t*this.rowGap,y:i*this.columnGap}));this.group=new Zf.fabric.Group(e,{subTargetCheck:!0}),this.group.on("mousedown",t=>{console.log(t),console.log(t.subTargets)})}}async function Zu(n){return new Promise((e,t)=>{Zf.fabric.Image.fromURL(n,i=>{try{i.set({originX:"left",originY:"top"}),e(i)}catch(r){t(r)}})})}async function eq(n){return new Promise((e,t)=>{try{n.clone(i=>{e(i)})}catch(i){t(i)}})}class tq{constructor({el:e,images:t,updateCanvas:i}){Be(this,"id");Be(this,"meshId");Be(this,"textureId");Be(this,"canvasDom",document.createElement("canvas"));Be(this,"fabricCanvas");Be(this,"baseImages");Be(this,"elements",[]);Be(this,"widgets",[]);Be(this,"updateCanvas");(typeof e=="string"?document.getElementById(e):e).append(this.canvasDom),this.fabricCanvas=new Zf.fabric.Canvas(this.canvasDom),this.fabricCanvas.on("mouse:up",r=>{console.log("mouse:up",r),i()}),this.baseImages=t,this.updateCanvas=i}async _paste(e,t){const i=await eq(e);return i.set({left:i.left+t.x,top:i.top+t.y,evented:!0}),i.type==="activeSelection"&&(i.canvas=this.fabricCanvas,i.setCoords()),i}async paste(e,t={x:20,y:20}){const i=await this._paste(e,t);return this.fabricCanvas.setActiveObject(i),i.type==="activeSelection"?i.forEachObject(r=>{this.fabricCanvas.add(r)}):this.fabricCanvas.add(i),this.updateCanvas(),i}copy(e=this.fabricCanvas.getActiveObject()){e.clone(t=>{this.paste(t)})}async initCanvasImages(){const{overlayImageSrc:e,backgroundColor:t,backgroundImageSrc:i}=this.baseImages;if(e){const r=await Zu(e);this.fabricCanvas.setWidth(r.width,{backstoreOnly:!0}),this.fabricCanvas.setHeight(r.height,{backstoreOnly:!0}),this.fabricCanvas.setOverlayImage(r,this.fabricCanvas.renderAll.bind(this.fabricCanvas))}if(i){const r=await Zu(i);this.fabricCanvas.setBackgroundImage(r,this.fabricCanvas.renderAll.bind(this.fabricCanvas))}t&&this.fabricCanvas.setBackgroundColor(t,this.fabricCanvas.renderAll.bind(this.fabricCanvas))}async addImage(e){const t=await Zu(e);this.elements.push(t),t.on("moving",i=>{this.updateCanvas()}),t.on("scaling",i=>{this.updateCanvas()}),t.on("rotating",i=>{this.updateCanvas()}),this.fabricCanvas.add(t),setTimeout(()=>{this.updateCanvas()},100)}async createRepeatGroupFromElement(e=this.fabricCanvas.getActiveObject(),t){const i=new QK(e,t,this.updateCanvas.bind(this),this._paste.bind(this));await i.initGroup(),this.fabricCanvas.add(i.group),this.fabricCanvas.remove(e),this.updateCanvas()}async setBackgroundImage(e){const t=await Zu(e);this.fabricCanvas.setBackgroundImage(t,this.fabricCanvas.renderAll.bind(this.fabricCanvas))}setBackgroundColor(e){this.fabricCanvas.setBackgroundColor(e,this.fabricCanvas.renderAll.bind(this.fabricCanvas)),this.updateCanvas()}}class nq{constructor({textureImages:e,emit:t,canvasEl:i}){Be(this,"id");Be(this,"meshId");Be(this,"materialIndexs",[]);Be(this,"canvasEl");Be(this,"textureImages");Be(this,"texture");Be(this,"canvasInit",!1);Be(this,"emit");Be(this,"canvasOperator");Be(this,"update",()=>{this.texture.needsUpdate=!0,console.log("",this.texture),setTimeout(()=>{this.emit(qf.RENDER)},0)});this.textureImages=e,this.emit=t,this.canvasEl=i}async initCanvas(){return new Promise((e,t)=>{this.canvasOperator.initCanvasImages().then(()=>{this.canvasInit=!0,e(!0)}).catch(i=>{t(i)})})}async getTexture(){return this.texture||(this.canvasOperator=new tq({el:this.canvasEl,images:this.textureImages,updateCanvas:this.update}),this.texture=new RY(this.canvasOperator.fabricCanvas.getElement()),await this.initCanvas()),this.texture}getFabricCanvas(){return this.canvasOperator.fabricCanvas}getCanvasOperator(){return this.canvasOperator}bindMesh(e){this.meshId=e}bindMaterial(e){this.materialIndexs.push(e)}}class iq{constructor(e,t){Be(this,"state");Be(this,"emit");Be(this,"format");Be(this,"loader");Be(this,"loadHandle");this.state=e,this.emit=t}init(){switch(this.format){case"obj":this.loader=new KK;break;case"gltf":this.loader=new dK;const e=new hK;e.setDecoderPath("node_modules/three/examples/jsm/libs/draco/"),e.preload(),this.loader.setDRACOLoader(e);break}return this}async load(e,t,i){const{fileSrc:r,textureImageArrays:s,scale:f,rotation:o,position:a}=e,c=await this.loader.loadAsync(r);let d;switch(this.format){case"gltf":d=c.scene;break;case"obj":d=c;break}const{meshes:l,meshTextures:u}=this.groupHandle({group:d,textureImageArrays:s,canvasElArrays:i});return l.forEach(async h=>{await h.setMeshTextures(),console.log(h.mesh),f&&h.mesh.scale.set(...f),a&&h.mesh.position.set(...a),o&&h.mesh.rotation.set(...o),t.add(h.mesh),this.emit(qf.RENDER)}),this.loadHandle(c),{meshes:l,meshTextures:u}}groupHandle({group:e,textureImageArrays:t,canvasElArrays:i}){const r=[],s=[];return e.children.forEach((f,o)=>{const a=t[o],c=i[o],d=a.map((l,u)=>new nq({textureImages:l,emit:this.emit,canvasEl:c[u]}));s.push(...d),r.push(new qK({mesh:f,textures:d,emit:this.emit}))}),{meshes:r,meshTextures:s}}}const s2={sceneConfig:{},lightConfig:{},cameraConfig:{},numberOfMesh:0,currentMesh:void 0},rq={meshTextures:[],currentOperator:void 0,currentElements:[]},bh={editor:s2,common:rq},a2=fe.createContext({store:bh,dispatch:n=>{},actions:{}}),Jc=()=>fe.useContext(a2);function sq(n,e){const{key:t,value:i,module:r}=e;return{...n,[r]:{...n[r],[t]:i}}}function aq({children:n}){const[e,t]=fe.useReducer(sq,bh),i={};Object.keys(bh).forEach(s=>{const f=bh[s],o=Object.fromEntries(Object.keys(f).map(a=>[`set${a.charAt(0).toUpperCase()+a.slice(1)}`,c=>{t({key:a,value:c,module:s})}]));i[s]=o});const r={store:e,dispatch:t,actions:i};return be.jsx(a2.Provider,{value:r,children:n})}function oq(){const{store:n,actions:e}=Jc(),{currentOperator:t,currentElements:i}=n.common,{setCurrentElements:r}=e.common,s=[{src:"vite.svg"},{src:"logo.png"},{src:"react.svg"},{src:"logo/Cleveland_Cavaliers.png"}];async function f(o){await(t==null?void 0:t.addImage(o)),r(t==null?void 0:t.elements)}return be.jsx("div",{className:"design-panel-image",children:s.map((o,a)=>be.jsx("img",{src:o.src,width:100,onClick:c=>f(o.src)},"img__"+a))})}function lq(){const n=[{icon:be.jsx(kz,{}),title:"",key:"style",panel:be.jsx(be.Fragment,{})},{icon:be.jsx(nj,{}),title:"",key:"image",panel:be.jsx(oq,{})},{icon:be.jsx(Ej,{}),title:"",key:"text",panel:be.jsx(be.Fragment,{})}];return be.jsx(be.Fragment,{children:be.jsx(a1,{keepDOM:!0,defaultActiveKey:["image"],children:n.map(e=>be.jsx(a1.Panel,{header:be.jsxs("span",{className:"collapse-item-header",children:[e.icon,e.title]}),itemKey:e.key,children:be.jsx(be.Fragment,{children:e.panel})},e.key))})})}function cq({className:n}){return fe.useState({count:1}),be.jsxs(TT,{className:`side-bar ${n}`,defaultActiveKey:"2",children:[be.jsx(_c,{tab:be.jsxs("div",{className:"tab-card",children:[be.jsx(Sj,{}),""]}),itemKey:"1",children:be.jsx(Vv,{title:"",description:""})}),be.jsx(_c,{tab:be.jsxs("div",{className:"tab-card",children:[be.jsx(Rz,{}),""]}),itemKey:"2",children:be.jsx(lq,{})})]})}const uq="index-module_imageInfoItem_1b148",o2={imageInfoItem:uq};function hq(){const{store:n}=Jc(),{currentElements:e,currentOperator:t}=n.common;function i(){return e==null?void 0:e.filter(s=>s.type==="image").map(s=>({src:s.getSrc(),width:s.width,height:s.height,target:s}))}function r(s){t==null||t.createRepeatGroupFromElement(s,{rowGap:40,columnGap:40,rowNumber:20,columnNumber:10})}return be.jsx("div",{className:o2.imageTool,children:(e==null?void 0:e.length)>0?i().map(({target:s,...f},o)=>be.jsx(fq,{...f,onClick:()=>{t.fabricCanvas.absolutePan({x:0,y:0}),t.fabricCanvas.setActiveObject(s)},onRepeatClick:()=>{r(s)}},`ImageInfoItem__${o}`)):be.jsx(Vv,{title:"",description:""})})}function fq({src:n,width:e,height:t,onClick:i,onRepeatClick:r}){return be.jsxs("div",{className:o2.imageInfoItem,onClick:i,children:[be.jsxs("div",{children:[be.jsx("img",{src:n,alt:"img",width:"32"}),be.jsx(Gc,{size:"small",color:"blue",type:"solid",shape:"circle",children:""}),`${e}px * ${t}px`]}),be.jsxs("div",{children:[be.jsx($i,{content:"",children:be.jsx(hj,{})}),be.jsx($i,{content:"",children:be.jsx(fz,{onClick:r})}),be.jsx($i,{content:"",children:be.jsx(Uz,{})}),be.jsx(vj,{})]})]})}const dq="index-module_paintTool_5b90c",pq={paintTool:dq};function gq(){return be.jsxs("div",{className:pq.paintTool,children:[be.jsx("img",{src:"pan/pan1.svg",width:30,style:{left:"20px"}}),be.jsx("img",{src:"pan/pan2.svg",width:50,style:{left:"60px"}}),be.jsx("img",{src:"pan/pan3.svg",width:50,style:{left:"120px"}})]})}const mq={};var ai={},Qc={},vq=YC,yq=qC;function _q(n,e){return n&&vq(n,yq(e))}var d0=_q;Object.defineProperty(Qc,"__esModule",{value:!0});Qc.flattenNames=void 0;var xq=or,bq=Jf(xq),wq=d0,Sq=Jf(wq),Cq=xv,Tq=Jf(Cq),Eq=d9,Mq=Jf(Eq);function Jf(n){return n&&n.__esModule?n:{default:n}}var Aq=Qc.flattenNames=function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return(0,Mq.default)(e,function(i){Array.isArray(i)?n(i).map(function(r){return t.push(r)}):(0,Tq.default)(i)?(0,Sq.default)(i,function(r,s){r===!0&&t.push(s),t.push(s+"-"+r)}):(0,bq.default)(i)&&t.push(i)}),t};Qc.default=Aq;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.mergeClasses=void 0;var Oq=d0,Pq=l2(Oq),Lq=Wg,Rq=l2(Lq),Dq=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n};function l2(n){return n&&n.__esModule?n:{default:n}}var Iq=eu.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=e.default&&(0,Rq.default)(e.default)||{};return t.map(function(r){var s=e[r];return s&&(0,Pq.default)(s,function(f,o){i[o]||(i[o]={}),i[o]=Dq({},i[o],s[o])}),r}),i};eu.default=Iq;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.autoprefix=void 0;var kq=d0,sb=Nq(kq),Fq=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n};function Nq(n){return n&&n.__esModule?n:{default:n}}var Bq={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var i=t[e];return i||{extend:e}}},zq=tu.autoprefix=function(e){var t={};return(0,sb.default)(e,function(i,r){var s={};(0,sb.default)(i,function(f,o){var a=Bq[o];a?s=Fq({},s,a(f)):s[o]=f}),t[r]=s}),t};tu.default=zq;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.hover=void 0;var jq=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Uq=fe,Ip=$q(Uq);function $q(n){return n&&n.__esModule?n:{default:n}}function Hq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ab(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Vq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Gq=nu.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){Vq(r,i);function r(){var s,f,o,a;Hq(this,r);for(var c=arguments.length,d=Array(c),l=0;l<c;l++)d[l]=arguments[l];return a=(f=(o=ab(this,(s=r.__proto__||Object.getPrototypeOf(r)).call.apply(s,[this].concat(d))),o),o.state={hover:!1},o.handleMouseOver=function(){return o.setState({hover:!0})},o.handleMouseOut=function(){return o.setState({hover:!1})},o.render=function(){return Ip.default.createElement(t,{onMouseOver:o.handleMouseOver,onMouseOut:o.handleMouseOut},Ip.default.createElement(e,jq({},o.props,o.state)))},f),ab(o,a)}return r}(Ip.default.Component)};nu.default=Gq;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.active=void 0;var Wq=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xq=fe,kp=Yq(Xq);function Yq(n){return n&&n.__esModule?n:{default:n}}function Kq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ob(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function qq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Zq=iu.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){qq(r,i);function r(){var s,f,o,a;Kq(this,r);for(var c=arguments.length,d=Array(c),l=0;l<c;l++)d[l]=arguments[l];return a=(f=(o=ob(this,(s=r.__proto__||Object.getPrototypeOf(r)).call.apply(s,[this].concat(d))),o),o.state={active:!1},o.handleMouseDown=function(){return o.setState({active:!0})},o.handleMouseUp=function(){return o.setState({active:!1})},o.render=function(){return kp.default.createElement(t,{onMouseDown:o.handleMouseDown,onMouseUp:o.handleMouseUp},kp.default.createElement(e,Wq({},o.props,o.state)))},f),ob(o,a)}return r}(kp.default.Component)};iu.default=Zq;var p0={};Object.defineProperty(p0,"__esModule",{value:!0});var Jq=function(e,t){var i={},r=function(f){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[f]=o};return e===0&&r("first-child"),e===t-1&&r("last-child"),(e===0||e%2===0)&&r("even"),Math.abs(e%2)===1&&r("odd"),r("nth-child",e),i};p0.default=Jq;Object.defineProperty(ai,"__esModule",{value:!0});ai.ReactCSS=ai.loop=ai.handleActive=g0=ai.handleHover=ai.hover=void 0;var Qq=Qc,eZ=Ko(Qq),tZ=eu,nZ=Ko(tZ),iZ=tu,rZ=Ko(iZ),sZ=nu,c2=Ko(sZ),aZ=iu,oZ=Ko(aZ),lZ=p0,cZ=Ko(lZ);function Ko(n){return n&&n.__esModule?n:{default:n}}ai.hover=c2.default;var g0=ai.handleHover=c2.default;ai.handleActive=oZ.default;ai.loop=cZ.default;var uZ=ai.ReactCSS=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var s=(0,eZ.default)(i),f=(0,nZ.default)(e,s);return(0,rZ.default)(f)},je=ai.default=uZ,hZ=function(e,t,i,r,s){var f=s.clientWidth,o=s.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,d=a-(s.getBoundingClientRect().left+window.pageXOffset),l=c-(s.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var u=void 0;if(l<0?u=0:l>o?u=1:u=Math.round(l*100/o)/100,t.a!==u)return{h:t.h,s:t.s,l:t.l,a:u,source:"rgb"}}else{var h=void 0;if(d<0?h=0:d>f?h=1:h=Math.round(d*100/f)/100,r!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}return null},Fp={},fZ=function(e,t,i,r){if(typeof document>"u"&&!r)return null;var s=r?new r:document.createElement("canvas");s.width=i*2,s.height=i*2;var f=s.getContext("2d");return f?(f.fillStyle=e,f.fillRect(0,0,s.width,s.height),f.fillStyle=t,f.fillRect(0,0,i,i),f.translate(i,i),f.fillRect(0,0,i,i),s.toDataURL()):null},dZ=function(e,t,i,r){var s=e+"-"+t+"-"+i+(r?"-server":"");if(Fp[s])return Fp[s];var f=fZ(e,t,i,r);return Fp[s]=f,f},lb=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},qo=function(e){var t=e.white,i=e.grey,r=e.size,s=e.renderers,f=e.borderRadius,o=e.boxShadow,a=e.children,c=je({default:{grid:{borderRadius:f,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+dZ(t,i,r,s.canvas)+") center left"}}});return fe.isValidElement(a)?E.cloneElement(a,lb({},a.props,{style:lb({},a.props.style,c.grid)})):E.createElement("div",{style:c.grid})};qo.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var pZ=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gZ=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function mZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cb(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function vZ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var m0=function(n){vZ(e,n);function e(){var t,i,r,s;mZ(this,e);for(var f=arguments.length,o=Array(f),a=0;a<f;a++)o[a]=arguments[a];return s=(i=(r=cb(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),r),r.handleChange=function(c){var d=hZ(c,r.props.hsl,r.props.direction,r.props.a,r.container);d&&typeof r.props.onChange=="function"&&r.props.onChange(d,c)},r.handleMouseDown=function(c){r.handleChange(c),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},i),cb(r,s)}return gZ(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var i=this,r=this.props.rgb,s=je({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:r.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)"},pointer:{left:0,top:r.a*100+"%"}},overwrite:pZ({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return E.createElement("div",{style:s.alpha},E.createElement("div",{style:s.checkboard},E.createElement(qo,{renderers:this.props.renderers})),E.createElement("div",{style:s.gradient}),E.createElement("div",{style:s.container,ref:function(o){return i.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},E.createElement("div",{style:s.pointer},this.props.pointer?E.createElement(this.props.pointer,this.props):E.createElement("div",{style:s.slider}))))}}]),e}(fe.PureComponent||fe.Component),yZ=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _Z(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bZ(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function wZ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var SZ=1,u2=38,CZ=40,TZ=[u2,CZ],EZ=function(e){return TZ.indexOf(e)>-1},MZ=function(e){return Number(String(e).replace(/%/g,""))},AZ=1,et=function(n){wZ(e,n);function e(t){xZ(this,e);var i=bZ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.handleBlur=function(){i.state.blurValue&&i.setState({value:i.state.blurValue,blurValue:null})},i.handleChange=function(r){i.setUpdatedValue(r.target.value,r)},i.handleKeyDown=function(r){var s=MZ(r.target.value);if(!isNaN(s)&&EZ(r.keyCode)){var f=i.getArrowOffset(),o=r.keyCode===u2?s+f:s-f;i.setUpdatedValue(o,r)}},i.handleDrag=function(r){if(i.props.dragLabel){var s=Math.round(i.props.value+r.movementX);s>=0&&s<=i.props.dragMax&&i.props.onChange&&i.props.onChange(i.getValueObjectWithLabel(s),r)}},i.handleMouseDown=function(r){i.props.dragLabel&&(r.preventDefault(),i.handleDrag(r),window.addEventListener("mousemove",i.handleDrag),window.addEventListener("mouseup",i.handleMouseUp))},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleDrag),window.removeEventListener("mouseup",i.handleMouseUp)},i.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},i.inputId="rc-editable-input-"+AZ++,i}return yZ(e,[{key:"componentDidUpdate",value:function(i,r){this.props.value!==this.state.value&&(i.value!==this.props.value||r.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(i){return _Z({},this.props.label,i)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||SZ}},{key:"setUpdatedValue",value:function(i,r){var s=this.props.label?this.getValueObjectWithLabel(i):i;this.props.onChange&&this.props.onChange(s,r),this.setState({value:i})}},{key:"render",value:function(){var i=this,r=je({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return E.createElement("div",{style:r.wrap},E.createElement("input",{id:this.inputId,style:r.input,ref:function(f){return i.input=f},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?E.createElement("label",{htmlFor:this.inputId,style:r.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(fe.PureComponent||fe.Component),OZ=function(e,t,i,r){var s=r.clientWidth,f=r.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,a=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=o-(r.getBoundingClientRect().left+window.pageXOffset),d=a-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var l=void 0;if(d<0)l=359;else if(d>f)l=0;else{var u=-(d*100/f)+100;l=360*u/100}if(i.h!==l)return{h:l,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var h=void 0;if(c<0)h=0;else if(c>s)h=359;else{var g=c*100/s;h=360*g/100}if(i.h!==h)return{h,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null},PZ=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function LZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ub(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function RZ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Zo=function(n){RZ(e,n);function e(){var t,i,r,s;LZ(this,e);for(var f=arguments.length,o=Array(f),a=0;a<f;a++)o[a]=arguments[a];return s=(i=(r=ub(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),r),r.handleChange=function(c){var d=OZ(c,r.props.direction,r.props.hsl,r.container);d&&typeof r.props.onChange=="function"&&r.props.onChange(d,c)},r.handleMouseDown=function(c){r.handleChange(c),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},i),ub(r,s)}return PZ(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,r=this.props.direction,s=r===void 0?"horizontal":r,f=je({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return E.createElement("div",{style:f.hue},E.createElement("div",{className:"hue-"+s,style:f.container,ref:function(a){return i.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},E.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),E.createElement("div",{style:f.pointer},this.props.pointer?E.createElement(this.props.pointer,this.props):E.createElement("div",{style:f.slider}))))}}]),e}(fe.PureComponent||fe.Component);function DZ(){this.__data__=[],this.size=0}function ru(n,e){return n===e||n!==n&&e!==e}function Qf(n,e){for(var t=n.length;t--;)if(ru(n[t][0],e))return t;return-1}var IZ=Array.prototype,kZ=IZ.splice;function FZ(n){var e=this.__data__,t=Qf(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():kZ.call(e,t,1),--this.size,!0}function NZ(n){var e=this.__data__,t=Qf(e,n);return t<0?void 0:e[t][1]}function BZ(n){return Qf(this.__data__,n)>-1}function zZ(n,e){var t=this.__data__,i=Qf(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function mr(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}mr.prototype.clear=DZ;mr.prototype.delete=FZ;mr.prototype.get=NZ;mr.prototype.has=BZ;mr.prototype.set=zZ;function jZ(){this.__data__=new mr,this.size=0}function UZ(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function $Z(n){return this.__data__.get(n)}function HZ(n){return this.__data__.has(n)}var VZ=typeof global=="object"&&global&&global.Object===Object&&global;const h2=VZ;var GZ=typeof self=="object"&&self&&self.Object===Object&&self,WZ=h2||GZ||Function("return this")();const Pi=WZ;var XZ=Pi.Symbol;const Kr=XZ;var f2=Object.prototype,YZ=f2.hasOwnProperty,KZ=f2.toString,Tl=Kr?Kr.toStringTag:void 0;function qZ(n){var e=YZ.call(n,Tl),t=n[Tl];try{n[Tl]=void 0;var i=!0}catch{}var r=KZ.call(n);return i&&(e?n[Tl]=t:delete n[Tl]),r}var ZZ=Object.prototype,JZ=ZZ.toString;function QZ(n){return JZ.call(n)}var eJ="[object Null]",tJ="[object Undefined]",hb=Kr?Kr.toStringTag:void 0;function Zs(n){return n==null?n===void 0?tJ:eJ:hb&&hb in Object(n)?qZ(n):QZ(n)}function fi(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var nJ="[object AsyncFunction]",iJ="[object Function]",rJ="[object GeneratorFunction]",sJ="[object Proxy]";function v0(n){if(!fi(n))return!1;var e=Zs(n);return e==iJ||e==rJ||e==nJ||e==sJ}var aJ=Pi["__core-js_shared__"];const Np=aJ;var fb=function(){var n=/[^.]+$/.exec(Np&&Np.keys&&Np.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function oJ(n){return!!fb&&fb in n}var lJ=Function.prototype,cJ=lJ.toString;function Js(n){if(n!=null){try{return cJ.call(n)}catch{}try{return n+""}catch{}}return""}var uJ=/[\\^$.*+?()[\]{}|]/g,hJ=/^\[object .+?Constructor\]$/,fJ=Function.prototype,dJ=Object.prototype,pJ=fJ.toString,gJ=dJ.hasOwnProperty,mJ=RegExp("^"+pJ.call(gJ).replace(uJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vJ(n){if(!fi(n)||oJ(n))return!1;var e=v0(n)?mJ:hJ;return e.test(Js(n))}function yJ(n,e){return n==null?void 0:n[e]}function Qs(n,e){var t=yJ(n,e);return vJ(t)?t:void 0}var _J=Qs(Pi,"Map");const Ac=_J;var xJ=Qs(Object,"create");const Oc=xJ;function bJ(){this.__data__=Oc?Oc(null):{},this.size=0}function wJ(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var SJ="__lodash_hash_undefined__",CJ=Object.prototype,TJ=CJ.hasOwnProperty;function EJ(n){var e=this.__data__;if(Oc){var t=e[n];return t===SJ?void 0:t}return TJ.call(e,n)?e[n]:void 0}var MJ=Object.prototype,AJ=MJ.hasOwnProperty;function OJ(n){var e=this.__data__;return Oc?e[n]!==void 0:AJ.call(e,n)}var PJ="__lodash_hash_undefined__";function LJ(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Oc&&e===void 0?PJ:e,this}function Hs(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Hs.prototype.clear=bJ;Hs.prototype.delete=wJ;Hs.prototype.get=EJ;Hs.prototype.has=OJ;Hs.prototype.set=LJ;function RJ(){this.size=0,this.__data__={hash:new Hs,map:new(Ac||mr),string:new Hs}}function DJ(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function ed(n,e){var t=n.__data__;return DJ(e)?t[typeof e=="string"?"string":"hash"]:t.map}function IJ(n){var e=ed(this,n).delete(n);return this.size-=e?1:0,e}function kJ(n){return ed(this,n).get(n)}function FJ(n){return ed(this,n).has(n)}function NJ(n,e){var t=ed(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function vr(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}vr.prototype.clear=RJ;vr.prototype.delete=IJ;vr.prototype.get=kJ;vr.prototype.has=FJ;vr.prototype.set=NJ;var BJ=200;function zJ(n,e){var t=this.__data__;if(t instanceof mr){var i=t.__data__;if(!Ac||i.length<BJ-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new vr(i)}return t.set(n,e),this.size=t.size,this}function Hi(n){var e=this.__data__=new mr(n);this.size=e.size}Hi.prototype.clear=jZ;Hi.prototype.delete=UZ;Hi.prototype.get=$Z;Hi.prototype.has=HZ;Hi.prototype.set=zJ;var jJ=function(){try{var n=Qs(Object,"defineProperty");return n({},"",{}),n}catch{}}();const ef=jJ;function y0(n,e,t){e=="__proto__"&&ef?ef(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function om(n,e,t){(t!==void 0&&!ru(n[e],t)||t===void 0&&!(e in n))&&y0(n,e,t)}function UJ(n){return function(e,t,i){for(var r=-1,s=Object(e),f=i(e),o=f.length;o--;){var a=f[n?o:++r];if(t(s[a],a,s)===!1)break}return e}}var $J=UJ();const d2=$J;var p2=typeof $n=="object"&&$n&&!$n.nodeType&&$n,db=p2&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,HJ=db&&db.exports===p2,pb=HJ?Pi.Buffer:void 0,gb=pb?pb.allocUnsafe:void 0;function VJ(n,e){if(e)return n.slice();var t=n.length,i=gb?gb(t):new n.constructor(t);return n.copy(i),i}var GJ=Pi.Uint8Array;const tf=GJ;function WJ(n){var e=new n.constructor(n.byteLength);return new tf(e).set(new tf(n)),e}function XJ(n,e){var t=e?WJ(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function YJ(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var mb=Object.create,KJ=function(){function n(){}return function(e){if(!fi(e))return{};if(mb)return mb(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const qJ=KJ;function g2(n,e){return function(t){return n(e(t))}}var ZJ=g2(Object.getPrototypeOf,Object);const m2=ZJ;var JJ=Object.prototype;function _0(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||JJ;return n===t}function QJ(n){return typeof n.constructor=="function"&&!_0(n)?qJ(m2(n)):{}}function qr(n){return n!=null&&typeof n=="object"}var eQ="[object Arguments]";function vb(n){return qr(n)&&Zs(n)==eQ}var v2=Object.prototype,tQ=v2.hasOwnProperty,nQ=v2.propertyIsEnumerable,iQ=vb(function(){return arguments}())?vb:function(n){return qr(n)&&tQ.call(n,"callee")&&!nQ.call(n,"callee")};const nf=iQ;var rQ=Array.isArray;const Yn=rQ;var sQ=9007199254740991;function x0(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=sQ}function Jo(n){return n!=null&&x0(n.length)&&!v0(n)}function aQ(n){return qr(n)&&Jo(n)}function oQ(){return!1}var y2=typeof $n=="object"&&$n&&!$n.nodeType&&$n,yb=y2&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,lQ=yb&&yb.exports===y2,_b=lQ?Pi.Buffer:void 0,cQ=_b?_b.isBuffer:void 0,uQ=cQ||oQ;const rf=uQ;var hQ="[object Object]",fQ=Function.prototype,dQ=Object.prototype,_2=fQ.toString,pQ=dQ.hasOwnProperty,gQ=_2.call(Object);function mQ(n){if(!qr(n)||Zs(n)!=hQ)return!1;var e=m2(n);if(e===null)return!0;var t=pQ.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&_2.call(t)==gQ}var vQ="[object Arguments]",yQ="[object Array]",_Q="[object Boolean]",xQ="[object Date]",bQ="[object Error]",wQ="[object Function]",SQ="[object Map]",CQ="[object Number]",TQ="[object Object]",EQ="[object RegExp]",MQ="[object Set]",AQ="[object String]",OQ="[object WeakMap]",PQ="[object ArrayBuffer]",LQ="[object DataView]",RQ="[object Float32Array]",DQ="[object Float64Array]",IQ="[object Int8Array]",kQ="[object Int16Array]",FQ="[object Int32Array]",NQ="[object Uint8Array]",BQ="[object Uint8ClampedArray]",zQ="[object Uint16Array]",jQ="[object Uint32Array]",wt={};wt[RQ]=wt[DQ]=wt[IQ]=wt[kQ]=wt[FQ]=wt[NQ]=wt[BQ]=wt[zQ]=wt[jQ]=!0;wt[vQ]=wt[yQ]=wt[PQ]=wt[_Q]=wt[LQ]=wt[xQ]=wt[bQ]=wt[wQ]=wt[SQ]=wt[CQ]=wt[TQ]=wt[EQ]=wt[MQ]=wt[AQ]=wt[OQ]=!1;function UQ(n){return qr(n)&&x0(n.length)&&!!wt[Zs(n)]}function $Q(n){return function(e){return n(e)}}var x2=typeof $n=="object"&&$n&&!$n.nodeType&&$n,Jl=x2&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,HQ=Jl&&Jl.exports===x2,Bp=HQ&&h2.process,VQ=function(){try{var n=Jl&&Jl.require&&Jl.require("util").types;return n||Bp&&Bp.binding&&Bp.binding("util")}catch{}}();const xb=VQ;var bb=xb&&xb.isTypedArray,GQ=bb?$Q(bb):UQ;const b0=GQ;function lm(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var WQ=Object.prototype,XQ=WQ.hasOwnProperty;function YQ(n,e,t){var i=n[e];(!(XQ.call(n,e)&&ru(i,t))||t===void 0&&!(e in n))&&y0(n,e,t)}function KQ(n,e,t,i){var r=!t;t||(t={});for(var s=-1,f=e.length;++s<f;){var o=e[s],a=i?i(t[o],n[o],o,t,n):void 0;a===void 0&&(a=n[o]),r?y0(t,o,a):YQ(t,o,a)}return t}function qQ(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var ZQ=9007199254740991,JQ=/^(?:0|[1-9]\d*)$/;function w0(n,e){var t=typeof n;return e=e??ZQ,!!e&&(t=="number"||t!="symbol"&&JQ.test(n))&&n>-1&&n%1==0&&n<e}var QQ=Object.prototype,eee=QQ.hasOwnProperty;function b2(n,e){var t=Yn(n),i=!t&&nf(n),r=!t&&!i&&rf(n),s=!t&&!i&&!r&&b0(n),f=t||i||r||s,o=f?qQ(n.length,String):[],a=o.length;for(var c in n)(e||eee.call(n,c))&&!(f&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||w0(c,a)))&&o.push(c);return o}function tee(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var nee=Object.prototype,iee=nee.hasOwnProperty;function ree(n){if(!fi(n))return tee(n);var e=_0(n),t=[];for(var i in n)i=="constructor"&&(e||!iee.call(n,i))||t.push(i);return t}function w2(n){return Jo(n)?b2(n,!0):ree(n)}function see(n){return KQ(n,w2(n))}function aee(n,e,t,i,r,s,f){var o=lm(n,t),a=lm(e,t),c=f.get(a);if(c){om(n,t,c);return}var d=s?s(o,a,t+"",n,e,f):void 0,l=d===void 0;if(l){var u=Yn(a),h=!u&&rf(a),g=!u&&!h&&b0(a);d=a,u||h||g?Yn(o)?d=o:aQ(o)?d=YJ(o):h?(l=!1,d=VJ(a,!0)):g?(l=!1,d=XJ(a,!0)):d=[]:mQ(a)||nf(a)?(d=o,nf(o)?d=see(o):(!fi(o)||v0(o))&&(d=QJ(a))):l=!1}l&&(f.set(a,d),r(d,a,i,s,f),f.delete(a)),om(n,t,d)}function S2(n,e,t,i,r){n!==e&&d2(e,function(s,f){if(r||(r=new Hi),fi(s))aee(n,e,f,t,S2,i,r);else{var o=i?i(lm(n,f),s,f+"",n,e,r):void 0;o===void 0&&(o=s),om(n,f,o)}},w2)}function td(n){return n}function oee(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var wb=Math.max;function lee(n,e,t){return e=wb(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=wb(i.length-e,0),f=Array(s);++r<s;)f[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=t(f),oee(n,this,o)}}function cee(n){return function(){return n}}var uee=ef?function(n,e){return ef(n,"toString",{configurable:!0,enumerable:!1,value:cee(e),writable:!0})}:td;const hee=uee;var fee=800,dee=16,pee=Date.now;function gee(n){var e=0,t=0;return function(){var i=pee(),r=dee-(i-t);if(t=i,r>0){if(++e>=fee)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var mee=gee(hee);const vee=mee;function yee(n,e){return vee(lee(n,e,td),n+"")}function _ee(n,e,t){if(!fi(t))return!1;var i=typeof e;return(i=="number"?Jo(t)&&w0(e,t.length):i=="string"&&e in t)?ru(t[e],n):!1}function xee(n){return yee(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,f=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,f&&_ee(t[0],t[1],f)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=t[i];o&&n(e,o,i,s)}return e})}var bee=xee(function(n,e,t){S2(n,e,t)});const On=bee;var su=function(e){var t=e.zDepth,i=e.radius,r=e.background,s=e.children,f=e.styles,o=f===void 0?{}:f,a=je(On({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:i,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},o),{"zDepth-1":t===1});return E.createElement("div",{style:a.wrap},E.createElement("div",{style:a.bg}),E.createElement("div",{style:a.content},s))};su.propTypes={background:C.string,zDepth:C.oneOf([0,1,2,3,4,5]),radius:C.number,styles:C.object};su.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var wee=function(){return Pi.Date.now()};const zp=wee;var See=/\s/;function Cee(n){for(var e=n.length;e--&&See.test(n.charAt(e)););return e}var Tee=/^\s+/;function Eee(n){return n&&n.slice(0,Cee(n)+1).replace(Tee,"")}var Mee="[object Symbol]";function nd(n){return typeof n=="symbol"||qr(n)&&Zs(n)==Mee}var Sb=0/0,Aee=/^[-+]0x[0-9a-f]+$/i,Oee=/^0b[01]+$/i,Pee=/^0o[0-7]+$/i,Lee=parseInt;function Cb(n){if(typeof n=="number")return n;if(nd(n))return Sb;if(fi(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=fi(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Eee(n);var t=Oee.test(n);return t||Pee.test(n)?Lee(n.slice(2),t?2:8):Aee.test(n)?Sb:+n}var Ree="Expected a function",Dee=Math.max,Iee=Math.min;function C2(n,e,t){var i,r,s,f,o,a,c=0,d=!1,l=!1,u=!0;if(typeof n!="function")throw new TypeError(Ree);e=Cb(e)||0,fi(t)&&(d=!!t.leading,l="maxWait"in t,s=l?Dee(Cb(t.maxWait)||0,e):s,u="trailing"in t?!!t.trailing:u);function h(w){var T=i,S=r;return i=r=void 0,c=w,f=n.apply(S,T),f}function g(w){return c=w,o=setTimeout(v,e),d?h(w):f}function m(w){var T=w-a,S=w-c,O=e-T;return l?Iee(O,s-S):O}function p(w){var T=w-a,S=w-c;return a===void 0||T>=e||T<0||l&&S>=s}function v(){var w=zp();if(p(w))return y(w);o=setTimeout(v,m(w))}function y(w){return o=void 0,u&&i?h(w):(i=r=void 0,f)}function _(){o!==void 0&&clearTimeout(o),c=0,i=a=r=o=void 0}function x(){return o===void 0?f:y(zp())}function b(){var w=zp(),T=p(w);if(i=arguments,r=this,a=w,T){if(o===void 0)return g(a);if(l)return clearTimeout(o),o=setTimeout(v,e),h(a)}return o===void 0&&(o=setTimeout(v,e)),f}return b.cancel=_,b.flush=x,b}var kee="Expected a function";function Fee(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(kee);return fi(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),C2(n,e,{leading:i,maxWait:e,trailing:r})}var Nee=function(e,t,i){var r=i.getBoundingClientRect(),s=r.width,f=r.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,a=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=o-(i.getBoundingClientRect().left+window.pageXOffset),d=a-(i.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>s&&(c=s),d<0?d=0:d>f&&(d=f);var l=c/s,u=1-d/f;return{h:t.h,s:l,v:u,a:t.a,source:"hsv"}},Bee=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function zee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jee(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Uee(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var id=function(n){Uee(e,n);function e(t){zee(this,e);var i=jee(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.handleChange=function(r){typeof i.props.onChange=="function"&&i.throttle(i.props.onChange,Nee(r,i.props.hsl,i.container),r)},i.handleMouseDown=function(r){i.handleChange(r);var s=i.getContainerRenderWindow();s.addEventListener("mousemove",i.handleChange),s.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.throttle=Fee(function(r,s,f){r(s,f)},50),i}return Bee(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var i=this.container,r=window;!r.document.contains(i)&&r.parent!==r;)r=r.parent;return r}},{key:"unbindEventListeners",value:function(){var i=this.getContainerRenderWindow();i.removeEventListener("mousemove",this.handleChange),i.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,r=this.props.style||{},s=r.color,f=r.white,o=r.black,a=r.pointer,c=r.circle,d=je({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:f,black:o,pointer:a,circle:c}},{custom:!!this.props.style});return E.createElement("div",{style:d.color,ref:function(u){return i.container=u},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},E.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),E.createElement("div",{style:d.white,className:"saturation-white"},E.createElement("div",{style:d.black,className:"saturation-black"}),E.createElement("div",{style:d.pointer},this.props.pointer?E.createElement(this.props.pointer,this.props):E.createElement("div",{style:d.circle}))))}}]),e}(fe.PureComponent||fe.Component);function $ee(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var Hee=g2(Object.keys,Object);const Vee=Hee;var Gee=Object.prototype,Wee=Gee.hasOwnProperty;function Xee(n){if(!_0(n))return Vee(n);var e=[];for(var t in Object(n))Wee.call(n,t)&&t!="constructor"&&e.push(t);return e}function S0(n){return Jo(n)?b2(n):Xee(n)}function Yee(n,e){return n&&d2(n,e,S0)}function Kee(n,e){return function(t,i){if(t==null)return t;if(!Jo(t))return n(t,i);for(var r=t.length,s=e?r:-1,f=Object(t);(e?s--:++s<r)&&i(f[s],s,f)!==!1;);return t}}var qee=Kee(Yee);const T2=qee;function Zee(n){return typeof n=="function"?n:td}function Jee(n,e){var t=Yn(n)?$ee:T2;return t(n,Zee(e))}function sf(n){return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(n)}var Qee=/^\s+/,ete=/\s+$/;function Fe(n,e){if(n=n||"",e=e||{},n instanceof Fe)return n;if(!(this instanceof Fe))return new Fe(n,e);var t=tte(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Fe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,i,r,s,f,o;return t=e.r/255,i=e.g/255,r=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),i<=.03928?f=i/12.92:f=Math.pow((i+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*f+.0722*o},setAlpha:function(e){return this._a=E2(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Eb(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Eb(this._r,this._g,this._b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+i+"%, "+r+"%)":"hsva("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=Tb(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Tb(this._r,this._g,this._b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+i+"%, "+r+"%)":"hsla("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return Mb(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return ste(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Tt(this._r,255)*100)+"%",g:Math.round(Tt(this._g,255)*100)+"%",b:Math.round(Tt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Tt(this._r,255)*100)+"%, "+Math.round(Tt(this._g,255)*100)+"%, "+Math.round(Tt(this._b,255)*100)+"%)":"rgba("+Math.round(Tt(this._r,255)*100)+"%, "+Math.round(Tt(this._g,255)*100)+"%, "+Math.round(Tt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:vte[Mb(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+Ab(this._r,this._g,this._b,this._a),i=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=Fe(e);i="#"+Ab(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,r=this._a<1&&this._a>=0,s=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Fe(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(cte,arguments)},brighten:function(){return this._applyModification(ute,arguments)},darken:function(){return this._applyModification(hte,arguments)},desaturate:function(){return this._applyModification(ate,arguments)},saturate:function(){return this._applyModification(ote,arguments)},greyscale:function(){return this._applyModification(lte,arguments)},spin:function(){return this._applyModification(fte,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(gte,arguments)},complement:function(){return this._applyCombination(dte,arguments)},monochromatic:function(){return this._applyCombination(mte,arguments)},splitcomplement:function(){return this._applyCombination(pte,arguments)},triad:function(){return this._applyCombination(Ob,[3])},tetrad:function(){return this._applyCombination(Ob,[4])}};Fe.fromRatio=function(n,e){if(sf(n)=="object"){var t={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?t[i]=n[i]:t[i]=kl(n[i]));n=t}return Fe(n,e)};function tte(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,f=!1,o=!1;return typeof n=="string"&&(n=bte(n)),sf(n)=="object"&&(tr(n.r)&&tr(n.g)&&tr(n.b)?(e=nte(n.r,n.g,n.b),f=!0,o=String(n.r).substr(-1)==="%"?"prgb":"rgb"):tr(n.h)&&tr(n.s)&&tr(n.v)?(i=kl(n.s),r=kl(n.v),e=rte(n.h,i,r),f=!0,o="hsv"):tr(n.h)&&tr(n.s)&&tr(n.l)&&(i=kl(n.s),s=kl(n.l),e=ite(n.h,i,s),f=!0,o="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=E2(t),{ok:f,format:n.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function nte(n,e,t){return{r:Tt(n,255)*255,g:Tt(e,255)*255,b:Tt(t,255)*255}}function Tb(n,e,t){n=Tt(n,255),e=Tt(e,255),t=Tt(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s,f,o=(i+r)/2;if(i==r)s=f=0;else{var a=i-r;switch(f=o>.5?a/(2-i-r):a/(i+r),i){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4;break}s/=6}return{h:s,s:f,l:o}}function ite(n,e,t){var i,r,s;n=Tt(n,360),e=Tt(e,100),t=Tt(t,100);function f(c,d,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?c+(d-c)*6*l:l<1/2?d:l<2/3?c+(d-c)*(2/3-l)*6:c}if(e===0)i=r=s=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=f(a,o,n+1/3),r=f(a,o,n),s=f(a,o,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function Eb(n,e,t){n=Tt(n,255),e=Tt(e,255),t=Tt(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s,f,o=i,a=i-r;if(f=i===0?0:a/i,i==r)s=0;else{switch(i){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4;break}s/=6}return{h:s,s:f,v:o}}function rte(n,e,t){n=Tt(n,360)*6,e=Tt(e,100),t=Tt(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),f=t*(1-r*e),o=t*(1-(1-r)*e),a=i%6,c=[t,f,s,s,o,t][a],d=[o,t,t,f,s,s][a],l=[s,s,o,t,t,f][a];return{r:c*255,g:d*255,b:l*255}}function Mb(n,e,t,i){var r=[wi(Math.round(n).toString(16)),wi(Math.round(e).toString(16)),wi(Math.round(t).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function ste(n,e,t,i,r){var s=[wi(Math.round(n).toString(16)),wi(Math.round(e).toString(16)),wi(Math.round(t).toString(16)),wi(M2(i))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function Ab(n,e,t,i){var r=[wi(M2(i)),wi(Math.round(n).toString(16)),wi(Math.round(e).toString(16)),wi(Math.round(t).toString(16))];return r.join("")}Fe.equals=function(n,e){return!n||!e?!1:Fe(n).toRgbString()==Fe(e).toRgbString()};Fe.random=function(){return Fe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function ate(n,e){e=e===0?0:e||10;var t=Fe(n).toHsl();return t.s-=e/100,t.s=rd(t.s),Fe(t)}function ote(n,e){e=e===0?0:e||10;var t=Fe(n).toHsl();return t.s+=e/100,t.s=rd(t.s),Fe(t)}function lte(n){return Fe(n).desaturate(100)}function cte(n,e){e=e===0?0:e||10;var t=Fe(n).toHsl();return t.l+=e/100,t.l=rd(t.l),Fe(t)}function ute(n,e){e=e===0?0:e||10;var t=Fe(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Fe(t)}function hte(n,e){e=e===0?0:e||10;var t=Fe(n).toHsl();return t.l-=e/100,t.l=rd(t.l),Fe(t)}function fte(n,e){var t=Fe(n).toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,Fe(t)}function dte(n){var e=Fe(n).toHsl();return e.h=(e.h+180)%360,Fe(e)}function Ob(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Fe(n).toHsl(),i=[Fe(n)],r=360/e,s=1;s<e;s++)i.push(Fe({h:(t.h+s*r)%360,s:t.s,l:t.l}));return i}function pte(n){var e=Fe(n).toHsl(),t=e.h;return[Fe(n),Fe({h:(t+72)%360,s:e.s,l:e.l}),Fe({h:(t+216)%360,s:e.s,l:e.l})]}function gte(n,e,t){e=e||6,t=t||30;var i=Fe(n).toHsl(),r=360/t,s=[Fe(n)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(Fe(i));return s}function mte(n,e){e=e||6;for(var t=Fe(n).toHsv(),i=t.h,r=t.s,s=t.v,f=[],o=1/e;e--;)f.push(Fe({h:i,s:r,v:s})),s=(s+o)%1;return f}Fe.mix=function(n,e,t){t=t===0?0:t||50;var i=Fe(n).toRgb(),r=Fe(e).toRgb(),s=t/100,f={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return Fe(f)};Fe.readability=function(n,e){var t=Fe(n),i=Fe(e);return(Math.max(t.getLuminance(),i.getLuminance())+.05)/(Math.min(t.getLuminance(),i.getLuminance())+.05)};Fe.isReadable=function(n,e,t){var i=Fe.readability(n,e),r,s;switch(s=!1,r=wte(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};Fe.mostReadable=function(n,e,t){var i=null,r=0,s,f,o,a;t=t||{},f=t.includeFallbackColors,o=t.level,a=t.size;for(var c=0;c<e.length;c++)s=Fe.readability(n,e[c]),s>r&&(r=s,i=Fe(e[c]));return Fe.isReadable(n,i,{level:o,size:a})||!f?i:(t.includeFallbackColors=!1,Fe.mostReadable(n,["#fff","#000"],t))};var cm=Fe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},vte=Fe.hexNames=yte(cm);function yte(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function E2(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Tt(n,e){_te(n)&&(n="100%");var t=xte(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function rd(n){return Math.min(1,Math.max(0,n))}function Fn(n){return parseInt(n,16)}function _te(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function xte(n){return typeof n=="string"&&n.indexOf("%")!=-1}function wi(n){return n.length==1?"0"+n:""+n}function kl(n){return n<=1&&(n=n*100+"%"),n}function M2(n){return Math.round(parseFloat(n)*255).toString(16)}function Pb(n){return Fn(n)/255}var yi=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function tr(n){return!!yi.CSS_UNIT.exec(n)}function bte(n){n=n.replace(Qee,"").replace(ete,"").toLowerCase();var e=!1;if(cm[n])n=cm[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=yi.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=yi.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=yi.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=yi.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=yi.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=yi.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=yi.hex8.exec(n))?{r:Fn(t[1]),g:Fn(t[2]),b:Fn(t[3]),a:Pb(t[4]),format:e?"name":"hex8"}:(t=yi.hex6.exec(n))?{r:Fn(t[1]),g:Fn(t[2]),b:Fn(t[3]),format:e?"name":"hex"}:(t=yi.hex4.exec(n))?{r:Fn(t[1]+""+t[1]),g:Fn(t[2]+""+t[2]),b:Fn(t[3]+""+t[3]),a:Pb(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=yi.hex3.exec(n))?{r:Fn(t[1]+""+t[1]),g:Fn(t[2]+""+t[2]),b:Fn(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function wte(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var Lb=function(e){var t=["r","g","b","a","h","s","l","v"],i=0,r=0;return Jee(t,function(s){if(e[s]&&(i+=1,isNaN(e[s])||(r+=1),s==="s"||s==="l")){var f=/^\d+%$/;f.test(e[s])&&(r+=1)}}),i===r?e:!1},Fl=function(e,t){var i=e.hex?Fe(e.hex):Fe(e),r=i.toHsl(),s=i.toHsv(),f=i.toRgb(),o=i.toHex();r.s===0&&(r.h=t||0,s.h=t||0);var a=o==="000000"&&f.a===0;return{hsl:r,hex:a?"transparent":"#"+o,rgb:f,hsv:s,oldHue:e.h||t||r.h,source:e.source}},ts=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&Fe(e).isValid()},C0=function(e){if(!e)return"#fff";var t=Fl(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var i=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return i>=128?"#000":"#fff"},jp=function(e,t){var i=e.replace("","");return Fe(t+" ("+i+")")._ok},El=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ste=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function Cte(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Tte(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Ete(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Pn=function(e){var t=function(i){Ete(r,i);function r(s){Cte(this,r);var f=Tte(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return f.handleChange=function(o,a){var c=Lb(o);if(c){var d=Fl(o,o.h||f.state.oldHue);f.setState(d),f.props.onChangeComplete&&f.debounce(f.props.onChangeComplete,d,a),f.props.onChange&&f.props.onChange(d,a)}},f.handleSwatchHover=function(o,a){var c=Lb(o);if(c){var d=Fl(o,o.h||f.state.oldHue);f.props.onSwatchHover&&f.props.onSwatchHover(d,a)}},f.state=El({},Fl(s.color,0)),f.debounce=C2(function(o,a,c){o(a,c)},100),f}return Ste(r,[{key:"render",value:function(){var f={};return this.props.onSwatchHover&&(f.onSwatchHover=this.handleSwatchHover),E.createElement(e,El({},this.props,this.state,{onChange:this.handleChange},f))}}],[{key:"getDerivedStateFromProps",value:function(f,o){return El({},Fl(f.color,o.oldHue))}}]),r}(fe.PureComponent||fe.Component);return t.propTypes=El({},e.propTypes),t.defaultProps=El({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},Mte=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ate=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function Ote(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Rb(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Pte(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Lte=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){Pte(r,i);function r(){var s,f,o,a;Ote(this,r);for(var c=arguments.length,d=Array(c),l=0;l<c;l++)d[l]=arguments[l];return a=(f=(o=Rb(this,(s=r.__proto__||Object.getPrototypeOf(r)).call.apply(s,[this].concat(d))),o),o.state={focus:!1},o.handleFocus=function(){return o.setState({focus:!0})},o.handleBlur=function(){return o.setState({focus:!1})},f),Rb(o,a)}return Ate(r,[{key:"render",value:function(){return E.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},E.createElement(e,Mte({},this.props,this.state)))}}]),r}(E.Component)},Db=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rte=13,Dte=function(e){var t=e.color,i=e.style,r=e.onClick,s=r===void 0?function(){}:r,f=e.onHover,o=e.title,a=o===void 0?t:o,c=e.children,d=e.focus,l=e.focusStyle,u=l===void 0?{}:l,h=t==="transparent",g=je({default:{swatch:Db({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},i,d?u:{})}}),m=function(x){return s(t,x)},p=function(x){return x.keyCode===Rte&&s(t,x)},v=function(x){return f(t,x)},y={};return f&&(y.onMouseOver=v),E.createElement("div",Db({style:g.swatch,onClick:m,title:a,tabIndex:0,onKeyDown:p},y),c,h&&E.createElement(qo,{borderRadius:g.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const ea=Lte(Dte);var Ite=function(e){var t=e.direction,i=je({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return E.createElement("div",{style:i.picker})},kte=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},A2=function(e){var t=e.rgb,i=e.hsl,r=e.width,s=e.height,f=e.onChange,o=e.direction,a=e.style,c=e.renderers,d=e.pointer,l=e.className,u=l===void 0?"":l,h=je({default:{picker:{position:"relative",width:r,height:s},alpha:{radius:"2px",style:a}}});return E.createElement("div",{style:h.picker,className:"alpha-picker "+u},E.createElement(m0,kte({},h.alpha,{rgb:t,hsl:i,pointer:d,renderers:c,onChange:f,direction:o})))};A2.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Ite};Pn(A2);function O2(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var Fte="__lodash_hash_undefined__";function Nte(n){return this.__data__.set(n,Fte),this}function Bte(n){return this.__data__.has(n)}function af(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new vr;++e<t;)this.add(n[e])}af.prototype.add=af.prototype.push=Nte;af.prototype.has=Bte;function zte(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function jte(n,e){return n.has(e)}var Ute=1,$te=2;function P2(n,e,t,i,r,s){var f=t&Ute,o=n.length,a=e.length;if(o!=a&&!(f&&a>o))return!1;var c=s.get(n),d=s.get(e);if(c&&d)return c==e&&d==n;var l=-1,u=!0,h=t&$te?new af:void 0;for(s.set(n,e),s.set(e,n);++l<o;){var g=n[l],m=e[l];if(i)var p=f?i(m,g,l,e,n,s):i(g,m,l,n,e,s);if(p!==void 0){if(p)continue;u=!1;break}if(h){if(!zte(e,function(v,y){if(!jte(h,y)&&(g===v||r(g,v,t,i,s)))return h.push(y)})){u=!1;break}}else if(!(g===m||r(g,m,t,i,s))){u=!1;break}}return s.delete(n),s.delete(e),u}function Hte(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}function Vte(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var Gte=1,Wte=2,Xte="[object Boolean]",Yte="[object Date]",Kte="[object Error]",qte="[object Map]",Zte="[object Number]",Jte="[object RegExp]",Qte="[object Set]",ene="[object String]",tne="[object Symbol]",nne="[object ArrayBuffer]",ine="[object DataView]",Ib=Kr?Kr.prototype:void 0,Up=Ib?Ib.valueOf:void 0;function rne(n,e,t,i,r,s,f){switch(t){case ine:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case nne:return!(n.byteLength!=e.byteLength||!s(new tf(n),new tf(e)));case Xte:case Yte:case Zte:return ru(+n,+e);case Kte:return n.name==e.name&&n.message==e.message;case Jte:case ene:return n==e+"";case qte:var o=Hte;case Qte:var a=i&Gte;if(o||(o=Vte),n.size!=e.size&&!a)return!1;var c=f.get(n);if(c)return c==e;i|=Wte,f.set(n,e);var d=P2(o(n),o(e),i,r,s,f);return f.delete(n),d;case tne:if(Up)return Up.call(n)==Up.call(e)}return!1}function sne(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}function ane(n,e,t){var i=e(n);return Yn(n)?i:sne(i,t(n))}function one(n,e){for(var t=-1,i=n==null?0:n.length,r=0,s=[];++t<i;){var f=n[t];e(f,t,n)&&(s[r++]=f)}return s}function lne(){return[]}var cne=Object.prototype,une=cne.propertyIsEnumerable,kb=Object.getOwnPropertySymbols,hne=kb?function(n){return n==null?[]:(n=Object(n),one(kb(n),function(e){return une.call(n,e)}))}:lne;const fne=hne;function Fb(n){return ane(n,S0,fne)}var dne=1,pne=Object.prototype,gne=pne.hasOwnProperty;function mne(n,e,t,i,r,s){var f=t&dne,o=Fb(n),a=o.length,c=Fb(e),d=c.length;if(a!=d&&!f)return!1;for(var l=a;l--;){var u=o[l];if(!(f?u in e:gne.call(e,u)))return!1}var h=s.get(n),g=s.get(e);if(h&&g)return h==e&&g==n;var m=!0;s.set(n,e),s.set(e,n);for(var p=f;++l<a;){u=o[l];var v=n[u],y=e[u];if(i)var _=f?i(y,v,u,e,n,s):i(v,y,u,n,e,s);if(!(_===void 0?v===y||r(v,y,t,i,s):_)){m=!1;break}p||(p=u=="constructor")}if(m&&!p){var x=n.constructor,b=e.constructor;x!=b&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof b=="function"&&b instanceof b)&&(m=!1)}return s.delete(n),s.delete(e),m}var vne=Qs(Pi,"DataView");const um=vne;var yne=Qs(Pi,"Promise");const hm=yne;var _ne=Qs(Pi,"Set");const fm=_ne;var xne=Qs(Pi,"WeakMap");const dm=xne;var Nb="[object Map]",bne="[object Object]",Bb="[object Promise]",zb="[object Set]",jb="[object WeakMap]",Ub="[object DataView]",wne=Js(um),Sne=Js(Ac),Cne=Js(hm),Tne=Js(fm),Ene=Js(dm),vs=Zs;(um&&vs(new um(new ArrayBuffer(1)))!=Ub||Ac&&vs(new Ac)!=Nb||hm&&vs(hm.resolve())!=Bb||fm&&vs(new fm)!=zb||dm&&vs(new dm)!=jb)&&(vs=function(n){var e=Zs(n),t=e==bne?n.constructor:void 0,i=t?Js(t):"";if(i)switch(i){case wne:return Ub;case Sne:return Nb;case Cne:return Bb;case Tne:return zb;case Ene:return jb}return e});const $b=vs;var Mne=1,Hb="[object Arguments]",Vb="[object Array]",Ju="[object Object]",Ane=Object.prototype,Gb=Ane.hasOwnProperty;function One(n,e,t,i,r,s){var f=Yn(n),o=Yn(e),a=f?Vb:$b(n),c=o?Vb:$b(e);a=a==Hb?Ju:a,c=c==Hb?Ju:c;var d=a==Ju,l=c==Ju,u=a==c;if(u&&rf(n)){if(!rf(e))return!1;f=!0,d=!1}if(u&&!d)return s||(s=new Hi),f||b0(n)?P2(n,e,t,i,r,s):rne(n,e,a,t,i,r,s);if(!(t&Mne)){var h=d&&Gb.call(n,"__wrapped__"),g=l&&Gb.call(e,"__wrapped__");if(h||g){var m=h?n.value():n,p=g?e.value():e;return s||(s=new Hi),r(m,p,t,i,s)}}return u?(s||(s=new Hi),mne(n,e,t,i,r,s)):!1}function T0(n,e,t,i,r){return n===e?!0:n==null||e==null||!qr(n)&&!qr(e)?n!==n&&e!==e:One(n,e,t,i,T0,r)}var Pne=1,Lne=2;function Rne(n,e,t,i){var r=t.length,s=r,f=!i;if(n==null)return!s;for(n=Object(n);r--;){var o=t[r];if(f&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++r<s;){o=t[r];var a=o[0],c=n[a],d=o[1];if(f&&o[2]){if(c===void 0&&!(a in n))return!1}else{var l=new Hi;if(i)var u=i(c,d,a,n,e,l);if(!(u===void 0?T0(d,c,Pne|Lne,i,l):u))return!1}}return!0}function L2(n){return n===n&&!fi(n)}function Dne(n){for(var e=S0(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,L2(r)]}return e}function R2(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function Ine(n){var e=Dne(n);return e.length==1&&e[0][2]?R2(e[0][0],e[0][1]):function(t){return t===n||Rne(t,n,e)}}var kne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fne=/^\w*$/;function E0(n,e){if(Yn(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||nd(n)?!0:Fne.test(n)||!kne.test(n)||e!=null&&n in Object(e)}var Nne="Expected a function";function M0(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Nne);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var f=n.apply(this,i);return t.cache=s.set(r,f)||s,f};return t.cache=new(M0.Cache||vr),t}M0.Cache=vr;var Bne=500;function zne(n){var e=M0(n,function(i){return t.size===Bne&&t.clear(),i}),t=e.cache;return e}var jne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Une=/\\(\\)?/g,$ne=zne(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(jne,function(t,i,r,s){e.push(r?s.replace(Une,"$1"):i||t)}),e});const Hne=$ne;var Vne=1/0,Wb=Kr?Kr.prototype:void 0,Xb=Wb?Wb.toString:void 0;function D2(n){if(typeof n=="string")return n;if(Yn(n))return O2(n,D2)+"";if(nd(n))return Xb?Xb.call(n):"";var e=n+"";return e=="0"&&1/n==-Vne?"-0":e}function Gne(n){return n==null?"":D2(n)}function I2(n,e){return Yn(n)?n:E0(n,e)?[n]:Hne(Gne(n))}var Wne=1/0;function sd(n){if(typeof n=="string"||nd(n))return n;var e=n+"";return e=="0"&&1/n==-Wne?"-0":e}function k2(n,e){e=I2(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[sd(e[t++])];return t&&t==i?n:void 0}function Xne(n,e,t){var i=n==null?void 0:k2(n,e);return i===void 0?t:i}function Yne(n,e){return n!=null&&e in Object(n)}function Kne(n,e,t){e=I2(e,n);for(var i=-1,r=e.length,s=!1;++i<r;){var f=sd(e[i]);if(!(s=n!=null&&t(n,f)))break;n=n[f]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&x0(r)&&w0(f,r)&&(Yn(n)||nf(n)))}function qne(n,e){return n!=null&&Kne(n,e,Yne)}var Zne=1,Jne=2;function Qne(n,e){return E0(n)&&L2(e)?R2(sd(n),e):function(t){var i=Xne(t,n);return i===void 0&&i===e?qne(t,n):T0(e,i,Zne|Jne)}}function eie(n){return function(e){return e==null?void 0:e[n]}}function tie(n){return function(e){return k2(e,n)}}function nie(n){return E0(n)?eie(sd(n)):tie(n)}function iie(n){return typeof n=="function"?n:n==null?td:typeof n=="object"?Yn(n)?Qne(n[0],n[1]):Ine(n):nie(n)}function rie(n,e){var t=-1,i=Jo(n)?Array(n.length):[];return T2(n,function(r,s,f){i[++t]=e(r,s,f)}),i}function ta(n,e){var t=Yn(n)?O2:rie;return t(n,iie(e))}var sie=function(e){var t=e.colors,i=e.onClick,r=e.onSwatchHover,s=je({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return E.createElement("div",{style:s.swatches},ta(t,function(f){return E.createElement(ea,{key:f,color:f,style:s.swatch,onClick:i,onHover:r,focusStyle:{boxShadow:"0 0 4px "+f}})}),E.createElement("div",{style:s.clear}))},A0=function(e){var t=e.onChange,i=e.onSwatchHover,r=e.hex,s=e.colors,f=e.width,o=e.triangle,a=e.styles,c=a===void 0?{}:a,d=e.className,l=d===void 0?"":d,u=r==="transparent",h=function(p,v){ts(p)&&t({hex:p,source:"hex"},v)},g=je(On({default:{card:{width:f,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:C0(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":o==="hide"});return E.createElement("div",{style:g.card,className:"block-picker "+l},E.createElement("div",{style:g.triangle}),E.createElement("div",{style:g.head},u&&E.createElement(qo,{borderRadius:"6px 6px 0 0"}),E.createElement("div",{style:g.label},r)),E.createElement("div",{style:g.body},E.createElement(sie,{colors:s,onClick:h,onSwatchHover:i}),E.createElement(et,{style:{input:g.input},value:r,onChange:h})))};A0.propTypes={width:C.oneOfType([C.string,C.number]),colors:C.arrayOf(C.string),triangle:C.oneOf(["top","hide"]),styles:C.object};A0.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Pn(A0);var ba={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},wa={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Sa={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Ca={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Ta={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Ea={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Ma={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Aa={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},Oa={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Nl={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Pa={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},La={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Ra={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},Da={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Ia={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ka={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Fa={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},Na={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},F2=function(e){var t=e.color,i=e.onClick,r=e.onSwatchHover,s=e.hover,f=e.active,o=e.circleSize,a=e.circleSpacing,c=je({default:{swatch:{width:o,height:o,marginRight:a,marginBottom:a,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:f});return E.createElement("div",{style:c.swatch},E.createElement(ea,{style:c.Swatch,color:t,onClick:i,onHover:r,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};F2.defaultProps={circleSize:28,circleSpacing:14};const aie=g0(F2);var O0=function(e){var t=e.width,i=e.onChange,r=e.onSwatchHover,s=e.colors,f=e.hex,o=e.circleSize,a=e.styles,c=a===void 0?{}:a,d=e.circleSpacing,l=e.className,u=l===void 0?"":l,h=je(On({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}},c)),g=function(p,v){return i({hex:p,source:"hex"},v)};return E.createElement("div",{style:h.card,className:"circle-picker "+u},ta(s,function(m){return E.createElement(aie,{key:m,color:m,onClick:g,onSwatchHover:r,active:f===m.toLowerCase(),circleSize:o,circleSpacing:d})}))};O0.propTypes={width:C.oneOfType([C.string,C.number]),circleSize:C.number,circleSpacing:C.number,styles:C.object};O0.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[ba[500],wa[500],Sa[500],Ca[500],Ta[500],Ea[500],Ma[500],Aa[500],Oa[500],Nl[500],Pa[500],La[500],Ra[500],Da[500],Ia[500],ka[500],Fa[500],Na[500]],styles:{}};Pn(O0);function Yb(n){return n===void 0}var N2={};Object.defineProperty(N2,"__esModule",{value:!0});var Kb=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},oie=fe,qb=lie(oie);function lie(n){return n&&n.__esModule?n:{default:n}}function cie(n,e){var t={};for(var i in n)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}var Qu=24,uie=N2.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,i=n.width,r=i===void 0?Qu:i,s=n.height,f=s===void 0?Qu:s,o=n.style,a=o===void 0?{}:o,c=cie(n,["fill","width","height","style"]);return qb.default.createElement("svg",Kb({viewBox:"0 0 "+Qu+" "+Qu,style:Kb({fill:t,width:r,height:f},a)},c),qb.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},hie=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function fie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function die(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function pie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var B2=function(n){pie(e,n);function e(t){fie(this,e);var i=die(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.toggleViews=function(){i.state.view==="hex"?i.setState({view:"rgb"}):i.state.view==="rgb"?i.setState({view:"hsl"}):i.state.view==="hsl"&&(i.props.hsl.a===1?i.setState({view:"hex"}):i.setState({view:"rgb"}))},i.handleChange=function(r,s){r.hex?ts(r.hex)&&i.props.onChange({hex:r.hex,source:"hex"},s):r.r||r.g||r.b?i.props.onChange({r:r.r||i.props.rgb.r,g:r.g||i.props.rgb.g,b:r.b||i.props.rgb.b,source:"rgb"},s):r.a?(r.a<0?r.a=0:r.a>1&&(r.a=1),i.props.onChange({h:i.props.hsl.h,s:i.props.hsl.s,l:i.props.hsl.l,a:Math.round(r.a*100)/100,source:"rgb"},s)):(r.h||r.s||r.l)&&(typeof r.s=="string"&&r.s.includes("%")&&(r.s=r.s.replace("%","")),typeof r.l=="string"&&r.l.includes("%")&&(r.l=r.l.replace("%","")),r.s==1?r.s=.01:r.l==1&&(r.l=.01),i.props.onChange({h:r.h||i.props.hsl.h,s:Number(Yb(r.s)?i.props.hsl.s:r.s),l:Number(Yb(r.l)?i.props.hsl.l:r.l),source:"hsl"},s))},i.showHighlight=function(r){r.currentTarget.style.background="#eee"},i.hideHighlight=function(r){r.currentTarget.style.background="transparent"},t.hsl.a!==1&&t.view==="hex"?i.state={view:"rgb"}:i.state={view:t.view},i}return hie(e,[{key:"render",value:function(){var i=this,r=je({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=E.createElement("div",{style:r.fields,className:"flexbox-fix"},E.createElement("div",{style:r.field},E.createElement(et,{style:{input:r.input,label:r.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=E.createElement("div",{style:r.fields,className:"flexbox-fix"},E.createElement("div",{style:r.field},E.createElement(et,{style:{input:r.input,label:r.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),E.createElement("div",{style:r.field},E.createElement(et,{style:{input:r.input,label:r.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),E.createElement("div",{style:r.field},E.createElement(et,{style:{input:r.input,label:r.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),E.createElement("div",{style:r.alpha},E.createElement(et,{style:{input:r.input,label:r.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=E.createElement("div",{style:r.fields,className:"flexbox-fix"},E.createElement("div",{style:r.field},E.createElement(et,{style:{input:r.input,label:r.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),E.createElement("div",{style:r.field},E.createElement(et,{style:{input:r.input,label:r.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),E.createElement("div",{style:r.field},E.createElement(et,{style:{input:r.input,label:r.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),E.createElement("div",{style:r.alpha},E.createElement(et,{style:{input:r.input,label:r.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),E.createElement("div",{style:r.wrap,className:"flexbox-fix"},s,E.createElement("div",{style:r.toggle},E.createElement("div",{style:r.icon,onClick:this.toggleViews,ref:function(o){return i.icon=o}},E.createElement(uie,{style:r.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(i,r){return i.hsl.a!==1&&r.view==="hex"?{view:"rgb"}:null}}]),e}(E.Component);B2.defaultProps={view:"hex"};var Zb=function(){var e=je({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return E.createElement("div",{style:e.picker})},gie=function(){var e=je({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return E.createElement("div",{style:e.picker})},P0=function(e){var t=e.width,i=e.onChange,r=e.disableAlpha,s=e.rgb,f=e.hsl,o=e.hsv,a=e.hex,c=e.renderers,d=e.styles,l=d===void 0?{}:d,u=e.className,h=u===void 0?"":u,g=e.defaultView,m=je(On({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},l),{disableAlpha:r});return E.createElement("div",{style:m.picker,className:"chrome-picker "+h},E.createElement("div",{style:m.saturation},E.createElement(id,{style:m.Saturation,hsl:f,hsv:o,pointer:gie,onChange:i})),E.createElement("div",{style:m.body},E.createElement("div",{style:m.controls,className:"flexbox-fix"},E.createElement("div",{style:m.color},E.createElement("div",{style:m.swatch},E.createElement("div",{style:m.active}),E.createElement(qo,{renderers:c}))),E.createElement("div",{style:m.toggles},E.createElement("div",{style:m.hue},E.createElement(Zo,{style:m.Hue,hsl:f,pointer:Zb,onChange:i})),E.createElement("div",{style:m.alpha},E.createElement(m0,{style:m.Alpha,rgb:s,hsl:f,pointer:Zb,renderers:c,onChange:i})))),E.createElement(B2,{rgb:s,hsl:f,hex:a,view:g,onChange:i,disableAlpha:r})))};P0.propTypes={width:C.oneOfType([C.string,C.number]),disableAlpha:C.bool,styles:C.object,defaultView:C.oneOf(["hex","rgb","hsl"])};P0.defaultProps={width:225,disableAlpha:!1,styles:{}};Pn(P0);var mie=function(e){var t=e.color,i=e.onClick,r=i===void 0?function(){}:i,s=e.onSwatchHover,f=e.active,o=je({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:C0(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:f,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return E.createElement(ea,{style:o.color,color:t,onClick:r,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},E.createElement("div",{style:o.dot}))},vie=function(e){var t=e.hex,i=e.rgb,r=e.onChange,s=je({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),f=function(a,c){a.r||a.g||a.b?r({r:a.r||i.r,g:a.g||i.g,b:a.b||i.b,source:"rgb"},c):r({hex:a.hex,source:"hex"},c)};return E.createElement("div",{style:s.fields,className:"flexbox-fix"},E.createElement("div",{style:s.active}),E.createElement(et,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:f}),E.createElement(et,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:i.r,onChange:f}),E.createElement(et,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:i.g,onChange:f}),E.createElement(et,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:i.b,onChange:f}))},L0=function(e){var t=e.onChange,i=e.onSwatchHover,r=e.colors,s=e.hex,f=e.rgb,o=e.styles,a=o===void 0?{}:o,c=e.className,d=c===void 0?"":c,l=je(On({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},a)),u=function(g,m){g.hex?ts(g.hex)&&t({hex:g.hex,source:"hex"},m):t(g,m)};return E.createElement(su,{style:l.Compact,styles:a},E.createElement("div",{style:l.compact,className:"compact-picker "+d},E.createElement("div",null,ta(r,function(h){return E.createElement(mie,{key:h,color:h,active:h.toLowerCase()===s,onClick:u,onSwatchHover:i})}),E.createElement("div",{style:l.clear})),E.createElement(vie,{hex:s,rgb:f,onChange:u})))};L0.propTypes={colors:C.arrayOf(C.string),styles:C.object};L0.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Pn(L0);var yie=function(e){var t=e.hover,i=e.color,r=e.onClick,s=e.onSwatchHover,f={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=je({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:f}},{hover:t});return E.createElement("div",{style:o.swatch},E.createElement(ea,{color:i,onClick:r,onHover:s,focusStyle:f}))};const _ie=g0(yie);var R0=function(e){var t=e.width,i=e.colors,r=e.onChange,s=e.onSwatchHover,f=e.triangle,o=e.styles,a=o===void 0?{}:o,c=e.className,d=c===void 0?"":c,l=je(On({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},a),{"hide-triangle":f==="hide","top-left-triangle":f==="top-left","top-right-triangle":f==="top-right","bottom-left-triangle":f==="bottom-left","bottom-right-triangle":f==="bottom-right"}),u=function(g,m){return r({hex:g,source:"hex"},m)};return E.createElement("div",{style:l.card,className:"github-picker "+d},E.createElement("div",{style:l.triangleShadow}),E.createElement("div",{style:l.triangle}),ta(i,function(h){return E.createElement(_ie,{color:h,key:h,onClick:u,onSwatchHover:s})}))};R0.propTypes={width:C.oneOfType([C.string,C.number]),colors:C.arrayOf(C.string),triangle:C.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:C.object};R0.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Pn(R0);var xie=function(e){var t=e.direction,i=je({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return E.createElement("div",{style:i.picker})},bie=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},D0=function(e){var t=e.width,i=e.height,r=e.onChange,s=e.hsl,f=e.direction,o=e.pointer,a=e.styles,c=a===void 0?{}:a,d=e.className,l=d===void 0?"":d,u=je(On({default:{picker:{position:"relative",width:t,height:i},hue:{radius:"2px"}}},c)),h=function(m){return r({a:1,h:m.h,l:.5,s:1})};return E.createElement("div",{style:u.picker,className:"hue-picker "+l},E.createElement(Zo,bie({},u.hue,{hsl:s,pointer:o,onChange:h,direction:f})))};D0.propTypes={styles:C.object};D0.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:xie,styles:{}};Pn(D0);var wie=function(e){var t=e.onChange,i=e.hex,r=e.rgb,s=e.styles,f=s===void 0?{}:s,o=e.className,a=o===void 0?"":o,c=je(On({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+i,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},f)),d=function(u,h){u.hex?ts(u.hex)&&t({hex:u.hex,source:"hex"},h):(u.r||u.g||u.b)&&t({r:u.r||r.r,g:u.g||r.g,b:u.b||r.b,source:"rgb"},h)};return E.createElement(su,{styles:f},E.createElement("div",{style:c.material,className:"material-picker "+a},E.createElement(et,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:i,onChange:d}),E.createElement("div",{style:c.split,className:"flexbox-fix"},E.createElement("div",{style:c.third},E.createElement(et,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:d})),E.createElement("div",{style:c.third},E.createElement(et,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:d})),E.createElement("div",{style:c.third},E.createElement(et,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:d})))))};Pn(wie);var Sie=function(e){var t=e.onChange,i=e.rgb,r=e.hsv,s=e.hex,f=je({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(c,d){c["#"]?ts(c["#"])&&t({hex:c["#"],source:"hex"},d):c.r||c.g||c.b?t({r:c.r||i.r,g:c.g||i.g,b:c.b||i.b,source:"rgb"},d):(c.h||c.s||c.v)&&t({h:c.h||r.h,s:c.s||r.s,v:c.v||r.v,source:"hsv"},d)};return E.createElement("div",{style:f.fields},E.createElement(et,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"h",value:Math.round(r.h),onChange:o}),E.createElement(et,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"s",value:Math.round(r.s*100),onChange:o}),E.createElement(et,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"v",value:Math.round(r.v*100),onChange:o}),E.createElement("div",{style:f.divider}),E.createElement(et,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"r",value:i.r,onChange:o}),E.createElement(et,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"g",value:i.g,onChange:o}),E.createElement(et,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"b",value:i.b,onChange:o}),E.createElement("div",{style:f.divider}),E.createElement(et,{style:{wrap:f.HEXwrap,input:f.HEXinput,label:f.HEXlabel},label:"#",value:s.replace("#",""),onChange:o}),E.createElement("div",{style:f.fieldSymbols},E.createElement("div",{style:f.symbol},""),E.createElement("div",{style:f.symbol},"%"),E.createElement("div",{style:f.symbol},"%")))},Cie=function(e){var t=e.hsl,i=je({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return E.createElement("div",{style:i.picker})},Tie=function(){var e=je({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return E.createElement("div",{style:e.pointer},E.createElement("div",{style:e.left},E.createElement("div",{style:e.leftInside})),E.createElement("div",{style:e.right},E.createElement("div",{style:e.rightInside})))},Jb=function(e){var t=e.onClick,i=e.label,r=e.children,s=e.active,f=je({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return E.createElement("div",{style:f.button,onClick:t},i||r)},Eie=function(e){var t=e.rgb,i=e.currentColor,r=je({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:i,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return E.createElement("div",null,E.createElement("div",{style:r.label},"new"),E.createElement("div",{style:r.swatches},E.createElement("div",{style:r.new}),E.createElement("div",{style:r.current})),E.createElement("div",{style:r.label},"current"))},Mie=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function Aie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Oie(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Pie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var I0=function(n){Pie(e,n);function e(t){Aie(this,e);var i=Oie(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.state={currentColor:t.hex},i}return Mie(e,[{key:"render",value:function(){var i=this.props,r=i.styles,s=r===void 0?{}:r,f=i.className,o=f===void 0?"":f,a=je(On({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return E.createElement("div",{style:a.picker,className:"photoshop-picker "+o},E.createElement("div",{style:a.head},this.props.header),E.createElement("div",{style:a.body,className:"flexbox-fix"},E.createElement("div",{style:a.saturation},E.createElement(id,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Cie,onChange:this.props.onChange})),E.createElement("div",{style:a.hue},E.createElement(Zo,{direction:"vertical",hsl:this.props.hsl,pointer:Tie,onChange:this.props.onChange})),E.createElement("div",{style:a.controls},E.createElement("div",{style:a.top,className:"flexbox-fix"},E.createElement("div",{style:a.previews},E.createElement(Eie,{rgb:this.props.rgb,currentColor:this.state.currentColor})),E.createElement("div",{style:a.actions},E.createElement(Jb,{label:"OK",onClick:this.props.onAccept,active:!0}),E.createElement(Jb,{label:"Cancel",onClick:this.props.onCancel}),E.createElement(Sie,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(E.Component);I0.propTypes={header:C.string,styles:C.object};I0.defaultProps={header:"Color Picker",styles:{}};Pn(I0);var Lie=function(e){var t=e.onChange,i=e.rgb,r=e.hsl,s=e.hex,f=e.disableAlpha,o=je({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:f}),a=function(d,l){d.hex?ts(d.hex)&&t({hex:d.hex,source:"hex"},l):d.r||d.g||d.b?t({r:d.r||i.r,g:d.g||i.g,b:d.b||i.b,a:i.a,source:"rgb"},l):d.a&&(d.a<0?d.a=0:d.a>100&&(d.a=100),d.a/=100,t({h:r.h,s:r.s,l:r.l,a:d.a,source:"rgb"},l))};return E.createElement("div",{style:o.fields,className:"flexbox-fix"},E.createElement("div",{style:o.double},E.createElement(et,{style:{input:o.input,label:o.label},label:"hex",value:s.replace("#",""),onChange:a})),E.createElement("div",{style:o.single},E.createElement(et,{style:{input:o.input,label:o.label},label:"r",value:i.r,onChange:a,dragLabel:"true",dragMax:"255"})),E.createElement("div",{style:o.single},E.createElement(et,{style:{input:o.input,label:o.label},label:"g",value:i.g,onChange:a,dragLabel:"true",dragMax:"255"})),E.createElement("div",{style:o.single},E.createElement(et,{style:{input:o.input,label:o.label},label:"b",value:i.b,onChange:a,dragLabel:"true",dragMax:"255"})),E.createElement("div",{style:o.alpha},E.createElement(et,{style:{input:o.input,label:o.label},label:"a",value:Math.round(i.a*100),onChange:a,dragLabel:"true",dragMax:"100"})))},Rie=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},z2=function(e){var t=e.colors,i=e.onClick,r=i===void 0?function(){}:i,s=e.onSwatchHover,f=je({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(c,d){r({hex:c,source:"hex"},d)};return E.createElement("div",{style:f.colors,className:"flexbox-fix"},t.map(function(a){var c=typeof a=="string"?{color:a}:a,d=""+c.color+(c.title||"");return E.createElement("div",{key:d,style:f.swatchWrap},E.createElement(ea,Rie({},c,{style:f.swatch,onClick:o,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+c.color}})))}))};z2.propTypes={colors:C.arrayOf(C.oneOfType([C.string,C.shape({color:C.string,title:C.string})])).isRequired};var Die=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},k0=function(e){var t=e.width,i=e.rgb,r=e.hex,s=e.hsv,f=e.hsl,o=e.onChange,a=e.onSwatchHover,c=e.disableAlpha,d=e.presetColors,l=e.renderers,u=e.styles,h=u===void 0?{}:u,g=e.className,m=g===void 0?"":g,p=je(On({default:Die({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+i.r+","+i.g+","+i.b+","+i.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},h),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},h),{disableAlpha:c});return E.createElement("div",{style:p.picker,className:"sketch-picker "+m},E.createElement("div",{style:p.saturation},E.createElement(id,{style:p.Saturation,hsl:f,hsv:s,onChange:o})),E.createElement("div",{style:p.controls,className:"flexbox-fix"},E.createElement("div",{style:p.sliders},E.createElement("div",{style:p.hue},E.createElement(Zo,{style:p.Hue,hsl:f,onChange:o})),E.createElement("div",{style:p.alpha},E.createElement(m0,{style:p.Alpha,rgb:i,hsl:f,renderers:l,onChange:o}))),E.createElement("div",{style:p.color},E.createElement(qo,null),E.createElement("div",{style:p.activeColor}))),E.createElement(Lie,{rgb:i,hsl:f,hex:r,onChange:o,disableAlpha:c}),E.createElement(z2,{colors:d,onClick:o,onSwatchHover:a}))};k0.propTypes={disableAlpha:C.bool,width:C.oneOfType([C.string,C.number]),styles:C.object};k0.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Iie=Pn(k0);var Ml=function(e){var t=e.hsl,i=e.offset,r=e.onClick,s=r===void 0?function(){}:r,f=e.active,o=e.first,a=e.last,c=je({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+i*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:f,first:o,last:a}),d=function(u){return s({h:t.h,s:.5,l:i,source:"hsl"},u)};return E.createElement("div",{style:c.swatch,onClick:d})},kie=function(e){var t=e.onClick,i=e.hsl,r=je({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return E.createElement("div",{style:r.swatches},E.createElement("div",{style:r.swatch},E.createElement(Ml,{hsl:i,offset:".80",active:Math.abs(i.l-.8)<s&&Math.abs(i.s-.5)<s,onClick:t,first:!0})),E.createElement("div",{style:r.swatch},E.createElement(Ml,{hsl:i,offset:".65",active:Math.abs(i.l-.65)<s&&Math.abs(i.s-.5)<s,onClick:t})),E.createElement("div",{style:r.swatch},E.createElement(Ml,{hsl:i,offset:".50",active:Math.abs(i.l-.5)<s&&Math.abs(i.s-.5)<s,onClick:t})),E.createElement("div",{style:r.swatch},E.createElement(Ml,{hsl:i,offset:".35",active:Math.abs(i.l-.35)<s&&Math.abs(i.s-.5)<s,onClick:t})),E.createElement("div",{style:r.swatch},E.createElement(Ml,{hsl:i,offset:".20",active:Math.abs(i.l-.2)<s&&Math.abs(i.s-.5)<s,onClick:t,last:!0})),E.createElement("div",{style:r.clear}))},Fie=function(){var e=je({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return E.createElement("div",{style:e.picker})},F0=function(e){var t=e.hsl,i=e.onChange,r=e.pointer,s=e.styles,f=s===void 0?{}:s,o=e.className,a=o===void 0?"":o,c=je(On({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},f));return E.createElement("div",{style:c.wrap||{},className:"slider-picker "+a},E.createElement("div",{style:c.hue},E.createElement(Zo,{style:c.Hue,hsl:t,pointer:r,onChange:i})),E.createElement("div",{style:c.swatches},E.createElement(kie,{hsl:t,onClick:i})))};F0.propTypes={styles:C.object};F0.defaultProps={pointer:Fie,styles:{}};Pn(F0);var j2={};Object.defineProperty(j2,"__esModule",{value:!0});var Qb=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Nie=fe,ew=Bie(Nie);function Bie(n){return n&&n.__esModule?n:{default:n}}function zie(n,e){var t={};for(var i in n)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}var eh=24,jie=j2.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,i=n.width,r=i===void 0?eh:i,s=n.height,f=s===void 0?eh:s,o=n.style,a=o===void 0?{}:o,c=zie(n,["fill","width","height","style"]);return ew.default.createElement("svg",Qb({viewBox:"0 0 "+eh+" "+eh,style:Qb({fill:t,width:r,height:f},a)},c),ew.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Uie=function(e){var t=e.color,i=e.onClick,r=i===void 0?function(){}:i,s=e.onSwatchHover,f=e.first,o=e.last,a=e.active,c=je({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:C0(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:f,last:o,active:a,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return E.createElement(ea,{color:t,style:c.color,onClick:r,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},E.createElement("div",{style:c.check},E.createElement(jie,null)))},$ie=function(e){var t=e.onClick,i=e.onSwatchHover,r=e.group,s=e.active,f=je({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return E.createElement("div",{style:f.group},ta(r,function(o,a){return E.createElement(Uie,{key:o,color:o,active:o.toLowerCase()===s,first:a===0,last:a===r.length-1,onClick:t,onSwatchHover:i})}))},N0=function(e){var t=e.width,i=e.height,r=e.onChange,s=e.onSwatchHover,f=e.colors,o=e.hex,a=e.styles,c=a===void 0?{}:a,d=e.className,l=d===void 0?"":d,u=je(On({default:{picker:{width:t,height:i},overflow:{height:i,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),h=function(m,p){return r({hex:m,source:"hex"},p)};return E.createElement("div",{style:u.picker,className:"swatches-picker "+l},E.createElement(su,null,E.createElement("div",{style:u.overflow},E.createElement("div",{style:u.body},ta(f,function(g){return E.createElement($ie,{key:g.toString(),group:g,active:o,onClick:h,onSwatchHover:s})}),E.createElement("div",{style:u.clear})))))};N0.propTypes={width:C.oneOfType([C.string,C.number]),height:C.oneOfType([C.string,C.number]),colors:C.arrayOf(C.arrayOf(C.string)),styles:C.object};N0.defaultProps={width:320,height:240,colors:[[ba[900],ba[700],ba[500],ba[300],ba[100]],[wa[900],wa[700],wa[500],wa[300],wa[100]],[Sa[900],Sa[700],Sa[500],Sa[300],Sa[100]],[Ca[900],Ca[700],Ca[500],Ca[300],Ca[100]],[Ta[900],Ta[700],Ta[500],Ta[300],Ta[100]],[Ea[900],Ea[700],Ea[500],Ea[300],Ea[100]],[Ma[900],Ma[700],Ma[500],Ma[300],Ma[100]],[Aa[900],Aa[700],Aa[500],Aa[300],Aa[100]],[Oa[900],Oa[700],Oa[500],Oa[300],Oa[100]],["#194D33",Nl[700],Nl[500],Nl[300],Nl[100]],[Pa[900],Pa[700],Pa[500],Pa[300],Pa[100]],[La[900],La[700],La[500],La[300],La[100]],[Ra[900],Ra[700],Ra[500],Ra[300],Ra[100]],[Da[900],Da[700],Da[500],Da[300],Da[100]],[Ia[900],Ia[700],Ia[500],Ia[300],Ia[100]],[ka[900],ka[700],ka[500],ka[300],ka[100]],[Fa[900],Fa[700],Fa[500],Fa[300],Fa[100]],[Na[900],Na[700],Na[500],Na[300],Na[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Pn(N0);var B0=function(e){var t=e.onChange,i=e.onSwatchHover,r=e.hex,s=e.colors,f=e.width,o=e.triangle,a=e.styles,c=a===void 0?{}:a,d=e.className,l=d===void 0?"":d,u=je(On({default:{card:{width:f,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right"}),h=function(m,p){ts(m)&&t({hex:m,source:"hex"},p)};return E.createElement("div",{style:u.card,className:"twitter-picker "+l},E.createElement("div",{style:u.triangleShadow}),E.createElement("div",{style:u.triangle}),E.createElement("div",{style:u.body},ta(s,function(g,m){return E.createElement(ea,{key:m,color:g,hex:g,style:u.swatch,onClick:h,onHover:i,focusStyle:{boxShadow:"0 0 4px "+g}})}),E.createElement("div",{style:u.hash},"#"),E.createElement(et,{label:null,style:{input:u.input},value:r.replace("#",""),onChange:h}),E.createElement("div",{style:u.clear})))};B0.propTypes={width:C.oneOfType([C.string,C.number]),triangle:C.oneOf(["hide","top-left","top-right"]),colors:C.arrayOf(C.string),styles:C.object};B0.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Pn(B0);var z0=function(e){var t=je({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return E.createElement("div",{style:t.picker})};z0.propTypes={hsl:C.shape({h:C.number,s:C.number,l:C.number,a:C.number})};z0.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var j0=function(e){var t=je({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return E.createElement("div",{style:t.picker})};j0.propTypes={hsl:C.shape({h:C.number,s:C.number,l:C.number,a:C.number})};j0.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Hie=function(e){var t=e.onChange,i=e.rgb,r=e.hsl,s=e.hex,f=e.hsv,o=function(h,g){if(h.hex)ts(h.hex)&&t({hex:h.hex,source:"hex"},g);else if(h.rgb){var m=h.rgb.split(",");jp(h.rgb,"rgb")&&t({r:m[0],g:m[1],b:m[2],a:1,source:"rgb"},g)}else if(h.hsv){var p=h.hsv.split(",");jp(h.hsv,"hsv")&&(p[2]=p[2].replace("%",""),p[1]=p[1].replace("%",""),p[0]=p[0].replace("",""),p[1]==1?p[1]=.01:p[2]==1&&(p[2]=.01),t({h:Number(p[0]),s:Number(p[1]),v:Number(p[2]),source:"hsv"},g))}else if(h.hsl){var v=h.hsl.split(",");jp(h.hsl,"hsl")&&(v[2]=v[2].replace("%",""),v[1]=v[1].replace("%",""),v[0]=v[0].replace("",""),l[1]==1?l[1]=.01:l[2]==1&&(l[2]=.01),t({h:Number(v[0]),s:Number(v[1]),v:Number(v[2]),source:"hsl"},g))}},a=je({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=i.r+", "+i.g+", "+i.b,d=Math.round(r.h)+", "+Math.round(r.s*100)+"%, "+Math.round(r.l*100)+"%",l=Math.round(f.h)+", "+Math.round(f.s*100)+"%, "+Math.round(f.v*100)+"%";return E.createElement("div",{style:a.wrap,className:"flexbox-fix"},E.createElement("div",{style:a.fields},E.createElement("div",{style:a.double},E.createElement(et,{style:{input:a.input,label:a.label},label:"hex",value:s,onChange:o})),E.createElement("div",{style:a.column},E.createElement("div",{style:a.single},E.createElement(et,{style:{input:a.input2,label:a.label2},label:"rgb",value:c,onChange:o})),E.createElement("div",{style:a.single},E.createElement(et,{style:{input:a.input2,label:a.label2},label:"hsv",value:l,onChange:o})),E.createElement("div",{style:a.single},E.createElement(et,{style:{input:a.input2,label:a.label2},label:"hsl",value:d,onChange:o})))))},U0=function(e){var t=e.width,i=e.onChange,r=e.rgb,s=e.hsl,f=e.hsv,o=e.hex,a=e.header,c=e.styles,d=c===void 0?{}:c,l=e.className,u=l===void 0?"":l,h=je(On({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},d));return E.createElement("div",{style:h.picker,className:"google-picker "+u},E.createElement("div",{style:h.head},a),E.createElement("div",{style:h.swatch}),E.createElement("div",{style:h.saturation},E.createElement(id,{hsl:s,hsv:f,pointer:z0,onChange:i})),E.createElement("div",{style:h.body},E.createElement("div",{style:h.controls,className:"flexbox-fix"},E.createElement("div",{style:h.hue},E.createElement(Zo,{style:h.Hue,hsl:s,radius:"4px",pointer:j0,onChange:i}))),E.createElement(Hie,{rgb:r,hsl:s,hex:o,hsv:f,onChange:i})))};U0.propTypes={width:C.oneOfType([C.string,C.number]),styles:C.object,header:C.string};U0.defaultProps={width:652,styles:{},header:"Color picker"};Pn(U0);function Vie(){const{store:n}=Jc(),{currentOperator:e}=n.common,[t,i]=fe.useState("#ffffff");function r(s){e==null||e.setBackgroundColor(s.hex),i(s.hex)}return be.jsx("div",{className:mq.backgroundTool,children:be.jsx(Iie,{color:t,onChange:r})})}function Gie({className:n}){const[e,t]=fe.useState();function i(f){t(e===f?null:f)}const r=[{title:"",key:"image",icon:be.jsx(sj,{})},{title:"",key:"background",icon:be.jsx(Qz,{})},{title:"",key:"text",icon:be.jsx(Oj,{})},{title:"",key:"paint",icon:be.jsx(Vz,{})}];function s(){switch(e){case"image":return be.jsx("div",{className:"tools-bar-popover",children:be.jsx(hq,{})});case"text":return be.jsx("div",{className:"tools-bar-popover",children:""});case"background":return be.jsx("div",{className:"tools-bar-popover",children:be.jsx(Vie,{})});case"paint":return be.jsx(gq,{});default:return be.jsx(be.Fragment,{})}}return be.jsxs("div",{className:`${n} tools-bar-wrapper`,children:[be.jsxs("div",{className:"tools-bar-content",children:[s(),be.jsx("div",{className:"tools-bar",children:r.map(({title:f,key:o,icon:a})=>be.jsxs("div",{onClick:()=>i(o),className:`tool-item ${e===o?"tool-item_active":""}`,children:[a,be.jsx("span",{className:"tool-item_title",children:f})]},o))})]}),be.jsxs("div",{className:"zoom-in-out-bar",children:[be.jsx(Kh,{size:"small",icon:be.jsx(pj,{}),"aria-label":""}),be.jsx(hU,{size:"small",style:{margin:"0 10px",width:"60px"}}),be.jsx(Kh,{size:"small",icon:be.jsx(xj,{}),"aria-label":""})]})]})}function Wie({className:n}){const{store:e,actions:t}=Jc(),{meshTextures:i}=e.common,{setCurrentOperator:r,setCurrentElements:s}=t.common;function f(o){const a=i[Number(o)][0].getCanvasOperator();r(a),s(a.elements)}return be.jsxs("div",{className:n,children:[be.jsxs(TT,{type:"line",className:"canvas-operator",onTabClick:f,children:[be.jsx(_c,{tab:be.jsx("div",{className:"tab-card",children:""}),itemKey:"0",children:be.jsx("div",{id:"tooyea-canvas",className:"canvas-panel"})}),be.jsx(_c,{tab:be.jsx("div",{className:"tab-card",children:""}),itemKey:"1",children:be.jsx("div",{id:"tooyea-canvas2",className:"canvas-panel"})})]}),be.jsx(Gie,{className:"canvas-tools"})]})}function Xie({modelScene:n,className:e}){return be.jsx("div",{className:`tooyea-right-panel ${e}`,children:n})}class Yie extends iq{constructor(){super(...arguments);Be(this,"format","obj");Be(this,"loadHandle",t=>{console.log(t,this.state)})}}const U2=new uK(s2).addLoaders([Yie]);async function Kie(n,e){return await Promise.all(n.map((i,r)=>U2.load(i,[[e[r]]])))}const qie=async()=>{const{store:n,actions:e}=Jc(),{setMeshTextures:t,setCurrentOperator:i,setCurrentElements:r}=e.common;fe.useEffect(()=>{(async()=>{U2.mount("webgl",{width:400,height:400});const f=(await Kie([{format:"obj",fileSrc:"football/model2.obj",textureImageArrays:[[{overlayImageSrc:"football/top.png",backgroundColor:"#ff6a1f"}]],position:[0,-80,-30]},{format:"obj",fileSrc:"kuzi/model.obj",textureImageArrays:[[{overlayImageSrc:"kuzi/top.png",backgroundColor:"#ff6a1f"}]],position:[0,-100,-30]}],["tooyea-canvas","tooyea-canvas2"])).map(a=>a.meshTextures),o=f[0][0].getCanvasOperator();t(f),i(o),r(o.elements),d$.success({content:"welcome"})})()},[])};function Zie(){return qie(),be.jsxs(be.Fragment,{children:[be.jsx(SA,{className:"Nav"}),be.jsxs("div",{className:"App",children:[be.jsx(cq,{className:"SideBar"}),be.jsx(Wie,{className:"CanvasOperator"}),be.jsx(Xie,{className:"right-panel",modelScene:be.jsx("canvas",{id:"webgl",className:"three-container"})})]})]})}$p.createRoot(document.getElementById("root")).render(be.jsx(aq,{children:be.jsx(Zie,{})}))});export default Jie();
